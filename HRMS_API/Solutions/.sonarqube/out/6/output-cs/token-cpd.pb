¶
yF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\AmbiguousMomentException.cs
	namespace 	
Phoenix
 
. 
CrossCutting 
. 

TimePeriod )
{ 
public 
class $
AmbiguousMomentException &
:' (
	Exception) 2
{ 
public $
AmbiguousMomentException	 !
(! "
DateTime" *
moment+ 1
)1 2
{ 
this		 
.		 
moment		 
=		 
moment		 
;		 
}

 
public $
AmbiguousMomentException	 !
(! "
DateTime" *
moment+ 1
,1 2
string3 9
message: A
)A B
:C D
base 
( 
message 
) 
{ 
this 
. 
moment 
= 
moment 
; 
} 
public $
AmbiguousMomentException	 !
(! "
DateTime" *
moment+ 1
,1 2
	Exception3 <
cause= B
)B C
:D E
base 
( 
cause 
. 
Message 
, 
cause 
) 
{ 
this 
. 
moment 
= 
moment 
; 
} 
public $
AmbiguousMomentException	 !
(! "
DateTime" *
moment+ 1
,1 2
string3 9
message: A
,A B
	ExceptionC L
causeM R
)R S
:T U
base 
( 
message 
, 
cause 
) 
{ 
this 
. 
moment 
= 
moment 
; 
} 
public 
DateTime	 
Moment 
{ 
get 
{ 
return	 
moment 
; 
} 
} 
private 	
readonly
 
DateTime 
moment "
;" #
}   
}!! À=
vF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\BroadcastCalendarTool.cs
	namespace 	
Phoenix
 
. 
CrossCutting 
. 

TimePeriod )
{ 
public 

static 
class !
BroadcastCalendarTool -
{ 
public 
static 
int 
GetWeeksOfYear (
(( )
int) ,
year- 1
)1 2
{		 	
DateTime

 
	yearStart

 
=

  
GetStartOfYear

! /
(

/ 0
year

0 4
)

4 5
;

5 6
DateTime 
nextYearStart "
=# $
GetStartOfYear% 3
(3 4
year4 8
+9 :
$num; <
)< =
;= >
return 
( 
int 
) 
nextYearStart %
.% &
Subtract& .
(. /
	yearStart/ 8
)8 9
.9 :
	TotalDays: C
/D E
TimeSpecF N
.N O
DaysPerWeekO Z
;Z [
} 	
public 
static 
void 
	GetWeekOf $
($ %
DateTime% -
moment. 4
,4 5
out6 9
int: =
year> B
,B C
outD G
intH K
weekL P
)P Q
{ 	
	GetYearOf 
( 
moment 
, 
out !
year" &
)& '
;' (
DateTime 
firstWeekStart #
=$ %
GetStartOfWeek& 4
(4 5
year5 9
,9 :
$num; <
)< =
;= >
week 
= 
$num 
+ 
( 
int 
) 
( 
moment #
.# $
Subtract$ ,
(, -
firstWeekStart- ;
); <
.< =
	TotalDays= F
/G H
TimeSpecI Q
.Q R
DaysPerWeekR ]
)] ^
;^ _
} 	
public 
static 
DateTime 
GetStartOfWeek -
(- .
int. 1
year2 6
,6 7
int8 ;
week< @
)@ A
{ 	
DateTime 
	yearStart 
=  
GetStartOfYear! /
(/ 0
year0 4
)4 5
;5 6
return 
	yearStart 
. 
AddDays $
($ %
(% &
week& *
-+ ,
$num- .
). /
*0 1
TimeSpec2 :
.: ;
DaysPerWeek; F
)F G
;G H
} 	
public 
static 
void 
	AddMonths $
($ %
int% (
	startYear) 2
,2 3
	YearMonth4 =

startMonth> H
,H I
intJ M
	addMonthsN W
,W X
outY \
int] `

targetYeara k
,k l
outm p
	YearMonthq z
targetMonth	{ Ü
)
Ü á
{ 	
int 
totalMonths 
= 
	startYear '
*( )
TimeSpec* 2
.2 3
MonthsPerYear3 @
+A B
(C D
(D E
intE H
)H I

startMonthI S
-T U
$numV W
)W X
+Y Z
	addMonths[ d
;d e

targetYear   
=   
totalMonths   $
/  % &
TimeSpec  ' /
.  / 0
MonthsPerYear  0 =
;  = >
targetMonth!! 
=!! 
(!! 
	YearMonth!! $
)!!$ %
(!!% &
totalMonths!!& 1
%!!2 3
TimeSpec!!4 <
.!!< =
MonthsPerYear!!= J
+!!K L
$num!!M N
)!!N O
;!!O P
}"" 	
public## 
static## 
void## 

GetMonthOf## %
(##% &
DateTime##& .
moment##/ 5
,##5 6
out##7 :
int##; >
year##? C
,##C D
out##E H
	YearMonth##I R
month##S X
)##X Y
{$$ 	
int%% 
currentYear%% 
=%% 
moment%% $
.%%$ %
Year%%% )
;%%) *
	YearMonth&& 
currentMonth&& "
=&&# $
	YearMonth&&% .
.&&. /
January&&/ 6
;&&6 7
do'' 
{(( 
	AddMonths)) 
()) 
currentYear)) %
,))% &
currentMonth))' 3
,))3 4
$num))5 6
,))6 7
out))8 ;
currentYear))< G
,))G H
out))I L
currentMonth))M Y
)))Y Z
;))Z [
if** 
(** 
GetStartOfMonth** #
(**# $
currentYear**$ /
,**/ 0
currentMonth**1 =
)**= >
>**? @
moment**A G
)**G H
{++ 
	AddMonths,, 
(,, 
currentYear,, )
,,,) *
currentMonth,,+ 7
,,,7 8
-,,9 :
$num,,: ;
,,,; <
out,,= @
year,,A E
,,,E F
out,,G J
month,,K P
),,P Q
;,,Q R
break-- 
;-- 
}.. 
}// 
while// 
(// 
true// 
)// 
;// 
}00 	
public11 
static11 
DateTime11 
GetStartOfMonth11 .
(11. /
int11/ 2
year113 7
,117 8
	YearMonth119 B
month11C H
)11H I
{22 	
DateTime33 
start33 
=33 
new33  
DateTime33! )
(33) *
year33* .
,33. /
(330 1
int331 4
)334 5
month335 :
,33: ;
$num33< =
)33= >
;33> ?
start44 
=44 
start44 
.44 
	DayOfWeek44 #
==44$ &
	DayOfWeek44' 0
.440 1
Sunday441 7
?448 9
start55 
.55 
AddDays55 
(55 
-55 
$num55  
)55  !
:55" #
start66 
.66 
AddDays66 
(66 
-66 
(66  
(66  !
int66! $
)66$ %
start66% *
.66* +
	DayOfWeek66+ 4
-665 6
$num667 8
)668 9
)669 :
;66: ;
return88 
start88 
;88 
}99 	
public== 
static== 
void== 
	GetYearOf== $
(==$ %
DateTime==% -
moment==. 4
,==4 5
out==6 9
int==: =
year==> B
)==B C
{>> 	
year?? 
=?? 
moment?? 
.?? 
Year?? 
;?? 
whileAA 
(AA 
GetStartOfYearAA !
(AA! "
yearAA" &
+AA' (
$numAA) *
)AA* +
<=AA, .
momentAA/ 5
)AA5 6
{BB 
yearCC 
++CC 
;CC 
}DD 
}EE 	
publicFF 
staticFF 
DateTimeFF 
GetStartOfYearFF -
(FF- .
intFF. 1
yearFF2 6
)FF6 7
{GG 	
returnHH 
GetStartOfMonthHH "
(HH" #
yearHH# '
,HH' (
	YearMonthHH) 2
.HH2 3
JanuaryHH3 :
)HH: ;
;HH; <
}II 	
}KK 
}LL ÎN
oF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\BroadcastMonth.cs
	namespace 	
Phoenix
 
. 
CrossCutting 
. 

TimePeriod )
{ 
public 

sealed 
class 
BroadcastMonth &
:' (
CalendarTimeRange) :
{ 
public 
BroadcastMonth 
( 
) 
:  !
this 
( 
new 
TimeCalendar !
(! "
)" #
)# $
{ 	
} 	
public		 
BroadcastMonth		 
(		 
ITimeCalendar		 +
calendar		, 4
)		4 5
:		6 7
this

 
(

 

ClockProxy

 
.

 
Clock

 !
.

! "
Now

" %
,

% &
calendar

' /
)

/ 0
{ 	
} 	
public 
BroadcastMonth 
( 
DateTime &
moment' -
)- .
:/ 0
this 
( 
moment 
, 
new 
TimeCalendar )
() *
)* +
)+ ,
{ 	
} 	
public 
BroadcastMonth 
( 
DateTime &
moment' -
,- .
ITimeCalendar/ <
calendar= E
)E F
:G H
this 
( 
	GetYearOf 
( 
moment !
)! "
," #

GetMonthOf$ .
(. /
moment/ 5
)5 6
,6 7
calendar8 @
)@ A
{ 	
} 	
public 
BroadcastMonth 
( 
int !
year" &
,& '
	YearMonth( 1
month2 7
)7 8
:9 :
this 
( 
year 
, 
month 
, 
new !
TimeCalendar" .
(. /
)/ 0
)0 1
{ 	
} 	
public 
BroadcastMonth 
( 
int !
year" &
,& '
	YearMonth( 1
month2 7
,7 8
ITimeCalendar9 F
calendarG O
)O P
:Q R
base 
( 
GetPeriodOf 
( 
year !
,! "
month# (
)( )
,) *
calendar+ 3
)3 4
{ 	
this 
. 
year 
= 
year 
; 
this 
. 
month 
= 
month 
; 
} 	
public 
	YearMonth 
Month 
{   	
get!! 
{!! 
return!! 
month!! 
;!! 
}!!  !
}"" 	
public## 
int## 
Year## 
{$$ 	
get%% 
{%% 
return%% 
year%% 
;%% 
}%%  
}&& 	
public'' !
ITimePeriodCollection'' $
GetDays''% ,
('', -
)''- .
{(( 	 
TimePeriodCollection))  
days))! %
=))& '
new))( + 
TimePeriodCollection)), @
())@ A
)))A B
;))B C
DateTime** 
moment** 
=** 
Start** #
.**# $
Date**$ (
;**( )
while++ 
(++ 
moment++ 
<=++ 
End++  
.++  !
Date++! %
)++% &
{,, 
days-- 
.-- 
Add-- 
(-- 
new-- 
Day--  
(--  !
moment--! '
.--' (
Date--( ,
,--, -
Calendar--. 6
)--6 7
)--7 8
;--8 9
moment.. 
=.. 
moment.. 
...  
AddDays..  '
(..' (
$num..( )
)..) *
;..* +
}// 
return00 
days00 
;00 
}11 	
public44 !
ITimePeriodCollection44 $
GetWeeks44% -
(44- .
)44. /
{55 	 
TimePeriodCollection66  
weeks66! &
=66' (
new66) , 
TimePeriodCollection66- A
(66A B
)66B C
;66C D
DateTime77 
moment77 
=77 
Start77 #
.77# $
Date77$ (
;77( )
while88 
(88 
moment88 
<88 
End88 
.88  
Date88  $
)88$ %
{99 
weeks:: 
.:: 
Add:: 
(:: 
new:: 
BroadcastWeek:: +
(::+ ,
moment::, 2
.::2 3
Date::3 7
,::7 8
Calendar::9 A
)::A B
)::B C
;::C D
moment;; 
=;; 
moment;; 
.;;  
AddDays;;  '
(;;' (
TimeSpec;;( 0
.;;0 1
DaysPerWeek;;1 <
);;< =
;;;= >
}<< 
return== 
weeks== 
;== 
}>> 	
publicAA 
BroadcastMonthAA 
GetPreviousMonthAA .
(AA. /
)AA/ 0
{BB 	
returnCC 
	AddMonthsCC 
(CC 
-CC 
$numCC 
)CC  
;CC  !
}DD 	
publicGG 
BroadcastMonthGG 
GetNextMonthGG *
(GG* +
)GG+ ,
{HH 	
returnII 
	AddMonthsII 
(II 
$numII 
)II 
;II  
}JJ 	
publicMM 
BroadcastMonthMM 
	AddMonthsMM '
(MM' (
intMM( +
monthsMM, 2
)MM2 3
{NN 	
intOO 

targetYearOO 
;OO 
	YearMonthPP 
targetMonthPP !
;PP! "!
BroadcastCalendarToolQQ !
.QQ! "
	AddMonthsQQ" +
(QQ+ ,
YearQQ, 0
,QQ0 1
MonthQQ2 7
,QQ7 8
monthsQQ9 ?
,QQ? @
outQQA D

targetYearQQE O
,QQO P
outQQQ T
targetMonthQQU `
)QQ` a
;QQa b
returnRR 
newRR 
BroadcastMonthRR %
(RR% &

targetYearRR& 0
,RR0 1
targetMonthRR2 =
,RR= >
CalendarRR? G
)RRG H
;RRH I
}SS 	
	protectedVV 
overrideVV 
stringVV !
FormatVV" (
(VV( )
ITimeFormatterVV) 7
	formatterVV8 A
)VVA B
{WW 	
returnXX 
	formatterXX 
.XX 
GetCalendarPeriodXX .
(XX. /
stringXX/ 5
.XX5 6
FormatXX6 <
(XX< =
$strXX= F
,XXF G
YearXXH L
,XXL M
MonthXXN S
)XXS T
,XXT U
	formatterYY 
.YY 
GetShortDateYY &
(YY& '
StartYY' ,
)YY, -
,YY- .
	formatterYY/ 8
.YY8 9
GetShortDateYY9 E
(YYE F
EndYYF I
)YYI J
,YYJ K
DurationYYL T
)YYT U
;YYU V
}ZZ 	
private]] 
static]] 
int]] 
	GetYearOf]] $
(]]$ %
DateTime]]% -
moment]]. 4
)]]4 5
{^^ 	
int__ 
year__ 
;__ !
BroadcastCalendarTool`` !
.``! "
	GetYearOf``" +
(``+ ,
moment``, 2
,``2 3
out``4 7
year``8 <
)``< =
;``= >
returnaa 
yearaa 
;aa 
}bb 	
privateee 
staticee 
	YearMonthee  

GetMonthOfee! +
(ee+ ,
DateTimeee, 4
momentee5 ;
)ee; <
{ff 	
intgg 
yeargg 
;gg 
	YearMonthhh 
monthhh 
;hh !
BroadcastCalendarToolii !
.ii! "

GetMonthOfii" ,
(ii, -
momentii- 3
,ii3 4
outii5 8
yearii9 =
,ii= >
outii? B
monthiiC H
)iiH I
;iiI J
returnjj 
monthjj 
;jj 
}kk 	
privatenn 
staticnn 

ITimeRangenn !
GetPeriodOfnn" -
(nn- .
intnn. 1
yearnn2 6
,nn6 7
	YearMonthnn8 A
monthnnB G
)nnG H
{oo 	
DateTimepp 
startpp 
=pp !
BroadcastCalendarToolpp 2
.pp2 3
GetStartOfMonthpp3 B
(ppB C
yearppC G
,ppG H
monthppI N
)ppN O
;ppO P
ifqq 
(qq 
monthqq 
==qq 
	YearMonthqq "
.qq" #
Decemberqq# +
)qq+ ,
{rr 
yearss 
++ss 
;ss 
monthtt 
=tt 
	YearMonthtt !
.tt! "
Januarytt" )
;tt) *
}uu 
elsevv 
{ww 
monthxx 
++xx 
;xx 
}yy 
DateTimezz 
endzz 
=zz !
BroadcastCalendarToolzz 0
.zz0 1
GetStartOfMonthzz1 @
(zz@ A
yearzzA E
,zzE F
monthzzG L
)zzL M
;zzM N
return{{ 
new{{ 
CalendarTimeRange{{ (
({{( )
start{{) .
,{{. /
end{{0 3
){{3 4
;{{4 5
}|| 	
private
ÄÄ 
readonly
ÄÄ 
int
ÄÄ 
year
ÄÄ !
;
ÄÄ! "
private
ÅÅ 
readonly
ÅÅ 
	YearMonth
ÅÅ "
month
ÅÅ# (
;
ÅÅ( )
}
ÉÉ 
}ÖÖ È>
nF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\BroadcastWeek.cs
	namespace 	
Phoenix
 
. 
CrossCutting 
. 

TimePeriod )
{ 
public 

sealed 
class 
BroadcastWeek %
:& '
CalendarTimeRange( 9
{ 
public 
BroadcastWeek 
( 
) 
:  
this 
( 
new 
TimeCalendar !
(! "
)" #
)# $
{ 	
} 	
public		 
BroadcastWeek		 
(		 
ITimeCalendar		 *
calendar		+ 3
)		3 4
:		5 6
this

 
(

 

ClockProxy

 
.

 
Clock

 !
.

! "
Now

" %
,

% &
calendar

' /
)

/ 0
{ 	
} 	
public 
BroadcastWeek 
( 
DateTime %
moment& ,
), -
:. /
this 
( 
moment 
, 
new 
TimeCalendar )
() *
)* +
)+ ,
{ 	
} 	
public 
BroadcastWeek 
( 
DateTime %
moment& ,
,, -
ITimeCalendar. ;
calendar< D
)D E
:F G
this 
( 
	GetYearOf 
( 
moment !
)! "
," #
	GetWeekOf$ -
(- .
moment. 4
)4 5
,5 6
calendar7 ?
)? @
{ 	
} 	
public 
BroadcastWeek 
( 
int  
year! %
,% &
int' *
week+ /
)/ 0
:1 2
this 
( 
year 
, 
week 
, 
new  
TimeCalendar! -
(- .
). /
)/ 0
{ 	
} 	
public 
BroadcastWeek 
( 
int  
year! %
,% &
int' *
week+ /
,/ 0
ITimeCalendar1 >
calendar? G
)G H
:I J
base 
( 
GetPeriodOf 
( 
year !
,! "
week# '
)' (
,( )
calendar* 2
)2 3
{ 	
this 
. 
year 
= 
year 
; 
this 
. 
week 
= 
week 
; 
} 	
public 
int 
Week 
{   	
get!! 
{!! 
return!! 
week!! 
;!! 
}!!  
}"" 	
public## 
int## 
Year## 
{$$ 	
get%% 
{%% 
return%% 
year%% 
;%% 
}%%  
}&& 	
public'' !
ITimePeriodCollection'' $
GetDays''% ,
('', -
)''- .
{(( 	 
TimePeriodCollection))  
days))! %
=))& '
new))( + 
TimePeriodCollection)), @
())@ A
)))A B
;))B C
DateTime** 
moment** 
=** 
Start** #
.**# $
Date**$ (
;**( )
while++ 
(++ 
moment++ 
<=++ 
End++  
.++  !
Date++! %
)++% &
{,, 
days-- 
.-- 
Add-- 
(-- 
new-- 
Day--  
(--  !
moment--! '
.--' (
Date--( ,
,--, -
Calendar--. 6
)--6 7
)--7 8
;--8 9
moment.. 
=.. 
moment.. 
...  
AddDays..  '
(..' (
$num..( )
)..) *
;..* +
}// 
return00 
days00 
;00 
}11 	
public22 
BroadcastWeek22 
GetPreviousWeek22 ,
(22, -
)22- .
{33 	
return44 
AddWeeks44 
(44 
-44 
$num44 
)44 
;44  
}55 	
public66 
BroadcastWeek66 
GetNextWeek66 (
(66( )
)66) *
{77 	
return88 
AddWeeks88 
(88 
$num88 
)88 
;88 
}99 	
public:: 
BroadcastWeek:: 
AddWeeks:: %
(::% &
int::& )
weeks::* /
)::/ 0
{;; 	
return<< 
new<< 
BroadcastWeek<< $
(<<$ %
Start<<% *
.<<* +
AddDays<<+ 2
(<<2 3
weeks<<3 8
*<<9 :
TimeSpec<<; C
.<<C D
DaysPerWeek<<D O
)<<O P
,<<P Q
Calendar<<R Z
)<<Z [
;<<[ \
}== 	
	protected>> 
override>> 
string>> !
Format>>" (
(>>( )
ITimeFormatter>>) 7
	formatter>>8 A
)>>A B
{?? 	
return@@ 
	formatter@@ 
.@@ 
GetCalendarPeriod@@ .
(@@. /
string@@/ 5
.@@5 6
Format@@6 <
(@@< =
$str@@= F
,@@F G
Year@@H L
,@@L M
Week@@N R
)@@R S
,@@S T
	formatterAA 
.AA 
GetShortDateAA &
(AA& '
StartAA' ,
)AA, -
,AA- .
	formatterAA/ 8
.AA8 9
GetShortDateAA9 E
(AAE F
EndAAF I
)AAI J
,AAJ K
DurationAAL T
)AAT U
;AAU V
}BB 	
privateCC 
staticCC 
intCC 
	GetYearOfCC $
(CC$ %
DateTimeCC% -
momentCC. 4
)CC4 5
{DD 	
intEE 
yearEE 
;EE !
BroadcastCalendarToolFF !
.FF! "
	GetYearOfFF" +
(FF+ ,
momentFF, 2
,FF2 3
outFF4 7
yearFF8 <
)FF< =
;FF= >
returnGG 
yearGG 
;GG 
}HH 	
privateII 
staticII 
intII 
	GetWeekOfII $
(II$ %
DateTimeII% -
momentII. 4
)II4 5
{JJ 	
intKK 
yearKK 
;KK 
intLL 
weekLL 
;LL !
BroadcastCalendarToolMM !
.MM! "
	GetWeekOfMM" +
(MM+ ,
momentMM, 2
,MM2 3
outMM4 7
yearMM8 <
,MM< =
outMM> A
weekMMB F
)MMF G
;MMG H
returnNN 
weekNN 
;NN 
}OO 	
privatePP 
staticPP 

ITimeRangePP !
GetPeriodOfPP" -
(PP- .
intPP. 1
yearPP2 6
,PP6 7
intPP8 ;
weekPP< @
)PP@ A
{QQ 	
DateTimeRR 
startRR 
=RR !
BroadcastCalendarToolRR 2
.RR2 3
GetStartOfWeekRR3 A
(RRA B
yearRRB F
,RRF G
weekRRH L
)RRL M
;RRM N
returnSS 
newSS 
CalendarTimeRangeSS (
(SS( )
startSS) .
,SS. /
startSS0 5
.SS5 6
AddDaysSS6 =
(SS= >
TimeSpecSS> F
.SSF G
DaysPerWeekSSG R
)SSR S
)SSS T
;SST U
}TT 	
privateUU 
readonlyUU 
intUU 
yearUU !
;UU! "
privateVV 
readonlyVV 
intVV 
weekVV !
;VV! "
}XX 
}YY ≥:
nF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\BroadcastYear.cs
	namespace 	
Phoenix
 
. 
CrossCutting 
. 

TimePeriod )
{ 
public 

sealed 
class 
BroadcastYear %
:& '
CalendarTimeRange( 9
{ 
public 
BroadcastYear 
( 
) 
:  
this 
( 
new 
TimeCalendar !
(! "
)" #
)# $
{ 	
} 	
public 
BroadcastYear 
( 
ITimeCalendar *
calendar+ 3
)3 4
:5 6
this 
( 

ClockProxy 
. 
Clock !
.! "
Now" %
,% &
calendar' /
)/ 0
{ 	
} 	
public 
BroadcastYear 
( 
DateTime %
moment& ,
), -
:. /
this   
(   
moment   
,   
new   
TimeCalendar   )
(  ) *
)  * +
)  + ,
{!! 	
}"" 	
public%% 
BroadcastYear%% 
(%% 
DateTime%% %
moment%%& ,
,%%, -
ITimeCalendar%%. ;
calendar%%< D
)%%D E
:%%F G
this&& 
(&& 
	GetYearOf&& 
(&& 
moment&& !
)&&! "
,&&" #
calendar&&$ ,
)&&, -
{'' 	
}(( 	
public++ 
BroadcastYear++ 
(++ 
int++  
year++! %
)++% &
:++' (
this,, 
(,, 
year,, 
,,, 
new,, 
TimeCalendar,, '
(,,' (
),,( )
),,) *
{-- 	
}.. 	
public11 
BroadcastYear11 
(11 
int11  
year11! %
,11% &
ITimeCalendar11' 4
calendar115 =
)11= >
:11? @
base22 
(22 
GetPeriodOf22 
(22 
year22 !
)22! "
,22" #
calendar22$ ,
)22, -
{33 	
this44 
.44 
year44 
=44 
year44 
;44 
}55 	
public88 
int88 
Year88 
{99 	
get:: 
{:: 
return:: 
year:: 
;:: 
}::  
};; 	
public>> !
ITimePeriodCollection>> $
GetWeeks>>% -
(>>- .
)>>. /
{?? 	 
TimePeriodCollection@@  
weeks@@! &
=@@' (
new@@) , 
TimePeriodCollection@@- A
(@@A B
)@@B C
;@@C D
intAA 
	weekCountAA 
=AA !
BroadcastCalendarToolAA 1
.AA1 2
GetWeeksOfYearAA2 @
(AA@ A
yearAAA E
)AAE F
;AAF G
forBB 
(BB 
intBB 
weekBB 
=BB 
$numBB 
;BB 
weekBB #
<=BB$ &
	weekCountBB' 0
;BB0 1
weekBB2 6
++BB6 8
)BB8 9
{CC 
weeksDD 
.DD 
AddDD 
(DD 
newDD 
BroadcastWeekDD +
(DD+ ,
yearDD, 0
,DD0 1
weekDD2 6
)DD6 7
)DD7 8
;DD8 9
}EE 
returnFF 
weeksFF 
;FF 
}GG 	
publicJJ !
ITimePeriodCollectionJJ $
	GetMonthsJJ% .
(JJ. /
)JJ/ 0
{KK 	 
TimePeriodCollectionLL  
monthsLL! '
=LL( )
newLL* - 
TimePeriodCollectionLL. B
(LLB C
)LLC D
;LLD E
forMM 
(MM 
intMM 
monthMM 
=MM 
$numMM 
;MM 
monthMM  %
<=MM& (
TimeSpecMM) 1
.MM1 2
MonthsPerYearMM2 ?
;MM? @
monthMMA F
++MMF H
)MMH I
{NN 
monthsOO 
.OO 
AddOO 
(OO 
newOO 
BroadcastMonthOO -
(OO- .
yearOO. 2
,OO2 3
(OO4 5
	YearMonthOO5 >
)OO> ?
monthOO? D
)OOD E
)OOE F
;OOF G
}PP 
returnQQ 
monthsQQ 
;QQ 
}RR 	
publicUU 
BroadcastYearUU 
GetPreviousYearUU ,
(UU, -
)UU- .
{VV 	
returnWW 
AddYearsWW 
(WW 
-WW 
$numWW 
)WW 
;WW  
}XX 	
public[[ 
BroadcastYear[[ 
GetNextYear[[ (
([[( )
)[[) *
{\\ 	
return]] 
AddYears]] 
(]] 
$num]] 
)]] 
;]] 
}^^ 	
publicaa 
BroadcastYearaa 
AddYearsaa %
(aa% &
intaa& )
countaa* /
)aa/ 0
{bb 	
returncc 
newcc 
BroadcastYearcc $
(cc$ %
Yearcc% )
+cc* +
countcc, 1
,cc1 2
Calendarcc3 ;
)cc; <
;cc< =
}dd 	
	protectedgg 
overridegg 
stringgg !
Formatgg" (
(gg( )
ITimeFormattergg) 7
	formattergg8 A
)ggA B
{hh 	
returnii 
	formatterii 
.ii 
GetCalendarPeriodii .
(ii. /
Yearii/ 3
.ii3 4
ToStringii4 <
(ii< =
CultureInfoii= H
.iiH I
InvariantCultureiiI Y
)iiY Z
,iiZ [
	formatterjj 
.jj 
GetShortDatejj &
(jj& '
Startjj' ,
)jj, -
,jj- .
	formatterjj/ 8
.jj8 9
GetShortDatejj9 E
(jjE F
EndjjF I
)jjI J
,jjJ K
DurationjjL T
)jjT U
;jjU V
}kk 	
privatenn 
staticnn 
intnn 
	GetYearOfnn $
(nn$ %
DateTimenn% -
momentnn. 4
)nn4 5
{oo 	
intpp 
yearpp 
;pp !
BroadcastCalendarToolqq !
.qq! "
	GetYearOfqq" +
(qq+ ,
momentqq, 2
,qq2 3
outqq4 7
yearqq8 <
)qq< =
;qq= >
returnrr 
yearrr 
;rr 
}ss 	
privatevv 
staticvv 

ITimeRangevv !
GetPeriodOfvv" -
(vv- .
intvv. 1
yearvv2 6
)vv6 7
{ww 	
returnxx 
newxx 
CalendarTimeRangexx (
(xx( )!
BroadcastCalendarToolyy %
.yy% &
GetStartOfYearyy& 4
(yy4 5
yearyy5 9
)yy9 :
,yy: ;!
BroadcastCalendarToolzz %
.zz% &
GetStartOfYearzz& 4
(zz4 5
yearzz5 9
+zz: ;
$numzz< =
)zz= >
)zz> ?
;zz? @
}{{ 	
private 
readonly 
int 
year !
;! "
}
ÅÅ 
}ÉÉ Åò
pF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\CalendarDateAdd.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

class 
CalendarDateAdd  
:! "
DateAdd# *
{ 
public 
CalendarDateAdd 
( 
)  
:! "
this 
( 
new 
TimeCalendar !
(! "
new" %
TimeCalendarConfig& 8
{9 :
	EndOffset; D
=E F
TimeSpanG O
.O P
ZeroP T
}U V
)V W
)W X
{ 	
} 	
public 
CalendarDateAdd 
( 
ITimeCalendar ,
calendar- 5
)5 6
{ 	
if 
( 
calendar 
== 
null  
)  !
{ 
throw 
new !
ArgumentNullException /
(/ 0
$str0 :
): ;
;; <
} 
if 
( 
calendar 
. 
StartOffset $
!=% '
TimeSpan( 0
.0 1
Zero1 5
)5 6
{ 
throw   
new   '
ArgumentOutOfRangeException   5
(  5 6
$str  6 @
,  @ A
$str  B P
)  P Q
;  Q R
}!! 
if"" 
("" 
calendar"" 
."" 
	EndOffset"" "
!=""# %
TimeSpan""& .
."". /
Zero""/ 3
)""3 4
{## 
throw$$ 
new$$ '
ArgumentOutOfRangeException$$ 5
($$5 6
$str$$6 @
,$$@ A
$str$$B N
)$$N O
;$$O P
}%% 
this&& 
.&& 
calendar&& 
=&& 
calendar&& $
;&&$ %
}'' 	
public** 
IList** 
<** 
	DayOfWeek** 
>** 
WeekDays**  (
{++ 	
get,, 
{,, 
return,, 
weekDays,, !
;,,! "
},,# $
}-- 	
public00 
IList00 
<00 
	HourRange00 
>00 
WorkingHours00  ,
{11 	
get22 
{22 
return22 
workingHours22 %
;22% &
}22' (
}33 	
public66 
IList66 
<66 
DayHourRange66 !
>66! "
WorkingDayHours66# 2
{77 	
get88 
{88 
return88 
workingDayHours88 (
;88( )
}88* +
}99 	
public<< 
ITimeCalendar<< 
Calendar<< %
{== 	
get>> 
{>> 
return>> 
calendar>> !
;>>! "
}>># $
}?? 	
publicBB 
newBB !
ITimePeriodCollectionBB (
IncludePeriodsBB) 7
{CC 	
getDD 
{DD 
throwDD 
newDD !
NotSupportedExceptionDD 1
(DD1 2
)DD2 3
;DD3 4
}DD5 6
}EE 	
publicHH 
voidHH 
AddWorkingWeekDaysHH &
(HH& '
)HH' (
{II 	
weekDaysJJ 
.JJ 
AddJJ 
(JJ 
	DayOfWeekJJ "
.JJ" #
MondayJJ# )
)JJ) *
;JJ* +
weekDaysKK 
.KK 
AddKK 
(KK 
	DayOfWeekKK "
.KK" #
TuesdayKK# *
)KK* +
;KK+ ,
weekDaysLL 
.LL 
AddLL 
(LL 
	DayOfWeekLL "
.LL" #
	WednesdayLL# ,
)LL, -
;LL- .
weekDaysMM 
.MM 
AddMM 
(MM 
	DayOfWeekMM "
.MM" #
ThursdayMM# +
)MM+ ,
;MM, -
weekDaysNN 
.NN 
AddNN 
(NN 
	DayOfWeekNN "
.NN" #
FridayNN# )
)NN) *
;NN* +
}OO 	
publicRR 
voidRR 
AddWeekendWeekDaysRR &
(RR& '
)RR' (
{SS 	
weekDaysTT 
.TT 
AddTT 
(TT 
	DayOfWeekTT "
.TT" #
SaturdayTT# +
)TT+ ,
;TT, -
weekDaysUU 
.UU 
AddUU 
(UU 
	DayOfWeekUU "
.UU" #
SundayUU# )
)UU) *
;UU* +
}VV 	
publicYY 
overrideYY 
DateTimeYY  
?YY  !
SubtractYY" *
(YY* +
DateTimeYY+ 3
startYY4 9
,YY9 :
TimeSpanYY; C
offsetYYD J
,YYJ K
SeekBoundaryModeYYL \
seekBoundaryModeYY] m
=YYn o
SeekBoundaryMode	YYp Ä
.
YYÄ Å
Next
YYÅ Ö
)
YYÖ Ü
{ZZ 	
if[[ 
([[ 
weekDays[[ 
.[[ 
Count[[ 
==[[ !
$num[[" #
&&[[$ &
ExcludePeriods[[' 5
.[[5 6
Count[[6 ;
==[[< >
$num[[? @
&&[[A C
workingHours[[D P
.[[P Q
Count[[Q V
==[[W Y
$num[[Z [
)[[[ \
{\\ 
return]] 
start]] 
.]] 
Subtract]] %
(]]% &
offset]]& ,
)]], -
;]]- .
}^^ 
return`` 
offset`` 
<`` 
TimeSpan`` $
.``$ %
Zero``% )
?``* +
CalculateEndaa 
(aa 
startaa "
,aa" #
offsetaa$ *
.aa* +
Negateaa+ 1
(aa1 2
)aa2 3
,aa3 4
SeekDirectionaa5 B
.aaB C
ForwardaaC J
,aaJ K
seekBoundaryModeaaL \
)aa\ ]
:aa^ _
CalculateEndbb 
(bb 
startbb "
,bb" #
offsetbb$ *
,bb* +
SeekDirectionbb, 9
.bb9 :
Backwardbb: B
,bbB C
seekBoundaryModebbD T
)bbT U
;bbU V
}cc 	
publicff 
overrideff 
DateTimeff  
?ff  !
Addff" %
(ff% &
DateTimeff& .
startff/ 4
,ff4 5
TimeSpanff6 >
offsetff? E
,ffE F
SeekBoundaryModeffG W
seekBoundaryModeffX h
=ffi j
SeekBoundaryModeffk {
.ff{ |
Next	ff| Ä
)
ffÄ Å
{gg 	
ifhh 
(hh 
weekDayshh 
.hh 
Counthh 
==hh !
$numhh" #
&&hh$ &
ExcludePeriodshh' 5
.hh5 6
Counthh6 ;
==hh< >
$numhh? @
&&hhA C
workingHourshhD P
.hhP Q
CounthhQ V
==hhW Y
$numhhZ [
)hh[ \
{ii 
returnjj 
startjj 
.jj 
Addjj  
(jj  !
offsetjj! '
)jj' (
;jj( )
}kk 
returnmm 
offsetmm 
<mm 
TimeSpanmm $
.mm$ %
Zeromm% )
?mm* +
CalculateEndnn 
(nn 
startnn "
,nn" #
offsetnn$ *
.nn* +
Negatenn+ 1
(nn1 2
)nn2 3
,nn3 4
SeekDirectionnn5 B
.nnB C
BackwardnnC K
,nnK L
seekBoundaryModennM ]
)nn] ^
:nn_ `
CalculateEndoo 
(oo 
startoo "
,oo" #
offsetoo$ *
,oo* +
SeekDirectionoo, 9
.oo9 :
Forwardoo: A
,ooA B
seekBoundaryModeooC S
)ooS T
;ooT U
}pp 	
	protectedss 
DateTimess 
?ss 
CalculateEndss (
(ss( )
DateTimess) 1
startss2 7
,ss7 8
TimeSpanss9 A
offsetssB H
,ssH I
SeekDirectiontt 
seekDirectiontt '
,tt' (
SeekBoundaryModett) 9
seekBoundaryModett: J
)ttJ K
{uu 	
ifvv 
(vv 
offsetvv 
<vv 
TimeSpanvv !
.vv! "
Zerovv" &
)vv& '
{ww 
throwxx 
newxx %
InvalidOperationExceptionxx 3
(xx3 4
$strxx4 P
)xxP Q
;xxQ R
}yy 
DateTime{{ 
?{{ 
endDate{{ 
={{ 
null{{  $
;{{$ %
DateTime|| 
moment|| 
=|| 
start|| #
;||# $
TimeSpan}} 
?}} 
	remaining}} 
=}}  !
offset}}" (
;}}( )
Week~~ 
week~~ 
=~~ 
new~~ 
Week~~  
(~~  !
start~~! &
,~~& '
calendar~~( 0
)~~0 1
;~~1 2
while
ÅÅ 
(
ÅÅ 
week
ÅÅ 
!=
ÅÅ 
null
ÅÅ 
)
ÅÅ  
{
ÇÇ 
base
ÉÉ 
.
ÉÉ 
IncludePeriods
ÉÉ #
.
ÉÉ# $
Clear
ÉÉ$ )
(
ÉÉ) *
)
ÉÉ* +
;
ÉÉ+ ,
base
ÑÑ 
.
ÑÑ 
IncludePeriods
ÑÑ #
.
ÑÑ# $
AddAll
ÑÑ$ *
(
ÑÑ* +%
GetAvailableWeekPeriods
ÑÑ+ B
(
ÑÑB C
week
ÑÑC G
)
ÑÑG H
)
ÑÑH I
;
ÑÑI J
endDate
ÜÜ 
=
ÜÜ 
CalculateEnd
ÜÜ &
(
ÜÜ& '
moment
ÜÜ' -
,
ÜÜ- .
	remaining
ÜÜ/ 8
.
ÜÜ8 9
Value
ÜÜ9 >
,
ÜÜ> ?
seekDirection
ÜÜ@ M
,
ÜÜM N
seekBoundaryMode
ÜÜO _
,
ÜÜ_ `
out
ÜÜa d
	remaining
ÜÜe n
)
ÜÜn o
;
ÜÜo p
if
áá 
(
áá 
endDate
áá 
!=
áá 
null
áá #
||
áá$ &
!
áá' (
	remaining
áá( 1
.
áá1 2
HasValue
áá2 :
)
áá: ;
{
àà 
break
ââ 
;
ââ 
}
ää 
switch
åå 
(
åå 
seekDirection
åå %
)
åå% &
{
çç 
case
éé 
SeekDirection
éé &
.
éé& '
Forward
éé' .
:
éé. /
week
èè 
=
èè 
FindNextWeek
èè +
(
èè+ ,
week
èè, 0
)
èè0 1
;
èè1 2
if
êê 
(
êê 
week
êê  
!=
êê! #
null
êê$ (
)
êê( )
{
ëë 
moment
íí "
=
íí# $
week
íí% )
.
íí) *
Start
íí* /
;
íí/ 0
}
ìì 
break
îî 
;
îî 
case
ïï 
SeekDirection
ïï &
.
ïï& '
Backward
ïï' /
:
ïï/ 0
week
ññ 
=
ññ 
FindPreviousWeek
ññ /
(
ññ/ 0
week
ññ0 4
)
ññ4 5
;
ññ5 6
if
óó 
(
óó 
week
óó  
!=
óó! #
null
óó$ (
)
óó( )
{
òò 
moment
ôô "
=
ôô# $
week
ôô% )
.
ôô) *
End
ôô* -
;
ôô- .
}
öö 
break
õõ 
;
õõ 
}
úú 
}
ùù 
return
üü 
endDate
üü 
;
üü 
}
†† 	
private
££ 
Week
££ 
FindNextWeek
££ !
(
££! "
Week
££" &
current
££' .
)
££. /
{
§§ 	
if
•• 
(
•• 
ExcludePeriods
•• 
.
•• 
Count
•• $
==
••% '
$num
••( )
)
••) *
{
¶¶ 
return
ßß 
current
ßß 
.
ßß 
GetNextWeek
ßß *
(
ßß* +
)
ßß+ ,
;
ßß, -
}
®® 
	TimeRange
™™ 
limits
™™ 
=
™™ 
new
™™ "
	TimeRange
™™# ,
(
™™, -
current
™™- 4
.
™™4 5
End
™™5 8
.
™™8 9
AddTicks
™™9 A
(
™™A B
$num
™™B C
)
™™C D
,
™™D E
DateTime
™™F N
.
™™N O
MaxValue
™™O W
)
™™W X
;
™™X Y
TimeGapCalculator
´´ 
<
´´ 
	TimeRange
´´ '
>
´´' (
gapCalculator
´´) 6
=
´´7 8
new
´´9 <
TimeGapCalculator
´´= N
<
´´N O
	TimeRange
´´O X
>
´´X Y
(
´´Y Z
calendar
´´Z b
)
´´b c
;
´´c d#
ITimePeriodCollection
¨¨ !
remainingPeriods
¨¨" 2
=
¨¨3 4
gapCalculator
¨¨5 B
.
¨¨B C
GetGaps
¨¨C J
(
¨¨J K
ExcludePeriods
¨¨K Y
,
¨¨Y Z
limits
¨¨[ a
)
¨¨a b
;
¨¨b c
return
≠≠ 
remainingPeriods
≠≠ #
.
≠≠# $
Count
≠≠$ )
>
≠≠* +
$num
≠≠, -
?
≠≠. /
new
≠≠0 3
Week
≠≠4 8
(
≠≠8 9
remainingPeriods
≠≠9 I
[
≠≠I J
$num
≠≠J K
]
≠≠K L
.
≠≠L M
Start
≠≠M R
)
≠≠R S
:
≠≠T U
null
≠≠V Z
;
≠≠Z [
}
ÆÆ 	
private
±± 
Week
±± 
FindPreviousWeek
±± %
(
±±% &
Week
±±& *
current
±±+ 2
)
±±2 3
{
≤≤ 	
if
≥≥ 
(
≥≥ 
ExcludePeriods
≥≥ 
.
≥≥ 
Count
≥≥ $
==
≥≥% '
$num
≥≥( )
)
≥≥) *
{
¥¥ 
return
µµ 
current
µµ 
.
µµ 
GetPreviousWeek
µµ .
(
µµ. /
)
µµ/ 0
;
µµ0 1
}
∂∂ 
	TimeRange
∏∏ 
limits
∏∏ 
=
∏∏ 
new
∏∏ "
	TimeRange
∏∏# ,
(
∏∏, -
DateTime
∏∏- 5
.
∏∏5 6
MinValue
∏∏6 >
,
∏∏> ?
current
∏∏@ G
.
∏∏G H
Start
∏∏H M
.
∏∏M N
AddTicks
∏∏N V
(
∏∏V W
-
∏∏W X
$num
∏∏X Y
)
∏∏Y Z
)
∏∏Z [
;
∏∏[ \
TimeGapCalculator
ππ 
<
ππ 
	TimeRange
ππ '
>
ππ' (
gapCalculator
ππ) 6
=
ππ7 8
new
ππ9 <
TimeGapCalculator
ππ= N
<
ππN O
	TimeRange
ππO X
>
ππX Y
(
ππY Z
calendar
ππZ b
)
ππb c
;
ππc d#
ITimePeriodCollection
∫∫ !
remainingPeriods
∫∫" 2
=
∫∫3 4
gapCalculator
∫∫5 B
.
∫∫B C
GetGaps
∫∫C J
(
∫∫J K
ExcludePeriods
∫∫K Y
,
∫∫Y Z
limits
∫∫[ a
)
∫∫a b
;
∫∫b c
return
ªª 
remainingPeriods
ªª #
.
ªª# $
Count
ªª$ )
>
ªª* +
$num
ªª, -
?
ªª. /
new
ªª0 3
Week
ªª4 8
(
ªª8 9
remainingPeriods
ªª9 I
[
ªªI J
remainingPeriods
ªªJ Z
.
ªªZ [
Count
ªª[ `
-
ªªa b
$num
ªªc d
]
ªªd e
.
ªªe f
End
ªªf i
)
ªªi j
:
ªªk l
null
ªªm q
;
ªªq r
}
ºº 	
	protected
øø 
virtual
øø 
IEnumerable
øø %
<
øø% &
ITimePeriod
øø& 1
>
øø1 2%
GetAvailableWeekPeriods
øø3 J
(
øøJ K
Week
øøK O
week
øøP T
)
øøT U
{
¿¿ 	
if
¡¡ 
(
¡¡ 
weekDays
¡¡ 
.
¡¡ 
Count
¡¡ 
==
¡¡ !
$num
¡¡" #
&&
¡¡$ &
workingHours
¡¡' 3
.
¡¡3 4
Count
¡¡4 9
==
¡¡: <
$num
¡¡= >
&&
¡¡? A
WorkingDayHours
¡¡B Q
.
¡¡Q R
Count
¡¡R W
==
¡¡X Z
$num
¡¡[ \
)
¡¡\ ]
{
¬¬ 
return
√√ 
new
√√ "
TimePeriodCollection
√√ /
{
√√0 1
week
√√2 6
}
√√7 8
;
√√8 9
}
ƒƒ +
CalendarPeriodCollectorFilter
∆∆ )
filter
∆∆* 0
=
∆∆1 2
new
∆∆3 6+
CalendarPeriodCollectorFilter
∆∆7 T
(
∆∆T U
)
∆∆U V
;
∆∆V W
foreach
…… 
(
…… 
	DayOfWeek
…… 
weekDay
…… &
in
……' )
weekDays
……* 2
)
……2 3
{
   
filter
ÀÀ 
.
ÀÀ 
WeekDays
ÀÀ 
.
ÀÀ  
Add
ÀÀ  #
(
ÀÀ# $
weekDay
ÀÀ$ +
)
ÀÀ+ ,
;
ÀÀ, -
}
ÃÃ 
foreach
œœ 
(
œœ 
	HourRange
œœ 
workingHour
œœ *
in
œœ+ -
workingHours
œœ. :
)
œœ: ;
{
–– 
filter
—— 
.
—— 
CollectingHours
—— &
.
——& '
Add
——' *
(
——* +
workingHour
——+ 6
)
——6 7
;
——7 8
}
““ 
foreach
’’ 
(
’’ 
DayHourRange
’’ !
workingDayHour
’’" 0
in
’’1 3
workingDayHours
’’4 C
)
’’C D
{
÷÷ 
filter
◊◊ 
.
◊◊  
CollectingDayHours
◊◊ )
.
◊◊) *
Add
◊◊* -
(
◊◊- .
workingDayHour
◊◊. <
)
◊◊< =
;
◊◊= >
}
ÿÿ %
CalendarPeriodCollector
⁄⁄ #
weekCollector
⁄⁄$ 1
=
⁄⁄2 3
new
€€ %
CalendarPeriodCollector
€€ +
(
€€+ ,
filter
€€, 2
,
€€2 3
week
€€4 8
,
€€8 9
SeekDirection
€€: G
.
€€G H
Forward
€€H O
,
€€O P
calendar
€€Q Y
)
€€Y Z
;
€€Z [
weekCollector
‹‹ 
.
‹‹ 
CollectHours
‹‹ &
(
‹‹& '
)
‹‹' (
;
‹‹( )
return
›› 
weekCollector
››  
.
››  !
Periods
››! (
;
››( )
}
ﬁﬁ 	
private
‚‚ 
readonly
‚‚ 
List
‚‚ 
<
‚‚ 
	DayOfWeek
‚‚ '
>
‚‚' (
weekDays
‚‚) 1
=
‚‚2 3
new
‚‚4 7
List
‚‚8 <
<
‚‚< =
	DayOfWeek
‚‚= F
>
‚‚F G
(
‚‚G H
)
‚‚H I
;
‚‚I J
private
„„ 
readonly
„„ 
List
„„ 
<
„„ 
	HourRange
„„ '
>
„„' (
workingHours
„„) 5
=
„„6 7
new
„„8 ;
List
„„< @
<
„„@ A
	HourRange
„„A J
>
„„J K
(
„„K L
)
„„L M
;
„„M N
private
‰‰ 
readonly
‰‰ 
List
‰‰ 
<
‰‰ 
DayHourRange
‰‰ *
>
‰‰* +
workingDayHours
‰‰, ;
=
‰‰< =
new
‰‰> A
List
‰‰B F
<
‰‰F G
DayHourRange
‰‰G S
>
‰‰S T
(
‰‰T U
)
‰‰U V
;
‰‰V W
private
ÂÂ 
readonly
ÂÂ 
ITimeCalendar
ÂÂ &
calendar
ÂÂ' /
;
ÂÂ/ 0
}
ÁÁ 
}ÈÈ äL
qF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\CalendarDateDiff.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

class 
CalendarDateDiff !
{ 
public 
CalendarDateDiff 
(  
)  !
:" #
this 
( 
new 
TimeCalendar !
(! "
new" %
TimeCalendarConfig& 8
{9 :
	EndOffset; D
=E F
TimeSpanG O
.O P
ZeroP T
}U V
)V W
,W X
newY \
DurationProvider] m
(m n
)n o
)o p
{ 	
} 	
public 
CalendarDateDiff 
(  
ITimeCalendar  -
calendar. 6
,6 7
IDurationProvider8 I
durationProviderJ Z
)Z [
{ 	
if 
( 
calendar 
== 
null  
)  !
{ 
throw 
new !
ArgumentNullException /
(/ 0
$str0 :
): ;
;; <
} 
if 
( 
durationProvider  
==! #
null$ (
)( )
{ 
throw   
new   !
ArgumentNullException   /
(  / 0
$str  0 B
)  B C
;  C D
}!! 
if"" 
("" 
calendar"" 
."" 
StartOffset"" $
!=""% '
TimeSpan""( 0
.""0 1
Zero""1 5
)""5 6
{## 
throw$$ 
new$$ '
ArgumentOutOfRangeException$$ 5
($$5 6
$str$$6 @
,$$@ A
$str$$B P
)$$P Q
;$$Q R
}%% 
if&& 
(&& 
calendar&& 
.&& 
	EndOffset&& "
!=&&# %
TimeSpan&&& .
.&&. /
Zero&&/ 3
)&&3 4
{'' 
throw(( 
new(( '
ArgumentOutOfRangeException(( 5
(((5 6
$str((6 @
,((@ A
$str((B N
)((N O
;((O P
})) 
this++ 
.++ 
calendar++ 
=++ 
calendar++ $
;++$ %
this,, 
.,, 
durationProvider,, !
=,," #
durationProvider,,$ 4
;,,4 5
}-- 	
public00 
IList00 
<00 
	DayOfWeek00 
>00 
WeekDays00  (
{11 	
get22 
{22 
return22 
collectorFilter22 (
.22( )
WeekDays22) 1
;221 2
}223 4
}33 	
public66 
IList66 
<66 
	HourRange66 
>66 
WorkingHours66  ,
{77 	
get88 
{88 
return88 
collectorFilter88 (
.88( )
CollectingHours88) 8
;888 9
}88: ;
}99 	
public<< 
IList<< 
<<< 
DayHourRange<< !
><<! "
WorkingDayHours<<# 2
{== 	
get>> 
{>> 
return>> 
collectorFilter>> (
.>>( )
CollectingDayHours>>) ;
;>>; <
}>>= >
}?? 	
publicBB 
ITimeCalendarBB 
CalendarBB %
{CC 	
getDD 
{DD 
returnDD 
calendarDD !
;DD! "
}DD# $
}EE 	
publicHH 
IDurationProviderHH  
DurationProviderHH! 1
{II 	
getJJ 
{JJ 
returnJJ 
durationProviderJJ )
;JJ) *
}JJ+ ,
}KK 	
publicNN 
voidNN 
AddWorkingWeekDaysNN &
(NN& '
)NN' (
{OO 	
WeekDaysPP 
.PP 
AddPP 
(PP 
	DayOfWeekPP "
.PP" #
MondayPP# )
)PP) *
;PP* +
WeekDaysQQ 
.QQ 
AddQQ 
(QQ 
	DayOfWeekQQ "
.QQ" #
TuesdayQQ# *
)QQ* +
;QQ+ ,
WeekDaysRR 
.RR 
AddRR 
(RR 
	DayOfWeekRR "
.RR" #
	WednesdayRR# ,
)RR, -
;RR- .
WeekDaysSS 
.SS 
AddSS 
(SS 
	DayOfWeekSS "
.SS" #
ThursdaySS# +
)SS+ ,
;SS, -
WeekDaysTT 
.TT 
AddTT 
(TT 
	DayOfWeekTT "
.TT" #
FridayTT# )
)TT) *
;TT* +
}UU 	
publicXX 
voidXX 
AddWeekendWeekDaysXX &
(XX& '
)XX' (
{YY 	
WeekDaysZZ 
.ZZ 
AddZZ 
(ZZ 
	DayOfWeekZZ "
.ZZ" #
SaturdayZZ# +
)ZZ+ ,
;ZZ, -
WeekDays[[ 
.[[ 
Add[[ 
([[ 
	DayOfWeek[[ "
.[[" #
Sunday[[# )
)[[) *
;[[* +
}\\ 	
public__ 
TimeSpan__ 

Difference__ "
(__" #
DateTime__# +
date__, 0
)__0 1
{`` 	
returnaa 

Differenceaa 
(aa 
dateaa "
,aa" #

ClockProxyaa$ .
.aa. /
Clockaa/ 4
.aa4 5
Nowaa5 8
)aa8 9
;aa9 :
}bb 	
publicee 
TimeSpanee 

Differenceee "
(ee" #
DateTimeee# +
date1ee, 1
,ee1 2
DateTimeee3 ;
date2ee< A
)eeA B
{ff 	
ifgg 
(gg 
date1gg 
.gg 
Equalsgg 
(gg 
date2gg "
)gg" #
)gg# $
{hh 
returnii 
TimeSpanii 
.ii  
Zeroii  $
;ii$ %
}jj 
ifkk 
(kk 
collectorFilterkk 
.kk  
WeekDayskk  (
.kk( )
Countkk) .
==kk/ 1
$numkk2 3
&&kk4 6
collectorFilterkk7 F
.kkF G
CollectingHourskkG V
.kkV W
CountkkW \
==kk] _
$numkk` a
&&kkb d
collectorFilterkke t
.kkt u
CollectingDayHours	kku á
.
kká à
Count
kkà ç
==
kké ê
$num
kkë í
)
kkí ì
{ll 
returnmm 
newmm 
DateDiffmm #
(mm# $
date1mm$ )
,mm) *
date2mm+ 0
,mm0 1
calendarmm2 :
.mm: ;
Culturemm; B
.mmB C
CalendarmmC K
,mmK L
calendarmmM U
.mmU V
FirstDayOfWeekmmV d
,mmd e
calendarmmf n
.mmn o
YearBaseMonthmmo |
)mm| }
.mm} ~

Difference	mm~ à
;
mmà â
}nn 
	TimeRangepp 
differenceRangepp %
=pp& '
newpp( +
	TimeRangepp, 5
(pp5 6
date1pp6 ;
,pp; <
date2pp= B
)ppB C
;ppC D#
CalendarPeriodCollectorrr #
	collectorrr$ -
=rr. /
newrr0 3#
CalendarPeriodCollectorrr4 K
(rrK L
collectorFilterss 
,ss  
newss! $
	TimeRangess% .
(ss. /
differenceRangess/ >
.ss> ?
Startss? D
.ssD E
DatessE I
,ssI J
differenceRangessK Z
.ssZ [
Endss[ ^
.ss^ _
Datess_ c
.ssc d
AddDaysssd k
(ssk l
$numssl m
)ssm n
)ssn o
,sso p
SeekDirectionssq ~
.ss~ 
Forward	ss Ü
,
ssÜ á
calendar
ssà ê
)
ssê ë
;
ssë í
	collectortt 
.tt 
CollectHourstt "
(tt" #
)tt# $
;tt$ %
TimeGapCalculatorww 
<ww 
	TimeRangeww '
>ww' (
gapCalculatorww) 6
=ww7 8
newww9 <
TimeGapCalculatorww= N
<wwN O
	TimeRangewwO X
>wwX Y
(wwY Z
calendarwwZ b
)wwb c
;wwc d!
ITimePeriodCollectionxx !
gapsxx" &
=xx' (
gapCalculatorxx) 6
.xx6 7
GetGapsxx7 >
(xx> ?
	collectorxx? H
.xxH I
PeriodsxxI P
,xxP Q
differenceRangexxR a
)xxa b
;xxb c
TimeSpan{{ 

difference{{ 
={{  !
gaps{{" &
.{{& '
GetTotalDuration{{' 7
({{7 8
durationProvider{{8 H
){{H I
;{{I J
return|| 
date1|| 
<|| 
date2||  
?||! "

difference||# -
:||. /

difference||0 :
.||: ;
Negate||; A
(||A B
)||B C
;||C D
}}} 	
private
ÅÅ 
readonly
ÅÅ +
CalendarPeriodCollectorFilter
ÅÅ 6
collectorFilter
ÅÅ7 F
=
ÅÅG H
new
ÅÅI L+
CalendarPeriodCollectorFilter
ÅÅM j
(
ÅÅj k
)
ÅÅk l
;
ÅÅl m
private
ÇÇ 
readonly
ÇÇ 
ITimeCalendar
ÇÇ &
calendar
ÇÇ' /
;
ÇÇ/ 0
private
ÉÉ 
readonly
ÉÉ 
IDurationProvider
ÉÉ *
durationProvider
ÉÉ+ ;
;
ÉÉ; <
}
ÖÖ 
}áá ≤
qF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\CalendarNameType.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

enum 
CalendarNameType  
{ 
Full 
, 
Abbreviated 
, 
} 
} °£
xF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\CalendarPeriodCollector.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

class #
CalendarPeriodCollector (
:) *
CalendarVisitor+ :
<: ;)
CalendarPeriodCollectorFilter; X
,X Y*
CalendarPeriodCollectorContextZ x
>x y
{ 
public #
CalendarPeriodCollector &
(& ')
CalendarPeriodCollectorFilter' D
filterE K
,K L
ITimePeriodM X
limitsY _
,_ `
SeekDirection 
seekDirection '
=( )
SeekDirection* 7
.7 8
Forward8 ?
,? @
ITimeCalendarA N
calendarO W
=X Y
nullZ ^
)^ _
:` a
base 
( 
filter 
, 
limits 
,  
seekDirection! .
,. /
calendar0 8
)8 9
{ 	
} 	
public !
ITimePeriodCollection $
Periods% ,
{ 	
get 
{ 
return 
periods  
;  !
}" #
} 	
public 
void 
CollectYears  
(  !
)! "
{   	
StartPeriodVisit!! 
(!! 
new!!  *
CalendarPeriodCollectorContext!!! ?
{!!@ A
Scope!!B G
=!!H I*
CalendarPeriodCollectorContext!!J h
.!!h i
CollectType!!i t
.!!t u
Year!!u y
}!!z {
)!!{ |
;!!| }
}"" 	
public%% 
void%% 
CollectMonths%% !
(%%! "
)%%" #
{&& 	
StartPeriodVisit'' 
('' 
new''  *
CalendarPeriodCollectorContext''! ?
{''@ A
Scope''B G
=''H I*
CalendarPeriodCollectorContext''J h
.''h i
CollectType''i t
.''t u
Month''u z
}''{ |
)''| }
;''} ~
}(( 	
public++ 
void++ 
CollectDays++ 
(++  
)++  !
{,, 	
StartPeriodVisit-- 
(-- 
new--  *
CalendarPeriodCollectorContext--! ?
{--@ A
Scope--B G
=--H I*
CalendarPeriodCollectorContext--J h
.--h i
CollectType--i t
.--t u
Day--u x
}--y z
)--z {
;--{ |
}.. 	
public11 
void11 
CollectHours11  
(11  !
)11! "
{22 	
StartPeriodVisit33 
(33 
new33  *
CalendarPeriodCollectorContext33! ?
{33@ A
Scope33B G
=33H I*
CalendarPeriodCollectorContext33J h
.33h i
CollectType33i t
.33t u
Hour33u y
}33z {
)33{ |
;33| }
}44 	
public77 
override77 
string77 
ToString77 '
(77' (
)77( )
{88 	
return99 
periods99 
.99 
ToString99 #
(99# $
)99$ %
;99% &
}:: 	
	protected== 
override== 
bool== 

EnterYears==  *
(==* +
Years==+ 0
years==1 6
,==6 7*
CalendarPeriodCollectorContext==8 V
context==W ^
)==^ _
{>> 	
return?? 
context@@ 
.@@ 
Scope@@ 
==@@  *
CalendarPeriodCollectorContext@@! ?
.@@? @
CollectType@@@ K
.@@K L
Month@@L Q
||@@R T
contextAA 
.AA 
ScopeAA 
==AA  *
CalendarPeriodCollectorContextAA! ?
.AA? @
CollectTypeAA@ K
.AAK L
DayAAL O
||AAP R
contextBB 
.BB 
ScopeBB 
==BB  *
CalendarPeriodCollectorContextBB! ?
.BB? @
CollectTypeBB@ K
.BBK L
HourBBL P
;BBP Q
}CC 	
	protectedFF 
overrideFF 
boolFF 
EnterMonthsFF  +
(FF+ ,
YearFF, 0
yearFF1 5
,FF5 6*
CalendarPeriodCollectorContextFF7 U
contextFFV ]
)FF] ^
{GG 	
returnHH 
contextII 
.II 
ScopeII 
==II  *
CalendarPeriodCollectorContextII! ?
.II? @
CollectTypeII@ K
.IIK L
DayIIL O
||IIP R
contextJJ 
.JJ 
ScopeJJ 
==JJ  *
CalendarPeriodCollectorContextJJ! ?
.JJ? @
CollectTypeJJ@ K
.JJK L
HourJJL P
;JJP Q
}KK 	
	protectedNN 
overrideNN 
boolNN 
	EnterDaysNN  )
(NN) *
MonthNN* /
monthNN0 5
,NN5 6*
CalendarPeriodCollectorContextNN7 U
contextNNV ]
)NN] ^
{OO 	
returnPP 
contextQQ 
.QQ 
ScopeQQ 
==QQ  *
CalendarPeriodCollectorContextQQ! ?
.QQ? @
CollectTypeQQ@ K
.QQK L
HourQQL P
;QQP Q
}RR 	
	protectedUU 
overrideUU 
boolUU 

EnterHoursUU  *
(UU* +
DayUU+ .
dayUU/ 2
,UU2 3*
CalendarPeriodCollectorContextUU4 R
contextUUS Z
)UUZ [
{VV 	
returnWW 
falseWW 
;WW 
}XX 	
	protected[[ 
override[[ 
bool[[ 
OnVisitYears[[  ,
([[, -
Years[[- 2
years[[3 8
,[[8 9*
CalendarPeriodCollectorContext[[: X
context[[Y `
)[[` a
{\\ 	
if]] 
(]] 
context]] 
.]] 
Scope]] 
!=]]  *
CalendarPeriodCollectorContext]]! ?
.]]? @
CollectType]]@ K
.]]K L
Year]]L P
)]]P Q
{^^ 
return__ 
true__ 
;__ 
}`` 
foreachbb 
(bb 
Yearbb 
yearbb 
inbb !
yearsbb" '
.bb' (
GetYearsbb( 0
(bb0 1
)bb1 2
)bb2 3
{cc 
ifdd 
(dd 
IsMatchingYeardd "
(dd" #
yeardd# '
,dd' (
contextdd) 0
)dd0 1
&&dd2 4
CheckLimitsdd5 @
(dd@ A
yearddA E
)ddE F
)ddF G
{ee 
periodsff 
.ff 
Addff 
(ff  
yearff  $
)ff$ %
;ff% &
}gg 
}hh 
returnii 
falseii 
;ii 
}jj 	
	protectedmm 
overridemm 
boolmm 
OnVisitYearmm  +
(mm+ ,
Yearmm, 0
yearmm1 5
,mm5 6*
CalendarPeriodCollectorContextmm7 U
contextmmV ]
)mm] ^
{nn 	
ifoo 
(oo 
contextoo 
.oo 
Scopeoo 
!=oo  *
CalendarPeriodCollectorContextoo! ?
.oo? @
CollectTypeoo@ K
.ooK L
MonthooL Q
)ooQ R
{pp 
returnqq 
trueqq 
;qq 
}rr 
ifuu 
(uu 
Filteruu 
.uu 
CollectingMonthsuu '
.uu' (
Countuu( -
==uu. 0
$numuu1 2
)uu2 3
{vv 
foreachww 
(ww 
Monthww 
monthww $
inww% '
yearww( ,
.ww, -
	GetMonthsww- 6
(ww6 7
)ww7 8
)ww8 9
{xx 
ifyy 
(yy 
IsMatchingMonthyy '
(yy' (
monthyy( -
,yy- .
contextyy/ 6
)yy6 7
&&yy8 :
CheckLimitsyy; F
(yyF G
monthyyG L
)yyL M
)yyM N
{zz 
periods{{ 
.{{  
Add{{  #
({{# $
month{{$ )
){{) *
;{{* +
}|| 
}}} 
}~~ 
else 
{
ÄÄ 
foreach
ÅÅ 
(
ÅÅ 

MonthRange
ÅÅ #
collectingMonth
ÅÅ$ 3
in
ÅÅ4 6
Filter
ÅÅ7 =
.
ÅÅ= >
CollectingMonths
ÅÅ> N
)
ÅÅN O
{
ÇÇ 
if
ÉÉ 
(
ÉÉ 
collectingMonth
ÉÉ '
.
ÉÉ' (
IsSingleMonth
ÉÉ( 5
)
ÉÉ5 6
{
ÑÑ 
Month
ÖÖ 
month
ÖÖ #
=
ÖÖ$ %
new
ÖÖ& )
Month
ÖÖ* /
(
ÖÖ/ 0
year
ÖÖ0 4
.
ÖÖ4 5
	YearValue
ÖÖ5 >
,
ÖÖ> ?
collectingMonth
ÖÖ@ O
.
ÖÖO P
Min
ÖÖP S
,
ÖÖS T
year
ÖÖU Y
.
ÖÖY Z
Calendar
ÖÖZ b
)
ÖÖb c
;
ÖÖc d
if
ÜÜ 
(
ÜÜ 
IsMatchingMonth
ÜÜ +
(
ÜÜ+ ,
month
ÜÜ, 1
,
ÜÜ1 2
context
ÜÜ3 :
)
ÜÜ: ;
&&
ÜÜ< >
CheckLimits
ÜÜ? J
(
ÜÜJ K
month
ÜÜK P
)
ÜÜP Q
)
ÜÜQ R
{
áá 
periods
àà #
.
àà# $
Add
àà$ '
(
àà' (
month
àà( -
)
àà- .
;
àà. /
}
ââ 
}
ää 
else
ãã 
{
åå 
Months
çç 
months
çç %
=
çç& '
new
çç( +
Months
çç, 2
(
çç2 3
year
çç3 7
.
çç7 8
	YearValue
çç8 A
,
ççA B
collectingMonth
ççC R
.
ççR S
Min
ççS V
,
ççV W
collectingMonth
éé +
.
éé+ ,
Max
éé, /
-
éé0 1
collectingMonth
éé2 A
.
ééA B
Min
ééB E
,
ééE F
year
ééG K
.
ééK L
Calendar
ééL T
)
ééT U
;
ééU V
bool
èè 

isMatching
èè '
=
èè( )
true
èè* .
;
èè. /
foreach
êê 
(
êê  !
Month
êê! &
month
êê' ,
in
êê- /
months
êê0 6
.
êê6 7
	GetMonths
êê7 @
(
êê@ A
)
êêA B
)
êêB C
{
ëë 
if
íí 
(
íí  
IsMatchingMonth
íí  /
(
íí/ 0
month
íí0 5
,
íí5 6
context
íí7 >
)
íí> ?
)
íí? @
{
ìì 
continue
îî  (
;
îî( )
}
ïï 

isMatching
ññ &
=
ññ' (
false
ññ) .
;
ññ. /
break
óó !
;
óó! "
}
òò 
if
ôô 
(
ôô 

isMatching
ôô &
&&
ôô' )
CheckLimits
ôô* 5
(
ôô5 6
months
ôô6 <
)
ôô< =
)
ôô= >
{
öö 
periods
õõ #
.
õõ# $
Add
õõ$ '
(
õõ' (
months
õõ( .
)
õõ. /
;
õõ/ 0
}
úú 
}
ùù 
}
ûû 
}
üü 
return
°° 
false
°° 
;
°° 
}
¢¢ 	
	protected
•• 
override
•• 
bool
•• 
OnVisitMonth
••  ,
(
••, -
Month
••- 2
month
••3 8
,
••8 9,
CalendarPeriodCollectorContext
••: X
context
••Y `
)
••` a
{
¶¶ 	
if
ßß 
(
ßß 
context
ßß 
.
ßß 
Scope
ßß 
!=
ßß  ,
CalendarPeriodCollectorContext
ßß! ?
.
ßß? @
CollectType
ßß@ K
.
ßßK L
Day
ßßL O
)
ßßO P
{
®® 
return
©© 
true
©© 
;
©© 
}
™™ 
if
¨¨ 
(
¨¨ 
Filter
¨¨ 
.
¨¨ 
CollectingDays
¨¨ %
.
¨¨% &
Count
¨¨& +
==
¨¨, .
$num
¨¨/ 0
)
¨¨0 1
{
≠≠ 
foreach
ÆÆ 
(
ÆÆ 
Day
ÆÆ 
day
ÆÆ  
in
ÆÆ! #
month
ÆÆ$ )
.
ÆÆ) *
GetDays
ÆÆ* 1
(
ÆÆ1 2
)
ÆÆ2 3
)
ÆÆ3 4
{
ØØ 
if
∞∞ 
(
∞∞ 
IsMatchingDay
∞∞ %
(
∞∞% &
day
∞∞& )
,
∞∞) *
context
∞∞+ 2
)
∞∞2 3
&&
∞∞4 6
CheckLimits
∞∞7 B
(
∞∞B C
day
∞∞C F
)
∞∞F G
)
∞∞G H
{
±± 
periods
≤≤ 
.
≤≤  
Add
≤≤  #
(
≤≤# $
day
≤≤$ '
)
≤≤' (
;
≤≤( )
}
≥≥ 
}
¥¥ 
}
µµ 
else
∂∂ 
{
∑∑ 
foreach
∏∏ 
(
∏∏ 
DayRange
∏∏ !
collectingDay
∏∏" /
in
∏∏0 2
Filter
∏∏3 9
.
∏∏9 :
CollectingDays
∏∏: H
)
∏∏H I
{
ππ 
if
∫∫ 
(
∫∫ 
collectingDay
∫∫ %
.
∫∫% &
IsSingleDay
∫∫& 1
)
∫∫1 2
{
ªª 
Day
ºº 
day
ºº 
=
ºº  !
new
ºº" %
Day
ºº& )
(
ºº) *
month
ºº* /
.
ºº/ 0
Year
ºº0 4
,
ºº4 5
month
ºº6 ;
.
ºº; <

MonthValue
ºº< F
,
ººF G
collectingDay
ººH U
.
ººU V
Min
ººV Y
,
ººY Z
month
ºº[ `
.
ºº` a
Calendar
ººa i
)
ººi j
;
ººj k
if
ΩΩ 
(
ΩΩ 
IsMatchingDay
ΩΩ )
(
ΩΩ) *
day
ΩΩ* -
,
ΩΩ- .
context
ΩΩ/ 6
)
ΩΩ6 7
&&
ΩΩ8 :
CheckLimits
ΩΩ; F
(
ΩΩF G
day
ΩΩG J
)
ΩΩJ K
)
ΩΩK L
{
ææ 
periods
øø #
.
øø# $
Add
øø$ '
(
øø' (
day
øø( +
)
øø+ ,
;
øø, -
}
¿¿ 
}
¡¡ 
else
¬¬ 
{
√√ 
Days
ƒƒ 
days
ƒƒ !
=
ƒƒ" #
new
ƒƒ$ '
Days
ƒƒ( ,
(
ƒƒ, -
month
ƒƒ- 2
.
ƒƒ2 3
Year
ƒƒ3 7
,
ƒƒ7 8
month
ƒƒ9 >
.
ƒƒ> ?

MonthValue
ƒƒ? I
,
ƒƒI J
collectingDay
ƒƒK X
.
ƒƒX Y
Min
ƒƒY \
,
ƒƒ\ ]
collectingDay
ƒƒ^ k
.
ƒƒk l
Max
ƒƒl o
-
ƒƒp q
collectingDay
ƒƒr 
.ƒƒ Ä
MinƒƒÄ É
,ƒƒÉ Ñ
monthƒƒÖ ä
.ƒƒä ã
Calendarƒƒã ì
)ƒƒì î
;ƒƒî ï
bool
≈≈ 

isMatching
≈≈ '
=
≈≈( )
true
≈≈* .
;
≈≈. /
foreach
∆∆ 
(
∆∆  !
Day
∆∆! $
day
∆∆% (
in
∆∆) +
days
∆∆, 0
.
∆∆0 1
GetDays
∆∆1 8
(
∆∆8 9
)
∆∆9 :
)
∆∆: ;
{
«« 
if
»» 
(
»»  
IsMatchingDay
»»  -
(
»»- .
day
»». 1
,
»»1 2
context
»»3 :
)
»»: ;
)
»»; <
{
…… 
continue
    (
;
  ( )
}
ÀÀ 

isMatching
ÃÃ &
=
ÃÃ' (
false
ÃÃ) .
;
ÃÃ. /
break
ÕÕ !
;
ÕÕ! "
}
ŒŒ 
if
œœ 
(
œœ 

isMatching
œœ &
&&
œœ' )
CheckLimits
œœ* 5
(
œœ5 6
days
œœ6 :
)
œœ: ;
)
œœ; <
{
–– 
periods
—— #
.
——# $
Add
——$ '
(
——' (
days
——( ,
)
——, -
;
——- .
}
““ 
}
”” 
}
‘‘ 
}
’’ 
return
◊◊ 
false
◊◊ 
;
◊◊ 
}
ÿÿ 	
	protected
€€ 
override
€€ 
bool
€€ 

OnVisitDay
€€  *
(
€€* +
Day
€€+ .
day
€€/ 2
,
€€2 3,
CalendarPeriodCollectorContext
€€4 R
context
€€S Z
)
€€Z [
{
‹‹ 	
if
›› 
(
›› 
context
›› 
.
›› 
Scope
›› 
!=
››  ,
CalendarPeriodCollectorContext
››! ?
.
››? @
CollectType
››@ K
.
››K L
Hour
››L P
)
››P Q
{
ﬁﬁ 
return
ﬂﬂ 
true
ﬂﬂ 
;
ﬂﬂ 
}
‡‡ 
if
‚‚ 
(
‚‚ 
Filter
‚‚ 
.
‚‚ 
CollectingHours
‚‚ &
.
‚‚& '
Count
‚‚' ,
==
‚‚- /
$num
‚‚0 1
&&
‚‚2 4
Filter
‚‚5 ;
.
‚‚; < 
CollectingDayHours
‚‚< N
.
‚‚N O
Count
‚‚O T
==
‚‚U W
$num
‚‚X Y
)
‚‚Y Z
{
„„ 
foreach
‰‰ 
(
‰‰ 
Hour
‰‰ 
hour
‰‰ "
in
‰‰# %
day
‰‰& )
.
‰‰) *
GetHours
‰‰* 2
(
‰‰2 3
)
‰‰3 4
)
‰‰4 5
{
ÂÂ 
if
ÊÊ 
(
ÊÊ 
IsMatchingHour
ÊÊ &
(
ÊÊ& '
hour
ÊÊ' +
,
ÊÊ+ ,
context
ÊÊ- 4
)
ÊÊ4 5
&&
ÊÊ6 8
CheckLimits
ÊÊ9 D
(
ÊÊD E
hour
ÊÊE I
)
ÊÊI J
)
ÊÊJ K
{
ÁÁ 
periods
ËË 
.
ËË  
Add
ËË  #
(
ËË# $
hour
ËË$ (
)
ËË( )
;
ËË) *
}
ÈÈ 
}
ÍÍ 
}
ÎÎ 
else
ÏÏ 
{
ÌÌ 
if
ÓÓ 
(
ÓÓ 
IsMatchingDay
ÓÓ !
(
ÓÓ! "
day
ÓÓ" %
,
ÓÓ% &
context
ÓÓ' .
)
ÓÓ. /
)
ÓÓ/ 0
{
ÔÔ 
List
 
<
 
	HourRange
 "
>
" #
collectingHours
$ 3
=
4 5
new
6 9
List
: >
<
> ?
	HourRange
? H
>
H I
(
I J
Filter
J P
.
P Q
CollectingHours
Q `
)
` a
;
a b
foreach
ÒÒ 
(
ÒÒ 
DayHourRange
ÒÒ )
collectingDayHour
ÒÒ* ;
in
ÒÒ< >
Filter
ÒÒ? E
.
ÒÒE F 
CollectingDayHours
ÒÒF X
)
ÒÒX Y
{
ÚÚ 
if
ÛÛ 
(
ÛÛ 
collectingDayHour
ÛÛ -
.
ÛÛ- .
Day
ÛÛ. 1
==
ÛÛ2 4
day
ÛÛ5 8
.
ÛÛ8 9
	DayOfWeek
ÛÛ9 B
)
ÛÛB C
{
ÙÙ 
collectingHours
ıı +
.
ıı+ ,
Add
ıı, /
(
ıı/ 0
collectingDayHour
ıı0 A
)
ııA B
;
ııB C
}
ˆˆ 
}
˜˜ 
foreach
¯¯ 
(
¯¯ 
	HourRange
¯¯ &
collectingHour
¯¯' 5
in
¯¯6 8
collectingHours
¯¯9 H
)
¯¯H I
{
˘˘ 
DateTime
˙˙  
start
˙˙! &
=
˙˙' (
collectingHour
˙˙) 7
.
˙˙7 8
Start
˙˙8 =
.
˙˙= >

ToDateTime
˙˙> H
(
˙˙H I
day
˙˙I L
.
˙˙L M
Start
˙˙M R
)
˙˙R S
;
˙˙S T
DateTime
˚˚  
end
˚˚! $
=
˚˚% &
collectingHour
˚˚' 5
.
˚˚5 6
End
˚˚6 9
.
˚˚9 :

ToDateTime
˚˚: D
(
˚˚D E
day
˚˚E H
.
˚˚H I
Start
˚˚I N
)
˚˚N O
;
˚˚O P
CalendarTimeRange
¸¸ )
hours
¸¸* /
=
¸¸0 1
new
¸¸2 5
CalendarTimeRange
¸¸6 G
(
¸¸G H
start
¸¸H M
,
¸¸M N
end
¸¸O R
,
¸¸R S
day
¸¸T W
.
¸¸W X
Calendar
¸¸X `
)
¸¸` a
;
¸¸a b
if
˝˝ 
(
˝˝ !
CheckExcludePeriods
˝˝ /
(
˝˝/ 0
hours
˝˝0 5
)
˝˝5 6
&&
˝˝7 9
CheckLimits
˝˝: E
(
˝˝E F
hours
˝˝F K
)
˝˝K L
)
˝˝L M
{
˛˛ 
periods
ˇˇ #
.
ˇˇ# $
Add
ˇˇ$ '
(
ˇˇ' (
hours
ˇˇ( -
)
ˇˇ- .
;
ˇˇ. /
}
ÄÄ 
}
ÅÅ 
}
ÇÇ 
}
ÉÉ 
return
ÖÖ 
false
ÖÖ 
;
ÖÖ 
}
ÜÜ 	
private
ää 
readonly
ää #
ITimePeriodCollection
ää .
periods
ää/ 6
=
ää7 8
new
ää9 <"
TimePeriodCollection
ää= Q
(
ääQ R
)
ääR S
;
ääS T
}
åå 
}éé π
F:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\CalendarPeriodCollectorContext.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

class *
CalendarPeriodCollectorContext /
:0 1#
ICalendarVisitorContext2 I
{ 
public 
enum 
CollectType 
{ 	
Year 
, 
Month 
, 
Day 
, 
Hour 
, 
} 	
public 
CollectType 
Scope  
{! "
get# &
;& '
set( +
;+ ,
}- .
} 
} ◊
~F:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\CalendarPeriodCollectorFilter.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

class )
CalendarPeriodCollectorFilter .
:/ 0!
CalendarVisitorFilter1 F
,F G*
ICalendarPeriodCollectorFilterH f
{ 
public 
override 
void 
Clear "
(" #
)# $
{ 	
base 
. 
Clear 
( 
) 
; 
collectingMonths 
. 
Clear "
(" #
)# $
;$ %
collectingDays 
. 
Clear  
(  !
)! "
;" #
collectingHours 
. 
Clear !
(! "
)" #
;# $
} 	
public 
IList 
< 

MonthRange 
>  
CollectingMonths! 1
{ 	
get 
{ 
return 
collectingMonths )
;) *
}+ ,
} 	
public!! 
IList!! 
<!! 
DayRange!! 
>!! 
CollectingDays!! -
{"" 	
get## 
{## 
return## 
collectingDays## '
;##' (
}##) *
}$$ 	
public'' 
IList'' 
<'' 
	HourRange'' 
>'' 
CollectingHours''  /
{(( 	
get)) 
{)) 
return)) 
collectingHours)) (
;))( )
}))* +
}** 	
public-- 
IList-- 
<-- 
DayHourRange-- !
>--! "
CollectingDayHours--# 5
{.. 	
get// 
{// 
return// 
collectingDayHours// +
;//+ ,
}//- .
}00 	
private44 
readonly44 
List44 
<44 

MonthRange44 (
>44( )
collectingMonths44* :
=44; <
new44= @
List44A E
<44E F

MonthRange44F P
>44P Q
(44Q R
)44R S
;44S T
private55 
readonly55 
List55 
<55 
DayRange55 &
>55& '
collectingDays55( 6
=557 8
new559 <
List55= A
<55A B
DayRange55B J
>55J K
(55K L
)55L M
;55M N
private66 
readonly66 
List66 
<66 
	HourRange66 '
>66' (
collectingHours66) 8
=669 :
new66; >
List66? C
<66C D
	HourRange66D M
>66M N
(66N O
)66O P
;66P Q
private77 
readonly77 
List77 
<77 
DayHourRange77 *
>77* +
collectingDayHours77, >
=77? @
new77A D
List77E I
<77I J
DayHourRange77J V
>77V W
(77W X
)77X Y
;77Y Z
}99 
};; ¨Z
rF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\CalendarTimeRange.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

class 
CalendarTimeRange "
:# $
	TimeRange% .
,. /
ICalendarTimeRange0 B
{ 
public 
CalendarTimeRange  
(  !
DateTime! )
start* /
,/ 0
DateTime1 9
end: =
)= >
:? @
this 
( 
start 
, 
end 
, 
new  
TimeCalendar! -
(- .
). /
)/ 0
{ 	
} 	
public 
CalendarTimeRange  
(  !
DateTime! )
start* /
,/ 0
DateTime1 9
end: =
,= >
ITimeCalendar? L
calendarM U
)U V
:W X
this 
( 
new 
	TimeRange 
( 
start $
,$ %
end& )
)) *
,* +
calendar, 4
)4 5
{ 	
} 	
public 
CalendarTimeRange  
(  !
DateTime! )
start* /
,/ 0
TimeSpan1 9
duration: B
)B C
:D E
this 
( 
start 
, 
duration  
,  !
new" %
TimeCalendar& 2
(2 3
)3 4
)4 5
{   	
}!! 	
public$$ 
CalendarTimeRange$$  
($$  !
DateTime$$! )
start$$* /
,$$/ 0
TimeSpan$$1 9
duration$$: B
,$$B C
ITimeCalendar$$D Q
calendar$$R Z
)$$Z [
:$$\ ]
this%% 
(%% 
new%% 
	TimeRange%% 
(%% 
start%% $
,%%$ %
duration%%& .
)%%. /
,%%/ 0
calendar%%1 9
)%%9 :
{&& 	
}'' 	
public** 
CalendarTimeRange**  
(**  !
ITimePeriod**! ,
period**- 3
)**3 4
:**5 6
this++ 
(++ 
period++ 
,++ 
new++ 
TimeCalendar++ )
(++) *
)++* +
)+++ ,
{,, 	
}-- 	
public00 
CalendarTimeRange00  
(00  !
ITimePeriod00! ,
period00- 3
,003 4
ITimeCalendar005 B
calendar00C K
)00K L
:00M N
base11 
(11 
ToCalendarTimeRange11 $
(11$ %
period11% +
,11+ ,
calendar11- 5
)115 6
,116 7
true118 <
)11< =
{22 	
this33 
.33 
calendar33 
=33 
calendar33 $
;33$ %
}44 	
public77 
ITimeCalendar77 
Calendar77 %
{88 	
get99 
{99 
return99 
calendar99 !
;99! "
}99# $
}:: 	
public== 
	YearMonth== 
YearBaseMonth== &
{>> 	
get?? 
{?? 
return?? 
Calendar?? !
.??! "
YearBaseMonth??" /
;??/ 0
}??1 2
}@@ 	
publicCC 
virtualCC 
intCC 
BaseYearCC #
{DD 	
getEE 
{EE 
returnEE 
StartEE 
.EE 
YearEE #
;EE# $
}EE% &
}FF 	
publicII 
DateTimeII 
FirstMonthStartII '
{JJ 	
getKK 
{KK 
returnKK 
newKK 
DateTimeKK %
(KK% &
StartKK& +
.KK+ ,
YearKK, 0
,KK0 1
StartKK2 7
.KK7 8
MonthKK8 =
,KK= >
$numKK? @
)KK@ A
;KKA B
}KKC D
}LL 	
publicOO 
DateTimeOO 
LastMonthStartOO &
{PP 	
getQQ 
{QQ 
returnQQ 
newQQ 
DateTimeQQ %
(QQ% &
EndQQ& )
.QQ) *
YearQQ* .
,QQ. /
EndQQ0 3
.QQ3 4
MonthQQ4 9
,QQ9 :
$numQQ; <
)QQ< =
;QQ= >
}QQ? @
}RR 	
publicUU 
DateTimeUU 
FirstDayStartUU %
{VV 	
getWW 
{WW 
returnWW 
newWW 
DateTimeWW %
(WW% &
StartWW& +
.WW+ ,
YearWW, 0
,WW0 1
StartWW2 7
.WW7 8
MonthWW8 =
,WW= >
StartWW? D
.WWD E
DayWWE H
)WWH I
;WWI J
}WWK L
}XX 	
public[[ 
DateTime[[ 
LastDayStart[[ $
{\\ 	
get]] 
{]] 
return]] 
new]] 
DateTime]] %
(]]% &
End]]& )
.]]) *
Year]]* .
,]]. /
End]]0 3
.]]3 4
Month]]4 9
,]]9 :
End]]; >
.]]> ?
Day]]? B
)]]B C
;]]C D
}]]E F
}^^ 	
publicaa 
DateTimeaa 
FirstHourStartaa &
{bb 	
getcc 
{cc 
returncc 
newcc 
DateTimecc %
(cc% &
Startcc& +
.cc+ ,
Yearcc, 0
,cc0 1
Startcc2 7
.cc7 8
Monthcc8 =
,cc= >
Startcc? D
.ccD E
DayccE H
,ccH I
StartccJ O
.ccO P
HourccP T
,ccT U
$numccV W
,ccW X
$numccY Z
)ccZ [
;cc[ \
}cc] ^
}dd 	
publicgg 
DateTimegg 
LastHourStartgg %
{hh 	
getii 
{ii 
returnii 
newii 
DateTimeii %
(ii% &
Endii& )
.ii) *
Yearii* .
,ii. /
Endii0 3
.ii3 4
Monthii4 9
,ii9 :
Endii; >
.ii> ?
Dayii? B
,iiB C
EndiiD G
.iiG H
HouriiH L
,iiL M
$numiiN O
,iiO P
$numiiQ R
)iiR S
;iiS T
}iiU V
}jj 	
publicmm 
DateTimemm 
FirstMinuteStartmm (
{nn 	
getoo 
{oo 
returnoo 
newoo 
DateTimeoo %
(oo% &
Startoo& +
.oo+ ,
Yearoo, 0
,oo0 1
Startoo2 7
.oo7 8
Monthoo8 =
,oo= >
Startoo? D
.ooD E
DayooE H
,ooH I
StartooJ O
.ooO P
HourooP T
,ooT U
StartooV [
.oo[ \
Minuteoo\ b
,oob c
$numood e
,ooe f
$numoog h
)ooh i
;ooi j
}ook l
}pp 	
publicss 
DateTimess 
LastMinuteStartss '
{tt 	
getuu 
{uu 
returnuu 
newuu 
DateTimeuu %
(uu% &
Enduu& )
.uu) *
Yearuu* .
,uu. /
Enduu0 3
.uu3 4
Monthuu4 9
,uu9 :
Enduu; >
.uu> ?
Dayuu? B
,uuB C
EnduuD G
.uuG H
HouruuH L
,uuL M
EnduuN Q
.uuQ R
MinuteuuR X
,uuX Y
$numuuZ [
,uu[ \
$numuu] ^
)uu^ _
;uu_ `
}uua b
}vv 	
publicyy 
overrideyy 

ITimeRangeyy "
Copyyy# '
(yy' (
TimeSpanyy( 0
offsetyy1 7
)yy7 8
{zz 	
throw{{ 
new{{ !
NotSupportedException{{ +
({{+ ,
){{, -
;{{- .
}|| 	
	protected 
override 
string !
Format" (
(( )
ITimeFormatter) 7
	formatter8 A
)A B
{
ÄÄ 	
return
ÅÅ 
	formatter
ÅÅ 
.
ÅÅ 
GetCalendarPeriod
ÅÅ .
(
ÅÅ. /
	formatter
ÅÅ/ 8
.
ÅÅ8 9
GetDateTime
ÅÅ9 D
(
ÅÅD E
Start
ÅÅE J
)
ÅÅJ K
,
ÅÅK L
	formatter
ÅÅM V
.
ÅÅV W
GetDateTime
ÅÅW b
(
ÅÅb c
End
ÅÅc f
)
ÅÅf g
,
ÅÅg h
Duration
ÅÅi q
)
ÅÅq r
;
ÅÅr s
}
ÇÇ 	
	protected
ÖÖ 
override
ÖÖ 
bool
ÖÖ 
IsEqual
ÖÖ  '
(
ÖÖ' (
object
ÖÖ( .
obj
ÖÖ/ 2
)
ÖÖ2 3
{
ÜÜ 	
return
áá 
base
áá 
.
áá 
IsEqual
áá 
(
áá  
obj
áá  #
)
áá# $
&&
áá% '
HasSameData
áá( 3
(
áá3 4
obj
áá4 7
as
áá8 :
CalendarTimeRange
áá; L
)
ááL M
;
ááM N
}
àà 	
	protected
ãã 
override
ãã 
int
ãã 
ComputeHashCode
ãã .
(
ãã. /
)
ãã/ 0
{
åå 	
return
çç 
HashTool
çç 
.
çç 
ComputeHashCode
çç +
(
çç+ ,
base
çç, 0
.
çç0 1
ComputeHashCode
çç1 @
(
çç@ A
)
ççA B
,
ççB C
calendar
ççD L
)
ççL M
;
ççM N
}
éé 	
private
ëë 
bool
ëë 
HasSameData
ëë  
(
ëë  !
CalendarTimeRange
ëë! 2
comp
ëë3 7
)
ëë7 8
{
íí 	
return
ìì 
calendar
ìì 
.
ìì 
Equals
ìì "
(
ìì" #
comp
ìì# '
.
ìì' (
calendar
ìì( 0
)
ìì0 1
;
ìì1 2
}
îî 	
private
óó 
static
óó 
	TimeRange
óó  !
ToCalendarTimeRange
óó! 4
(
óó4 5
ITimePeriod
óó5 @
period
óóA G
,
óóG H
ITimePeriodMapper
óóI Z
mapper
óó[ a
)
óóa b
{
òò 	
DateTime
ôô 
mappedStart
ôô  
=
ôô! "
mapper
ôô# )
.
ôô) *
MapStart
ôô* 2
(
ôô2 3
period
ôô3 9
.
ôô9 :
Start
ôô: ?
)
ôô? @
;
ôô@ A
DateTime
öö 
	mappedEnd
öö 
=
öö  
mapper
öö! '
.
öö' (
MapEnd
öö( .
(
öö. /
period
öö/ 5
.
öö5 6
End
öö6 9
)
öö9 :
;
öö: ;
if
õõ 
(
õõ 
	mappedEnd
õõ 
<=
õõ 
mappedStart
õõ (
)
õõ( )
{
úú 
throw
ùù 
new
ùù #
NotSupportedException
ùù /
(
ùù/ 0
)
ùù0 1
;
ùù1 2
}
ûû 
return
üü 
new
üü 
	TimeRange
üü  
(
üü  !
mappedStart
üü! ,
,
üü, -
	mappedEnd
üü. 7
)
üü7 8
;
üü8 9
}
†† 	
private
§§ 
readonly
§§ 
ITimeCalendar
§§ &
calendar
§§' /
;
§§/ 0
}
¶¶ 
}®® ®ï
pF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\CalendarVisitor.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

abstract 
class 
CalendarVisitor )
<) *
TFilter* 1
,1 2
TContext3 ;
>; <
where 
TFilter 
: 
class 
, "
ICalendarVisitorFilter 5
where 
TContext 
: 
class 
, #
ICalendarVisitorContext  7
{ 
	protected 
CalendarVisitor !
(! "
TFilter" )
filter* 0
,0 1
ITimePeriod2 =
limits> D
,D E
SeekDirection 
seekDirection '
=( )
SeekDirection* 7
.7 8
Forward8 ?
,? @
ITimeCalendarA N
calendarO W
=X Y
nullZ ^
)^ _
{ 	
if 
( 
filter 
== 
null 
) 
{ 
throw 
new !
ArgumentNullException /
(/ 0
$str0 8
)8 9
;9 :
} 
if 
( 
limits 
== 
null 
) 
{ 
throw 
new !
ArgumentNullException /
(/ 0
$str0 8
)8 9
;9 :
} 
this   
.   
filter   
=   
filter    
;    !
this!! 
.!! 
limits!! 
=!! 
limits!!  
;!!  !
this"" 
."" 
seekDirection"" 
=""  
seekDirection""! .
;"". /
this## 
.## 
calendar## 
=## 
calendar## $
;##$ %
}$$ 	
public'' 
TFilter'' 
Filter'' 
{(( 	
get)) 
{)) 
return)) 
filter)) 
;))  
}))! "
}** 	
public-- 
ITimePeriod-- 
Limits-- !
{.. 	
get// 
{// 
return// 
limits// 
;//  
}//! "
}00 	
public33 
SeekDirection33 
SeekDirection33 *
{44 	
get55 
{55 
return55 
seekDirection55 &
;55& '
}55( )
}66 	
public99 
ITimeCalendar99 
Calendar99 %
{:: 	
get;; 
{;; 
return;; 
calendar;; !
;;;! "
};;# $
}<< 	
	protected?? 
void?? 
StartPeriodVisit?? '
(??' (
TContext??( 0
context??1 8
=??9 :
null??; ?
)??? @
{@@ 	
StartPeriodVisitAA 
(AA 
limitsAA #
,AA# $
contextAA% ,
)AA, -
;AA- .
}BB 	
	protectedEE 
voidEE 
StartPeriodVisitEE '
(EE' (
ITimePeriodEE( 3
periodEE4 :
,EE: ;
TContextEE< D
contextEEE L
=EEM N
nullEEO S
)EES T
{FF 	
ifGG 
(GG 
periodGG 
==GG 
nullGG 
)GG 
{HH 
throwII 
newII !
ArgumentNullExceptionII /
(II/ 0
$strII0 8
)II8 9
;II9 :
}JJ 
ifKK 
(KK 
periodKK 
.KK 
IsMomentKK 
)KK  
{LL 
returnMM 
;MM 
}NN 
OnVisitStartPP 
(PP 
)PP 
;PP 
YearsRR 
yearsRR 
=RR 
calendarRR "
!=RR# %
nullRR& *
?RR+ ,
newSS 
YearsSS 
(SS 
periodSS  
.SS  !
StartSS! &
.SS& '
YearSS' +
,SS+ ,
periodSS- 3
.SS3 4
EndSS4 7
.SS7 8
YearSS8 <
-SS= >
periodSS? E
.SSE F
StartSSF K
.SSK L
YearSSL P
+SSQ R
$numSSS T
,SST U
calendarSSV ^
)SS^ _
:SS` a
newTT 
YearsTT 
(TT 
periodTT  
.TT  !
StartTT! &
.TT& '
YearTT' +
,TT+ ,
periodTT- 3
.TT3 4
EndTT4 7
.TT7 8
YearTT8 <
-TT= >
periodTT? E
.TTE F
StartTTF K
.TTK L
YearTTL P
+TTQ R
$numTTS T
)TTT U
;TTU V
ifUU 
(UU 
OnVisitYearsUU 
(UU 
yearsUU "
,UU" #
contextUU$ +
)UU+ ,
&&UU- /

EnterYearsUU0 :
(UU: ;
yearsUU; @
,UU@ A
contextUUB I
)UUI J
)UUJ K
{VV !
ITimePeriodCollectionWW %
yearsToVisitWW& 2
=WW3 4
yearsWW5 :
.WW: ;
GetYearsWW; C
(WWC D
)WWD E
;WWE F
ifXX 
(XX 
seekDirectionXX !
==XX" $
SeekDirectionXX% 2
.XX2 3
BackwardXX3 ;
)XX; <
{YY 
yearsToVisitZZ  
.ZZ  !
	SortByEndZZ! *
(ZZ* +
)ZZ+ ,
;ZZ, -
}[[ 
foreach\\ 
(\\ 
Year\\ 
year\\ "
in\\# %
yearsToVisit\\& 2
)\\2 3
{]] 
if^^ 
(^^ 
!^^ 
year^^ 
.^^ 
OverlapsWith^^ *
(^^* +
period^^+ 1
)^^1 2
||^^3 5
OnVisitYear^^6 A
(^^A B
year^^B F
,^^F G
context^^H O
)^^O P
==^^Q S
false^^T Y
)^^Y Z
{__ 
continue``  
;``  !
}aa 
ifdd 
(dd 
EnterMonthsdd #
(dd# $
yeardd$ (
,dd( )
contextdd* 1
)dd1 2
==dd3 5
falsedd6 ;
)dd; <
{ee 
continueff  
;ff  !
}gg !
ITimePeriodCollectionhh )
monthsToVisithh* 7
=hh8 9
yearhh: >
.hh> ?
	GetMonthshh? H
(hhH I
)hhI J
;hhJ K
ifii 
(ii 
seekDirectionii %
==ii& (
SeekDirectionii) 6
.ii6 7
Backwardii7 ?
)ii? @
{jj 
monthsToVisitkk %
.kk% &
	SortByEndkk& /
(kk/ 0
)kk0 1
;kk1 2
}ll 
foreachmm 
(mm 
Monthmm "
monthmm# (
inmm) +
monthsToVisitmm, 9
)mm9 :
{nn 
ifoo 
(oo 
!oo 
monthoo "
.oo" #
OverlapsWithoo# /
(oo/ 0
periodoo0 6
)oo6 7
||oo8 :
OnVisitMonthoo; G
(ooG H
monthooH M
,ooM N
contextooO V
)ooV W
==ooX Z
falseoo[ `
)oo` a
{pp 
continueqq $
;qq$ %
}rr 
ifuu 
(uu 
	EnterDaysuu %
(uu% &
monthuu& +
,uu+ ,
contextuu- 4
)uu4 5
==uu6 8
falseuu9 >
)uu> ?
{vv 
continueww $
;ww$ %
}xx !
ITimePeriodCollectionyy -
daysToVisityy. 9
=yy: ;
monthyy< A
.yyA B
GetDaysyyB I
(yyI J
)yyJ K
;yyK L
ifzz 
(zz 
seekDirectionzz )
==zz* ,
SeekDirectionzz- :
.zz: ;
Backwardzz; C
)zzC D
{{{ 
daysToVisit|| '
.||' (
	SortByEnd||( 1
(||1 2
)||2 3
;||3 4
}}} 
foreach~~ 
(~~  !
Day~~! $
day~~% (
in~~) +
daysToVisit~~, 7
)~~7 8
{ 
if
ÄÄ 
(
ÄÄ  
!
ÄÄ  !
day
ÄÄ! $
.
ÄÄ$ %
OverlapsWith
ÄÄ% 1
(
ÄÄ1 2
period
ÄÄ2 8
)
ÄÄ8 9
||
ÄÄ: <

OnVisitDay
ÄÄ= G
(
ÄÄG H
day
ÄÄH K
,
ÄÄK L
context
ÄÄM T
)
ÄÄT U
==
ÄÄV X
false
ÄÄY ^
)
ÄÄ^ _
{
ÅÅ 
continue
ÇÇ  (
;
ÇÇ( )
}
ÉÉ 
if
ÜÜ 
(
ÜÜ  

EnterHours
ÜÜ  *
(
ÜÜ* +
day
ÜÜ+ .
,
ÜÜ. /
context
ÜÜ0 7
)
ÜÜ7 8
==
ÜÜ9 ;
false
ÜÜ< A
)
ÜÜA B
{
áá 
continue
àà  (
;
àà( )
}
ââ #
ITimePeriodCollection
ää 1
hoursToVisit
ää2 >
=
ää? @
day
ääA D
.
ääD E
GetHours
ääE M
(
ääM N
)
ääN O
;
ääO P
if
ãã 
(
ãã  
seekDirection
ãã  -
==
ãã. 0
SeekDirection
ãã1 >
.
ãã> ?
Backward
ãã? G
)
ããG H
{
åå 
hoursToVisit
çç  ,
.
çç, -
	SortByEnd
çç- 6
(
çç6 7
)
çç7 8
;
çç8 9
}
éé 
foreach
èè #
(
èè$ %
Hour
èè% )
hour
èè* .
in
èè/ 1
hoursToVisit
èè2 >
)
èè> ?
{
êê 
if
ëë  "
(
ëë# $
!
ëë$ %
hour
ëë% )
.
ëë) *
OverlapsWith
ëë* 6
(
ëë6 7
period
ëë7 =
)
ëë= >
||
ëë? A
OnVisitHour
ëëB M
(
ëëM N
hour
ëëN R
,
ëëR S
context
ëëT [
)
ëë[ \
==
ëë] _
false
ëë` e
)
ëëe f
{
íí  !
continue
îî$ ,
;
îî, -
}
ññ  !
}
óó 
}
òò 
}
ôô 
}
öö 
}
õõ 

OnVisitEnd
ùù 
(
ùù 
)
ùù 
;
ùù 
}
ûû 	
	protected
°° 
Year
°° 
StartYearVisit
°° %
(
°°% &
Year
°°& *
year
°°+ /
,
°°/ 0
TContext
°°1 9
context
°°: A
=
°°B C
null
°°D H
,
°°H I
SeekDirection
°°J W
?
°°W X
visitDirection
°°Y g
=
°°h i
null
°°j n
)
°°n o
{
¢¢ 	
if
££ 
(
££ 
year
££ 
==
££ 
null
££ 
)
££ 
{
§§ 
throw
•• 
new
•• #
ArgumentNullException
•• /
(
••/ 0
$str
••0 6
)
••6 7
;
••7 8
}
¶¶ 
if
®® 
(
®® 
visitDirection
®® 
==
®® !
null
®®" &
)
®®& '
{
©© 
visitDirection
™™ 
=
™™  
SeekDirection
™™! .
;
™™. /
}
´´ 
OnVisitStart
≠≠ 
(
≠≠ 
)
≠≠ 
;
≠≠ 
Year
∞∞ 
lastVisited
∞∞ 
=
∞∞ 
null
∞∞ #
;
∞∞# $
DateTime
±± 
minStart
±± 
=
±± 
DateTime
±±  (
.
±±( )
MinValue
±±) 1
;
±±1 2
DateTime
≤≤ 
maxEnd
≤≤ 
=
≤≤ 
DateTime
≤≤ &
.
≤≤& '
MaxValue
≤≤' /
.
≤≤/ 0
AddYears
≤≤0 8
(
≤≤8 9
-
≤≤9 :
$num
≤≤: ;
)
≤≤; <
;
≤≤< =
while
≥≥ 
(
≥≥ 
year
≥≥ 
.
≥≥ 
Start
≥≥ 
>
≥≥ 
minStart
≥≥  (
&&
≥≥) +
year
≥≥, 0
.
≥≥0 1
End
≥≥1 4
<
≥≥5 6
maxEnd
≥≥7 =
)
≥≥= >
{
¥¥ 
if
µµ 
(
µµ 
OnVisitYear
µµ 
(
µµ  
year
µµ  $
,
µµ$ %
context
µµ& -
)
µµ- .
==
µµ/ 1
false
µµ2 7
)
µµ7 8
{
∂∂ 
lastVisited
∑∑ 
=
∑∑  !
year
∑∑" &
;
∑∑& '
break
∏∏ 
;
∏∏ 
}
ππ 
switch
∫∫ 
(
∫∫ 
visitDirection
∫∫ &
)
∫∫& '
{
ªª 
case
ºº 
SeekDirection
ºº &
.
ºº& '
Forward
ºº' .
:
ºº. /
year
ΩΩ 
=
ΩΩ 
year
ΩΩ #
.
ΩΩ# $
GetNextYear
ΩΩ$ /
(
ΩΩ/ 0
)
ΩΩ0 1
;
ΩΩ1 2
break
ææ 
;
ææ 
case
øø 
SeekDirection
øø &
.
øø& '
Backward
øø' /
:
øø/ 0
year
¿¿ 
=
¿¿ 
year
¿¿ #
.
¿¿# $
GetPreviousYear
¿¿$ 3
(
¿¿3 4
)
¿¿4 5
;
¿¿5 6
break
¡¡ 
;
¡¡ 
}
¬¬ 
}
√√ 

OnVisitEnd
≈≈ 
(
≈≈ 
)
≈≈ 
;
≈≈ 
return
«« 
lastVisited
«« 
;
«« 
}
»» 	
	protected
ÀÀ 
Month
ÀÀ 
StartMonthVisit
ÀÀ '
(
ÀÀ' (
Month
ÀÀ( -
month
ÀÀ. 3
,
ÀÀ3 4
TContext
ÀÀ5 =
context
ÀÀ> E
=
ÀÀF G
null
ÀÀH L
,
ÀÀL M
SeekDirection
ÀÀN [
?
ÀÀ[ \
visitDirection
ÀÀ] k
=
ÀÀl m
null
ÀÀn r
)
ÀÀr s
{
ÃÃ 	
if
ÕÕ 
(
ÕÕ 
month
ÕÕ 
==
ÕÕ 
null
ÕÕ 
)
ÕÕ 
{
ŒŒ 
throw
œœ 
new
œœ #
ArgumentNullException
œœ /
(
œœ/ 0
$str
œœ0 7
)
œœ7 8
;
œœ8 9
}
–– 
if
““ 
(
““ 
visitDirection
““ 
==
““ !
null
““" &
)
““& '
{
”” 
visitDirection
‘‘ 
=
‘‘  
SeekDirection
‘‘! .
;
‘‘. /
}
’’ 
OnVisitStart
◊◊ 
(
◊◊ 
)
◊◊ 
;
◊◊ 
Month
⁄⁄ 
lastVisited
⁄⁄ 
=
⁄⁄ 
null
⁄⁄  $
;
⁄⁄$ %
DateTime
€€ 
minStart
€€ 
=
€€ 
DateTime
€€  (
.
€€( )
MinValue
€€) 1
;
€€1 2
DateTime
‹‹ 
maxEnd
‹‹ 
=
‹‹ 
DateTime
‹‹ &
.
‹‹& '
MaxValue
‹‹' /
.
‹‹/ 0
	AddMonths
‹‹0 9
(
‹‹9 :
-
‹‹: ;
$num
‹‹; <
)
‹‹< =
;
‹‹= >
while
›› 
(
›› 
month
›› 
.
›› 
Start
›› 
>
››  
minStart
››! )
&&
››* ,
month
››- 2
.
››2 3
End
››3 6
<
››7 8
maxEnd
››9 ?
)
››? @
{
ﬁﬁ 
if
ﬂﬂ 
(
ﬂﬂ 
OnVisitMonth
ﬂﬂ  
(
ﬂﬂ  !
month
ﬂﬂ! &
,
ﬂﬂ& '
context
ﬂﬂ( /
)
ﬂﬂ/ 0
==
ﬂﬂ1 3
false
ﬂﬂ4 9
)
ﬂﬂ9 :
{
‡‡ 
lastVisited
·· 
=
··  !
month
··" '
;
··' (
break
‚‚ 
;
‚‚ 
}
„„ 
switch
‰‰ 
(
‰‰ 
visitDirection
‰‰ &
)
‰‰& '
{
ÂÂ 
case
ÊÊ 
SeekDirection
ÊÊ &
.
ÊÊ& '
Forward
ÊÊ' .
:
ÊÊ. /
month
ÁÁ 
=
ÁÁ 
month
ÁÁ  %
.
ÁÁ% &
GetNextMonth
ÁÁ& 2
(
ÁÁ2 3
)
ÁÁ3 4
;
ÁÁ4 5
break
ËË 
;
ËË 
case
ÈÈ 
SeekDirection
ÈÈ &
.
ÈÈ& '
Backward
ÈÈ' /
:
ÈÈ/ 0
month
ÍÍ 
=
ÍÍ 
month
ÍÍ  %
.
ÍÍ% &
GetPreviousMonth
ÍÍ& 6
(
ÍÍ6 7
)
ÍÍ7 8
;
ÍÍ8 9
break
ÎÎ 
;
ÎÎ 
}
ÏÏ 
}
ÌÌ 

OnVisitEnd
ÔÔ 
(
ÔÔ 
)
ÔÔ 
;
ÔÔ 
return
ÒÒ 
lastVisited
ÒÒ 
;
ÒÒ 
}
ÚÚ 	
	protected
ıı 
Day
ıı 
StartDayVisit
ıı #
(
ıı# $
Day
ıı$ '
day
ıı( +
,
ıı+ ,
TContext
ıı- 5
context
ıı6 =
=
ıı> ?
null
ıı@ D
,
ııD E
SeekDirection
ııF S
?
ııS T
visitDirection
ııU c
=
ııd e
null
ııf j
)
ııj k
{
ˆˆ 	
if
˜˜ 
(
˜˜ 
day
˜˜ 
==
˜˜ 
null
˜˜ 
)
˜˜ 
{
¯¯ 
throw
˘˘ 
new
˘˘ #
ArgumentNullException
˘˘ /
(
˘˘/ 0
$str
˘˘0 5
)
˘˘5 6
;
˘˘6 7
}
˙˙ 
if
¸¸ 
(
¸¸ 
visitDirection
¸¸ 
==
¸¸ !
null
¸¸" &
)
¸¸& '
{
˝˝ 
visitDirection
˛˛ 
=
˛˛  
SeekDirection
˛˛! .
;
˛˛. /
}
ˇˇ 
OnVisitStart
ÅÅ 
(
ÅÅ 
)
ÅÅ 
;
ÅÅ 
Day
ÑÑ 
lastVisited
ÑÑ 
=
ÑÑ 
null
ÑÑ "
;
ÑÑ" #
DateTime
ÖÖ 
minStart
ÖÖ 
=
ÖÖ 
DateTime
ÖÖ  (
.
ÖÖ( )
MinValue
ÖÖ) 1
;
ÖÖ1 2
DateTime
ÜÜ 
maxEnd
ÜÜ 
=
ÜÜ 
DateTime
ÜÜ &
.
ÜÜ& '
MaxValue
ÜÜ' /
.
ÜÜ/ 0
AddDays
ÜÜ0 7
(
ÜÜ7 8
-
ÜÜ8 9
$num
ÜÜ9 :
)
ÜÜ: ;
;
ÜÜ; <
while
áá 
(
áá 
day
áá 
.
áá 
Start
áá 
>
áá 
minStart
áá '
&&
áá( *
day
áá+ .
.
áá. /
End
áá/ 2
<
áá3 4
maxEnd
áá5 ;
)
áá; <
{
àà 
if
ââ 
(
ââ 

OnVisitDay
ââ 
(
ââ 
day
ââ "
,
ââ" #
context
ââ$ +
)
ââ+ ,
==
ââ- /
false
ââ0 5
)
ââ5 6
{
ää 
lastVisited
ãã 
=
ãã  !
day
ãã" %
;
ãã% &
break
åå 
;
åå 
}
çç 
switch
éé 
(
éé 
visitDirection
éé &
)
éé& '
{
èè 
case
êê 
SeekDirection
êê &
.
êê& '
Forward
êê' .
:
êê. /
day
ëë 
=
ëë 
day
ëë !
.
ëë! "

GetNextDay
ëë" ,
(
ëë, -
)
ëë- .
;
ëë. /
break
íí 
;
íí 
case
ìì 
SeekDirection
ìì &
.
ìì& '
Backward
ìì' /
:
ìì/ 0
day
îî 
=
îî 
day
îî !
.
îî! "
GetPreviousDay
îî" 0
(
îî0 1
)
îî1 2
;
îî2 3
break
ïï 
;
ïï 
}
ññ 
}
óó 

OnVisitEnd
ôô 
(
ôô 
)
ôô 
;
ôô 
return
õõ 
lastVisited
õõ 
;
õõ 
}
úú 	
	protected
üü 
Hour
üü 
StartHourVisit
üü %
(
üü% &
Hour
üü& *
hour
üü+ /
,
üü/ 0
TContext
üü1 9
context
üü: A
=
üüB C
null
üüD H
,
üüH I
SeekDirection
üüJ W
?
üüW X
visitDirection
üüY g
=
üüh i
null
üüj n
)
üün o
{
†† 	
if
°° 
(
°° 
hour
°° 
==
°° 
null
°° 
)
°° 
{
¢¢ 
throw
££ 
new
££ #
ArgumentNullException
££ /
(
££/ 0
$str
££0 6
)
££6 7
;
££7 8
}
§§ 
if
¶¶ 
(
¶¶ 
visitDirection
¶¶ 
==
¶¶ !
null
¶¶" &
)
¶¶& '
{
ßß 
visitDirection
®® 
=
®®  
SeekDirection
®®! .
;
®®. /
}
©© 
OnVisitStart
´´ 
(
´´ 
)
´´ 
;
´´ 
Hour
ÆÆ 
lastVisited
ÆÆ 
=
ÆÆ 
null
ÆÆ #
;
ÆÆ# $
DateTime
ØØ 
minStart
ØØ 
=
ØØ 
DateTime
ØØ  (
.
ØØ( )
MinValue
ØØ) 1
;
ØØ1 2
DateTime
∞∞ 
maxEnd
∞∞ 
=
∞∞ 
DateTime
∞∞ &
.
∞∞& '
MaxValue
∞∞' /
.
∞∞/ 0
AddHours
∞∞0 8
(
∞∞8 9
-
∞∞9 :
$num
∞∞: ;
)
∞∞; <
;
∞∞< =
while
±± 
(
±± 
hour
±± 
.
±± 
Start
±± 
>
±± 
minStart
±±  (
&&
±±) +
hour
±±, 0
.
±±0 1
End
±±1 4
<
±±5 6
maxEnd
±±7 =
)
±±= >
{
≤≤ 
if
≥≥ 
(
≥≥ 
OnVisitHour
≥≥ 
(
≥≥  
hour
≥≥  $
,
≥≥$ %
context
≥≥& -
)
≥≥- .
==
≥≥/ 1
false
≥≥2 7
)
≥≥7 8
{
¥¥ 
lastVisited
µµ 
=
µµ  !
hour
µµ" &
;
µµ& '
break
∂∂ 
;
∂∂ 
}
∑∑ 
switch
∏∏ 
(
∏∏ 
visitDirection
∏∏ &
)
∏∏& '
{
ππ 
case
∫∫ 
SeekDirection
∫∫ &
.
∫∫& '
Forward
∫∫' .
:
∫∫. /
hour
ªª 
=
ªª 
hour
ªª #
.
ªª# $
GetNextHour
ªª$ /
(
ªª/ 0
)
ªª0 1
;
ªª1 2
break
ºº 
;
ºº 
case
ΩΩ 
SeekDirection
ΩΩ &
.
ΩΩ& '
Backward
ΩΩ' /
:
ΩΩ/ 0
hour
ææ 
=
ææ 
hour
ææ #
.
ææ# $
GetPreviousHour
ææ$ 3
(
ææ3 4
)
ææ4 5
;
ææ5 6
break
øø 
;
øø 
}
¿¿ 
}
¡¡ 

OnVisitEnd
√√ 
(
√√ 
)
√√ 
;
√√ 
return
≈≈ 
lastVisited
≈≈ 
;
≈≈ 
}
∆∆ 	
	protected
…… 
virtual
…… 
void
…… 
OnVisitStart
…… +
(
……+ ,
)
……, -
{
   	
}
ÀÀ 	
	protected
ŒŒ 
virtual
ŒŒ 
bool
ŒŒ 
CheckLimits
ŒŒ *
(
ŒŒ* +
ITimePeriod
ŒŒ+ 6
test
ŒŒ7 ;
)
ŒŒ; <
{
œœ 	
return
–– 
limits
–– 
.
–– 
	HasInside
–– #
(
––# $
test
––$ (
)
––( )
;
––) *
}
—— 	
	protected
‘‘ 
virtual
‘‘ 
bool
‘‘ !
CheckExcludePeriods
‘‘ 2
(
‘‘2 3
ITimePeriod
‘‘3 >
test
‘‘? C
)
‘‘C D
{
’’ 	
if
÷÷ 
(
÷÷ 
filter
÷÷ 
.
÷÷ 
ExcludePeriods
÷÷ %
.
÷÷% &
Count
÷÷& +
==
÷÷, .
$num
÷÷/ 0
)
÷÷0 1
{
◊◊ 
return
ÿÿ 
true
ÿÿ 
;
ÿÿ 
}
ŸŸ 
return
⁄⁄ 
filter
⁄⁄ 
.
⁄⁄ 
ExcludePeriods
⁄⁄ (
.
⁄⁄( )
OverlapPeriods
⁄⁄) 7
(
⁄⁄7 8
test
⁄⁄8 <
)
⁄⁄< =
.
⁄⁄= >
Count
⁄⁄> C
==
⁄⁄D F
$num
⁄⁄G H
;
⁄⁄H I
}
€€ 	
	protected
ﬁﬁ 
virtual
ﬁﬁ 
bool
ﬁﬁ 

EnterYears
ﬁﬁ )
(
ﬁﬁ) *
Years
ﬁﬁ* /
years
ﬁﬁ0 5
,
ﬁﬁ5 6
TContext
ﬁﬁ7 ?
context
ﬁﬁ@ G
)
ﬁﬁG H
{
ﬂﬂ 	
return
‡‡ 
true
‡‡ 
;
‡‡ 
}
·· 	
	protected
‰‰ 
virtual
‰‰ 
bool
‰‰ 
EnterMonths
‰‰ *
(
‰‰* +
Year
‰‰+ /
year
‰‰0 4
,
‰‰4 5
TContext
‰‰6 >
context
‰‰? F
)
‰‰F G
{
ÂÂ 	
return
ÊÊ 
true
ÊÊ 
;
ÊÊ 
}
ÁÁ 	
	protected
ÍÍ 
virtual
ÍÍ 
bool
ÍÍ 
	EnterDays
ÍÍ (
(
ÍÍ( )
Month
ÍÍ) .
month
ÍÍ/ 4
,
ÍÍ4 5
TContext
ÍÍ6 >
context
ÍÍ? F
)
ÍÍF G
{
ÎÎ 	
return
ÏÏ 
true
ÏÏ 
;
ÏÏ 
}
ÌÌ 	
	protected
 
virtual
 
bool
 

EnterHours
 )
(
) *
Day
* -
day
. 1
,
1 2
TContext
3 ;
context
< C
)
C D
{
ÒÒ 	
return
ÚÚ 
true
ÚÚ 
;
ÚÚ 
}
ÛÛ 	
	protected
ˆˆ 
virtual
ˆˆ 
bool
ˆˆ 
OnVisitYears
ˆˆ +
(
ˆˆ+ ,
Years
ˆˆ, 1
years
ˆˆ2 7
,
ˆˆ7 8
TContext
ˆˆ9 A
context
ˆˆB I
)
ˆˆI J
{
˜˜ 	
return
¯¯ 
true
¯¯ 
;
¯¯ 
}
˘˘ 	
	protected
¸¸ 
virtual
¸¸ 
bool
¸¸ 
OnVisitYear
¸¸ *
(
¸¸* +
Year
¸¸+ /
year
¸¸0 4
,
¸¸4 5
TContext
¸¸6 >
context
¸¸? F
)
¸¸F G
{
˝˝ 	
return
˛˛ 
true
˛˛ 
;
˛˛ 
}
ˇˇ 	
	protected
ÇÇ 
virtual
ÇÇ 
bool
ÇÇ 
OnVisitMonth
ÇÇ +
(
ÇÇ+ ,
Month
ÇÇ, 1
month
ÇÇ2 7
,
ÇÇ7 8
TContext
ÇÇ9 A
context
ÇÇB I
)
ÇÇI J
{
ÉÉ 	
return
ÑÑ 
true
ÑÑ 
;
ÑÑ 
}
ÖÖ 	
	protected
àà 
virtual
àà 
bool
àà 

OnVisitDay
àà )
(
àà) *
Day
àà* -
day
àà. 1
,
àà1 2
TContext
àà3 ;
context
àà< C
)
ààC D
{
ââ 	
return
ää 
true
ää 
;
ää 
}
ãã 	
	protected
éé 
virtual
éé 
bool
éé 
OnVisitHour
éé *
(
éé* +
Hour
éé+ /
hour
éé0 4
,
éé4 5
TContext
éé6 >
context
éé? F
)
ééF G
{
èè 	
return
êê 
true
êê 
;
êê 
}
ëë 	
	protected
îî 
virtual
îî 
bool
îî 
IsMatchingYear
îî -
(
îî- .
Year
îî. 2
year
îî3 7
,
îî7 8
TContext
îî9 A
context
îîB I
)
îîI J
{
ïï 	
if
óó 
(
óó 
filter
óó 
.
óó 
Years
óó 
.
óó 
Count
óó "
>
óó# $
$num
óó% &
&&
óó' )
!
óó* +
filter
óó+ 1
.
óó1 2
Years
óó2 7
.
óó7 8
Contains
óó8 @
(
óó@ A
year
óóA E
.
óóE F
	YearValue
óóF O
)
óóO P
)
óóP Q
{
òò 
return
ôô 
false
ôô 
;
ôô 
}
öö 
return
úú !
CheckExcludePeriods
úú &
(
úú& '
year
úú' +
)
úú+ ,
;
úú, -
}
ùù 	
	protected
†† 
virtual
†† 
bool
†† 
IsMatchingMonth
†† .
(
††. /
Month
††/ 4
month
††5 :
,
††: ;
TContext
††< D
context
††E L
)
††L M
{
°° 	
if
££ 
(
££ 
filter
££ 
.
££ 
Years
££ 
.
££ 
Count
££ "
>
££# $
$num
££% &
&&
££' )
!
££* +
filter
££+ 1
.
££1 2
Years
££2 7
.
££7 8
Contains
££8 @
(
££@ A
month
££A F
.
££F G
Year
££G K
)
££K L
)
££L M
{
§§ 
return
•• 
false
•• 
;
•• 
}
¶¶ 
if
©© 
(
©© 
filter
©© 
.
©© 
Months
©© 
.
©© 
Count
©© #
>
©©$ %
$num
©©& '
&&
©©( *
!
©©+ ,
filter
©©, 2
.
©©2 3
Months
©©3 9
.
©©9 :
Contains
©©: B
(
©©B C
month
©©C H
.
©©H I
	YearMonth
©©I R
)
©©R S
)
©©S T
{
™™ 
return
´´ 
false
´´ 
;
´´ 
}
¨¨ 
return
ÆÆ !
CheckExcludePeriods
ÆÆ &
(
ÆÆ& '
month
ÆÆ' ,
)
ÆÆ, -
;
ÆÆ- .
}
ØØ 	
	protected
≤≤ 
virtual
≤≤ 
bool
≤≤ 
IsMatchingDay
≤≤ ,
(
≤≤, -
Day
≤≤- 0
day
≤≤1 4
,
≤≤4 5
TContext
≤≤6 >
context
≤≤? F
)
≤≤F G
{
≥≥ 	
if
µµ 
(
µµ 
filter
µµ 
.
µµ 
Years
µµ 
.
µµ 
Count
µµ "
>
µµ# $
$num
µµ% &
&&
µµ' )
!
µµ* +
filter
µµ+ 1
.
µµ1 2
Years
µµ2 7
.
µµ7 8
Contains
µµ8 @
(
µµ@ A
day
µµA D
.
µµD E
Year
µµE I
)
µµI J
)
µµJ K
{
∂∂ 
return
∑∑ 
false
∑∑ 
;
∑∑ 
}
∏∏ 
if
ªª 
(
ªª 
filter
ªª 
.
ªª 
Months
ªª 
.
ªª 
Count
ªª #
>
ªª$ %
$num
ªª& '
&&
ªª( *
!
ªª+ ,
filter
ªª, 2
.
ªª2 3
Months
ªª3 9
.
ªª9 :
Contains
ªª: B
(
ªªB C
(
ªªC D
	YearMonth
ªªD M
)
ªªM N
day
ªªN Q
.
ªªQ R
Month
ªªR W
)
ªªW X
)
ªªX Y
{
ºº 
return
ΩΩ 
false
ΩΩ 
;
ΩΩ 
}
ææ 
if
¡¡ 
(
¡¡ 
filter
¡¡ 
.
¡¡ 
Days
¡¡ 
.
¡¡ 
Count
¡¡ !
>
¡¡" #
$num
¡¡$ %
&&
¡¡& (
!
¡¡) *
filter
¡¡* 0
.
¡¡0 1
Days
¡¡1 5
.
¡¡5 6
Contains
¡¡6 >
(
¡¡> ?
day
¡¡? B
.
¡¡B C
DayValue
¡¡C K
)
¡¡K L
)
¡¡L M
{
¬¬ 
return
√√ 
false
√√ 
;
√√ 
}
ƒƒ 
if
«« 
(
«« 
filter
«« 
.
«« 
WeekDays
«« 
.
««  
Count
««  %
>
««& '
$num
««( )
&&
««* ,
!
««- .
filter
««. 4
.
««4 5
WeekDays
««5 =
.
««= >
Contains
««> F
(
««F G
day
««G J
.
««J K
	DayOfWeek
««K T
)
««T U
)
««U V
{
»» 
return
…… 
false
…… 
;
…… 
}
   
return
ÃÃ !
CheckExcludePeriods
ÃÃ &
(
ÃÃ& '
day
ÃÃ' *
)
ÃÃ* +
;
ÃÃ+ ,
}
ÕÕ 	
	protected
–– 
virtual
–– 
bool
–– 
IsMatchingHour
–– -
(
––- .
Hour
––. 2
hour
––3 7
,
––7 8
TContext
––9 A
context
––B I
)
––I J
{
—— 	
if
”” 
(
”” 
filter
”” 
.
”” 
Years
”” 
.
”” 
Count
”” "
>
””# $
$num
””% &
&&
””' )
!
””* +
filter
””+ 1
.
””1 2
Years
””2 7
.
””7 8
Contains
””8 @
(
””@ A
hour
””A E
.
””E F
Year
””F J
)
””J K
)
””K L
{
‘‘ 
return
’’ 
false
’’ 
;
’’ 
}
÷÷ 
if
ŸŸ 
(
ŸŸ 
filter
ŸŸ 
.
ŸŸ 
Months
ŸŸ 
.
ŸŸ 
Count
ŸŸ #
>
ŸŸ$ %
$num
ŸŸ& '
&&
ŸŸ( *
!
ŸŸ+ ,
filter
ŸŸ, 2
.
ŸŸ2 3
Months
ŸŸ3 9
.
ŸŸ9 :
Contains
ŸŸ: B
(
ŸŸB C
(
ŸŸC D
	YearMonth
ŸŸD M
)
ŸŸM N
hour
ŸŸN R
.
ŸŸR S
Month
ŸŸS X
)
ŸŸX Y
)
ŸŸY Z
{
⁄⁄ 
return
€€ 
false
€€ 
;
€€ 
}
‹‹ 
if
ﬂﬂ 
(
ﬂﬂ 
filter
ﬂﬂ 
.
ﬂﬂ 
Days
ﬂﬂ 
.
ﬂﬂ 
Count
ﬂﬂ !
>
ﬂﬂ" #
$num
ﬂﬂ$ %
&&
ﬂﬂ& (
!
ﬂﬂ) *
filter
ﬂﬂ* 0
.
ﬂﬂ0 1
Days
ﬂﬂ1 5
.
ﬂﬂ5 6
Contains
ﬂﬂ6 >
(
ﬂﬂ> ?
hour
ﬂﬂ? C
.
ﬂﬂC D
Day
ﬂﬂD G
)
ﬂﬂG H
)
ﬂﬂH I
{
‡‡ 
return
·· 
false
·· 
;
·· 
}
‚‚ 
if
ÂÂ 
(
ÂÂ 
filter
ÂÂ 
.
ÂÂ 
WeekDays
ÂÂ 
.
ÂÂ  
Count
ÂÂ  %
>
ÂÂ& '
$num
ÂÂ( )
&&
ÂÂ* ,
!
ÂÂ- .
filter
ÂÂ. 4
.
ÂÂ4 5
WeekDays
ÂÂ5 =
.
ÂÂ= >
Contains
ÂÂ> F
(
ÂÂF G
hour
ÂÂG K
.
ÂÂK L
Start
ÂÂL Q
.
ÂÂQ R
	DayOfWeek
ÂÂR [
)
ÂÂ[ \
)
ÂÂ\ ]
{
ÊÊ 
return
ÁÁ 
false
ÁÁ 
;
ÁÁ 
}
ËË 
if
ÎÎ 
(
ÎÎ 
filter
ÎÎ 
.
ÎÎ 
Hours
ÎÎ 
.
ÎÎ 
Count
ÎÎ "
>
ÎÎ# $
$num
ÎÎ% &
&&
ÎÎ' )
!
ÎÎ* +
filter
ÎÎ+ 1
.
ÎÎ1 2
Hours
ÎÎ2 7
.
ÎÎ7 8
Contains
ÎÎ8 @
(
ÎÎ@ A
hour
ÎÎA E
.
ÎÎE F
	HourValue
ÎÎF O
)
ÎÎO P
)
ÎÎP Q
{
ÏÏ 
return
ÌÌ 
false
ÌÌ 
;
ÌÌ 
}
ÓÓ 
return
 !
CheckExcludePeriods
 &
(
& '
hour
' +
)
+ ,
;
, -
}
ÒÒ 	
	protected
ÙÙ 
virtual
ÙÙ 
void
ÙÙ 

OnVisitEnd
ÙÙ )
(
ÙÙ) *
)
ÙÙ* +
{
ıı 	
}
ˆˆ 	
private
˙˙ 
readonly
˙˙ 
TFilter
˙˙  
filter
˙˙! '
;
˙˙' (
private
˚˚ 
readonly
˚˚ 
ITimePeriod
˚˚ $
limits
˚˚% +
;
˚˚+ ,
private
¸¸ 
readonly
¸¸ 
SeekDirection
¸¸ &
seekDirection
¸¸' 4
;
¸¸4 5
private
˝˝ 
readonly
˝˝ 
ITimeCalendar
˝˝ &
calendar
˝˝' /
;
˝˝/ 0
}
ˇˇ 
}ÅÅ ∂*
vF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\CalendarVisitorFilter.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

class !
CalendarVisitorFilter &
:' ("
ICalendarVisitorFilter) ?
{ 
public 
virtual 
void 
Clear !
(! "
)" #
{ 	
years 
. 
Clear 
( 
) 
; 
months 
. 
Clear 
( 
) 
; 
days 
. 
Clear 
( 
) 
; 
weekDays 
. 
Clear 
( 
) 
; 
hours 
. 
Clear 
( 
) 
; 
} 	
public !
ITimePeriodCollection $
ExcludePeriods% 3
{ 	
get 
{ 
return 
excludePeriods '
;' (
}) *
} 	
public"" 
IList"" 
<"" 
int"" 
>"" 
Years"" 
{## 	
get$$ 
{$$ 
return$$ 
years$$ 
;$$ 
}$$  !
}%% 	
public(( 
IList(( 
<(( 
	YearMonth(( 
>(( 
Months((  &
{)) 	
get** 
{** 
return** 
months** 
;**  
}**! "
}++ 	
public.. 
IList.. 
<.. 
int.. 
>.. 
Days.. 
{// 	
get00 
{00 
return00 
days00 
;00 
}00  
}11 	
public44 
IList44 
<44 
	DayOfWeek44 
>44 
WeekDays44  (
{55 	
get66 
{66 
return66 
weekDays66 !
;66! "
}66# $
}77 	
public:: 
IList:: 
<:: 
int:: 
>:: 
Hours:: 
{;; 	
get<< 
{<< 
return<< 
hours<< 
;<< 
}<<  !
}== 	
public@@ 
void@@ 
AddWorkingWeekDays@@ &
(@@& '
)@@' (
{AA 	
weekDaysBB 
.BB 
AddBB 
(BB 
	DayOfWeekBB "
.BB" #
MondayBB# )
)BB) *
;BB* +
weekDaysCC 
.CC 
AddCC 
(CC 
	DayOfWeekCC "
.CC" #
TuesdayCC# *
)CC* +
;CC+ ,
weekDaysDD 
.DD 
AddDD 
(DD 
	DayOfWeekDD "
.DD" #
	WednesdayDD# ,
)DD, -
;DD- .
weekDaysEE 
.EE 
AddEE 
(EE 
	DayOfWeekEE "
.EE" #
ThursdayEE# +
)EE+ ,
;EE, -
weekDaysFF 
.FF 
AddFF 
(FF 
	DayOfWeekFF "
.FF" #
FridayFF# )
)FF) *
;FF* +
}GG 	
publicJJ 
voidJJ 
AddWeekendWeekDaysJJ &
(JJ& '
)JJ' (
{KK 	
weekDaysLL 
.LL 
AddLL 
(LL 
	DayOfWeekLL "
.LL" #
SaturdayLL# +
)LL+ ,
;LL, -
weekDaysMM 
.MM 
AddMM 
(MM 
	DayOfWeekMM "
.MM" #
SundayMM# )
)MM) *
;MM* +
}NN 	
privateRR 
readonlyRR  
TimePeriodCollectionRR -
excludePeriodsRR. <
=RR= >
newRR? B 
TimePeriodCollectionRRC W
(RRW X
)RRX Y
;RRY Z
privateSS 
readonlySS 
ListSS 
<SS 
intSS !
>SS! "
yearsSS# (
=SS) *
newSS+ .
ListSS/ 3
<SS3 4
intSS4 7
>SS7 8
(SS8 9
)SS9 :
;SS: ;
privateTT 
readonlyTT 
ListTT 
<TT 
	YearMonthTT '
>TT' (
monthsTT) /
=TT0 1
newTT2 5
ListTT6 :
<TT: ;
	YearMonthTT; D
>TTD E
(TTE F
)TTF G
;TTG H
privateUU 
readonlyUU 
ListUU 
<UU 
intUU !
>UU! "
daysUU# '
=UU( )
newUU* -
ListUU. 2
<UU2 3
intUU3 6
>UU6 7
(UU7 8
)UU8 9
;UU9 :
privateVV 
readonlyVV 
ListVV 
<VV 
	DayOfWeekVV '
>VV' (
weekDaysVV) 1
=VV2 3
newVV4 7
ListVV8 <
<VV< =
	DayOfWeekVV= F
>VVF G
(VVG H
)VVH I
;VVI J
privateWW 
readonlyWW 
ListWW 
<WW 
intWW !
>WW! "
hoursWW# (
=WW) *
newWW+ .
ListWW/ 3
<WW3 4
intWW4 7
>WW7 8
(WW8 9
)WW9 :
;WW: ;
}YY 
}[[ ∞
kF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\ClockProxy.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

static 
class 

ClockProxy "
{ 
public 
static 
IClock 
Clock "
{ 	
get 
{ 
if 
( 
clock 
== 
null !
)! "
{ 
lock 
( 
mutex 
)  
{ 
if 
( 
clock !
==" $
null% )
)) *
{ 
clock !
=" #
new$ '
SystemClock( 3
(3 4
)4 5
;5 6
} 
} 
} 
return   
clock   
;   
}!! 
set"" 
{## 
lock$$ 
($$ 
mutex$$ 
)$$ 
{%% 
clock&& 
=&& 
value&& !
;&&! "
}'' 
}(( 
})) 	
private-- 
static-- 
readonly-- 
object--  &
mutex--' ,
=--- .
new--/ 2
object--3 9
(--9 :
)--: ;
;--; <
private.. 
static.. 
volatile.. 
IClock..  &
clock..' ,
;.., -
}00 
}22 ™a
eF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\Date.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

struct 
Date 
: 
IComparable $
,$ %
IComparable& 1
<1 2
Date2 6
>6 7
,7 8

IEquatable9 C
<C D
DateD H
>H I
{ 
public 
Date 
( 
DateTime 
date !
)! "
{ 	
this 
. 
date 
= 
date 
. 
Date !
;! "
} 	
public 
Date 
( 
int 
year 
, 
int !
month" '
=( )
$num* +
,+ ,
int- 0
day1 4
=5 6
$num7 8
)8 9
{ 	
if 
( 
year 
< 
DateTime 
.  
MinValue  (
.( )
Year) -
||. 0
year1 5
>6 7
DateTime8 @
.@ A
MaxValueA I
.I J
YearJ N
)N O
{ 
throw 
new '
ArgumentOutOfRangeException 5
(5 6
$str6 <
)< =
;= >
} 
if 
( 
month 
<= 
$num 
|| 
month #
>$ %
TimeSpec& .
.. /
MonthsPerYear/ <
)< =
{ 
throw   
new   '
ArgumentOutOfRangeException   5
(  5 6
$str  6 =
)  = >
;  > ?
}!! 
if"" 
("" 
day"" 
<="" 
$num"" 
||"" 
day"" 
>""  !
TimeSpec""" *
.""* +
MaxDaysPerMonth""+ :
)"": ;
{## 
throw$$ 
new$$ '
ArgumentOutOfRangeException$$ 5
($$5 6
$str$$6 ;
)$$; <
;$$< =
}%% 
date&& 
=&& 
new&& 
DateTime&& 
(&&  
year&&  $
,&&$ %
month&&& +
,&&+ ,
day&&- 0
)&&0 1
;&&1 2
}'' 	
public** 
int** 
Year** 
{++ 	
get,, 
{,, 
return,, 
date,, 
.,, 
Year,, "
;,," #
},,$ %
}-- 	
public00 
int00 
Month00 
{11 	
get22 
{22 
return22 
date22 
.22 
Month22 #
;22# $
}22% &
}33 	
public66 
int66 
Day66 
{77 	
get88 
{88 
return88 
date88 
.88 
Day88 !
;88! "
}88# $
}99 	
public<< 
DateTime<< 
DateTime<<  
{== 	
get>> 
{>> 
return>> 
date>> 
;>> 
}>>  
}?? 	
publicBB 
intBB 
	CompareToBB 
(BB 
DateBB !
otherBB" '
)BB' (
{CC 	
returnDD 
dateDD 
.DD 
	CompareToDD !
(DD! "
otherDD" '
.DD' (
dateDD( ,
)DD, -
;DD- .
}EE 	
publicHH 
intHH 
	CompareToHH 
(HH 
objectHH #
objHH$ '
)HH' (
{II 	
returnJJ 
dateJJ 
.JJ 
	CompareToJJ !
(JJ! "
(JJ" #
(JJ# $
DateJJ$ (
)JJ( )
objJJ) ,
)JJ, -
.JJ- .
dateJJ. 2
)JJ2 3
;JJ3 4
}KK 	
publicNN 
boolNN 
EqualsNN 
(NN 
DateNN 
otherNN  %
)NN% &
{OO 	
returnPP 
datePP 
.PP 
EqualsPP 
(PP 
otherPP $
.PP$ %
datePP% )
)PP) *
;PP* +
}QQ 	
publicTT 
overrideTT 
stringTT 
ToStringTT '
(TT' (
)TT( )
{UU 	
returnVV 
dateVV 
.VV 
ToStringVV  
(VV  !
$strVV! $
)VV$ %
;VV% &
}WW 	
publicZZ 
overrideZZ 
boolZZ 
EqualsZZ #
(ZZ# $
objectZZ$ *
objZZ+ .
)ZZ. /
{[[ 	
if\\ 
(\\ 
obj\\ 
==\\ 
null\\ 
||\\ 
GetType\\ &
(\\& '
)\\' (
!=\\) +
obj\\, /
.\\/ 0
GetType\\0 7
(\\7 8
)\\8 9
)\\9 :
{]] 
return^^ 
false^^ 
;^^ 
}__ 
returnaa 
Equalsaa 
(aa 
(aa 
Dateaa 
)aa  
objaa  #
)aa# $
;aa$ %
}bb 	
publicee 
overrideee 
intee 
GetHashCodeee '
(ee' (
)ee( )
{ff 	
returngg 
HashToolgg 
.gg 
ComputeHashCodegg +
(gg+ ,
GetTypegg, 3
(gg3 4
)gg4 5
.gg5 6
GetHashCodegg6 A
(ggA B
)ggB C
,ggC D
dateggE I
)ggI J
;ggJ K
}hh 	
publickk 
statickk 
TimeSpankk 
operatorkk '
-kk( )
(kk) *
Datekk* .
date1kk/ 4
,kk4 5
Datekk6 :
date2kk; @
)kk@ A
{ll 	
returnmm 
date1mm 
.mm 
datemm 
-mm 
date2mm  %
.mm% &
datemm& *
;mm* +
}nn 	
publicqq 
staticqq 
Dateqq 
operatorqq #
-qq$ %
(qq% &
Dateqq& *
dateqq+ /
,qq/ 0
TimeSpanqq1 9
durationqq: B
)qqB C
{rr 	
returnss 
newss 
Datess 
(ss 
datess  
.ss  !
datess! %
-ss& '
durationss( 0
)ss0 1
;ss1 2
}tt 	
publicww 
staticww 
Dateww 
operatorww #
+ww$ %
(ww% &
Dateww& *
dateww+ /
,ww/ 0
TimeSpanww1 9
durationww: B
)wwB C
{xx 	
returnyy 
newyy 
Dateyy 
(yy 
dateyy  
.yy  !
dateyy! %
+yy& '
durationyy( 0
)yy0 1
;yy1 2
}zz 	
public}} 
static}} 
bool}} 
operator}} #
<}}$ %
(}}% &
Date}}& *
date1}}+ 0
,}}0 1
Date}}2 6
date2}}7 <
)}}< =
{~~ 	
return 
date1 
. 
date 
< 
date2  %
.% &
date& *
;* +
}
ÄÄ 	
public
ÉÉ 
static
ÉÉ 
bool
ÉÉ 
operator
ÉÉ #
<=
ÉÉ$ &
(
ÉÉ& '
Date
ÉÉ' +
date1
ÉÉ, 1
,
ÉÉ1 2
Date
ÉÉ3 7
date2
ÉÉ8 =
)
ÉÉ= >
{
ÑÑ 	
return
ÖÖ 
date1
ÖÖ 
.
ÖÖ 
date
ÖÖ 
<=
ÖÖ  
date2
ÖÖ! &
.
ÖÖ& '
date
ÖÖ' +
;
ÖÖ+ ,
}
ÜÜ 	
public
ââ 
static
ââ 
bool
ââ 
operator
ââ #
==
ââ$ &
(
ââ& '
Date
ââ' +
left
ââ, 0
,
ââ0 1
Date
ââ2 6
right
ââ7 <
)
ââ< =
{
ää 	
return
ãã 
Equals
ãã 
(
ãã 
left
ãã 
,
ãã 
right
ãã  %
)
ãã% &
;
ãã& '
}
åå 	
public
èè 
static
èè 
bool
èè 
operator
èè #
!=
èè$ &
(
èè& '
Date
èè' +
left
èè, 0
,
èè0 1
Date
èè2 6
right
èè7 <
)
èè< =
{
êê 	
return
ëë 
!
ëë 
Equals
ëë 
(
ëë 
left
ëë 
,
ëë  
right
ëë! &
)
ëë& '
;
ëë' (
}
íí 	
public
ïï 
static
ïï 
bool
ïï 
operator
ïï #
>
ïï$ %
(
ïï% &
Date
ïï& *
date1
ïï+ 0
,
ïï0 1
Date
ïï2 6
date2
ïï7 <
)
ïï< =
{
ññ 	
return
óó 
date1
óó 
.
óó 
date
óó 
>
óó 
date2
óó  %
.
óó% &
date
óó& *
;
óó* +
}
òò 	
public
õõ 
static
õõ 
bool
õõ 
operator
õõ #
>=
õõ$ &
(
õõ& '
Date
õõ' +
date1
õõ, 1
,
õõ1 2
Date
õõ3 7
date2
õõ8 =
)
õõ= >
{
úú 	
return
ùù 
date1
ùù 
.
ùù 
date
ùù 
>=
ùù  
date2
ùù! &
.
ùù& '
date
ùù' +
;
ùù+ ,
}
ûû 	
public
°° 
DateTime
°° 

ToDateTime
°° "
(
°°" #
Time
°°# '
time
°°( ,
)
°°, -
{
¢¢ 	
return
££ 

ToDateTime
££ 
(
££ 
this
££ "
,
££" #
time
££$ (
)
££( )
;
££) *
}
§§ 	
public
ßß 
DateTime
ßß 

ToDateTime
ßß "
(
ßß" #
int
ßß# &
hour
ßß' +
,
ßß+ ,
int
ßß- 0
minute
ßß1 7
=
ßß8 9
$num
ßß: ;
,
ßß; <
int
ßß= @
second
ßßA G
=
ßßH I
$num
ßßJ K
,
ßßK L
int
ßßM P
millisecond
ßßQ \
=
ßß] ^
$num
ßß_ `
)
ßß` a
{
®® 	
return
©© 

ToDateTime
©© 
(
©© 
this
©© "
,
©©" #
hour
©©$ (
,
©©( )
minute
©©* 0
,
©©0 1
second
©©2 8
,
©©8 9
millisecond
©©: E
)
©©E F
;
©©F G
}
™™ 	
public
≠≠ 
static
≠≠ 
DateTime
≠≠ 

ToDateTime
≠≠ )
(
≠≠) *
Date
≠≠* .
date
≠≠/ 3
,
≠≠3 4
Time
≠≠5 9
time
≠≠: >
)
≠≠> ?
{
ÆÆ 	
return
ØØ 
date
ØØ 
.
ØØ 
DateTime
ØØ  
.
ØØ  !
Add
ØØ! $
(
ØØ$ %
time
ØØ% )
.
ØØ) *
Duration
ØØ* 2
)
ØØ2 3
;
ØØ3 4
}
∞∞ 	
public
≥≥ 
static
≥≥ 
DateTime
≥≥ 

ToDateTime
≥≥ )
(
≥≥) *
Date
≥≥* .
date
≥≥/ 3
,
≥≥3 4
int
≥≥5 8
hour
≥≥9 =
,
≥≥= >
int
≥≥? B
minute
≥≥C I
=
≥≥J K
$num
≥≥L M
,
≥≥M N
int
≥≥O R
second
≥≥S Y
=
≥≥Z [
$num
≥≥\ ]
,
≥≥] ^
int
≥≥_ b
millisecond
≥≥c n
=
≥≥o p
$num
≥≥q r
)
≥≥r s
{
¥¥ 	
return
µµ 
new
µµ 
DateTime
µµ 
(
µµ  
date
µµ  $
.
µµ$ %
Year
µµ% )
,
µµ) *
date
µµ+ /
.
µµ/ 0
Month
µµ0 5
,
µµ5 6
date
µµ7 ;
.
µµ; <
Day
µµ< ?
,
µµ? @
hour
µµA E
,
µµE F
minute
µµG M
,
µµM N
second
µµO U
,
µµU V
millisecond
µµW b
)
µµb c
;
µµc d
}
∂∂ 	
private
∫∫ 
readonly
∫∫ 
DateTime
∫∫ !
date
∫∫" &
;
∫∫& '
}
ºº 
}ææ ˇû
hF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\DateAdd.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

class 
DateAdd 
{ 
public !
ITimePeriodCollection $
IncludePeriods% 3
{ 	
get 
{ 
return 
includePeriods '
;' (
}) *
} 	
public !
ITimePeriodCollection $
ExcludePeriods% 3
{ 	
get 
{ 
return 
excludePeriods '
;' (
}) *
} 	
public 
virtual 
DateTime 
?  
Subtract! )
() *
DateTime* 2
start3 8
,8 9
TimeSpan: B
offsetC I
,I J
SeekBoundaryModeK [
seekBoundaryMode\ l
=m n
SeekBoundaryModeo 
.	 Ä
Next
Ä Ñ
)
Ñ Ö
{ 	
if   
(   
includePeriods   
.   
Count   $
==  % '
$num  ( )
&&  * ,
excludePeriods  - ;
.  ; <
Count  < A
==  B D
$num  E F
)  F G
{!! 
return"" 
start"" 
."" 
Subtract"" %
(""% &
offset""& ,
)"", -
;""- .
}## 
TimeSpan%% 
?%% 
	remaining%% 
;%%  
return&& 
offset&& 
<&& 
TimeSpan&& $
.&&$ %
Zero&&% )
?&&* +
CalculateEnd'' 
('' 
start'' "
,''" #
offset''$ *
.''* +
Negate''+ 1
(''1 2
)''2 3
,''3 4
SeekDirection''5 B
.''B C
Forward''C J
,''J K
seekBoundaryMode''L \
,''\ ]
out''^ a
	remaining''b k
)''k l
:''m n
CalculateEnd(( 
((( 
start(( "
,((" #
offset(($ *
,((* +
SeekDirection((, 9
.((9 :
Backward((: B
,((B C
seekBoundaryMode((D T
,((T U
out((V Y
	remaining((Z c
)((c d
;((d e
})) 	
public,, 
virtual,, 
DateTime,, 
?,,  
Add,,! $
(,,$ %
DateTime,,% -
start,,. 3
,,,3 4
TimeSpan,,5 =
offset,,> D
,,,D E
SeekBoundaryMode,,F V
seekBoundaryMode,,W g
=,,h i
SeekBoundaryMode,,j z
.,,z {
Next,,{ 
)	,, Ä
{-- 	
if.. 
(.. 
includePeriods.. 
... 
Count.. $
==..% '
$num..( )
&&..* ,
excludePeriods..- ;
...; <
Count..< A
==..B D
$num..E F
)..F G
{// 
return00 
start00 
.00 
Add00  
(00  !
offset00! '
)00' (
;00( )
}11 
TimeSpan33 
?33 
	remaining33 
;33  
return44 
offset44 
<44 
TimeSpan44 $
.44$ %
Zero44% )
?44* +
CalculateEnd55 
(55 
start55 "
,55" #
offset55$ *
.55* +
Negate55+ 1
(551 2
)552 3
,553 4
SeekDirection555 B
.55B C
Backward55C K
,55K L
seekBoundaryMode55M ]
,55] ^
out55_ b
	remaining55c l
)55l m
:55n o
CalculateEnd66 
(66 
start66 "
,66" #
offset66$ *
,66* +
SeekDirection66, 9
.669 :
Forward66: A
,66A B
seekBoundaryMode66C S
,66S T
out66U X
	remaining66Y b
)66b c
;66c d
}77 	
	protected:: 
DateTime:: 
?:: 
CalculateEnd:: (
(::( )
DateTime::) 1
start::2 7
,::7 8
TimeSpan::9 A
offset::B H
,::H I
SeekDirection;; 
seekDirection;; '
,;;' (
SeekBoundaryMode;;) 9
seekBoundaryMode;;: J
,;;J K
out;;L O
TimeSpan;;P X
?;;X Y
	remaining;;Z c
);;c d
{<< 	
if== 
(== 
offset== 
<== 
TimeSpan== !
.==! "
Zero==" &
)==& '
{>> 
throw?? 
new?? %
InvalidOperationException?? 3
(??3 4
$str??4 P
)??P Q
;??Q R
}@@ 
	remainingBB 
=BB 
offsetBB 
;BB  
TimePeriodCollectionEE  
searchPeriodsEE! .
=EE/ 0
newEE1 4 
TimePeriodCollectionEE5 I
(EEI J
includePeriodsEEJ X
)EEX Y
;EEY Z
ifHH 
(HH 
searchPeriodsHH 
.HH 
CountHH #
==HH$ &
$numHH' (
)HH( )
{II 
searchPeriodsJJ 
.JJ 
AddJJ !
(JJ! "
	TimeRangeJJ" +
.JJ+ ,
AnytimeJJ, 3
)JJ3 4
;JJ4 5
}KK !
ITimePeriodCollectionNN !
availablePeriodsNN" 2
=NN3 4
newNN5 8 
TimePeriodCollectionNN9 M
(NNM N
)NNN O
;NNO P
ifQQ 
(QQ 
excludePeriodsQQ 
.QQ 
CountQQ $
==QQ% '
$numQQ( )
)QQ) *
{RR 
availablePeriodsSS  
.SS  !
AddAllSS! '
(SS' (
searchPeriodsSS( 5
)SS5 6
;SS6 7
}TT 
elseUU 
{VV 
TimeGapCalculatorWW !
<WW! "
	TimeRangeWW" +
>WW+ ,
gapCalculatorWW- :
=WW; <
newWW= @
TimeGapCalculatorWWA R
<WWR S
	TimeRangeWWS \
>WW\ ]
(WW] ^
)WW^ _
;WW_ `
foreachXX 
(XX 
ITimePeriodXX $
searchPeriodXX% 1
inXX2 4
searchPeriodsXX5 B
)XXB C
{YY 
if\\ 
(\\ 
!\\ 
excludePeriods\\ '
.\\' (
HasOverlapPeriods\\( 9
(\\9 :
searchPeriod\\: F
)\\F G
)\\G H
{]] 
availablePeriods^^ (
.^^( )
Add^^) ,
(^^, -
searchPeriod^^- 9
)^^9 :
;^^: ;
}__ 
else`` 
{aa 
availablePeriodsbb (
.bb( )
AddAllbb) /
(bb/ 0
gapCalculatorbb0 =
.bb= >
GetGapsbb> E
(bbE F
excludePeriodsbbF T
,bbT U
searchPeriodbbV b
)bbb c
)bbc d
;bbd e
}cc 
}dd 
}ee 
ifhh 
(hh 
availablePeriodshh  
.hh  !
Counthh! &
==hh' )
$numhh* +
)hh+ ,
{ii 
returnjj 
nulljj 
;jj 
}kk 
ifoo 
(oo 
availablePeriodsoo  
.oo  !
Countoo! &
>oo' (
$numoo) *
)oo* +
{pp 
TimePeriodCombinerqq "
<qq" #
	TimeRangeqq# ,
>qq, -
periodCombinerqq. <
=qq= >
newqq? B
TimePeriodCombinerqqC U
<qqU V
	TimeRangeqqV _
>qq_ `
(qq` a
)qqa b
;qqb c
availablePeriodsrr  
=rr! "
periodCombinerrr# 1
.rr1 2
CombinePeriodsrr2 @
(rr@ A
availablePeriodsrrA Q
)rrQ R
;rrR S
}ss 
ITimePeriodvv 
startPeriodvv #
=vv$ %
nullvv& *
;vv* +
DateTimeww 

seekMomentww 
=ww  !
startww" '
;ww' (
switchxx 
(xx 
seekDirectionxx !
)xx! "
{yy 
casezz 
SeekDirectionzz "
.zz" #
Forwardzz# *
:zz* +
startPeriod{{ 
={{  !
FindNextPeriod{{" 0
({{0 1
start{{1 6
,{{6 7
availablePeriods{{8 H
,{{H I
out{{J M

seekMoment{{N X
){{X Y
;{{Y Z
break|| 
;|| 
case}} 
SeekDirection}} "
.}}" #
Backward}}# +
:}}+ ,
startPeriod~~ 
=~~  !
FindPreviousPeriod~~" 4
(~~4 5
start~~5 :
,~~: ;
availablePeriods~~< L
,~~L M
out~~N Q

seekMoment~~R \
)~~\ ]
;~~] ^
break 
; 
}
ÄÄ 
if
ÉÉ 
(
ÉÉ 
startPeriod
ÉÉ 
==
ÉÉ 
null
ÉÉ #
)
ÉÉ# $
{
ÑÑ 
return
ÖÖ 
null
ÖÖ 
;
ÖÖ 
}
ÜÜ 
if
ää 
(
ää 
offset
ää 
==
ää 
TimeSpan
ää "
.
ää" #
Zero
ää# '
)
ää' (
{
ãã 
return
åå 

seekMoment
åå !
;
åå! "
}
çç 
switch
êê 
(
êê 
seekDirection
êê !
)
êê! "
{
ëë 
case
íí 
SeekDirection
íí "
.
íí" #
Forward
íí# *
:
íí* +
for
ìì 
(
ìì 
int
ìì 
i
ìì 
=
ìì  
availablePeriods
ìì! 1
.
ìì1 2
IndexOf
ìì2 9
(
ìì9 :
startPeriod
ìì: E
)
ììE F
;
ììF G
i
ììH I
<
ììJ K
availablePeriods
ììL \
.
ìì\ ]
Count
ìì] b
;
ììb c
i
ììd e
++
ììe g
)
ììg h
{
îî 
ITimePeriod
ïï #
gap
ïï$ '
=
ïï( )
availablePeriods
ïï* :
[
ïï: ;
i
ïï; <
]
ïï< =
;
ïï= >
TimeSpan
ññ  
gapRemining
ññ! ,
=
ññ- .
gap
ññ/ 2
.
ññ2 3
End
ññ3 6
-
ññ7 8

seekMoment
ññ9 C
;
ññC D
bool
òò 
isTargetPeriod
òò +
=
òò, -
false
òò. 3
;
òò3 4
switch
ôô 
(
ôô  
seekBoundaryMode
ôô  0
)
ôô0 1
{
öö 
case
õõ  
SeekBoundaryMode
õõ! 1
.
õõ1 2
Fill
õõ2 6
:
õõ6 7
isTargetPeriod
úú  .
=
úú/ 0
gapRemining
úú1 <
>=
úú= ?
	remaining
úú@ I
;
úúI J
break
ùù  %
;
ùù% &
case
ûû  
SeekBoundaryMode
ûû! 1
.
ûû1 2
Next
ûû2 6
:
ûû6 7
isTargetPeriod
üü  .
=
üü/ 0
gapRemining
üü1 <
>
üü= >
	remaining
üü? H
;
üüH I
break
††  %
;
††% &
}
°° 
if
££ 
(
££ 
isTargetPeriod
££ *
)
££* +
{
§§ 
DateTime
•• $
end
••% (
=
••) *

seekMoment
••+ 5
+
••6 7
	remaining
••8 A
.
••A B
Value
••B G
;
••G H
	remaining
¶¶ %
=
¶¶& '
null
¶¶( ,
;
¶¶, -
return
ßß "
end
ßß# &
;
ßß& '
}
®® 
	remaining
™™ !
=
™™" #
	remaining
™™$ -
-
™™. /
gapRemining
™™0 ;
;
™™; <
if
´´ 
(
´´ 
i
´´ 
==
´´  
availablePeriods
´´! 1
.
´´1 2
Count
´´2 7
-
´´8 9
$num
´´: ;
)
´´; <
{
¨¨ 
return
≠≠ "
null
≠≠# '
;
≠≠' (
}
ÆÆ 

seekMoment
ØØ "
=
ØØ# $
availablePeriods
ØØ% 5
[
ØØ5 6
i
ØØ6 7
+
ØØ8 9
$num
ØØ: ;
]
ØØ; <
.
ØØ< =
Start
ØØ= B
;
ØØB C
}
∞∞ 
break
±± 
;
±± 
case
≤≤ 
SeekDirection
≤≤ "
.
≤≤" #
Backward
≤≤# +
:
≤≤+ ,
for
≥≥ 
(
≥≥ 
int
≥≥ 
i
≥≥ 
=
≥≥  
availablePeriods
≥≥! 1
.
≥≥1 2
IndexOf
≥≥2 9
(
≥≥9 :
startPeriod
≥≥: E
)
≥≥E F
;
≥≥F G
i
≥≥H I
>=
≥≥J L
$num
≥≥M N
;
≥≥N O
i
≥≥P Q
--
≥≥Q S
)
≥≥S T
{
¥¥ 
ITimePeriod
µµ #
gap
µµ$ '
=
µµ( )
availablePeriods
µµ* :
[
µµ: ;
i
µµ; <
]
µµ< =
;
µµ= >
TimeSpan
∂∂  
gapRemining
∂∂! ,
=
∂∂- .

seekMoment
∂∂/ 9
-
∂∂: ;
gap
∂∂< ?
.
∂∂? @
Start
∂∂@ E
;
∂∂E F
bool
∏∏ 
isTargetPeriod
∏∏ +
=
∏∏, -
false
∏∏. 3
;
∏∏3 4
switch
ππ 
(
ππ  
seekBoundaryMode
ππ  0
)
ππ0 1
{
∫∫ 
case
ªª  
SeekBoundaryMode
ªª! 1
.
ªª1 2
Fill
ªª2 6
:
ªª6 7
isTargetPeriod
ºº  .
=
ºº/ 0
gapRemining
ºº1 <
>=
ºº= ?
	remaining
ºº@ I
;
ººI J
break
ΩΩ  %
;
ΩΩ% &
case
ææ  
SeekBoundaryMode
ææ! 1
.
ææ1 2
Next
ææ2 6
:
ææ6 7
isTargetPeriod
øø  .
=
øø/ 0
gapRemining
øø1 <
>
øø= >
	remaining
øø? H
;
øøH I
break
¿¿  %
;
¿¿% &
}
¡¡ 
if
√√ 
(
√√ 
isTargetPeriod
√√ *
)
√√* +
{
ƒƒ 
DateTime
≈≈ $
end
≈≈% (
=
≈≈) *

seekMoment
≈≈+ 5
-
≈≈6 7
	remaining
≈≈8 A
.
≈≈A B
Value
≈≈B G
;
≈≈G H
	remaining
∆∆ %
=
∆∆& '
null
∆∆( ,
;
∆∆, -
return
«« "
end
««# &
;
««& '
}
»» 
	remaining
…… !
=
……" #
	remaining
……$ -
-
……. /
gapRemining
……0 ;
;
……; <
if
   
(
   
i
   
==
    
$num
  ! "
)
  " #
{
ÀÀ 
return
ÃÃ "
null
ÃÃ# '
;
ÃÃ' (
}
ÕÕ 

seekMoment
ŒŒ "
=
ŒŒ# $
availablePeriods
ŒŒ% 5
[
ŒŒ5 6
i
ŒŒ6 7
-
ŒŒ8 9
$num
ŒŒ: ;
]
ŒŒ; <
.
ŒŒ< =
End
ŒŒ= @
;
ŒŒ@ A
}
œœ 
break
–– 
;
–– 
}
—— 
return
”” 
null
”” 
;
”” 
}
‘‘ 	
private
ÿÿ 
static
ÿÿ 
ITimePeriod
ÿÿ "
FindNextPeriod
ÿÿ# 1
(
ÿÿ1 2
DateTime
ÿÿ2 :
start
ÿÿ; @
,
ÿÿ@ A
IEnumerable
ÿÿB M
<
ÿÿM N
ITimePeriod
ÿÿN Y
>
ÿÿY Z
periods
ÿÿ[ b
,
ÿÿb c
out
ÿÿd g
DateTime
ÿÿh p
moment
ÿÿq w
)
ÿÿw x
{
ŸŸ 	
ITimePeriod
⁄⁄ 
nearestPeriod
⁄⁄ %
=
⁄⁄& '
null
⁄⁄( ,
;
⁄⁄, -
TimeSpan
€€ 

difference
€€ 
=
€€  !
TimeSpan
€€" *
.
€€* +
MaxValue
€€+ 3
;
€€3 4
moment
‹‹ 
=
‹‹ 
start
‹‹ 
;
‹‹ 
foreach
›› 
(
›› 
ITimePeriod
››  
period
››! '
in
››( *
periods
››+ 2
)
››2 3
{
ﬁﬁ 
if
‡‡ 
(
‡‡ 
period
‡‡ 
.
‡‡ 
	HasInside
‡‡ $
(
‡‡$ %
start
‡‡% *
)
‡‡* +
)
‡‡+ ,
{
·· 
nearestPeriod
‚‚ !
=
‚‚" #
period
‚‚$ *
;
‚‚* +
moment
„„ 
=
„„ 
start
„„ "
;
„„" #
break
‰‰ 
;
‰‰ 
}
ÂÂ 
if
ËË 
(
ËË 
period
ËË 
.
ËË 
End
ËË 
<
ËË  
start
ËË! &
)
ËË& '
{
ÈÈ 
continue
ÍÍ 
;
ÍÍ 
}
ÎÎ 
TimeSpan
ÓÓ 
periodToMoment
ÓÓ '
=
ÓÓ( )
period
ÓÓ* 0
.
ÓÓ0 1
Start
ÓÓ1 6
-
ÓÓ7 8
start
ÓÓ9 >
;
ÓÓ> ?
if
ÔÔ 
(
ÔÔ 
periodToMoment
ÔÔ "
>=
ÔÔ# %

difference
ÔÔ& 0
)
ÔÔ0 1
{
 
continue
ÒÒ 
;
ÒÒ 
}
ÚÚ 

difference
ÙÙ 
=
ÙÙ 
periodToMoment
ÙÙ +
;
ÙÙ+ ,
nearestPeriod
ıı 
=
ıı 
period
ıı  &
;
ıı& '
moment
ˆˆ 
=
ˆˆ 
nearestPeriod
ˆˆ &
.
ˆˆ& '
Start
ˆˆ' ,
;
ˆˆ, -
}
˜˜ 
return
˘˘ 
nearestPeriod
˘˘  
;
˘˘  !
}
˙˙ 	
private
˛˛ 
static
˛˛ 
ITimePeriod
˛˛ " 
FindPreviousPeriod
˛˛# 5
(
˛˛5 6
DateTime
˛˛6 >
start
˛˛? D
,
˛˛D E
IEnumerable
˛˛F Q
<
˛˛Q R
ITimePeriod
˛˛R ]
>
˛˛] ^
periods
˛˛_ f
,
˛˛f g
out
˛˛h k
DateTime
˛˛l t
moment
˛˛u {
)
˛˛{ |
{
ˇˇ 	
ITimePeriod
ÄÄ 
nearestPeriod
ÄÄ %
=
ÄÄ& '
null
ÄÄ( ,
;
ÄÄ, -
TimeSpan
ÅÅ 

difference
ÅÅ 
=
ÅÅ  !
TimeSpan
ÅÅ" *
.
ÅÅ* +
MaxValue
ÅÅ+ 3
;
ÅÅ3 4
moment
ÇÇ 
=
ÇÇ 
start
ÇÇ 
;
ÇÇ 
foreach
ÉÉ 
(
ÉÉ 
ITimePeriod
ÉÉ  
period
ÉÉ! '
in
ÉÉ( *
periods
ÉÉ+ 2
)
ÉÉ2 3
{
ÑÑ 
if
ÜÜ 
(
ÜÜ 
period
ÜÜ 
.
ÜÜ 
	HasInside
ÜÜ $
(
ÜÜ$ %
start
ÜÜ% *
)
ÜÜ* +
)
ÜÜ+ ,
{
áá 
nearestPeriod
àà !
=
àà" #
period
àà$ *
;
àà* +
moment
ââ 
=
ââ 
start
ââ "
;
ââ" #
break
ää 
;
ää 
}
ãã 
if
éé 
(
éé 
period
éé 
.
éé 
Start
éé  
>
éé! "
start
éé# (
)
éé( )
{
èè 
continue
êê 
;
êê 
}
ëë 
TimeSpan
îî 
periodToMoment
îî '
=
îî( )
start
îî* /
-
îî0 1
period
îî2 8
.
îî8 9
End
îî9 <
;
îî< =
if
ïï 
(
ïï 
periodToMoment
ïï "
>=
ïï# %

difference
ïï& 0
)
ïï0 1
{
ññ 
continue
óó 
;
óó 
}
òò 

difference
öö 
=
öö 
periodToMoment
öö +
;
öö+ ,
nearestPeriod
õõ 
=
õõ 
period
õõ  &
;
õõ& '
moment
úú 
=
úú 
nearestPeriod
úú &
.
úú& '
End
úú' *
;
úú* +
}
ùù 
return
üü 
nearestPeriod
üü  
;
üü  !
}
†† 	
private
§§ 
readonly
§§ "
TimePeriodCollection
§§ -
includePeriods
§§. <
=
§§= >
new
§§? B"
TimePeriodCollection
§§C W
(
§§W X
)
§§X Y
;
§§Y Z
private
•• 
readonly
•• "
TimePeriodCollection
•• -
excludePeriods
••. <
=
••= >
new
••? B"
TimePeriodCollection
••C W
(
••W X
)
••X Y
;
••Y Z
}
ßß 
}©© ú©
iF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\DateDiff.cs
	namespace 	
Phoenix
 
. 
CrossCutting 
. 

TimePeriod )
{ 
public 

sealed 
class 
DateDiff  
{ 
public 
DateDiff 
( 
DateTime  
date! %
)% &
:' (
this 
( 
date 
, 
SafeCurrentInfo &
.& '
Calendar' /
,/ 0
SafeCurrentInfo1 @
.@ A
FirstDayOfWeekA O
)O P
{ 	
} 	
public 
DateDiff 
( 
DateTime  
date! %
,% &
Calendar' /
calendar0 8
,8 9
	DayOfWeek: C
firstDayOfWeekD R
,R S
	YearMonth 
yearBaseMonth #
=$ %
TimeSpec& .
.. /"
CalendarYearStartMonth/ E
)E F
:G H
this 
( 
date 
, 

ClockProxy !
.! "
Clock" '
.' (
Now( +
,+ ,
calendar- 5
,5 6
firstDayOfWeek7 E
,E F
yearBaseMonthG T
)T U
{ 	
} 	
public   
DateDiff   
(   
DateTime    
date1  ! &
,  & '
DateTime  ( 0
date2  1 6
)  6 7
:  8 9
this!! 
(!! 
date1!! 
,!! 
date2!! 
,!! 
SafeCurrentInfo!! .
.!!. /
Calendar!!/ 7
,!!7 8
SafeCurrentInfo!!9 H
.!!H I
FirstDayOfWeek!!I W
)!!W X
{"" 	
}## 	
public&& 
DateDiff&& 
(&& 
DateTime&&  
date1&&! &
,&&& '
DateTime&&( 0
date2&&1 6
,&&6 7
Calendar&&8 @
calendar&&A I
,&&I J
	DayOfWeek'' 
firstDayOfWeek'' $
,''$ %
	YearMonth''& /
yearBaseMonth''0 =
=''> ?
TimeSpec''@ H
.''H I"
CalendarYearStartMonth''I _
)''_ `
{(( 	
if)) 
()) 
calendar)) 
==)) 
null))  
)))  !
{** 
throw++ 
new++ !
ArgumentNullException++ /
(++/ 0
$str++0 :
)++: ;
;++; <
},, 
this-- 
.-- 
calendar-- 
=-- 
calendar-- $
;--$ %
this.. 
... 
yearBaseMonth.. 
=..  
yearBaseMonth..! .
;... /
this// 
.// 
firstDayOfWeek// 
=//  !
firstDayOfWeek//" 0
;//0 1
this00 
.00 
date100 
=00 
date100 
;00 
this11 
.11 
date211 
=11 
date211 
;11 

difference22 
=22 
date222 
.22 
Subtract22 '
(22' (
date122( -
)22- .
;22. /
}33 	
public66 
DateDiff66 
(66 
TimeSpan66  

difference66! +
)66+ ,
:66- .
this77 
(77 

ClockProxy77 
.77 
Clock77 !
.77! "
Now77" %
,77% &

difference77' 1
,771 2
SafeCurrentInfo773 B
.77B C
Calendar77C K
,77K L
SafeCurrentInfo77M \
.77\ ]
FirstDayOfWeek77] k
)77k l
{88 	
}99 	
public<< 
DateDiff<< 
(<< 
TimeSpan<<  

difference<<! +
,<<+ ,
Calendar<<- 5
calendar<<6 >
,<<> ?
	DayOfWeek== 
firstDayOfWeek== (
,==( )
	YearMonth==* 3
yearBaseMonth==4 A
===B C
TimeSpec==D L
.==L M"
CalendarYearStartMonth==M c
)==c d
:==e f
this>> 
(>> 

ClockProxy>> 
.>> 
Clock>> !
.>>! "
Now>>" %
,>>% &

difference>>' 1
,>>1 2
calendar>>3 ;
,>>; <
firstDayOfWeek>>= K
,>>K L
yearBaseMonth>>M Z
)>>Z [
{?? 	
}@@ 	
publicCC 
DateDiffCC 
(CC 
DateTimeCC  
date1CC! &
,CC& '
TimeSpanCC( 0

differenceCC1 ;
)CC; <
:CC= >
thisDD 
(DD 
date1DD 
,DD 

differenceDD "
,DD" #
SafeCurrentInfoDD$ 3
.DD3 4
CalendarDD4 <
,DD< =
SafeCurrentInfoDD> M
.DDM N
FirstDayOfWeekDDN \
)DD\ ]
{EE 	
}FF 	
publicII 
DateDiffII 
(II 
DateTimeII  
date1II! &
,II& '
TimeSpanII( 0

differenceII1 ;
,II; <
CalendarII= E
calendarIIF N
,IIN O
	DayOfWeekJJ 
firstDayOfWeekJJ (
,JJ( )
	YearMonthJJ* 3
yearBaseMonthJJ4 A
=JJB C
TimeSpecJJD L
.JJL M"
CalendarYearStartMonthJJM c
)JJc d
{KK 	
ifLL 
(LL 
calendarLL 
==LL 
nullLL  
)LL  !
{MM 
throwNN 
newNN !
ArgumentNullExceptionNN /
(NN/ 0
$strNN0 :
)NN: ;
;NN; <
}OO 
thisPP 
.PP 
calendarPP 
=PP 
calendarPP $
;PP$ %
thisQQ 
.QQ 
yearBaseMonthQQ 
=QQ  
yearBaseMonthQQ! .
;QQ. /
thisRR 
.RR 
firstDayOfWeekRR 
=RR  !
firstDayOfWeekRR" 0
;RR0 1
thisSS 
.SS 
date1SS 
=SS 
date1SS 
;SS 
date2TT 
=TT 
date1TT 
.TT 
AddTT 
(TT 

differenceTT (
)TT( )
;TT) *
thisUU 
.UU 

differenceUU 
=UU 

differenceUU (
;UU( )
}VV 	
publicXX 
staticXX 
DateTimeFormatInfoXX (
SafeCurrentInfoXX) 8
{YY 	
getZZ 
{ZZ 
returnZZ 
DateTimeFormatInfoZZ +
.ZZ+ ,
CurrentInfoZZ, 7
??ZZ8 :
DateTimeFormatInfoZZ; M
.ZZM N
InvariantInfoZZN [
;ZZ[ \
}ZZ] ^
}[[ 	
public^^ 
Calendar^^ 
Calendar^^  
{__ 	
get`` 
{`` 
return`` 
calendar`` !
;``! "
}``# $
}aa 	
publicdd 
	YearMonthdd 
YearBaseMonthdd &
{ee 	
getff 
{ff 
returnff 
yearBaseMonthff &
;ff& '
}ff( )
}gg 	
publicjj 
	DayOfWeekjj 
FirstDayOfWeekjj '
{kk 	
getll 
{ll 
returnll 
firstDayOfWeekll '
;ll' (
}ll) *
}mm 	
publicpp 
DateTimepp 
Date1pp 
{qq 	
getrr 
{rr 
returnrr 
date1rr 
;rr 
}rr  !
}ss 	
publicvv 
DateTimevv 
Date2vv 
{ww 	
getxx 
{xx 
returnxx 
date2xx 
;xx 
}xx  !
}yy 	
public|| 
TimeSpan|| 

Difference|| "
{}} 	
get~~ 
{~~ 
return~~ 

difference~~ #
;~~# $
}~~% &
} 	
public
ÇÇ 
bool
ÇÇ 
IsEmpty
ÇÇ 
{
ÉÉ 	
get
ÑÑ 
{
ÑÑ 
return
ÑÑ 

difference
ÑÑ #
==
ÑÑ$ &
TimeSpan
ÑÑ' /
.
ÑÑ/ 0
Zero
ÑÑ0 4
;
ÑÑ4 5
}
ÑÑ6 7
}
ÖÖ 	
private
àà 
int
àà 
Year1
àà 
{
ââ 	
get
ää 
{
ää 
return
ää 
calendar
ää !
.
ää! "
GetYear
ää" )
(
ää) *
Date1
ää* /
)
ää/ 0
;
ää0 1
}
ää2 3
}
ãã 	
private
éé 
int
éé 
Year2
éé 
{
èè 	
get
êê 
{
êê 
return
êê 
calendar
êê !
.
êê! "
GetYear
êê" )
(
êê) *
Date2
êê* /
)
êê/ 0
;
êê0 1
}
êê2 3
}
ëë 	
public
îî 
int
îî 
Years
îî 
{
ïï 	
get
ññ 
{
óó 
if
òò 
(
òò 
!
òò 
years
òò 
.
òò 
HasValue
òò #
)
òò# $
{
ôô 
years
öö 
=
öö 
	CalcYears
öö %
(
öö% &
)
öö& '
;
öö' (
}
õõ 
return
úú 
years
úú 
.
úú 
Value
úú "
;
úú" #
}
ùù 
}
ûû 	
public
°° 
int
°° 
ElapsedYears
°° 
{
¢¢ 	
get
££ 
{
§§ 
if
•• 
(
•• 
!
•• 
elapsedYears
•• !
.
••! "
HasValue
••" *
)
••* +
{
¶¶ 
elapsedYears
ßß  
=
ßß! "
Years
ßß# (
;
ßß( )
}
®® 
return
©© 
elapsedYears
©© #
.
©©# $
Value
©©$ )
;
©©) *
}
™™ 
}
´´ 	
public
ÆÆ 
int
ÆÆ 
Quarters
ÆÆ 
{
ØØ 	
get
∞∞ 
{
±± 
if
≤≤ 
(
≤≤ 
!
≤≤ 
quarters
≤≤ 
.
≤≤ 
HasValue
≤≤ &
)
≤≤& '
{
≥≥ 
quarters
¥¥ 
=
¥¥ 
CalcQuarters
¥¥ +
(
¥¥+ ,
)
¥¥, -
;
¥¥- .
}
µµ 
return
∂∂ 
quarters
∂∂ 
.
∂∂  
Value
∂∂  %
;
∂∂% &
}
∑∑ 
}
∏∏ 	
private
ªª 
int
ªª 
Month1
ªª 
{
ºº 	
get
ΩΩ 
{
ΩΩ 
return
ΩΩ 
calendar
ΩΩ !
.
ΩΩ! "
GetMonth
ΩΩ" *
(
ΩΩ* +
Date1
ΩΩ+ 0
)
ΩΩ0 1
;
ΩΩ1 2
}
ΩΩ3 4
}
ææ 	
private
¡¡ 
int
¡¡ 
Month2
¡¡ 
{
¬¬ 	
get
√√ 
{
√√ 
return
√√ 
calendar
√√ !
.
√√! "
GetMonth
√√" *
(
√√* +
Date2
√√+ 0
)
√√0 1
;
√√1 2
}
√√3 4
}
ƒƒ 	
public
«« 
int
«« 
Months
«« 
{
»» 	
get
…… 
{
   
if
ÀÀ 
(
ÀÀ 
!
ÀÀ 
months
ÀÀ 
.
ÀÀ 
HasValue
ÀÀ $
)
ÀÀ$ %
{
ÃÃ 
months
ÕÕ 
=
ÕÕ 

CalcMonths
ÕÕ '
(
ÕÕ' (
)
ÕÕ( )
;
ÕÕ) *
}
ŒŒ 
return
œœ 
months
œœ 
.
œœ 
Value
œœ #
;
œœ# $
}
–– 
}
—— 	
public
‘‘ 
int
‘‘ 
ElapsedMonths
‘‘  
{
’’ 	
get
÷÷ 
{
◊◊ 
if
ÿÿ 
(
ÿÿ 
!
ÿÿ 
elapsedMonths
ÿÿ "
.
ÿÿ" #
HasValue
ÿÿ# +
)
ÿÿ+ ,
{
ŸŸ 
elapsedMonths
⁄⁄ !
=
⁄⁄" #
Months
⁄⁄$ *
-
⁄⁄+ ,
ElapsedYears
⁄⁄- 9
*
⁄⁄: ;
TimeSpec
⁄⁄< D
.
⁄⁄D E
MonthsPerYear
⁄⁄E R
;
⁄⁄R S
}
€€ 
return
‹‹ 
elapsedMonths
‹‹ $
.
‹‹$ %
Value
‹‹% *
;
‹‹* +
}
›› 
}
ﬁﬁ 	
public
·· 
int
·· 
Weeks
·· 
{
‚‚ 	
get
„„ 
{
‰‰ 
if
ÂÂ 
(
ÂÂ 
!
ÂÂ 
weeks
ÂÂ 
.
ÂÂ 
HasValue
ÂÂ #
)
ÂÂ# $
{
ÊÊ 
weeks
ÁÁ 
=
ÁÁ 
	CalcWeeks
ÁÁ %
(
ÁÁ% &
)
ÁÁ& '
;
ÁÁ' (
}
ËË 
return
ÈÈ 
weeks
ÈÈ 
.
ÈÈ 
Value
ÈÈ "
;
ÈÈ" #
}
ÍÍ 
}
ÎÎ 	
public
ÓÓ 
int
ÓÓ 
Days
ÓÓ 
{
ÔÔ 	
get
 
{
 
return
 
(
 
int
 
)
 
Math
 "
.
" #
Round
# (
(
( )
Round
) .
(
. /

difference
/ 9
.
9 :
	TotalDays
: C
)
C D
)
D E
;
E F
}
G H
}
ÒÒ 	
public
ÙÙ 
int
ÙÙ 
Weekdays
ÙÙ 
{
ıı 	
get
ˆˆ 
{
ˆˆ 
return
ˆˆ 
(
ˆˆ 
int
ˆˆ 
)
ˆˆ 
Math
ˆˆ "
.
ˆˆ" #
Round
ˆˆ# (
(
ˆˆ( )
Round
ˆˆ) .
(
ˆˆ. /

difference
ˆˆ/ 9
.
ˆˆ9 :
	TotalDays
ˆˆ: C
)
ˆˆC D
)
ˆˆD E
/
ˆˆF G
TimeSpec
ˆˆH P
.
ˆˆP Q
DaysPerWeek
ˆˆQ \
;
ˆˆ\ ]
}
ˆˆ^ _
}
˜˜ 	
public
˙˙ 
int
˙˙ 
ElapsedDays
˙˙ 
{
˚˚ 	
get
¸¸ 
{
˝˝ 
if
˛˛ 
(
˛˛ 
!
˛˛ 
elapsedDays
˛˛  
.
˛˛  !
HasValue
˛˛! )
)
˛˛) *
{
ˇˇ 
DateTime
ÄÄ 
compareDate
ÄÄ (
=
ÄÄ) *
date1
ÄÄ+ 0
.
ÄÄ0 1
AddYears
ÄÄ1 9
(
ÄÄ9 :
ElapsedYears
ÄÄ: F
)
ÄÄF G
.
ÄÄG H
	AddMonths
ÄÄH Q
(
ÄÄQ R
ElapsedMonths
ÄÄR _
)
ÄÄ_ `
;
ÄÄ` a
elapsedDays
ÅÅ 
=
ÅÅ  !
(
ÅÅ" #
int
ÅÅ# &
)
ÅÅ& '
date2
ÅÅ' ,
.
ÅÅ, -
Subtract
ÅÅ- 5
(
ÅÅ5 6
compareDate
ÅÅ6 A
)
ÅÅA B
.
ÅÅB C
	TotalDays
ÅÅC L
;
ÅÅL M
}
ÇÇ 
return
ÉÉ 
elapsedDays
ÉÉ "
.
ÉÉ" #
Value
ÉÉ# (
;
ÉÉ( )
}
ÑÑ 
}
ÖÖ 	
public
àà 
int
àà 
Hours
àà 
{
ââ 	
get
ää 
{
ää 
return
ää 
(
ää 
int
ää 
)
ää 
Math
ää "
.
ää" #
Round
ää# (
(
ää( )
Round
ää) .
(
ää. /

difference
ää/ 9
.
ää9 :

TotalHours
ää: D
)
ääD E
)
ääE F
;
ääF G
}
ääH I
}
ãã 	
public
éé 
int
éé 
ElapsedHours
éé 
{
èè 	
get
êê 
{
ëë 
if
íí 
(
íí 
!
íí 
elapsedHours
íí !
.
íí! "
HasValue
íí" *
)
íí* +
{
ìì 
DateTime
îî 
compareDate
îî (
=
îî) *
date1
îî+ 0
.
îî0 1
AddYears
îî1 9
(
îî9 :
ElapsedYears
îî: F
)
îîF G
.
îîG H
	AddMonths
îîH Q
(
îîQ R
ElapsedMonths
îîR _
)
îî_ `
.
îî` a
AddDays
îîa h
(
îîh i
ElapsedDays
îîi t
)
îît u
;
îîu v
elapsedHours
ïï  
=
ïï! "
(
ïï# $
int
ïï$ '
)
ïï' (
date2
ïï( -
.
ïï- .
Subtract
ïï. 6
(
ïï6 7
compareDate
ïï7 B
)
ïïB C
.
ïïC D

TotalHours
ïïD N
;
ïïN O
}
ññ 
return
óó 
elapsedHours
óó #
.
óó# $
Value
óó$ )
;
óó) *
}
òò 
}
ôô 	
public
úú 
int
úú 
Minutes
úú 
{
ùù 	
get
ûû 
{
ûû 
return
ûû 
(
ûû 
int
ûû 
)
ûû 
Math
ûû "
.
ûû" #
Round
ûû# (
(
ûû( )
Round
ûû) .
(
ûû. /

difference
ûû/ 9
.
ûû9 :
TotalMinutes
ûû: F
)
ûûF G
)
ûûG H
;
ûûH I
}
ûûJ K
}
üü 	
public
¢¢ 
int
¢¢ 
ElapsedMinutes
¢¢ !
{
££ 	
get
§§ 
{
•• 
if
¶¶ 
(
¶¶ 
!
¶¶ 
elapsedMinutes
¶¶ #
.
¶¶# $
HasValue
¶¶$ ,
)
¶¶, -
{
ßß 
DateTime
®® 
compareDate
®® (
=
®®) *
date1
®®+ 0
.
®®0 1
AddYears
®®1 9
(
®®9 :
ElapsedYears
©© $
)
©©$ %
.
©©% &
	AddMonths
©©& /
(
©©/ 0
ElapsedMonths
©©0 =
)
©©= >
.
©©> ?
AddDays
©©? F
(
©©F G
ElapsedDays
©©G R
)
©©R S
.
©©S T
AddHours
©©T \
(
©©\ ]
ElapsedHours
©©] i
)
©©i j
;
©©j k
elapsedMinutes
™™ "
=
™™# $
(
™™% &
int
™™& )
)
™™) *
date2
™™* /
.
™™/ 0
Subtract
™™0 8
(
™™8 9
compareDate
™™9 D
)
™™D E
.
™™E F
TotalMinutes
™™F R
;
™™R S
}
´´ 
return
¨¨ 
elapsedMinutes
¨¨ %
.
¨¨% &
Value
¨¨& +
;
¨¨+ ,
}
≠≠ 
}
ÆÆ 	
public
±± 
int
±± 
Seconds
±± 
{
≤≤ 	
get
≥≥ 
{
≥≥ 
return
≥≥ 
(
≥≥ 
int
≥≥ 
)
≥≥ 
Math
≥≥ "
.
≥≥" #
Round
≥≥# (
(
≥≥( )
Round
≥≥) .
(
≥≥. /

difference
≥≥/ 9
.
≥≥9 :
TotalSeconds
≥≥: F
)
≥≥F G
)
≥≥G H
;
≥≥H I
}
≥≥J K
}
¥¥ 	
public
∑∑ 
int
∑∑ 
ElapsedSeconds
∑∑ !
{
∏∏ 	
get
ππ 
{
∫∫ 
if
ªª 
(
ªª 
!
ªª 
elapsedSeconds
ªª #
.
ªª# $
HasValue
ªª$ ,
)
ªª, -
{
ºº 
DateTime
ΩΩ 
compareDate
ΩΩ (
=
ΩΩ) *
date1
ΩΩ+ 0
.
ΩΩ0 1
AddYears
ΩΩ1 9
(
ΩΩ9 :
ElapsedYears
ææ $
)
ææ$ %
.
ææ% &
	AddMonths
ææ& /
(
ææ/ 0
ElapsedMonths
øø %
)
øø% &
.
øø& '
AddDays
øø' .
(
øø. /
ElapsedDays
¿¿ #
)
¿¿# $
.
¿¿$ %
AddHours
¿¿% -
(
¿¿- .
ElapsedHours
¡¡ $
)
¡¡$ %
.
¡¡% &

AddMinutes
¡¡& 0
(
¡¡0 1
ElapsedMinutes
¬¬ &
)
¬¬& '
;
¬¬' (
elapsedSeconds
√√ "
=
√√# $
(
√√% &
int
√√& )
)
√√) *
date2
√√* /
.
√√/ 0
Subtract
√√0 8
(
√√8 9
compareDate
√√9 D
)
√√D E
.
√√E F
TotalSeconds
√√F R
;
√√R S
}
ƒƒ 
return
≈≈ 
elapsedSeconds
≈≈ %
.
≈≈% &
Value
≈≈& +
;
≈≈+ ,
}
∆∆ 
}
«« 	
public
   
string
   
GetDescription
   $
(
  $ %
int
  % (
	precision
  ) 2
=
  3 4
int
  5 8
.
  8 9
MaxValue
  9 A
,
  A B
ITimeFormatter
  C Q
	formatter
  R [
=
  \ ]
null
  ^ b
)
  b c
{
ÀÀ 	
if
ÃÃ 
(
ÃÃ 
	precision
ÃÃ 
<
ÃÃ 
$num
ÃÃ 
)
ÃÃ 
{
ÕÕ 
throw
ŒŒ 
new
ŒŒ )
ArgumentOutOfRangeException
ŒŒ 5
(
ŒŒ5 6
$str
ŒŒ6 A
)
ŒŒA B
;
ŒŒB C
}
œœ 
	formatter
—— 
=
—— 
	formatter
—— !
??
——" $
TimeFormatter
——% 2
.
——2 3
Instance
——3 ;
;
——; <
int
”” 
[
”” 
]
”” 
elapsedItems
”” 
=
””  
new
””! $
int
””% (
[
””( )
$num
””) *
]
””* +
;
””+ ,
elapsedItems
‘‘ 
[
‘‘ 
$num
‘‘ 
]
‘‘ 
=
‘‘ 
ElapsedYears
‘‘ *
;
‘‘* +
elapsedItems
’’ 
[
’’ 
$num
’’ 
]
’’ 
=
’’ 
ElapsedMonths
’’ +
;
’’+ ,
elapsedItems
÷÷ 
[
÷÷ 
$num
÷÷ 
]
÷÷ 
=
÷÷ 
ElapsedDays
÷÷ )
;
÷÷) *
elapsedItems
◊◊ 
[
◊◊ 
$num
◊◊ 
]
◊◊ 
=
◊◊ 
ElapsedHours
◊◊ *
;
◊◊* +
elapsedItems
ÿÿ 
[
ÿÿ 
$num
ÿÿ 
]
ÿÿ 
=
ÿÿ 
ElapsedMinutes
ÿÿ ,
;
ÿÿ, -
elapsedItems
ŸŸ 
[
ŸŸ 
$num
ŸŸ 
]
ŸŸ 
=
ŸŸ 
ElapsedSeconds
ŸŸ ,
;
ŸŸ, -
if
€€ 
(
€€ 
	precision
€€ 
<=
€€ 
elapsedItems
€€ )
.
€€) *
Length
€€* 0
-
€€1 2
$num
€€3 4
)
€€4 5
{
‹‹ 
for
›› 
(
›› 
int
›› 
i
›› 
=
›› 
	precision
›› &
;
››& '
i
››( )
<
››* +
elapsedItems
››, 8
.
››8 9
Length
››9 ?
;
››? @
i
››A B
++
››B D
)
››D E
{
ﬁﬁ 
elapsedItems
ﬂﬂ  
[
ﬂﬂ  !
i
ﬂﬂ! "
]
ﬂﬂ" #
=
ﬂﬂ$ %
$num
ﬂﬂ& '
;
ﬂﬂ' (
}
‡‡ 
}
·· 
return
„„ 
	formatter
„„ 
.
„„ 
GetDuration
„„ (
(
„„( )
elapsedItems
‰‰ 
[
‰‰ 
$num
‰‰ 
]
‰‰ 
,
‰‰  
elapsedItems
ÂÂ 
[
ÂÂ 
$num
ÂÂ 
]
ÂÂ 
,
ÂÂ  
elapsedItems
ÊÊ 
[
ÊÊ 
$num
ÊÊ 
]
ÊÊ 
,
ÊÊ  
elapsedItems
ÁÁ 
[
ÁÁ 
$num
ÁÁ 
]
ÁÁ 
,
ÁÁ  
elapsedItems
ËË 
[
ËË 
$num
ËË 
]
ËË 
,
ËË  
elapsedItems
ÈÈ 
[
ÈÈ 
$num
ÈÈ 
]
ÈÈ 
)
ÈÈ  
;
ÈÈ  !
}
ÍÍ 	
public
ÌÌ 
override
ÌÌ 
string
ÌÌ 
ToString
ÌÌ '
(
ÌÌ' (
)
ÌÌ( )
{
ÓÓ 	
return
ÔÔ 
GetDescription
ÔÔ !
(
ÔÔ! "
)
ÔÔ" #
;
ÔÔ# $
}
 	
public
ÛÛ 
override
ÛÛ 
bool
ÛÛ 
Equals
ÛÛ #
(
ÛÛ# $
object
ÛÛ$ *
obj
ÛÛ+ .
)
ÛÛ. /
{
ÙÙ 	
if
ıı 
(
ıı 
obj
ıı 
==
ıı 
this
ıı 
)
ıı 
{
ˆˆ 
return
˜˜ 
true
˜˜ 
;
˜˜ 
}
¯¯ 
if
˘˘ 
(
˘˘ 
obj
˘˘ 
==
˘˘ 
null
˘˘ 
||
˘˘ 
GetType
˘˘ &
(
˘˘& '
)
˘˘' (
!=
˘˘) +
obj
˘˘, /
.
˘˘/ 0
GetType
˘˘0 7
(
˘˘7 8
)
˘˘8 9
)
˘˘9 :
{
˙˙ 
return
˚˚ 
false
˚˚ 
;
˚˚ 
}
¸¸ 
DateDiff
˛˛ 
comp
˛˛ 
=
˛˛ 
(
˛˛ 
DateDiff
˛˛ %
)
˛˛% &
obj
˛˛& )
;
˛˛) *
return
ˇˇ 
calendar
ˇˇ 
==
ˇˇ 
comp
ˇˇ #
.
ˇˇ# $
calendar
ˇˇ$ ,
&&
ˇˇ- /
yearBaseMonth
ÄÄ 
==
ÄÄ  
comp
ÄÄ! %
.
ÄÄ% &
yearBaseMonth
ÄÄ& 3
&&
ÄÄ4 6
firstDayOfWeek
ÅÅ 
==
ÅÅ !
comp
ÅÅ" &
.
ÅÅ& '
firstDayOfWeek
ÅÅ' 5
&&
ÅÅ6 8
date1
ÇÇ 
==
ÇÇ 
comp
ÇÇ 
.
ÇÇ 
date1
ÇÇ #
&&
ÇÇ$ &
date2
ÉÉ 
==
ÉÉ 
comp
ÉÉ 
.
ÉÉ 
date2
ÉÉ #
&&
ÉÉ$ &

difference
ÑÑ 
==
ÑÑ 
comp
ÑÑ "
.
ÑÑ" #

difference
ÑÑ# -
;
ÑÑ- .
}
ÖÖ 	
public
àà 
override
àà 
int
àà 
GetHashCode
àà '
(
àà' (
)
àà( )
{
ââ 	
return
ää 
HashTool
ää 
.
ää 
ComputeHashCode
ää +
(
ää+ ,
GetType
ää, 3
(
ää3 4
)
ää4 5
.
ää5 6
GetHashCode
ää6 A
(
ääA B
)
ääB C
,
ääC D
calendar
ãã 
,
ãã 
yearBaseMonth
åå 
,
åå 
firstDayOfWeek
çç 
,
çç 
date1
éé 
,
éé 
date2
èè 
,
èè 

difference
êê 
)
êê 
;
êê 
}
ëë 	
private
îî 
static
îî 
double
îî 
Round
îî #
(
îî# $
double
îî$ *
number
îî+ 1
)
îî1 2
{
ïï 	
if
ññ 
(
ññ 
number
ññ 
>=
ññ 
$num
ññ 
)
ññ 
{
óó 
return
òò 
Math
òò 
.
òò 
Floor
òò !
(
òò! "
number
òò" (
)
òò( )
;
òò) *
}
ôô 
return
öö 
-
öö 
Math
öö 
.
öö 
Floor
öö 
(
öö 
-
öö  
number
öö  &
)
öö& '
;
öö' (
}
õõ 	
private
ûû 
int
ûû 
	CalcYears
ûû 
(
ûû 
)
ûû 
{
üü 	
if
†† 
(
†† 
TimeCompare
†† 
.
†† 
IsSameMonth
†† '
(
††' (
date1
††( -
,
††- .
date2
††/ 4
)
††4 5
)
††5 6
{
°° 
return
¢¢ 
$num
¢¢ 
;
¢¢ 
}
££ 
int
•• 

compareDay
•• 
=
•• 
date2
•• "
.
••" #
Day
••# &
;
••& '
int
¶¶ !
compareDaysPerMonth
¶¶ #
=
¶¶$ %
calendar
¶¶& .
.
¶¶. /
GetDaysInMonth
¶¶/ =
(
¶¶= >
Year1
¶¶> C
,
¶¶C D
Month2
¶¶E K
)
¶¶K L
;
¶¶L M
if
ßß 
(
ßß 

compareDay
ßß 
>
ßß !
compareDaysPerMonth
ßß 0
)
ßß0 1
{
®® 

compareDay
©© 
=
©© !
compareDaysPerMonth
©© 0
;
©©0 1
}
™™ 
DateTime
´´ 
compareDate
´´  
=
´´! "
new
´´# &
DateTime
´´' /
(
´´/ 0
Year1
´´0 5
,
´´5 6
Month2
´´7 =
,
´´= >

compareDay
´´? I
,
´´I J
date2
¨¨ 
.
¨¨ 
Hour
¨¨ 
,
¨¨ 
date2
¨¨ !
.
¨¨! "
Minute
¨¨" (
,
¨¨( )
date2
¨¨* /
.
¨¨/ 0
Second
¨¨0 6
,
¨¨6 7
date2
¨¨8 =
.
¨¨= >
Millisecond
¨¨> I
)
¨¨I J
;
¨¨J K
if
≠≠ 
(
≠≠ 
date2
≠≠ 
>
≠≠ 
date1
≠≠ 
)
≠≠ 
{
ÆÆ 
if
ØØ 
(
ØØ 
compareDate
ØØ 
<
ØØ  !
date1
ØØ" '
)
ØØ' (
{
∞∞ 
compareDate
±± 
=
±±  !
compareDate
±±" -
.
±±- .
AddYears
±±. 6
(
±±6 7
$num
±±7 8
)
±±8 9
;
±±9 :
}
≤≤ 
}
≥≥ 
else
¥¥ 
{
µµ 
if
∂∂ 
(
∂∂ 
compareDate
∂∂ 
>
∂∂  !
date1
∂∂" '
)
∂∂' (
{
∑∑ 
compareDate
∏∏ 
=
∏∏  !
compareDate
∏∏" -
.
∏∏- .
AddYears
∏∏. 6
(
∏∏6 7
-
∏∏7 8
$num
∏∏8 9
)
∏∏9 :
;
∏∏: ;
}
ππ 
}
∫∫ 
return
ªª 
Year2
ªª 
-
ªª 
calendar
ªª #
.
ªª# $
GetYear
ªª$ +
(
ªª+ ,
compareDate
ªª, 7
)
ªª7 8
;
ªª8 9
}
ºº 	
private
øø 
int
øø 
CalcQuarters
øø  
(
øø  !
)
øø! "
{
¿¿ 	
if
¡¡ 
(
¡¡ 
TimeCompare
¡¡ 
.
¡¡ 
IsSameMonth
¡¡ '
(
¡¡' (
date1
¡¡( -
,
¡¡- .
date2
¡¡/ 4
)
¡¡4 5
)
¡¡5 6
{
¬¬ 
return
√√ 
$num
√√ 
;
√√ 
}
ƒƒ 
int
∆∆ 
year1
∆∆ 
=
∆∆ 
TimeTool
∆∆  
.
∆∆  !
	GetYearOf
∆∆! *
(
∆∆* +
yearBaseMonth
∆∆+ 8
,
∆∆8 9
Year1
∆∆: ?
,
∆∆? @
Month1
∆∆A G
)
∆∆G H
;
∆∆H I
YearQuarter
«« 
quarter1
««  
=
««! "
TimeTool
««# +
.
««+ ,
GetQuarterOfMonth
««, =
(
««= >
yearBaseMonth
««> K
,
««K L
(
««M N
	YearMonth
««N W
)
««W X
Month1
««X ^
)
««^ _
;
««_ `
int
…… 
year2
…… 
=
…… 
TimeTool
……  
.
……  !
	GetYearOf
……! *
(
……* +
yearBaseMonth
……+ 8
,
……8 9
Year2
……: ?
,
……? @
Month2
……A G
)
……G H
;
……H I
YearQuarter
   
quarter2
    
=
  ! "
TimeTool
  # +
.
  + ,
GetQuarterOfMonth
  , =
(
  = >
yearBaseMonth
  > K
,
  K L
(
  M N
	YearMonth
  N W
)
  W X
Month2
  X ^
)
  ^ _
;
  _ `
return
ÃÃ 
year2
ÕÕ 
*
ÕÕ 
TimeSpec
ÕÕ  
.
ÕÕ  !
QuartersPerYear
ÕÕ! 0
+
ÕÕ1 2
quarter2
ÕÕ3 ;
-
ÕÕ< =
(
ŒŒ 
year1
ŒŒ 
*
ŒŒ 
TimeSpec
ŒŒ !
.
ŒŒ! "
QuartersPerYear
ŒŒ" 1
+
ŒŒ2 3
quarter1
ŒŒ4 <
)
ŒŒ< =
;
ŒŒ= >
}
œœ 	
private
““ 
int
““ 

CalcMonths
““ 
(
““ 
)
““  
{
”” 	
if
‘‘ 
(
‘‘ 
TimeCompare
‘‘ 
.
‘‘ 
	IsSameDay
‘‘ %
(
‘‘% &
date1
‘‘& +
,
‘‘+ ,
date2
‘‘- 2
)
‘‘2 3
)
‘‘3 4
{
’’ 
return
÷÷ 
$num
÷÷ 
;
÷÷ 
}
◊◊ 
int
ŸŸ 

compareDay
ŸŸ 
=
ŸŸ 
date2
ŸŸ "
.
ŸŸ" #
Day
ŸŸ# &
;
ŸŸ& '
int
⁄⁄ !
compareDaysPerMonth
⁄⁄ #
=
⁄⁄$ %
calendar
⁄⁄& .
.
⁄⁄. /
GetDaysInMonth
⁄⁄/ =
(
⁄⁄= >
Year1
⁄⁄> C
,
⁄⁄C D
Month1
⁄⁄E K
)
⁄⁄K L
;
⁄⁄L M
if
€€ 
(
€€ 

compareDay
€€ 
>
€€ !
compareDaysPerMonth
€€ 0
)
€€0 1
{
‹‹ 

compareDay
›› 
=
›› !
compareDaysPerMonth
›› 0
;
››0 1
}
ﬁﬁ 
DateTime
‡‡ 
compareDate
‡‡  
=
‡‡! "
new
‡‡# &
DateTime
‡‡' /
(
‡‡/ 0
Year1
‡‡0 5
,
‡‡5 6
Month1
‡‡7 =
,
‡‡= >

compareDay
‡‡? I
,
‡‡I J
date2
·· 
.
·· 
Hour
·· 
,
·· 
date2
·· !
.
··! "
Minute
··" (
,
··( )
date2
··* /
.
··/ 0
Second
··0 6
,
··6 7
date2
··8 =
.
··= >
Millisecond
··> I
)
··I J
;
··J K
if
‚‚ 
(
‚‚ 
date2
‚‚ 
>
‚‚ 
date1
‚‚ 
)
‚‚ 
{
„„ 
if
‰‰ 
(
‰‰ 
compareDate
‰‰ 
<
‰‰  !
date1
‰‰" '
)
‰‰' (
{
ÂÂ 
compareDate
ÊÊ 
=
ÊÊ  !
compareDate
ÊÊ" -
.
ÊÊ- .
	AddMonths
ÊÊ. 7
(
ÊÊ7 8
$num
ÊÊ8 9
)
ÊÊ9 :
;
ÊÊ: ;
}
ÁÁ 
}
ËË 
else
ÈÈ 
{
ÍÍ 
if
ÎÎ 
(
ÎÎ 
compareDate
ÎÎ 
>
ÎÎ  !
date1
ÎÎ" '
)
ÎÎ' (
{
ÏÏ 
compareDate
ÌÌ 
=
ÌÌ  !
compareDate
ÌÌ" -
.
ÌÌ- .
	AddMonths
ÌÌ. 7
(
ÌÌ7 8
-
ÌÌ8 9
$num
ÌÌ9 :
)
ÌÌ: ;
;
ÌÌ; <
}
ÓÓ 
}
ÔÔ 
return
 
Year2
ÒÒ 
*
ÒÒ 
TimeSpec
ÒÒ 
.
ÒÒ 
MonthsPerYear
ÒÒ *
+
ÒÒ+ ,
Month2
ÒÒ- 3
-
ÒÒ4 5
(
ÚÚ 
calendar
ÚÚ 
.
ÚÚ 
GetYear
ÚÚ 
(
ÚÚ 
compareDate
ÚÚ )
)
ÚÚ) *
*
ÚÚ+ ,
TimeSpec
ÚÚ- 5
.
ÚÚ5 6
MonthsPerYear
ÚÚ6 C
+
ÚÚD E
calendar
ÚÚF N
.
ÚÚN O
GetMonth
ÚÚO W
(
ÚÚW X
compareDate
ÚÚX c
)
ÚÚc d
)
ÚÚd e
;
ÚÚe f
}
ÛÛ 	
private
ˆˆ 
int
ˆˆ 
	CalcWeeks
ˆˆ 
(
ˆˆ 
)
ˆˆ 
{
˜˜ 	
if
¯¯ 
(
¯¯ 
TimeCompare
¯¯ 
.
¯¯ 
	IsSameDay
¯¯ %
(
¯¯% &
date1
¯¯& +
,
¯¯+ ,
date2
¯¯- 2
)
¯¯2 3
)
¯¯3 4
{
˘˘ 
return
˙˙ 
$num
˙˙ 
;
˙˙ 
}
˚˚ 
DateTime
˝˝ 
week1
˝˝ 
=
˝˝ 
TimeTool
˝˝ %
.
˝˝% &
GetStartOfWeek
˝˝& 4
(
˝˝4 5
date1
˝˝5 :
,
˝˝: ;
firstDayOfWeek
˝˝< J
)
˝˝J K
;
˝˝K L
DateTime
˛˛ 
week2
˛˛ 
=
˛˛ 
TimeTool
˛˛ %
.
˛˛% &
GetStartOfWeek
˛˛& 4
(
˛˛4 5
date2
˛˛5 :
,
˛˛: ;
firstDayOfWeek
˛˛< J
)
˛˛J K
;
˛˛K L
if
ˇˇ 
(
ˇˇ 
week1
ˇˇ 
.
ˇˇ 
Equals
ˇˇ 
(
ˇˇ 
week2
ˇˇ "
)
ˇˇ" #
)
ˇˇ# $
{
ÄÄ 
return
ÅÅ 
$num
ÅÅ 
;
ÅÅ 
}
ÇÇ 
return
ÑÑ 
(
ÑÑ 
int
ÑÑ 
)
ÑÑ 
(
ÑÑ 
week2
ÑÑ 
.
ÑÑ 
Subtract
ÑÑ '
(
ÑÑ' (
week1
ÑÑ( -
)
ÑÑ- .
.
ÑÑ. /
	TotalDays
ÑÑ/ 8
/
ÑÑ9 :
TimeSpec
ÑÑ; C
.
ÑÑC D
DaysPerWeek
ÑÑD O
)
ÑÑO P
;
ÑÑP Q
}
ÖÖ 	
private
ââ 
readonly
ââ 
Calendar
ââ !
calendar
ââ" *
;
ââ* +
private
ää 
readonly
ää 
	YearMonth
ää "
yearBaseMonth
ää# 0
;
ää0 1
private
ãã 
readonly
ãã 
	DayOfWeek
ãã "
firstDayOfWeek
ãã# 1
;
ãã1 2
private
åå 
readonly
åå 
DateTime
åå !
date1
åå" '
;
åå' (
private
çç 
readonly
çç 
DateTime
çç !
date2
çç" '
;
çç' (
private
éé 
readonly
éé 
TimeSpan
éé !

difference
éé" ,
;
éé, -
private
êê 
int
êê 
?
êê 
years
êê 
;
êê 
private
ëë 
int
ëë 
?
ëë 
quarters
ëë 
;
ëë 
private
íí 
int
íí 
?
íí 
months
íí 
;
íí 
private
ìì 
int
ìì 
?
ìì 
weeks
ìì 
;
ìì 
private
îî 
int
îî 
?
îî 
elapsedYears
îî !
;
îî! "
private
ïï 
int
ïï 
?
ïï 
elapsedMonths
ïï "
;
ïï" #
private
ññ 
int
ññ 
?
ññ 
elapsedDays
ññ  
;
ññ  !
private
óó 
int
óó 
?
óó 
elapsedHours
óó !
;
óó! "
private
òò 
int
òò 
?
òò 
elapsedMinutes
òò #
;
òò# $
private
ôô 
int
ôô 
?
ôô 
elapsedSeconds
ôô #
;
ôô# $
}
õõ 
}ùù ª~
lF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\DateTimeSet.cs
	namespace 	
Phoenix
 
. 
CrossCutting 
. 

TimePeriod )
{ 
public 

class 
DateTimeSet 
: 
IDateTimeSet +
{ 
public 
DateTimeSet 
( 
) 
{ 	
} 	
public 
DateTimeSet 
( 
IEnumerable &
<& '
DateTime' /
>/ 0
moments1 8
)8 9
{ 	
AddAll 
( 
moments 
) 
; 
} 	
public 
DateTime 
this 
[ 
int  
index! &
]& '
{ 	
get   
{   
return   
moments    
[    !
index  ! &
]  & '
;  ' (
}  ) *
}!! 	
public$$ 
DateTime$$ 
?$$ 
Min$$ 
{%% 	
get&& 
{&& 
return&& 
!&& 
IsEmpty&& !
?&&" #
moments&&$ +
[&&+ ,
$num&&, -
]&&- .
:&&/ 0
null&&1 5
;&&5 6
}&&7 8
}'' 	
public** 
DateTime** 
?** 
Max** 
{++ 	
get,, 
{,, 
return,, 
!,, 
IsEmpty,, !
?,," #
moments,,$ +
[,,+ ,
Count,,, 1
-,,2 3
$num,,4 5
],,5 6
:,,7 8
null,,9 =
;,,= >
},,? @
}-- 	
public00 
TimeSpan00 
?00 
Duration00 !
{11 	
get22 
{33 
DateTime44 
?44 
min44 
=44 
Min44  #
;44# $
DateTime55 
?55 
max55 
=55 
Max55  #
;55# $
return66 
min66 
.66 
HasValue66 #
&&66$ &
max66' *
.66* +
HasValue66+ 3
?664 5
max666 9
.669 :
Value66: ?
-66@ A
min66B E
.66E F
Value66F K
:66L M
null66N R
;66R S
}77 
}88 	
public;; 
bool;; 
IsEmpty;; 
{<< 	
get== 
{== 
return== 
Count== 
==== !
$num==" #
;==# $
}==% &
}>> 	
publicAA 
boolAA 
IsMomentAA 
{BB 	
getCC 
{DD 
TimeSpanEE 
?EE 
durationEE "
=EE# $
DurationEE% -
;EE- .
returnFF 
durationFF 
.FF  
HasValueFF  (
&&FF) +
durationFF, 4
.FF4 5
ValueFF5 :
==FF; =
TimeSpanFF> F
.FFF G
ZeroFFG K
;FFK L
}GG 
}HH 	
publicKK 
boolKK 
	IsAnytimeKK 
{LL 	
getMM 
{NN 
DateTimeOO 
?OO 
minOO 
=OO 
MinOO  #
;OO# $
DateTimePP 
?PP 
maxPP 
=PP 
MaxPP  #
;PP# $
returnQQ 
minRR 
.RR 
HasValueRR  
&&RR! #
minRR$ '
.RR' (
ValueRR( -
==RR. 0
DateTimeRR1 9
.RR9 :
MinValueRR: B
&&RRC E
maxSS 
.SS 
HasValueSS  
&&SS! #
maxSS$ '
.SS' (
ValueSS( -
==SS. 0
DateTimeSS1 9
.SS9 :
MaxValueSS: B
;SSB C
}TT 
}UU 	
publicXX 
intXX 
CountXX 
{YY 	
getZZ 
{ZZ 
returnZZ 
momentsZZ  
.ZZ  !
CountZZ! &
;ZZ& '
}ZZ( )
}[[ 	
bool^^ 
ICollection^^ 
<^^ 
DateTime^^ !
>^^! "
.^^" #

IsReadOnly^^# -
{__ 	
get`` 
{`` 
return`` 
false`` 
;`` 
}``  !
}aa 	
publicdd 
intdd 
IndexOfdd 
(dd 
DateTimedd #
momentdd$ *
)dd* +
{ee 	
returnff 
momentsff 
.ff 
IndexOfff "
(ff" #
momentff# )
)ff) *
;ff* +
}gg 	
publicjj 
DateTimejj 
?jj 
FindPreviousjj %
(jj% &
DateTimejj& .
momentjj/ 5
)jj5 6
{kk 	
ifll 
(ll 
IsEmptyll 
)ll 
{mm 
returnnn 
nullnn 
;nn 
}oo 
forqq 
(qq 
intqq 
iqq 
=qq 
Countqq 
-qq  
$numqq! "
;qq" #
iqq$ %
>=qq& (
$numqq) *
;qq* +
iqq, -
--qq- /
)qq/ 0
{rr 
ifss 
(ss 
momentsss 
[ss 
iss 
]ss 
<ss  
momentss! '
)ss' (
{tt 
returnuu 
momentsuu "
[uu" #
iuu# $
]uu$ %
;uu% &
}vv 
}ww 
returnyy 
nullyy 
;yy 
}zz 	
public}} 
DateTime}} 
?}} 
FindNext}} !
(}}! "
DateTime}}" *
moment}}+ 1
)}}1 2
{~~ 	
if 
( 
IsEmpty 
) 
{
ÄÄ 
return
ÅÅ 
null
ÅÅ 
;
ÅÅ 
}
ÇÇ 
for
ÑÑ 
(
ÑÑ 
int
ÑÑ 
i
ÑÑ 
=
ÑÑ 
$num
ÑÑ 
;
ÑÑ 
i
ÑÑ 
<
ÑÑ 
Count
ÑÑ  %
;
ÑÑ% &
i
ÑÑ' (
++
ÑÑ( *
)
ÑÑ* +
{
ÖÖ 
if
ÜÜ 
(
ÜÜ 
moments
ÜÜ 
[
ÜÜ 
i
ÜÜ 
]
ÜÜ 
>
ÜÜ  
moment
ÜÜ! '
)
ÜÜ' (
{
áá 
return
àà 
moments
àà "
[
àà" #
i
àà# $
]
àà$ %
;
àà% &
}
ââ 
}
ää 
return
åå 
null
åå 
;
åå 
}
çç 	
public
êê 
IEnumerator
êê 
<
êê 
DateTime
êê #
>
êê# $
GetEnumerator
êê% 2
(
êê2 3
)
êê3 4
{
ëë 	
return
íí 
moments
íí 
.
íí 
GetEnumerator
íí (
(
íí( )
)
íí) *
;
íí* +
}
ìì 	
IEnumerator
ññ 
IEnumerable
ññ 
.
ññ  
GetEnumerator
ññ  -
(
ññ- .
)
ññ. /
{
óó 	
return
òò 
GetEnumerator
òò  
(
òò  !
)
òò! "
;
òò" #
}
ôô 	
public
úú 
bool
úú 
Add
úú 
(
úú 
DateTime
úú  
moment
úú! '
)
úú' (
{
ùù 	
if
ûû 
(
ûû 
Contains
ûû 
(
ûû 
moment
ûû 
)
ûû  
)
ûû  !
{
üü 
return
†† 
false
†† 
;
†† 
}
°° 
for
££ 
(
££ 
int
££ 
i
££ 
=
££ 
$num
££ 
;
££ 
i
££ 
<
££ 
Count
££  %
;
££% &
i
££' (
++
££( *
)
££* +
{
§§ 
if
•• 
(
•• 
moments
•• 
[
•• 
i
•• 
]
•• 
<=
•• !
moment
••" (
)
••( )
{
¶¶ 
continue
ßß 
;
ßß 
}
®® 
moments
©© 
.
©© 
Insert
©© 
(
©© 
i
©©  
,
©©  !
moment
©©" (
)
©©( )
;
©©) *
return
™™ 
true
™™ 
;
™™ 
}
´´ 
moments
≠≠ 
.
≠≠ 
Add
≠≠ 
(
≠≠ 
moment
≠≠ 
)
≠≠ 
;
≠≠  
return
ÆÆ 
true
ÆÆ 
;
ÆÆ 
}
ØØ 	
void
≤≤ 
ICollection
≤≤ 
<
≤≤ 
DateTime
≤≤ !
>
≤≤! "
.
≤≤" #
Add
≤≤# &
(
≤≤& '
DateTime
≤≤' /
moment
≤≤0 6
)
≤≤6 7
{
≥≥ 	
Add
¥¥ 
(
¥¥ 
moment
¥¥ 
)
¥¥ 
;
¥¥ 
}
µµ 	
public
∏∏ 
void
∏∏ 
AddAll
∏∏ 
(
∏∏ 
IEnumerable
∏∏ &
<
∏∏& '
DateTime
∏∏' /
>
∏∏/ 0
items
∏∏1 6
)
∏∏6 7
{
ππ 	
if
∫∫ 
(
∫∫ 
items
∫∫ 
==
∫∫ 
null
∫∫ 
)
∫∫ 
{
ªª 
throw
ºº 
new
ºº #
ArgumentNullException
ºº /
(
ºº/ 0
$str
ºº0 7
)
ºº7 8
;
ºº8 9
}
ΩΩ 
foreach
øø 
(
øø 
DateTime
øø 
item
øø "
in
øø# %
items
øø& +
)
øø+ ,
{
¿¿ 
Add
¡¡ 
(
¡¡ 
item
¡¡ 
)
¡¡ 
;
¡¡ 
}
¬¬ 
}
√√ 	
public
∆∆ 
IList
∆∆ 
<
∆∆ 
TimeSpan
∆∆ 
>
∆∆ 
GetDurations
∆∆ +
(
∆∆+ ,
int
∆∆, /

startIndex
∆∆0 :
,
∆∆: ;
int
∆∆< ?
count
∆∆@ E
)
∆∆E F
{
«« 	
if
»» 
(
»» 

startIndex
»» 
>=
»» 
Count
»» #
-
»»$ %
$num
»»& '
)
»»' (
{
…… 
throw
   
new
   )
ArgumentOutOfRangeException
   5
(
  5 6
$str
  6 B
)
  B C
;
  C D
}
ÀÀ 
if
ÃÃ 
(
ÃÃ 
count
ÃÃ 
<=
ÃÃ 
$num
ÃÃ 
)
ÃÃ 
{
ÕÕ 
throw
ŒŒ 
new
ŒŒ )
ArgumentOutOfRangeException
ŒŒ 5
(
ŒŒ5 6
$str
ŒŒ6 =
)
ŒŒ= >
;
ŒŒ> ?
}
œœ 
int
—— 
endIndex
—— 
=
—— 

startIndex
—— %
+
——& '
count
——( -
-
——. /
$num
——0 1
;
——1 2
if
““ 
(
““ 
endIndex
““ 
>=
““ 
Count
““ !
-
““" #
$num
““$ %
)
““% &
{
”” 
endIndex
‘‘ 
=
‘‘ 
Count
‘‘  
-
‘‘! "
$num
‘‘# $
;
‘‘$ %
}
’’ 
List
◊◊ 
<
◊◊ 
TimeSpan
◊◊ 
>
◊◊ 
	durations
◊◊ $
=
◊◊% &
new
◊◊' *
List
◊◊+ /
<
◊◊/ 0
TimeSpan
◊◊0 8
>
◊◊8 9
(
◊◊9 :
)
◊◊: ;
;
◊◊; <
if
ÿÿ 
(
ÿÿ 
endIndex
ÿÿ 
>=
ÿÿ 

startIndex
ÿÿ &
)
ÿÿ& '
{
ŸŸ 
for
⁄⁄ 
(
⁄⁄ 
int
⁄⁄ 
i
⁄⁄ 
=
⁄⁄ 

startIndex
⁄⁄ '
;
⁄⁄' (
i
⁄⁄) *
<=
⁄⁄+ -
endIndex
⁄⁄. 6
;
⁄⁄6 7
i
⁄⁄8 9
++
⁄⁄9 ;
)
⁄⁄; <
{
€€ 
	durations
‹‹ 
.
‹‹ 
Add
‹‹ !
(
‹‹! "
this
‹‹" &
[
‹‹& '
i
‹‹' (
+
‹‹) *
$num
‹‹+ ,
]
‹‹, -
-
‹‹. /
this
‹‹0 4
[
‹‹4 5
i
‹‹5 6
]
‹‹6 7
)
‹‹7 8
;
‹‹8 9
}
›› 
}
ﬁﬁ 
return
ﬂﬂ 
	durations
ﬂﬂ 
;
ﬂﬂ 
}
‡‡ 	
public
„„ 
void
„„ 
Clear
„„ 
(
„„ 
)
„„ 
{
‰‰ 	
moments
ÂÂ 
.
ÂÂ 
Clear
ÂÂ 
(
ÂÂ 
)
ÂÂ 
;
ÂÂ 
}
ÊÊ 	
public
ÈÈ 
bool
ÈÈ 
Contains
ÈÈ 
(
ÈÈ 
DateTime
ÈÈ %
moment
ÈÈ& ,
)
ÈÈ, -
{
ÍÍ 	
return
ÎÎ 
moments
ÎÎ 
.
ÎÎ 
Contains
ÎÎ #
(
ÎÎ# $
moment
ÎÎ$ *
)
ÎÎ* +
;
ÎÎ+ ,
}
ÏÏ 	
public
ÔÔ 
void
ÔÔ 
CopyTo
ÔÔ 
(
ÔÔ 
DateTime
ÔÔ #
[
ÔÔ# $
]
ÔÔ$ %
array
ÔÔ& +
,
ÔÔ+ ,
int
ÔÔ- 0

arrayIndex
ÔÔ1 ;
)
ÔÔ; <
{
 	
moments
ÒÒ 
.
ÒÒ 
CopyTo
ÒÒ 
(
ÒÒ 
array
ÒÒ  
,
ÒÒ  !

arrayIndex
ÒÒ" ,
)
ÒÒ, -
;
ÒÒ- .
}
ÚÚ 	
public
ıı 
bool
ıı 
Remove
ıı 
(
ıı 
DateTime
ıı #
moment
ıı$ *
)
ıı* +
{
ˆˆ 	
return
˜˜ 
moments
˜˜ 
.
˜˜ 
Remove
˜˜ !
(
˜˜! "
moment
˜˜" (
)
˜˜( )
;
˜˜) *
}
¯¯ 	
public
˚˚ 
override
˚˚ 
bool
˚˚ 
Equals
˚˚ #
(
˚˚# $
object
˚˚$ *
obj
˚˚+ .
)
˚˚. /
{
¸¸ 	
return
˝˝ 
moments
˝˝ 
.
˝˝ 
Equals
˝˝ !
(
˝˝! "
obj
˝˝" %
)
˝˝% &
;
˝˝& '
}
˛˛ 	
public
ÅÅ 
override
ÅÅ 
int
ÅÅ 
GetHashCode
ÅÅ '
(
ÅÅ' (
)
ÅÅ( )
{
ÇÇ 	
return
ÉÉ 
moments
ÉÉ 
.
ÉÉ 
GetHashCode
ÉÉ &
(
ÉÉ& '
)
ÉÉ' (
;
ÉÉ( )
}
ÑÑ 	
public
áá 
override
áá 
string
áá 
ToString
áá '
(
áá' (
)
áá( )
{
àà 	
DateTime
ââ 
?
ââ 
min
ââ 
=
ââ 
Min
ââ 
;
ââ  
DateTime
ää 
?
ää 
max
ää 
=
ää 
Max
ää 
;
ää  
TimeSpan
ãã 
?
ãã 
duration
ãã 
=
ãã  
Duration
ãã! )
;
ãã) *
if
åå 
(
åå 
!
åå 
min
åå 
.
åå 
HasValue
åå 
||
åå  
!
åå! "
max
åå" %
.
åå% &
HasValue
åå& .
||
åå/ 1
!
åå2 3
duration
åå3 ;
.
åå; <
HasValue
åå< D
)
ååD E
{
çç 
return
éé 
TimeFormatter
éé $
.
éé$ %
Instance
éé% -
.
éé- .
GetCollection
éé. ;
(
éé; <
Count
éé< A
)
ééA B
;
ééB C
}
èè 
return
ëë 
TimeFormatter
ëë  
.
ëë  !
Instance
ëë! )
.
ëë) *!
GetCollectionPeriod
ëë* =
(
ëë= >
Count
ëë> C
,
ëëC D
min
ëëE H
.
ëëH I
Value
ëëI N
,
ëëN O
max
ëëP S
.
ëëS T
Value
ëëT Y
,
ëëY Z
duration
ëë[ c
.
ëëc d
Value
ëëd i
)
ëëi j
;
ëëj k
}
íí 	
private
ññ 
readonly
ññ 
List
ññ 
<
ññ 
DateTime
ññ &
>
ññ& '
moments
ññ( /
=
ññ0 1
new
ññ2 5
List
ññ6 :
<
ññ: ;
DateTime
ññ; C
>
ññC D
(
ññD E
)
ññE F
;
ññF G
}
òò 
}öö ¬2
dF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\Day.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

sealed 
class 
Day 
: 
DayTimeRange *
{ 
public 
Day 
( 
) 
: 
this 
( 
new 
TimeCalendar !
(! "
)" #
)# $
{ 	
} 	
public 
Day 
( 
DateTime 
moment "
)" #
:$ %
this 
( 
moment 
, 
new 
TimeCalendar )
() *
)* +
)+ ,
{ 	
} 	
public 
Day 
( 
ITimeCalendar  
calendar! )
)) *
:+ ,
this 
( 

ClockProxy 
. 
Clock !
.! "
Now" %
,% &
calendar' /
)/ 0
{   	
}!! 	
public$$ 
Day$$ 
($$ 
DateTime$$ 
moment$$ "
,$$" #
ITimeCalendar$$$ 1
calendar$$2 :
)$$: ;
:$$< =
this%% 
(%% 
calendar%% 
.%% 
GetYear%% !
(%%! "
moment%%" (
)%%( )
,%%) *
calendar%%+ 3
.%%3 4
GetMonth%%4 <
(%%< =
moment%%= C
)%%C D
,%%D E
calendar%%F N
.%%N O
GetDayOfMonth%%O \
(%%\ ]
moment%%] c
)%%c d
,%%d e
calendar%%f n
)%%n o
{&& 	
}'' 	
public** 
Day** 
(** 
int** 
year** 
,** 
int**  
month**! &
)**& '
:**( )
this++ 
(++ 
year++ 
,++ 
month++ 
,++ 
new++ !
TimeCalendar++" .
(++. /
)++/ 0
)++0 1
{,, 	
}-- 	
public00 
Day00 
(00 
int00 
year00 
,00 
int00  
month00! &
,00& '
ITimeCalendar00( 5
calendar006 >
)00> ?
:00@ A
this11 
(11 
year11 
,11 
month11 
,11 
$num11 
,11  
calendar11! )
)11) *
{22 	
}33 	
public66 
Day66 
(66 
int66 
year66 
,66 
int66  
month66! &
,66& '
int66( +
day66, /
)66/ 0
:661 2
this77 
(77 
year77 
,77 
month77 
,77 
day77 !
,77! "
new77# &
TimeCalendar77' 3
(773 4
)774 5
)775 6
{88 	
}99 	
public<< 
Day<< 
(<< 
int<< 
year<< 
,<< 
int<<  
month<<! &
,<<& '
int<<( +
day<<, /
,<</ 0
ITimeCalendar<<1 >
calendar<<? G
)<<G H
:<<I J
base== 
(== 
year== 
,== 
month== 
,== 
day== !
,==! "
$num==# $
,==$ %
calendar==& .
)==. /
{>> 	
}?? 	
publicBB 
intBB 
YearBB 
{CC 	
getDD 
{DD 
returnDD 
	StartYearDD "
;DD" #
}DD$ %
}EE 	
publicHH 
intHH 
MonthHH 
{II 	
getJJ 
{JJ 
returnJJ 

StartMonthJJ #
;JJ# $
}JJ% &
}KK 	
publicNN 
intNN 
DayValueNN 
{OO 	
getPP 
{PP 
returnPP 
StartDayPP !
;PP! "
}PP# $
}QQ 	
publicTT 
	DayOfWeekTT 
	DayOfWeekTT "
{UU 	
getVV 
{VV 
returnVV 
StartDayOfWeekVV '
;VV' (
}VV) *
}WW 	
publicZZ 
stringZZ 
DayNameZZ 
{[[ 	
get\\ 
{\\ 
return\\ 
StartDayName\\ %
;\\% &
}\\' (
}]] 	
public`` 
Day`` 
GetPreviousDay`` !
(``! "
)``" #
{aa 	
returnbb 
AddDaysbb 
(bb 
-bb 
$numbb 
)bb 
;bb 
}cc 	
publicff 
Dayff 

GetNextDayff 
(ff 
)ff 
{gg 	
returnhh 
AddDayshh 
(hh 
$numhh 
)hh 
;hh 
}ii 	
publicll 
Dayll 
AddDaysll 
(ll 
intll 
daysll #
)ll# $
{mm 	
DateTimenn 
startDaynn 
=nn 
newnn  #
DateTimenn$ ,
(nn, -
	StartYearnn- 6
,nn6 7

StartMonthnn8 B
,nnB C
StartDaynnD L
)nnL M
;nnM N
returnoo 
newoo 
Dayoo 
(oo 
startDayoo #
.oo# $
AddDaysoo$ +
(oo+ ,
daysoo, 0
)oo0 1
,oo1 2
Calendaroo3 ;
)oo; <
;oo< =
}pp 	
	protectedss 
overridess 
stringss !
Formatss" (
(ss( )
ITimeFormatterss) 7
	formatterss8 A
)ssA B
{tt 	
returnuu 
	formatteruu 
.uu 
GetCalendarPerioduu .
(uu. /
DayNameuu/ 6
,uu6 7
	formattervv 
.vv 
GetShortDatevv &
(vv& '
Startvv' ,
)vv, -
,vv- .
	formattervv/ 8
.vv8 9
GetShortDatevv9 E
(vvE F
EndvvF I
)vvI J
,vvJ K
DurationvvL T
)vvT U
;vvU V
}ww 	
}yy 
}{{ ≠
mF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\DayHourRange.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

class 
DayHourRange 
: 
	HourRange  )
{ 
public 
DayHourRange 
( 
	DayOfWeek %
day& )
,) *
int+ .
hour/ 3
)3 4
:5 6
base 
( 
hour 
, 
hour 
) 
{ 	
this 
. 
day 
= 
day 
; 
} 	
public 
DayHourRange 
( 
	DayOfWeek %
day& )
,) *
int+ .
	startHour/ 8
,8 9
int: =
endHour> E
)E F
:G H
base 
( 
new 
Time 
( 
	startHour #
)# $
,$ %
new& )
Time* .
(. /
endHour/ 6
)6 7
)7 8
{ 	
this 
. 
day 
= 
day 
; 
} 	
public   
DayHourRange   
(   
	DayOfWeek   %
day  & )
,  ) *
Time  + /
start  0 5
,  5 6
Time  7 ;
end  < ?
)  ? @
:  A B
base!! 
(!! 
start!! 
,!! 
end!! 
)!! 
{"" 	
this## 
.## 
day## 
=## 
day## 
;## 
}$$ 	
public'' 
	DayOfWeek'' 
Day'' 
{(( 	
get)) 
{)) 
return)) 
day)) 
;)) 
})) 
}** 	
public-- 
override-- 
string-- 
ToString-- '
(--' (
)--( )
{.. 	
return// 
Day// 
+// 
$str// 
+// 
base//  $
.//$ %
ToString//% -
(//- .
)//. /
;/// 0
}00 	
private44 
readonly44 
	DayOfWeek44 "
day44# &
;44& '
}66 
}88 Å
iF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\DayRange.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

struct 
DayRange 
{ 
public 
DayRange 
( 
int 
day 
)  
:! "
this 
( 
day 
, 
day 
) 
{ 	
} 	
public 
DayRange 
( 
int 
min 
,  
int! $
max% (
)( )
{ 	
if 
( 
min 
< 
$num 
|| 
min 
>  
TimeSpec! )
.) *
MaxDaysPerMonth* 9
)9 :
{ 
throw 
new '
ArgumentOutOfRangeException 5
(5 6
$str6 ;
); <
;< =
} 
if 
( 
max 
< 
min 
|| 
max  
>! "
TimeSpec# +
.+ ,
MaxDaysPerMonth, ;
); <
{ 
throw   
new   '
ArgumentOutOfRangeException   5
(  5 6
$str  6 ;
)  ; <
;  < =
}!! 
this"" 
."" 
min"" 
="" 
min"" 
;"" 
this## 
.## 
max## 
=## 
max## 
;## 
}$$ 	
public'' 
int'' 
Min'' 
{(( 	
get)) 
{)) 
return)) 
min)) 
;)) 
})) 
}** 	
public-- 
int-- 
Max-- 
{.. 	
get// 
{// 
return// 
max// 
;// 
}// 
}00 	
public33 
bool33 
IsSingleDay33 
{44 	
get55 
{55 
return55 
min55 
==55 
max55  #
;55# $
}55% &
}66 	
public99 
bool99 
	HasInside99 
(99 
int99 !
test99" &
)99& '
{:: 	
return;; 
test;; 
>=;; 
min;; 
&&;; !
test;;" &
<=;;' )
max;;* -
;;;- .
}<< 	
private@@ 
readonly@@ 
int@@ 
min@@  
;@@  !
privateAA 
readonlyAA 
intAA 
maxAA  
;AA  !
}CC 
}EE ⁄#
eF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\Days.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

sealed 
class 
Days 
: 
DayTimeRange +
{ 
public 
Days 
( 
DateTime 
moment #
,# $
int% (
count) .
). /
:0 1
this 
( 
moment 
, 
count 
, 
new  #
TimeCalendar$ 0
(0 1
)1 2
)2 3
{ 	
} 	
public 
Days 
( 
DateTime 
moment #
,# $
int% (
count) .
,. /
ITimeCalendar0 =
calendar> F
)F G
:H I
this 
( 
calendar 
. 
GetYear !
(! "
moment" (
)( )
,) *
calendar+ 3
.3 4
GetMonth4 <
(< =
moment= C
)C D
,D E
calendarF N
.N O
GetDayOfMonthO \
(\ ]
moment] c
)c d
,d e
countf k
,k l
calendarm u
)u v
{ 	
} 	
public 
Days 
( 
int 
	startYear !
,! "
int# &

startMonth' 1
,1 2
int3 6
startDay7 ?
,? @
intA D
dayCountE M
)M N
:O P
this 
( 
	startYear 
, 

startMonth &
,& '
startDay( 0
,0 1
dayCount2 :
,: ;
new< ?
TimeCalendar@ L
(L M
)M N
)N O
{   	
}!! 	
public$$ 
Days$$ 
($$ 
int$$ 
	startYear$$ !
,$$! "
int$$# &

startMonth$$' 1
,$$1 2
int$$3 6
startDay$$7 ?
,$$? @
int$$A D
dayCount$$E M
,$$M N
ITimeCalendar$$O \
calendar$$] e
)$$e f
:$$g h
base%% 
(%% 
	startYear%% 
,%% 

startMonth%% &
,%%& '
startDay%%( 0
,%%0 1
dayCount%%2 :
,%%: ;
calendar%%< D
)%%D E
{&& 	
}'' 	
public** !
ITimePeriodCollection** $
GetDays**% ,
(**, -
)**- .
{++ 	 
TimePeriodCollection,,  
days,,! %
=,,& '
new,,( + 
TimePeriodCollection,,, @
(,,@ A
),,A B
;,,B C
DateTime-- 
startDay-- 
=-- 
new--  #
DateTime--$ ,
(--, -
	StartYear--- 6
,--6 7

StartMonth--8 B
,--B C
StartDay--D L
)--L M
;--M N
for.. 
(.. 
int.. 
i.. 
=.. 
$num.. 
;.. 
i.. 
<.. 
DayCount..  (
;..( )
i..* +
++..+ -
)..- .
{// 
days00 
.00 
Add00 
(00 
new00 
Day00  
(00  !
startDay00! )
.00) *
AddDays00* 1
(001 2
i002 3
)003 4
,004 5
Calendar006 >
)00> ?
)00? @
;00@ A
}11 
return22 
days22 
;22 
}33 	
	protected66 
override66 
string66 !
Format66" (
(66( )
ITimeFormatter66) 7
	formatter668 A
)66A B
{77 	
return88 
	formatter88 
.88 
GetCalendarPeriod88 .
(88. /
StartDayName88/ ;
,88; <

EndDayName88= G
,88G H
	formatter99 
.99 
GetShortDate99 &
(99& '
Start99' ,
)99, -
,99- .
	formatter99/ 8
.998 9
GetShortDate999 E
(99E F
End99F I
)99I J
,99J K
Duration99L T
)99T U
;99U V
}:: 	
}<< 
}>> £2
jF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\DaySeeker.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

class 
	DaySeeker 
: 
CalendarVisitor ,
<, -!
CalendarVisitorFilter- B
,B C
DaySeekerContextD T
>T U
{ 
public 
	DaySeeker 
( 
SeekDirection &
seekDirection' 4
=5 6
SeekDirection7 D
.D E
ForwardE L
,L M
ITimeCalendarN [
calendar\ d
=e f
nullg k
)k l
:m n
this 
( 
new !
CalendarVisitorFilter *
(* +
)+ ,
,, -
seekDirection. ;
,; <
calendar= E
)E F
{ 	
} 	
public 
	DaySeeker 
( !
CalendarVisitorFilter .
filter/ 5
,5 6
SeekDirection7 D
seekDirectionE R
=S T
SeekDirectionU b
.b c
Forwardc j
,j k
ITimeCalendar 
calendar "
=# $
null% )
)) *
:+ ,
base 
( 
filter 
, 
	TimeRange "
." #
Anytime# *
,* +
seekDirection, 9
,9 :
calendar; C
)C D
{ 	
} 	
public !
ITimePeriodCollection $
Periods% ,
{   	
get!! 
{!! 
return!! 
periods!!  
;!!  !
}!!" #
}"" 	
public%% 
Day%% 
FindDay%% 
(%% 
Day%% 
start%% $
,%%$ %
int%%& )
offset%%* 0
)%%0 1
{&& 	
if'' 
('' 
offset'' 
=='' 
$num'' 
)'' 
{(( 
return)) 
start)) 
;)) 
}** 
DaySeekerContext,, 
context,, $
=,,% &
new,,' *
DaySeekerContext,,+ ;
(,,; <
start,,< A
,,,A B
offset,,C I
),,I J
;,,J K
SeekDirection.. 
visitDirection.. (
=..) *
SeekDirection..+ 8
;..8 9
if11 
(11 
offset11 
<11 
$num11 
)11 
{22 
visitDirection33 
=33  
visitDirection33! /
==330 2
SeekDirection333 @
.33@ A
Forward33A H
?33I J
SeekDirection44 !
.44! "
Backward44" *
:44+ ,
SeekDirection55 !
.55! "
Forward55" )
;55) *
}66 
StartDayVisit88 
(88 
start88 
,88  
context88! (
,88( )
visitDirection88* 8
)888 9
;889 :
return99 
context99 
.99 
FoundDay99 #
;99# $
}:: 	
	protected== 
override== 
bool== 

EnterYears==  *
(==* +
Years==+ 0
years==1 6
,==6 7
DaySeekerContext==8 H
context==I P
)==P Q
{>> 	
return?? 
!?? 
context?? 
.?? 

IsFinished?? &
;??& '
}@@ 	
	protectedCC 
overrideCC 
boolCC 
EnterMonthsCC  +
(CC+ ,
YearCC, 0
yearCC1 5
,CC5 6
DaySeekerContextCC7 G
contextCCH O
)CCO P
{DD 	
returnEE 
!EE 
contextEE 
.EE 

IsFinishedEE &
;EE& '
}FF 	
	protectedII 
overrideII 
boolII 
	EnterDaysII  )
(II) *
MonthII* /
monthII0 5
,II5 6
DaySeekerContextII7 G
contextIIH O
)IIO P
{JJ 	
returnKK 
!KK 
contextKK 
.KK 

IsFinishedKK &
;KK& '
}LL 	
	protectedOO 
overrideOO 
boolOO 

EnterHoursOO  *
(OO* +
DayOO+ .
dayOO/ 2
,OO2 3
DaySeekerContextOO4 D
contextOOE L
)OOL M
{PP 	
returnQQ 
!QQ 
contextQQ 
.QQ 

IsFinishedQQ &
;QQ& '
}RR 	
	protectedUU 
overrideUU 
boolUU 

OnVisitDayUU  *
(UU* +
DayUU+ .
dayUU/ 2
,UU2 3
DaySeekerContextUU4 D
contextUUE L
)UUL M
{VV 	
ifWW 
(WW 
contextWW 
.WW 

IsFinishedWW "
)WW" #
{XX 
returnYY 
falseYY 
;YY 
}ZZ 
if\\ 
(\\ 
day\\ 
.\\ 
IsSamePeriod\\  
(\\  !
context\\! (
.\\( )
StartDay\\) 1
)\\1 2
)\\2 3
{]] 
return^^ 
true^^ 
;^^ 
}__ 
ifaa 
(aa 
IsMatchingDayaa 
(aa 
dayaa !
,aa! "
contextaa# *
)aa* +
==aa, .
falseaa/ 4
)aa4 5
{bb 
returncc 
truecc 
;cc 
}dd 
ifee 
(ee 
CheckLimitsee 
(ee 
dayee 
)ee  
==ee! #
falseee$ )
)ee) *
{ff 
returngg 
truegg 
;gg 
}hh 
contextjj 
.jj 

ProcessDayjj 
(jj 
dayjj "
)jj" #
;jj# $
returnll 
!ll 
contextll 
.ll 

IsFinishedll &
;ll& '
}mm 	
privateqq 
readonlyqq !
ITimePeriodCollectionqq .
periodsqq/ 6
=qq7 8
newqq9 < 
TimePeriodCollectionqq= Q
(qqQ R
)qqR S
;qqS T
}ss 
}uu ﬁ
qF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\DaySeekerContext.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

class 
DaySeekerContext !
:" ##
ICalendarVisitorContext$ ;
{ 
public 
DaySeekerContext 
(  
Day  #
startDay$ ,
,, -
int. 1
dayCount2 :
): ;
{ 	
if 
( 
startDay 
== 
null  
)  !
{ 
throw 
new !
ArgumentNullException /
(/ 0
$str0 :
): ;
;; <
} 
StartDay 
= 
startDay 
;  
DayCount 
= 
Math 
. 
Abs 
(  
dayCount  (
)( )
;) *
RemaingDays 
= 
DayCount "
;" #
} 	
public 
int 
DayCount 
{ 
get !
;! "
private# *
set+ .
;. /
}0 1
public!! 
int!! 
RemaingDays!! 
{!!  
get!!! $
;!!$ %
private!!& -
set!!. 1
;!!1 2
}!!3 4
public$$ 
Day$$ 
StartDay$$ 
{$$ 
get$$ !
;$$! "
private$$# *
set$$+ .
;$$. /
}$$0 1
public'' 
Day'' 
FoundDay'' 
{'' 
get'' !
;''! "
private''# *
set''+ .
;''. /
}''0 1
public** 
bool** 

IsFinished** 
{++ 	
get,, 
{,, 
return,, 
RemaingDays,, $
==,,% '
$num,,( )
;,,) *
},,+ ,
}-- 	
public00 
void00 

ProcessDay00 
(00 
Day00 "
day00# &
)00& '
{11 	
if22 
(22 

IsFinished22 
)22 
{33 
return44 
;44 
}55 
RemaingDays77 
-=77 
$num77 
;77 
if88 
(88 

IsFinished88 
)88 
{99 
FoundDay:: 
=:: 
day:: 
;:: 
};; 
}<< 	
}>> 
}@@ ÀK
mF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\DayTimeRange.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

abstract 
class 
DayTimeRange &
:' (
CalendarTimeRange) :
{ 
	protected 
DayTimeRange 
( 
int "
	startYear# ,
,, -
int. 1

startMonth2 <
,< =
int> A
startDayB J
,J K
intL O
dayCountP X
)X Y
:Z [
this 
( 
	startYear 
, 

startMonth &
,& '
startDay( 0
,0 1
dayCount2 :
,: ;
new< ?
TimeCalendar@ L
(L M
)M N
)N O
{ 	
} 	
	protected 
DayTimeRange 
( 
int "
	startYear# ,
,, -
int. 1

startMonth2 <
,< =
int> A
startDayB J
,J K
intL O
dayCountP X
,X Y
ITimeCalendarZ g
calendarh p
)p q
:r s
base 
( 
GetPeriodOf 
( 
	startYear &
,& '

startMonth( 2
,2 3
startDay4 <
,< =
dayCount> F
)F G
,G H
calendarI Q
)Q R
{ 	
this 
. 
startDay 
= 
new 
DateTime  (
(( )
	startYear) 2
,2 3

startMonth4 >
,> ?
startDay@ H
)H I
;I J
this 
. 
dayCount 
= 
dayCount $
;$ %
endDay 
= 
calendar 
. 
MapEnd $
($ %
this% )
.) *
startDay* 2
.2 3
AddDays3 :
(: ;
dayCount; C
)C D
)D E
;E F
} 	
public!! 
int!! 
	StartYear!! 
{"" 	
get## 
{## 
return## 
startDay## !
.##! "
Year##" &
;##& '
}##( )
}$$ 	
public'' 
int'' 

StartMonth'' 
{(( 	
get)) 
{)) 
return)) 
startDay)) !
.))! "
Month))" '
;))' (
}))) *
}** 	
public-- 
int-- 
StartDay-- 
{.. 	
get// 
{// 
return// 
startDay// !
.//! "
Day//" %
;//% &
}//' (
}00 	
public33 
int33 
EndYear33 
{44 	
get55 
{55 
return55 
endDay55 
.55  
Year55  $
;55$ %
}55& '
}66 	
public99 
int99 
EndMonth99 
{:: 	
get;; 
{;; 
return;; 
endDay;; 
.;;  
Month;;  %
;;;% &
};;' (
}<< 	
public?? 
int?? 
EndDay?? 
{@@ 	
getAA 
{AA 
returnAA 
endDayAA 
.AA  
DayAA  #
;AA# $
}AA% &
}BB 	
publicEE 
intEE 
DayCountEE 
{FF 	
getGG 
{GG 
returnGG 
dayCountGG !
;GG! "
}GG# $
}HH 	
publicKK 
	DayOfWeekKK 
StartDayOfWeekKK '
{LL 	
getMM 
{MM 
returnMM 
CalendarMM !
.MM! "
GetDayOfWeekMM" .
(MM. /
startDayMM/ 7
)MM7 8
;MM8 9
}MM: ;
}NN 	
publicQQ 
stringQQ 
StartDayNameQQ "
{RR 	
getSS 
{SS 
returnSS 
CalendarSS !
.SS! "

GetDayNameSS" ,
(SS, -
StartDayOfWeekSS- ;
)SS; <
;SS< =
}SS> ?
}TT 	
publicWW 
	DayOfWeekWW 
EndDayOfWeekWW %
{XX 	
getYY 
{YY 
returnYY 
CalendarYY !
.YY! "
GetDayOfWeekYY" .
(YY. /
endDayYY/ 5
)YY5 6
;YY6 7
}YY8 9
}ZZ 	
public]] 
string]] 

EndDayName]]  
{^^ 	
get__ 
{__ 
return__ 
Calendar__ !
.__! "

GetDayName__" ,
(__, -
EndDayOfWeek__- 9
)__9 :
;__: ;
}__< =
}`` 	
publiccc !
ITimePeriodCollectioncc $
GetHourscc% -
(cc- .
)cc. /
{dd 	 
TimePeriodCollectionee  
hoursee! &
=ee' (
newee) , 
TimePeriodCollectionee- A
(eeA B
)eeB C
;eeC D
DateTimeff 
	startDateff 
=ff  
startDayff! )
;ff) *
forgg 
(gg 
intgg 
daygg 
=gg 
$numgg 
;gg 
daygg !
<gg" #
dayCountgg$ ,
;gg, -
daygg. 1
++gg1 3
)gg3 4
{hh 
DateTimeii 
curDayii 
=ii  !
	startDateii" +
.ii+ ,
AddDaysii, 3
(ii3 4
dayii4 7
)ii7 8
;ii8 9
forjj 
(jj 
intjj 
hourjj 
=jj 
$numjj  !
;jj! "
hourjj# '
<jj( )
TimeSpecjj* 2
.jj2 3
HoursPerDayjj3 >
;jj> ?
hourjj@ D
++jjD F
)jjF G
{kk 
hoursll 
.ll 
Addll 
(ll 
newll !
Hourll" &
(ll& '
curDayll' -
.ll- .
AddHoursll. 6
(ll6 7
hourll7 ;
)ll; <
,ll< =
Calendarll> F
)llF G
)llG H
;llH I
}mm 
}nn 
returnoo 
hoursoo 
;oo 
}pp 	
	protectedss 
overridess 
boolss 
IsEqualss  '
(ss' (
objectss( .
objss/ 2
)ss2 3
{tt 	
returnuu 
baseuu 
.uu 
IsEqualuu 
(uu  
objuu  #
)uu# $
&&uu% '
HasSameDatauu( 3
(uu3 4
objuu4 7
asuu8 :
DayTimeRangeuu; G
)uuG H
;uuH I
}vv 	
privateyy 
boolyy 
HasSameDatayy  
(yy  !
DayTimeRangeyy! -
compyy. 2
)yy2 3
{zz 	
return{{ 
startDay|| 
==|| 
comp||  
.||  !
startDay||! )
&&||* ,
dayCount}} 
==}} 
comp}}  
.}}  !
dayCount}}! )
&&}}* ,
endDay~~ 
==~~ 
comp~~ 
.~~ 
endDay~~ %
;~~% &
} 	
	protected
ÇÇ 
override
ÇÇ 
int
ÇÇ 
ComputeHashCode
ÇÇ .
(
ÇÇ. /
)
ÇÇ/ 0
{
ÉÉ 	
return
ÑÑ 
HashTool
ÑÑ 
.
ÑÑ 
ComputeHashCode
ÑÑ +
(
ÑÑ+ ,
base
ÑÑ, 0
.
ÑÑ0 1
ComputeHashCode
ÑÑ1 @
(
ÑÑ@ A
)
ÑÑA B
,
ÑÑB C
startDay
ÑÑD L
,
ÑÑL M
dayCount
ÑÑN V
,
ÑÑV W
endDay
ÑÑX ^
)
ÑÑ^ _
;
ÑÑ_ `
}
ÖÖ 	
private
àà 
static
àà 
	TimeRange
àà  
GetPeriodOf
àà! ,
(
àà, -
int
àà- 0
year
àà1 5
,
àà5 6
int
àà7 :
month
àà; @
,
àà@ A
int
ààB E
day
ààF I
,
ààI J
int
ààK N
dayCount
ààO W
)
ààW X
{
ââ 	
if
ää 
(
ää 
dayCount
ää 
<
ää 
$num
ää 
)
ää 
{
ãã 
throw
åå 
new
åå )
ArgumentOutOfRangeException
åå 5
(
åå5 6
$str
åå6 @
)
åå@ A
;
ååA B
}
çç 
DateTime
èè 
start
èè 
=
èè 
new
èè  
DateTime
èè! )
(
èè) *
year
èè* .
,
èè. /
month
èè0 5
,
èè5 6
day
èè7 :
)
èè: ;
;
èè; <
DateTime
êê 
end
êê 
=
êê 
start
êê  
.
êê  !
AddDays
êê! (
(
êê( )
dayCount
êê) 1
)
êê1 2
;
êê2 3
return
ëë 
new
ëë 
	TimeRange
ëë  
(
ëë  !
start
ëë! &
,
ëë& '
end
ëë( +
)
ëë+ ,
;
ëë, -
}
íí 	
private
ññ 
readonly
ññ 
DateTime
ññ !
startDay
ññ" *
;
ññ* +
private
óó 
readonly
óó 
int
óó 
dayCount
óó %
;
óó% &
private
òò 
readonly
òò 
DateTime
òò !
endDay
òò" (
;
òò( )
}
öö 
}úú ùX
iF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\Duration.cs
	namespace 	
Phoenix
 
. 
CrossCutting 
. 

TimePeriod )
{ 
public 

static 
class 
Duration  
{ 
public 
static 
TimeSpan 
Year #
(# $
int$ '
year( ,
), -
{ 	
return 
DateTimeFormatInfo %
.% &
CurrentInfo& 1
==2 4
null5 9
?: ;
TimeSpan< D
.D E
ZeroE I
:J K
YearL P
(P Q
DateTimeFormatInfoQ c
.c d
CurrentInfod o
.o p
Calendarp x
,x y
yearz ~
)~ 
;	 Ä
} 	
public 
static 
TimeSpan 
Year #
(# $
Calendar$ ,
calendar- 5
,5 6
int7 :
year; ?
)? @
{ 	
return 
Days 
( 
calendar  
.  !
GetDaysInYear! .
(. /
year/ 3
)3 4
)4 5
;5 6
} 	
public%% 
static%% 
TimeSpan%% 
Halfyear%% '
(%%' (
int%%( +
year%%, 0
,%%0 1
YearHalfyear%%2 >
yearHalfyear%%? K
)%%K L
{&& 	
return'' 
DateTimeFormatInfo'' %
.''% &
CurrentInfo''& 1
==''2 4
null''5 9
?'': ;
TimeSpan''< D
.''D E
Zero''E I
:''J K
Halfyear''L T
(''T U
DateTimeFormatInfo''U g
.''g h
CurrentInfo''h s
.''s t
Calendar''t |
,''| }
year	''~ Ç
,
''Ç É
yearHalfyear
''Ñ ê
)
''ê ë
;
''ë í
}(( 	
public++ 
static++ 
TimeSpan++ 
Halfyear++ '
(++' (
Calendar++( 0
calendar++1 9
,++9 :
int++; >
year++? C
,++C D
YearHalfyear++E Q
yearHalfyear++R ^
)++^ _
{,, 	
	YearMonth-- 
[-- 
]-- 
halfyearMonths-- &
=--' (
TimeTool--) 1
.--1 2
GetMonthsOfHalfyear--2 E
(--E F
yearHalfyear--F R
)--R S
;--S T
TimeSpan.. 
duration.. 
=.. 
TimeSpec..  (
...( )

NoDuration..) 3
;..3 4
foreach// 
(// 
	YearMonth// 
halfyearMonth// ,
in//- /
halfyearMonths//0 >
)//> ?
{00 
duration11 
=11 
duration11 #
.11# $
Add11$ '
(11' (
Month11( -
(11- .
calendar11. 6
,116 7
year118 <
,11< =
halfyearMonth11> K
)11K L
)11L M
;11M N
}22 
return33 
duration33 
;33 
}44 	
public;; 
static;; 
TimeSpan;; 
Quarter;; &
(;;& '
int;;' *
year;;+ /
,;;/ 0
YearQuarter;;1 <
yearQuarter;;= H
);;H I
{<< 	
return== 
DateTimeFormatInfo== %
.==% &
CurrentInfo==& 1
====2 4
null==5 9
?==: ;
TimeSpan==< D
.==D E
Zero==E I
:==J K
Quarter==L S
(==S T
DateTimeFormatInfo==T f
.==f g
CurrentInfo==g r
.==r s
Calendar==s {
,=={ |
year	==} Å
,
==Å Ç
yearQuarter
==É é
)
==é è
;
==è ê
}>> 	
publicAA 
staticAA 
TimeSpanAA 
QuarterAA &
(AA& '
CalendarAA' /
calendarAA0 8
,AA8 9
intAA: =
yearAA> B
,AAB C
YearQuarterAAD O
yearQuarterAAP [
)AA[ \
{BB 	
	YearMonthCC 
[CC 
]CC 
quarterMonthsCC %
=CC& '
TimeToolCC( 0
.CC0 1
GetMonthsOfQuarterCC1 C
(CCC D
yearQuarterCCD O
)CCO P
;CCP Q
TimeSpanDD 
durationDD 
=DD 
TimeSpecDD  (
.DD( )

NoDurationDD) 3
;DD3 4
foreachEE 
(EE 
	YearMonthEE 
quarterMonthEE +
inEE, .
quarterMonthsEE/ <
)EE< =
{FF 
durationGG 
=GG 
durationGG #
.GG# $
AddGG$ '
(GG' (
MonthGG( -
(GG- .
calendarGG. 6
,GG6 7
yearGG8 <
,GG< =
quarterMonthGG> J
)GGJ K
)GGK L
;GGL M
}HH 
returnII 
durationII 
;II 
}JJ 	
publicQQ 
staticQQ 
TimeSpanQQ 
MonthQQ $
(QQ$ %
intQQ% (
yearQQ) -
,QQ- .
	YearMonthQQ/ 8
	yearMonthQQ9 B
)QQB C
{RR 	
returnSS 
DateTimeFormatInfoSS %
.SS% &
CurrentInfoSS& 1
==SS2 4
nullSS5 9
?SS: ;
TimeSpanSS< D
.SSD E
ZeroSSE I
:SSJ K
MonthSSL Q
(SSQ R
DateTimeFormatInfoSSR d
.SSd e
CurrentInfoSSe p
.SSp q
CalendarSSq y
,SSy z
yearSS{ 
,	SS Ä
	yearMonth
SSÅ ä
)
SSä ã
;
SSã å
}TT 	
publicWW 
staticWW 
TimeSpanWW 
MonthWW $
(WW$ %
CalendarWW% -
calendarWW. 6
,WW6 7
intWW8 ;
yearWW< @
,WW@ A
	YearMonthWWB K
	yearMonthWWL U
)WWU V
{XX 	
returnYY 
DaysYY 
(YY 
calendarYY  
.YY  !
GetDaysInMonthYY! /
(YY/ 0
yearYY0 4
,YY4 5
(YY6 7
intYY7 :
)YY: ;
	yearMonthYY; D
)YYD E
)YYE F
;YYF G
}ZZ 	
publicaa 
staticaa 
TimeSpanaa 
Weekaa #
=aa$ %
Weeksaa& +
(aa+ ,
$numaa, -
)aa- .
;aa. /
publicdd 
staticdd 
TimeSpandd 
Weeksdd $
(dd$ %
intdd% (
weeksdd) .
)dd. /
{ee 	
returnff 
Daysff 
(ff 
weeksff 
*ff 
TimeSpecff  (
.ff( )
DaysPerWeekff) 4
)ff4 5
;ff5 6
}gg 	
publicnn 
staticnn 
TimeSpannn 
Daynn "
=nn# $
Daysnn% )
(nn) *
$numnn* +
)nn+ ,
;nn, -
publicqq 
staticqq 
TimeSpanqq 
Daysqq #
(qq# $
intqq$ '
daysqq( ,
,qq, -
intqq. 1
hoursqq2 7
=qq8 9
$numqq: ;
,qq; <
intqq= @
minutesqqA H
=qqI J
$numqqK L
,qqL M
intqqN Q
secondsqqR Y
=qqZ [
$numqq\ ]
,qq] ^
intqq_ b
millisecondsqqc o
=qqp q
$numqqr s
)qqs t
{rr 	
returnss 
newss 
TimeSpanss 
(ss  
daysss  $
,ss$ %
hoursss& +
,ss+ ,
minutesss- 4
,ss4 5
secondsss6 =
,ss= >
millisecondsss? K
)ssK L
;ssL M
}tt 	
public{{ 
static{{ 
TimeSpan{{ 
Hour{{ #
={{$ %
Hours{{& +
({{+ ,
$num{{, -
){{- .
;{{. /
public~~ 
static~~ 
TimeSpan~~ 
Hours~~ $
(~~$ %
int~~% (
hours~~) .
,~~. /
int~~0 3
minutes~~4 ;
=~~< =
$num~~> ?
,~~? @
int~~A D
seconds~~E L
=~~M N
$num~~O P
,~~P Q
int~~R U
milliseconds~~V b
=~~c d
$num~~e f
)~~f g
{ 	
return
ÄÄ 
new
ÄÄ 
TimeSpan
ÄÄ 
(
ÄÄ  
$num
ÄÄ  !
,
ÄÄ! "
hours
ÄÄ# (
,
ÄÄ( )
minutes
ÄÄ* 1
,
ÄÄ1 2
seconds
ÄÄ3 :
,
ÄÄ: ;
milliseconds
ÄÄ< H
)
ÄÄH I
;
ÄÄI J
}
ÅÅ 	
public
àà 
static
àà 
TimeSpan
àà 
Minute
àà %
=
àà& '
Minutes
àà( /
(
àà/ 0
$num
àà0 1
)
àà1 2
;
àà2 3
public
ãã 
static
ãã 
TimeSpan
ãã 
Minutes
ãã &
(
ãã& '
int
ãã' *
minutes
ãã+ 2
,
ãã2 3
int
ãã4 7
seconds
ãã8 ?
=
ãã@ A
$num
ããB C
,
ããC D
int
ããE H
milliseconds
ããI U
=
ããV W
$num
ããX Y
)
ããY Z
{
åå 	
return
çç 
new
çç 
TimeSpan
çç 
(
çç  
$num
çç  !
,
çç! "
$num
çç# $
,
çç$ %
minutes
çç& -
,
çç- .
seconds
çç/ 6
,
çç6 7
milliseconds
çç8 D
)
ççD E
;
ççE F
}
éé 	
public
ïï 
static
ïï 
TimeSpan
ïï 
Second
ïï %
=
ïï& '
Seconds
ïï( /
(
ïï/ 0
$num
ïï0 1
)
ïï1 2
;
ïï2 3
public
òò 
static
òò 
TimeSpan
òò 
Seconds
òò &
(
òò& '
int
òò' *
seconds
òò+ 2
,
òò2 3
int
òò4 7
milliseconds
òò8 D
=
òòE F
$num
òòG H
)
òòH I
{
ôô 	
return
öö 
new
öö 
TimeSpan
öö 
(
öö  
$num
öö  !
,
öö! "
$num
öö# $
,
öö$ %
$num
öö& '
,
öö' (
seconds
öö) 0
,
öö0 1
milliseconds
öö2 >
)
öö> ?
;
öö? @
}
õõ 	
public
¢¢ 
static
¢¢ 
TimeSpan
¢¢ 
Millisecond
¢¢ *
=
¢¢+ ,
Milliseconds
¢¢- 9
(
¢¢9 :
$num
¢¢: ;
)
¢¢; <
;
¢¢< =
public
•• 
static
•• 
TimeSpan
•• 
Milliseconds
•• +
(
••+ ,
int
••, /
milliseconds
••0 <
)
••< =
{
¶¶ 	
return
ßß 
new
ßß 
TimeSpan
ßß 
(
ßß  
$num
ßß  !
,
ßß! "
$num
ßß# $
,
ßß$ %
$num
ßß& '
,
ßß' (
$num
ßß) *
,
ßß* +
milliseconds
ßß, 8
)
ßß8 9
;
ßß9 :
}
®® 	
}
¨¨ 
}ÆÆ ãl
sF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\DurationCalculator.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

class 
DurationCalculator #
{ 
public 
DurationCalculator !
(! "
)" #
:$ %
this 
( 
new 
DurationProvider %
(% &
)& '
)' (
{ 	
} 	
public 
DurationCalculator !
(! "
IDurationProvider" 3
durationProvider4 D
)D E
{ 	
if 
( 
durationProvider  
==! #
null$ (
)( )
{ 
throw 
new !
ArgumentNullException /
(/ 0
$str0 B
)B C
;C D
} 
this 
. 
durationProvider !
=" #
durationProvider$ 4
;4 5
}   	
public## 
IDurationProvider##  
DurationProvider##! 1
{$$ 	
get%% 
{%% 
return%% 
durationProvider%% )
;%%) *
}%%+ ,
}&& 	
public)) !
ITimePeriodCollection)) $
IncludePeriods))% 3
{** 	
get++ 
{++ 
return++ 
includePeriods++ '
;++' (
}++) *
},, 	
public// !
ITimePeriodCollection// $
ExcludePeriods//% 3
{00 	
get11 
{11 
return11 
excludePeriods11 '
;11' (
}11) *
}22 	
public55 
void55 
Hours55 
(55 
Time55 
start55 $
,55$ %
Time55& *
end55+ .
)55. /
{66 	
Hours77 
(77 
new77 
	HourRange77 
(77  
start77  %
,77% &
end77' *
)77* +
)77+ ,
;77, -
}88 	
public;; 
void;; 
Hours;; 
(;; 
params;;  
	HourRange;;! *
[;;* +
];;+ ,
hours;;- 2
);;2 3
{<< 	
filter== 
.== 
CollectingHours== "
.==" #
Clear==# (
(==( )
)==) *
;==* +
foreach>> 
(>> 
	HourRange>> 
hour>> #
in>>$ &
hours>>' ,
)>>, -
{?? 
filter@@ 
.@@ 
CollectingHours@@ &
.@@& '
Add@@' *
(@@* +
hour@@+ /
)@@/ 0
;@@0 1
}AA 
}BB 	
publicEE 
voidEE 
DayHoursEE 
(EE 
	DayOfWeekEE &
	dayOfWeekEE' 0
,EE0 1
TimeEE2 6
startEE7 <
,EE< =
TimeEE> B
endEEC F
)EEF G
{FF 	
DayHoursGG 
(GG 
newGG 
DayHourRangeGG %
(GG% &
	dayOfWeekGG& /
,GG/ 0
startGG1 6
,GG6 7
endGG8 ;
)GG; <
)GG< =
;GG= >
}HH 	
publicKK 
voidKK 
DayHoursKK 
(KK 
paramsKK #
DayHourRangeKK$ 0
[KK0 1
]KK1 2
dayHoursKK3 ;
)KK; <
{LL 	
filterMM 
.MM 
CollectingDayHoursMM %
.MM% &
ClearMM& +
(MM+ ,
)MM, -
;MM- .
foreachNN 
(NN 
DayHourRangeNN !
dayHourNN" )
inNN* ,
dayHoursNN- 5
)NN5 6
{OO 
filterPP 
.PP 
CollectingDayHoursPP )
.PP) *
AddPP* -
(PP- .
dayHourPP. 5
)PP5 6
;PP6 7
}QQ 
}RR 	
publicUU 
voidUU 
WeekDaysUU 
(UU 
paramsUU #
	DayOfWeekUU$ -
[UU- .
]UU. /
weekDaysUU0 8
)UU8 9
{VV 	
filterWW 
.WW 
WeekDaysWW 
.WW 
ClearWW !
(WW! "
)WW" #
;WW# $
foreachXX 
(XX 
	DayOfWeekXX 
weekDayXX &
inXX' )
weekDaysXX* 2
)XX2 3
{YY 
filterZZ 
.ZZ 
WeekDaysZZ 
.ZZ  
AddZZ  #
(ZZ# $
weekDayZZ$ +
)ZZ+ ,
;ZZ, -
}[[ 
}\\ 	
public__ 
void__ 
WorkingWeekDays__ #
(__# $
)__$ %
{`` 	
filteraa 
.aa 
WeekDaysaa 
.aa 
Clearaa !
(aa! "
)aa" #
;aa# $
filterbb 
.bb 
AddWorkingWeekDaysbb %
(bb% &
)bb& '
;bb' (
}cc 	
publicff 
voidff 
WeekendWeekDaysff #
(ff# $
)ff$ %
{gg 	
filterhh 
.hh 
WeekDayshh 
.hh 
Clearhh !
(hh! "
)hh" #
;hh# $
filterii 
.ii 
AddWeekendWeekDaysii %
(ii% &
)ii& '
;ii' (
}jj 	
publicmm 
TimeSpanmm 
CalcDurationmm $
(mm$ %

ITimeRangemm% /
periodmm0 6
)mm6 7
{nn 	
ifoo 
(oo 
periodoo 
==oo 
nulloo 
)oo 
{pp 
throwqq 
newqq !
ArgumentNullExceptionqq /
(qq/ 0
$strqq0 8
)qq8 9
;qq9 :
}rr 
returnss 
DoCalcDurationss !
(ss! "
periodss" (
.ss( )
Startss) .
,ss. /
periodss0 6
.ss6 7
Endss7 :
)ss: ;
;ss; <
}tt 	
publicww 
TimeSpanww 
CalcDurationww $
(ww$ %
DateTimeww% -
startww. 3
,ww3 4
DateTimeww5 =
endww> A
)wwA B
{xx 	
returnyy 
DoCalcDurationyy !
(yy! "
startyy" '
,yy' (
endyy) ,
)yy, -
;yy- .
}zz 	
public}} 
TimeSpan}} !
CalcDayllightDuration}} -
(}}- .

ITimeRange}}. 8
period}}9 ?
,}}? @
TimeZoneInfo}}A M
timeZone}}N V
)}}V W
{~~ 	
if 
( 
period 
== 
null 
) 
{
ÄÄ 
throw
ÅÅ 
new
ÅÅ #
ArgumentNullException
ÅÅ /
(
ÅÅ/ 0
$str
ÅÅ0 8
)
ÅÅ8 9
;
ÅÅ9 :
}
ÇÇ 
if
ÉÉ 
(
ÉÉ 
timeZone
ÉÉ 
==
ÉÉ 
null
ÉÉ  
)
ÉÉ  !
{
ÑÑ 
timeZone
ÖÖ 
=
ÖÖ 
TimeZoneInfo
ÖÖ '
.
ÖÖ' (
Local
ÖÖ( -
;
ÖÖ- .
}
ÜÜ 
return
áá 
DoCalcDuration
áá !
(
áá! "
period
áá" (
.
áá( )
Start
áá) .
,
áá. /
period
áá0 6
.
áá6 7
End
áá7 :
,
áá: ;
timeZone
áá< D
)
ááD E
;
ááE F
}
àà 	
public
ãã 
TimeSpan
ãã #
CalcDayllightDuration
ãã -
(
ãã- .
DateTime
ãã. 6
start
ãã7 <
,
ãã< =
DateTime
ãã> F
end
ããG J
,
ããJ K
TimeZoneInfo
ããL X
timeZone
ããY a
)
ããa b
{
åå 	
if
çç 
(
çç 
timeZone
çç 
==
çç 
null
çç  
)
çç  !
{
éé 
timeZone
èè 
=
èè 
TimeZoneInfo
èè '
.
èè' (
Local
èè( -
;
èè- .
}
êê 
return
ëë 
DoCalcDuration
ëë !
(
ëë! "
start
ëë" '
,
ëë' (
end
ëë) ,
,
ëë, -
timeZone
ëë. 6
)
ëë6 7
;
ëë7 8
}
íí 	
	protected
ïï 
virtual
ïï 
TimeSpan
ïï "
DoCalcDuration
ïï# 1
(
ïï1 2
DateTime
ïï2 :
start
ïï; @
,
ïï@ A
DateTime
ïïB J
end
ïïK N
,
ïïN O
TimeZoneInfo
ïïP \
timeZone
ïï] e
=
ïïf g
null
ïïh l
)
ïïl m
{
ññ 	
if
óó 
(
óó 
start
óó 
.
óó 
Equals
óó 
(
óó 
end
óó  
)
óó  !
)
óó! "
{
òò 
return
ôô 
TimeSpan
ôô 
.
ôô  
Zero
ôô  $
;
ôô$ %
}
öö 
	TimeRange
ùù 
	testRange
ùù 
=
ùù  !
new
ùù" %
	TimeRange
ùù& /
(
ùù/ 0
start
ùù0 5
,
ùù5 6
end
ùù7 :
)
ùù: ;
;
ùù; <
DateTime
†† 
searchStart
††  
=
††! "
new
††# &
Day
††' *
(
††* +
	testRange
††+ 4
.
††4 5
Start
††5 :
)
††: ;
.
††; <
Start
††< A
;
††A B
DateTime
°° 
	serachEnd
°° 
=
°°  
new
°°! $
Day
°°% (
(
°°( )
	testRange
°°) 2
.
°°2 3
End
°°3 6
)
°°6 7
.
°°7 8

GetNextDay
°°8 B
(
°°B C
)
°°C D
.
°°D E
Start
°°E J
;
°°J K
	TimeRange
¢¢ 
searchPeriod
¢¢ "
=
¢¢# $
new
¢¢% (
	TimeRange
¢¢) 2
(
¢¢2 3
searchStart
¢¢3 >
,
¢¢> ?
	serachEnd
¢¢@ I
)
¢¢I J
;
¢¢J K
filter
•• 
.
•• 
ExcludePeriods
•• !
.
••! "
Clear
••" '
(
••' (
)
••( )
;
••) *
filter
¶¶ 
.
¶¶ 
ExcludePeriods
¶¶ !
.
¶¶! "
AddAll
¶¶" (
(
¶¶( )
excludePeriods
¶¶) 7
)
¶¶7 8
;
¶¶8 9
TimeCalendar
©© 
calendar
©© !
=
©©" #
new
©©$ '
TimeCalendar
©©( 4
(
©©4 5
new
©©5 8 
TimeCalendarConfig
©©9 K
{
©©L M
	EndOffset
©©N W
=
©©X Y
TimeSpan
©©Z b
.
©©b c
Zero
©©c g
}
©©h i
)
©©i j
;
©©j k%
CalendarPeriodCollector
™™ #
	collector
™™$ -
=
™™. /
new
™™0 3%
CalendarPeriodCollector
™™4 K
(
™™K L
filter
™™L R
,
™™R S
searchPeriod
™™T `
,
™™` a
SeekDirection
™™b o
.
™™o p
Forward
™™p w
,
™™w x
calendar™™y Å
)™™Å Ç
;™™Ç É
	collector
´´ 
.
´´ 
CollectHours
´´ "
(
´´" #
)
´´# $
;
´´$ %
TimeSpan
≠≠ 
duration
≠≠ 
=
≠≠ 
TimeSpan
≠≠  (
.
≠≠( )
Zero
≠≠) -
;
≠≠- .
	collector
ÆÆ 
.
ÆÆ 
Periods
ÆÆ 
.
ÆÆ 
AddAll
ÆÆ $
(
ÆÆ$ %
includePeriods
ÆÆ% 3
)
ÆÆ3 4
;
ÆÆ4 5
foreach
ØØ 
(
ØØ  
ICalendarTimeRange
ØØ '
period
ØØ( .
in
ØØ/ 1
	collector
ØØ2 ;
.
ØØ; <
Periods
ØØ< C
)
ØØC D
{
∞∞ 
ITimePeriod
≤≤ 
intersection
≤≤ (
=
≤≤) *
	testRange
≤≤+ 4
.
≤≤4 5
GetIntersection
≤≤5 D
(
≤≤D E
period
≤≤E K
)
≤≤K L
;
≤≤L M
if
≥≥ 
(
≥≥ 
intersection
≥≥  
==
≥≥! #
null
≥≥$ (
)
≥≥( )
{
¥¥ 
continue
µµ 
;
µµ 
}
∂∂ 
duration
∑∑ 
=
∑∑ 
duration
∑∑ #
.
∑∑# $
Add
∑∑$ '
(
∑∑' (
durationProvider
∑∑( 8
.
∑∑8 9
GetDuration
∑∑9 D
(
∑∑D E
intersection
∑∑E Q
.
∑∑Q R
Start
∑∑R W
,
∑∑W X
intersection
∑∑Y e
.
∑∑e f
End
∑∑f i
)
∑∑i j
)
∑∑j k
;
∑∑k l
}
∏∏ 
return
∫∫ 
start
∫∫ 
<
∫∫ 
end
∫∫ 
?
∫∫  
duration
∫∫! )
:
∫∫* +
duration
∫∫, 4
.
∫∫4 5
Negate
∫∫5 ;
(
∫∫; <
)
∫∫< =
;
∫∫= >
}
ªª 	
private
øø 
readonly
øø +
CalendarPeriodCollectorFilter
øø 6
filter
øø7 =
=
øø> ?
new
øø@ C+
CalendarPeriodCollectorFilter
øøD a
(
øøa b
)
øøb c
;
øøc d
private
¿¿ 
readonly
¿¿ "
TimePeriodCollection
¿¿ -
includePeriods
¿¿. <
=
¿¿= >
new
¿¿? B"
TimePeriodCollection
¿¿C W
(
¿¿W X
)
¿¿X Y
;
¿¿Y Z
private
¡¡ 
readonly
¡¡ "
TimePeriodCollection
¡¡ -
excludePeriods
¡¡. <
=
¡¡= >
new
¡¡? B"
TimePeriodCollection
¡¡C W
(
¡¡W X
)
¡¡X Y
;
¡¡Y Z
private
¬¬ 
readonly
¬¬ 
IDurationProvider
¬¬ *
durationProvider
¬¬+ ;
;
¬¬; <
}
ƒƒ 
}∆∆ ∂
sF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\DurationFormatType.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

enum 
DurationFormatType "
{ 
Compact 
, 
Detailed 
, 
} 
} ï
qF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\DurationProvider.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

class 
DurationProvider !
:" #
IDurationProvider$ 5
{ 
public 
virtual 
TimeSpan 
GetDuration  +
(+ ,
DateTime, 4
start5 :
,: ;
DateTime< D
endE H
)H I
{ 	
return 
end 
. 
Subtract 
(  
start  %
)% &
;& '
} 	
} 
} ©c
sF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\FiscalCalendarTool.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

static 
class 
FiscalCalendarTool *
{ 
public 
static 
int 
GetDaysInMonth (
(( )
	YearMonth) 2
month3 8
,8 9
	YearMonth: C
yearBaseMonthD Q
,Q R!
FiscalQuarterGroupingS h
quarterGroupingi x
)x y
{ 	
int 
diffMonthCount 
=  
month! &
-' (
yearBaseMonth) 6
;6 7
if 
( 
diffMonthCount 
<  
$num! "
)" #
{ 
diffMonthCount 
=  
TimeSpec! )
.) *
MonthsPerYear* 7
+8 9
diffMonthCount: H
;H I
} 
return 
( 
diffMonthCount "
+# $
(% &
int& )
)) *
quarterGrouping* 9
+: ;
$num< =
)= >
%? @
TimeSpecA I
.I J
MonthsPerQuarterJ Z
==[ ]
$num^ _
?` a
TimeSpec 
. "
FiscalDaysPerLongMonth /
:0 1
TimeSpec2 :
.: ;#
FiscalDaysPerShortMonth; R
;R S
} 	
public   
static   
int   
GetYear   !
(  ! "
int  " %
year  & *
,  * +
	YearMonth  , 5
month  6 ;
,  ; <
	YearMonth  = F
yearBaseMonth  G T
,  T U
	YearMonth  V _
fiscalYearBaseMonth  ` s
)  s t
{!! 	
year"" 
="" 
yearBaseMonth""  
>=""! #
fiscalYearBaseMonth""$ 7
?""8 9
year"": >
:""? @
year""A E
-""F G
$num""H I
;""I J
return## 
month## 
-## 
yearBaseMonth## (
<##) *
$num##+ ,
?##- .
year##/ 3
:##4 5
year##6 :
+##; <
$num##= >
;##> ?
}$$ 	
public'' 
static'' 
DateTime'' 
GetStartOfMonth'' .
(''. /
int''/ 2
year''3 7
,''7 8
	YearMonth''9 B
month''C H
,''H I
	YearMonth''J S
yearBaseMonth''T a
,''a b
	DayOfWeek''c l
yearStartDay''m y
,''y z
FiscalYearAlignment(( 
yearAlignment((  -
,((- .!
FiscalQuarterGrouping((/ D
quarterGrouping((E T
)((T U
{)) 	
int** 
diffMonthCount** 
=**  
month**! &
-**' (
yearBaseMonth**) 6
;**6 7
if++ 
(++ 
diffMonthCount++ 
<++  
$num++! "
)++" #
{,, 
year-- 
---- 
;-- 
diffMonthCount.. 
=..  
TimeSpec..! )
...) *
MonthsPerYear..* 7
+..8 9
diffMonthCount..: H
;..H I
}// 
DateTime00 
startOfYear00  
=00! "
GetStartOfYear00# 1
(001 2
year002 6
,006 7
yearBaseMonth008 E
,00E F
yearStartDay00G S
,00S T
yearAlignment00U b
)00b c
;00c d
int11 
fiveWeekMonthCount11 "
=11# $
(11% &
diffMonthCount11& 4
+115 6
(117 8
int118 ;
)11; <
quarterGrouping11< K
)11K L
/11M N
TimeSpec11O W
.11W X
MonthsPerQuarter11X h
;11h i
return22 
startOfYear22 
.22 
AddDays22 &
(22& '
diffMonthCount33 
*33  
TimeSpec33! )
.33) *#
FiscalDaysPerShortMonth33* A
+33B C
fiveWeekMonthCount33D V
*33W X
TimeSpec33Y a
.33a b
DaysPerWeek33b m
)33m n
;33n o
}44 	
public;; 
static;; 
DateTime;; 
GetStartOfQuarter;; 0
(;;0 1
int;;1 4
year;;5 9
,;;9 :
YearQuarter;;; F
quarter;;G N
,;;N O
	YearMonth;;P Y
yearBaseMonth;;Z g
,;;g h
	DayOfWeek;;i r
yearStartDay;;s 
,	;; Ä
FiscalYearAlignment<< 
yearAlignment<<  -
)<<- .
{== 	
DateTime>> 
startOfYear>>  
=>>! "
GetStartOfYear>># 1
(>>1 2
year>>2 6
,>>6 7
yearBaseMonth>>8 E
,>>E F
yearStartDay>>G S
,>>S T
yearAlignment>>U b
)>>b c
;>>c d
DateTime?? 
startOfQuarter?? #
;??# $
switch@@ 
(@@ 
yearAlignment@@ !
)@@! "
{AA 
caseBB 
FiscalYearAlignmentBB (
.BB( )
NoneBB) -
:BB- .
startOfQuarterCC "
=CC# $
startOfYearCC% 0
.CC0 1
	AddMonthsCC1 :
(CC: ;
(CC; <
(CC< =
intCC= @
)CC@ A
quarterCCA H
-CCI J
$numCCK L
)CCL M
*CCN O
TimeSpecCCP X
.CCX Y
MonthsPerQuarterCCY i
)CCi j
;CCj k
breakDD 
;DD 
caseEE 
FiscalYearAlignmentEE (
.EE( )
LastDayEE) 0
:EE0 1
caseFF 
FiscalYearAlignmentFF (
.FF( )

NearestDayFF) 3
:FF3 4
startOfQuarterGG "
=GG# $
startOfYearGG% 0
.GG0 1
AddDaysGG1 8
(GG8 9
(GG9 :
(GG: ;
intGG; >
)GG> ?
quarterGG? F
-GGG H
$numGGI J
)GGJ K
*GGL M
TimeSpecGGN V
.GGV W!
FiscalWeeksPerQuarterGGW l
*GGm n
TimeSpecGGo w
.GGw x
DaysPerWeek	GGx É
)
GGÉ Ñ
;
GGÑ Ö
breakHH 
;HH 
defaultII 
:II 
throwJJ 
newJJ %
InvalidOperationExceptionJJ 7
(JJ7 8
stringJJ8 >
.JJ> ?
FormatJJ? E
(JJE F
$strJJF b
,JJb c
yearAlignmentJJd q
)JJq r
)JJr s
;JJs t
}KK 
returnLL 
startOfQuarterLL !
;LL! "
}MM 	
publicTT 
staticTT 
DateTimeTT 
GetStartOfHalfyearTT 1
(TT1 2
intTT2 5
yearTT6 :
,TT: ;
YearHalfyearTT< H
halfyearTTI Q
,TTQ R
	YearMonthTTS \
yearBaseMonthTT] j
,TTj k
	DayOfWeekTTl u
yearStartDay	TTv Ç
,
TTÇ É
FiscalYearAlignmentUU 
yearAlignmentUU  -
)UU- .
{VV 	
DateTimeWW 
startOfYearWW  
=WW! "
GetStartOfYearWW# 1
(WW1 2
yearWW2 6
,WW6 7
yearBaseMonthWW8 E
,WWE F
yearStartDayWWG S
,WWS T
yearAlignmentWWU b
)WWb c
;WWc d
DateTimeXX 
startOfHalfyearXX $
;XX$ %
switchYY 
(YY 
yearAlignmentYY !
)YY! "
{ZZ 
case[[ 
FiscalYearAlignment[[ (
.[[( )
None[[) -
:[[- .
startOfHalfyear\\ #
=\\$ %
startOfYear\\& 1
.\\1 2
	AddMonths\\2 ;
(\\; <
(\\< =
(\\= >
int\\> A
)\\A B
halfyear\\B J
-\\K L
$num\\M N
)\\N O
*\\P Q
TimeSpec\\R Z
.\\Z [
MonthsPerHalfyear\\[ l
)\\l m
;\\m n
break]] 
;]] 
case^^ 
FiscalYearAlignment^^ (
.^^( )
LastDay^^) 0
:^^0 1
case__ 
FiscalYearAlignment__ (
.__( )

NearestDay__) 3
:__3 4
startOfHalfyear`` #
=``$ %
startOfYear``& 1
.``1 2
AddDays``2 9
(``9 :
(``: ;
(``; <
int``< ?
)``? @
halfyear``@ H
-``I J
$num``K L
)``L M
*``N O
TimeSpec``P X
.``X Y"
FiscalWeeksPerHalfyear``Y o
*``p q
TimeSpec``r z
.``z {
DaysPerWeek	``{ Ü
)
``Ü á
;
``á à
breakaa 
;aa 
defaultbb 
:bb 
throwcc 
newcc %
InvalidOperationExceptioncc 7
(cc7 8
stringcc8 >
.cc> ?
Formatcc? E
(ccE F
$strccF b
,ccb c
yearAlignmentccd q
)ccq r
)ccr s
;ccs t
}dd 
returnee 
startOfHalfyearee "
;ee" #
}ff 	
publicmm 
staticmm 
intmm 
GetFiscalYearmm '
(mm' (
intmm( +
calendarYearmm, 8
,mm8 9
	YearMonthmm: C
fiscalYearBaseMonthmmD W
,mmW X
	YearMonthmmY b
yearBaseMonthmmc p
)mmp q
{nn 	
returnoo 
yearBaseMonthoo  
>=oo! #
fiscalYearBaseMonthoo$ 7
?oo8 9
calendarYearoo: F
+ooG H
$numooI J
:ooK L
calendarYearooM Y
;ooY Z
}pp 	
publicss 
staticss 
DateTimess 
GetStartOfYearss -
(ss- .
intss. 1
yearss2 6
,ss6 7
	YearMonthss8 A
yearBaseMonthssB O
,ssO P
	DayOfWeekssQ Z
yearStartDayss[ g
,ssg h
FiscalYearAlignmentssi |
yearAlignment	ss} ä
)
ssä ã
{tt 	
DateTimeuu 
startOfYearuu  
=uu! "
newuu# &
DateTimeuu' /
(uu/ 0
yearuu0 4
,uu4 5
(uu6 7
intuu7 :
)uu: ;
yearBaseMonthuu; H
,uuH I
$numuuJ K
)uuK L
;uuL M
switchww 
(ww 
yearAlignmentww !
)ww! "
{xx 
caseyy 
FiscalYearAlignmentyy (
.yy( )
Noneyy) -
:yy- .
breakzz 
;zz 
case{{ 
FiscalYearAlignment{{ (
.{{( )
LastDay{{) 0
:{{0 1
while|| 
(|| 
startOfYear|| &
.||& '
	DayOfWeek||' 0
!=||1 3
yearStartDay||4 @
)||@ A
{}} 
startOfYear~~ #
=~~$ %
startOfYear~~& 1
.~~1 2
AddDays~~2 9
(~~9 :
-~~: ;
$num~~; <
)~~< =
;~~= >
} 
break
ÄÄ 
;
ÄÄ 
case
ÅÅ !
FiscalYearAlignment
ÅÅ (
.
ÅÅ( )

NearestDay
ÅÅ) 3
:
ÅÅ3 4
int
ÇÇ 
diffDayCount
ÇÇ $
=
ÇÇ% &
Math
ÇÇ' +
.
ÇÇ+ ,
Abs
ÇÇ, /
(
ÇÇ/ 0
(
ÇÇ0 1
int
ÇÇ1 4
)
ÇÇ4 5
startOfYear
ÇÇ5 @
.
ÇÇ@ A
	DayOfWeek
ÇÇA J
-
ÇÇK L
(
ÇÇM N
int
ÇÇN Q
)
ÇÇQ R
yearStartDay
ÇÇR ^
)
ÇÇ^ _
;
ÇÇ_ `
startOfYear
ÉÉ 
=
ÉÉ  !
startOfYear
ÉÉ" -
.
ÉÉ- .
AddDays
ÉÉ. 5
(
ÉÉ5 6
diffDayCount
ÉÉ6 B
>
ÉÉC D
$num
ÉÉE F
?
ÉÉG H
TimeSpec
ÉÉI Q
.
ÉÉQ R
DaysPerWeek
ÉÉR ]
-
ÉÉ^ _
diffDayCount
ÉÉ` l
:
ÉÉm n
-
ÉÉo p
diffDayCount
ÉÉp |
)
ÉÉ| }
;
ÉÉ} ~
break
ÑÑ 
;
ÑÑ 
default
ÖÖ 
:
ÖÖ 
throw
ÜÜ 
new
ÜÜ '
InvalidOperationException
ÜÜ 7
(
ÜÜ7 8
string
ÜÜ8 >
.
ÜÜ> ?
Format
ÜÜ? E
(
ÜÜE F
$str
ÜÜF b
,
ÜÜb c
yearAlignment
ÜÜd q
)
ÜÜq r
)
ÜÜr s
;
ÜÜs t
}
áá 
return
ââ 
startOfYear
ââ 
;
ââ 
}
ää 	
}
éé 
}êê ‡
vF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\FiscalQuarterGrouping.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

enum !
FiscalQuarterGrouping %
{ 
FourFourFiveWeeks 
= 
$num 
, 
FourFiveFourWeeks 
= 
$num 
, 
FiveFourFourWeeks 
= 
$num 
, 
} 
} €
tF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\FiscalYearAlignment.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

enum 
FiscalYearAlignment #
{ 
None 
, 
LastDay 
, 

NearestDay 
, 
} 
} –G
iF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\Halfyear.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

sealed 
class 
Halfyear  
:! "
HalfyearTimeRange# 4
{ 
public 
Halfyear 
( 
) 
: 
this 
( 
new 
TimeCalendar !
(! "
)" #
)# $
{ 	
} 	
public 
Halfyear 
( 
DateTime  
moment! '
)' (
:) *
this 
( 
moment 
, 
new 
TimeCalendar )
() *
)* +
)+ ,
{ 	
} 	
public 
Halfyear 
( 
ITimeCalendar %
calendar& .
). /
:0 1
this 
( 

ClockProxy 
. 
Clock !
.! "
Now" %
,% &
calendar' /
)/ 0
{   	
}!! 	
public$$ 
Halfyear$$ 
($$ 
DateTime$$  
moment$$! '
,$$' (
ITimeCalendar$$) 6
calendar$$7 ?
)$$? @
:$$A B
this%% 
(%% 
TimeTool%% 
.%% 
	GetYearOf%% #
(%%# $
calendar%%$ ,
.%%, -
YearBaseMonth%%- :
,%%: ;
calendar%%< D
.%%D E
GetYear%%E L
(%%L M
moment%%M S
)%%S T
,%%T U
calendar%%V ^
.%%^ _
GetMonth%%_ g
(%%g h
moment%%h n
)%%n o
)%%o p
,%%p q
TimeTool&& 
.&& 
GetHalfyearOfMonth&& +
(&&+ ,
calendar&&, 4
.&&4 5
YearBaseMonth&&5 B
,&&B C
(&&D E
	YearMonth&&E N
)&&N O
calendar&&O W
.&&W X
GetMonth&&X `
(&&` a
moment&&a g
)&&g h
)&&h i
,&&i j
calendar&&k s
)&&s t
{'' 	
}(( 	
public++ 
Halfyear++ 
(++ 
int++ 
year++  
,++  !
YearHalfyear++" .
yearHalfyear++/ ;
)++; <
:++= >
this,, 
(,, 
year,, 
,,, 
yearHalfyear,, #
,,,# $
new,,% (
TimeCalendar,,) 5
(,,5 6
),,6 7
),,7 8
{-- 	
}.. 	
public11 
Halfyear11 
(11 
int11 
year11  
,11  !
YearHalfyear11" .
yearHalfyear11/ ;
,11; <
ITimeCalendar11= J
calendar11K S
)11S T
:11U V
base22 
(22 
year22 
,22 
yearHalfyear22 #
,22# $
$num22% &
,22& '
calendar22( 0
)220 1
{33 	
}44 	
public77 
int77 
Year77 
{88 	
get99 
{99 
return99 
	StartYear99 "
;99" #
}99$ %
}:: 	
public== 
	YearMonth== 

StartMonth== #
{>> 	
get?? 
{@@ 
intAA 
yearAA 
;AA 
	YearMonthBB 
monthBB 
;BB  
intCC 

monthCountCC 
=CC  
(CC! "
(CC" #
intCC# &
)CC& '
StartHalfyearCC' 4
-CC5 6
$numCC7 8
)CC8 9
*CC: ;
TimeSpecCC< D
.CCD E
MonthsPerHalfyearCCE V
;CCV W
TimeToolDD 
.DD 
AddMonthDD !
(DD! "
BaseYearDD" *
,DD* +
CalendarDD, 4
.DD4 5
YearBaseMonthDD5 B
,DDB C

monthCountDDD N
,DDN O
outDDP S
yearDDT X
,DDX Y
outDDZ ]
monthDD^ c
)DDc d
;DDd e
returnEE 
monthEE 
;EE 
}FF 
}GG 	
publicJJ 
YearHalfyearJJ 
YearHalfyearJJ (
{KK 	
getLL 
{LL 
returnLL 
StartHalfyearLL &
;LL& '
}LL( )
}MM 	
publicPP 
stringPP 
HalfyearNamePP "
{QQ 	
getRR 
{RR 
returnRR 
StartHalfyearNameRR *
;RR* +
}RR, -
}SS 	
publicVV 
stringVV 
HalfyearOfYearNameVV (
{WW 	
getXX 
{XX 
returnXX #
StartHalfyearOfYearNameXX 0
;XX0 1
}XX2 3
}YY 	
public\\ 
bool\\ 
IsCalendarHalfyear\\ &
{]] 	
get^^ 
{^^ 
return^^ 
(^^ 
(^^ 
int^^ 
)^^ 
YearBaseMonth^^ ,
-^^- .
$num^^/ 0
)^^0 1
%^^2 3
TimeSpec^^4 <
.^^< =
MonthsPerHalfyear^^= N
==^^O Q
$num^^R S
;^^S T
}^^U V
}__ 	
publicbb 
boolbb !
MultipleCalendarYearsbb )
{cc 	
getdd 
{ee 
ifff 
(ff 
IsCalendarHalfyearff &
)ff& '
{gg 
returnhh 
falsehh  
;hh  !
}ii 
intkk 
	startYearkk 
;kk 
	YearMonthll 
monthll 
;ll  
intmm 

monthCountmm 
=mm  
(mm! "
(mm" #
intmm# &
)mm& '
StartHalfyearmm' 4
-mm5 6
$nummm7 8
)mm8 9
*mm: ;
TimeSpecmm< D
.mmD E
MonthsPerHalfyearmmE V
;mmV W
TimeToolnn 
.nn 
AddMonthnn !
(nn! "
BaseYearnn" *
,nn* +
YearBaseMonthnn, 9
,nn9 :

monthCountnn; E
,nnE F
outnnG J
	startYearnnK T
,nnT U
outnnV Y
monthnnZ _
)nn_ `
;nn` a
intpp 
endYearpp 
;pp 

monthCountqq 
+=qq 
TimeSpecqq &
.qq& '
MonthsPerHalfyearqq' 8
;qq8 9
TimeToolrr 
.rr 
AddMonthrr !
(rr! "
BaseYearrr" *
,rr* +
YearBaseMonthrr, 9
,rr9 :

monthCountrr; E
,rrE F
outrrG J
endYearrrK R
,rrR S
outrrT W
monthrrX ]
)rr] ^
;rr^ _
returnss 
	startYearss  
!=ss! #
endYearss$ +
;ss+ ,
}tt 
}uu 	
publicxx 
Halfyearxx 
GetPreviousHalfyearxx +
(xx+ ,
)xx, -
{yy 	
returnzz 
AddHalfyearszz 
(zz  
-zz  !
$numzz! "
)zz" #
;zz# $
}{{ 	
public~~ 
Halfyear~~ 
GetNextHalfyear~~ '
(~~' (
)~~( )
{ 	
return
ÄÄ 
AddHalfyears
ÄÄ 
(
ÄÄ  
$num
ÄÄ  !
)
ÄÄ! "
;
ÄÄ" #
}
ÅÅ 	
public
ÑÑ 
Halfyear
ÑÑ 
AddHalfyears
ÑÑ $
(
ÑÑ$ %
int
ÑÑ% (
count
ÑÑ) .
)
ÑÑ. /
{
ÖÖ 	
int
ÜÜ 
year
ÜÜ 
;
ÜÜ 
YearHalfyear
áá 
halfyear
áá !
;
áá! "
TimeTool
àà 
.
àà 
AddHalfyear
àà  
(
àà  !
BaseYear
àà! )
,
àà) *
StartHalfyear
àà+ 8
,
àà8 9
count
àà: ?
,
àà? @
out
ààA D
year
ààE I
,
ààI J
out
ààK N
halfyear
ààO W
)
ààW X
;
ààX Y
return
ââ 
new
ââ 
Halfyear
ââ 
(
ââ  
year
ââ  $
,
ââ$ %
halfyear
ââ& .
,
ââ. /
Calendar
ââ0 8
)
ââ8 9
;
ââ9 :
}
ää 	
	protected
çç 
override
çç 
string
çç !
Format
çç" (
(
çç( )
ITimeFormatter
çç) 7
	formatter
çç8 A
)
ççA B
{
éé 	
return
èè 
	formatter
èè 
.
èè 
GetCalendarPeriod
èè .
(
èè. / 
HalfyearOfYearName
èè/ A
,
èèA B
	formatter
êê 
.
êê 
GetShortDate
êê &
(
êê& '
Start
êê' ,
)
êê, -
,
êê- .
	formatter
êê/ 8
.
êê8 9
GetShortDate
êê9 E
(
êêE F
End
êêF I
)
êêI J
,
êêJ K
Duration
êêL T
)
êêT U
;
êêU V
}
ëë 	
}
ìì 
}ïï ±&
jF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\Halfyears.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

sealed 
class 
	Halfyears !
:" #
HalfyearTimeRange$ 5
{ 
public 
	Halfyears 
( 
DateTime !
moment" (
,( )
YearHalfyear* 6
startHalfyear7 D
,D E
intF I
countJ O
)O P
:Q R
this 
( 
moment 
, 
startHalfyear &
,& '
count( -
,- .
new/ 2
TimeCalendar3 ?
(? @
)@ A
)A B
{ 	
} 	
public 
	Halfyears 
( 
DateTime !
moment" (
,( )
YearHalfyear* 6
startHalfyear7 D
,D E
intF I
countJ O
,O P
ITimeCalendarQ ^
calendar_ g
)g h
:i j
this 
( 
TimeTool 
. 
	GetYearOf #
(# $
calendar$ ,
., -
YearBaseMonth- :
,: ;
calendar< D
.D E
GetYearE L
(L M
momentM S
)S T
,T U
calendarV ^
.^ _
GetMonth_ g
(g h
momenth n
)n o
)o p
,p q
startHalfyear 
, 
count  
,  !
calendar" *
)* +
{ 	
} 	
public 
	Halfyears 
( 
int 
	startYear &
,& '
YearHalfyear( 4
startHalfyear5 B
,B C
intD G
halfyearCountH U
)U V
:W X
this   
(   
	startYear   
,   
startHalfyear   )
,  ) *
halfyearCount  + 8
,  8 9
new  : =
TimeCalendar  > J
(  J K
)  K L
)  L M
{!! 	
}"" 	
public%% 
	Halfyears%% 
(%% 
int%% 
	startYear%% &
,%%& '
YearHalfyear%%( 4
startHalfyear%%5 B
,%%B C
int%%D G
halfyearCount%%H U
,%%U V
ITimeCalendar%%W d
calendar%%e m
)%%m n
:%%o p
base&& 
(&& 
	startYear&& 
,&& 
startHalfyear&& )
,&&) *
halfyearCount&&+ 8
,&&8 9
calendar&&: B
)&&B C
{'' 	
}(( 	
public++ !
ITimePeriodCollection++ $
GetHalfyears++% 1
(++1 2
)++2 3
{,, 	 
TimePeriodCollection--  
	halfyears--! *
=--+ ,
new--- 0 
TimePeriodCollection--1 E
(--E F
)--F G
;--G H
for.. 
(.. 
int.. 
i.. 
=.. 
$num.. 
;.. 
i.. 
<.. 
HalfyearCount..  -
;..- .
i../ 0
++..0 2
)..2 3
{// 
int00 
year00 
;00 
YearHalfyear11 
halfyear11 %
;11% &
TimeTool22 
.22 
AddHalfyear22 $
(22$ %
BaseYear22% -
,22- .
StartHalfyear22/ <
,22< =
i22> ?
,22? @
out22A D
year22E I
,22I J
out22K N
halfyear22O W
)22W X
;22X Y
	halfyears33 
.33 
Add33 
(33 
new33 !
Halfyear33" *
(33* +
year33+ /
,33/ 0
halfyear331 9
,339 :
Calendar33; C
)33C D
)33D E
;33E F
}44 
return55 
	halfyears55 
;55 
}66 	
	protected99 
override99 
string99 !
Format99" (
(99( )
ITimeFormatter99) 7
	formatter998 A
)99A B
{:: 	
return;; 
	formatter;; 
.;; 
GetCalendarPeriod;; .
(;;. /#
StartHalfyearOfYearName;;/ F
,;;F G!
EndHalfyearOfYearName;;H ]
,;;] ^
	formatter<< 
.<< 
GetShortDate<< &
(<<& '
Start<<' ,
)<<, -
,<<- .
	formatter<</ 8
.<<8 9
GetShortDate<<9 E
(<<E F
End<<F I
)<<I J
,<<J K
Duration<<L T
)<<T U
;<<U V
}== 	
}?? 
}AA ‹{
rF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\HalfyearTimeRange.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

abstract 
class 
HalfyearTimeRange +
:, -
CalendarTimeRange. ?
{ 
	protected 
HalfyearTimeRange #
(# $
int$ '
	startYear( 1
,1 2
YearHalfyear3 ?
startHalfyear@ M
,M N
intO R
halfyearCountS `
,` a
ITimeCalendarb o
calendarp x
)x y
:z {
base 
( 
GetPeriodOf 
( 
calendar %
,% &
	startYear' 0
,0 1
startHalfyear2 ?
,? @
halfyearCountA N
)N O
,O P
calendarQ Y
)Y Z
{ 	
this 
. 
	startYear 
= 
	startYear &
;& '
this 
. 
startHalfyear 
=  
startHalfyear! .
;. /
this 
. 
halfyearCount 
=  
halfyearCount! .
;. /
TimeTool 
. 
AddHalfyear  
(  !
	startYear! *
,* +
startHalfyear, 9
,9 :
halfyearCount; H
-I J
$numK L
,L M
outN Q
endYearR Y
,Y Z
out[ ^
endHalfyear_ j
)j k
;k l
} 	
public 
override 
int 
BaseYear $
{ 	
get 
{ 
return 
	startYear "
;" #
}$ %
} 	
public"" 
int"" 
	StartYear"" 
{## 	
get$$ 
{$$ 
return$$ 
Calendar$$ !
.$$! "
GetYear$$" )
($$) *
	startYear$$* 3
,$$3 4
($$5 6
int$$6 9
)$$9 :
Calendar$$: B
.$$B C
YearBaseMonth$$C P
)$$P Q
;$$Q R
}$$S T
}%% 	
public(( 
int(( 
EndYear(( 
{)) 	
get** 
{** 
return** 
Calendar** !
.**! "
GetYear**" )
(**) *
endYear*** 1
,**1 2
(**3 4
int**4 7
)**7 8
Calendar**8 @
.**@ A
YearBaseMonth**A N
)**N O
;**O P
}**Q R
}++ 	
public.. 
YearHalfyear.. 
StartHalfyear.. )
{// 	
get00 
{00 
return00 
startHalfyear00 &
;00& '
}00( )
}11 	
public44 
YearHalfyear44 
EndHalfyear44 '
{55 	
get66 
{66 
return66 
endHalfyear66 $
;66$ %
}66& '
}77 	
public:: 
int:: 
HalfyearCount::  
{;; 	
get<< 
{<< 
return<< 
halfyearCount<< &
;<<& '
}<<( )
}== 	
public@@ 
string@@ 
StartHalfyearName@@ '
{AA 	
getBB 
{BB 
returnBB 
CalendarBB !
.BB! "
GetHalfyearNameBB" 1
(BB1 2
StartHalfyearBB2 ?
)BB? @
;BB@ A
}BBB C
}CC 	
publicFF 
stringFF #
StartHalfyearOfYearNameFF -
{GG 	
getHH 
{HH 
returnHH 
CalendarHH !
.HH! "!
GetHalfyearOfYearNameHH" 7
(HH7 8
	StartYearHH8 A
,HHA B
StartHalfyearHHC P
)HHP Q
;HHQ R
}HHS T
}II 	
publicLL 
stringLL 
EndHalfyearNameLL %
{MM 	
getNN 
{NN 
returnNN 
CalendarNN !
.NN! "
GetHalfyearNameNN" 1
(NN1 2
EndHalfyearNN2 =
)NN= >
;NN> ?
}NN@ A
}OO 	
publicRR 
stringRR !
EndHalfyearOfYearNameRR +
{SS 	
getTT 
{TT 
returnTT 
CalendarTT !
.TT! "!
GetHalfyearOfYearNameTT" 7
(TT7 8
EndYearTT8 ?
,TT? @
EndHalfyearTTA L
)TTL M
;TTM N
}TTO P
}UU 	
publicXX !
ITimePeriodCollectionXX $
GetQuartersXX% 0
(XX0 1
)XX1 2
{YY 	 
TimePeriodCollectionZZ  
quartersZZ! )
=ZZ* +
newZZ, / 
TimePeriodCollectionZZ0 D
(ZZD E
)ZZE F
;ZZF G
YearQuarter[[ 
startQuarter[[ $
=[[% &
StartHalfyear[[' 4
==[[5 7
YearHalfyear[[8 D
.[[D E
First[[E J
?[[K L
YearQuarter[[M X
.[[X Y
First[[Y ^
:[[_ `
YearQuarter[[a l
.[[l m
Third[[m r
;[[r s
for\\ 
(\\ 
int\\ 
i\\ 
=\\ 
$num\\ 
;\\ 
i\\ 
<\\ 
halfyearCount\\  -
;\\- .
i\\/ 0
++\\0 2
)\\2 3
{]] 
for^^ 
(^^ 
int^^ 
quarter^^  
=^^! "
$num^^# $
;^^$ %
quarter^^& -
<^^. /
TimeSpec^^0 8
.^^8 9
QuartersPerHalfyear^^9 L
;^^L M
quarter^^N U
++^^U W
)^^W X
{__ 
int`` 
year`` 
;`` 
YearQuarteraa 
yearQuarteraa  +
;aa+ ,
TimeToolbb 
.bb 

AddQuarterbb '
(bb' (
	startYearbb( 1
,bb1 2
startQuarterbb3 ?
,bb? @
ibbA B
*bbC D
TimeSpecbbE M
.bbM N
QuartersPerHalfyearbbN a
+bbb c
quarterbbd k
,bbk l
outbbm p
yearbbq u
,bbu v
outbbw z
yearQuarter	bb{ Ü
)
bbÜ á
;
bbá à
quarterscc 
.cc 
Addcc  
(cc  !
newcc! $
Quartercc% ,
(cc, -
yearcc- 1
,cc1 2
yearQuartercc3 >
,cc> ?
Calendarcc@ H
)ccH I
)ccI J
;ccJ K
}dd 
}ee 
returnff 
quartersff 
;ff 
}gg 	
publicjj !
ITimePeriodCollectionjj $
	GetMonthsjj% .
(jj. /
)jj/ 0
{kk 	 
TimePeriodCollectionll  
monthsll! '
=ll( )
newll* - 
TimePeriodCollectionll. B
(llB C
)llC D
;llD E
	YearMonthmm 

startMonthmm  
=mm! "
YearBaseMonthmm# 0
;mm0 1
ifnn 
(nn 
StartHalfyearnn 
==nn  
YearHalfyearnn! -
.nn- .
Secondnn. 4
)nn4 5
{oo 
intpp 
yearpp 
;pp 
TimeToolqq 
.qq 
AddMonthqq !
(qq! "
	startYearqq" +
,qq+ ,

startMonthqq- 7
,qq7 8
TimeSpecqq9 A
.qqA B
MonthsPerHalfyearqqB S
,qqS T
outqqU X
yearqqY ]
,qq] ^
outqq_ b

startMonthqqc m
)qqm n
;qqn o
}rr 
forss 
(ss 
intss 
iss 
=ss 
$numss 
;ss 
iss 
<ss 
halfyearCountss  -
;ss- .
iss/ 0
++ss0 2
)ss2 3
{tt 
foruu 
(uu 
intuu 
monthuu 
=uu  
$numuu! "
;uu" #
monthuu$ )
<uu* +
TimeSpecuu, 4
.uu4 5
MonthsPerHalfyearuu5 F
;uuF G
monthuuH M
++uuM O
)uuO P
{vv 
intww 
yearww 
;ww 
	YearMonthxx 
	yearMonthxx '
;xx' (
TimeToolyy 
.yy 
AddMonthyy %
(yy% &
	startYearyy& /
,yy/ 0

startMonthyy1 ;
,yy; <
iyy= >
*yy? @
TimeSpecyyA I
.yyI J
MonthsPerHalfyearyyJ [
+yy\ ]
monthyy^ c
,yyc d
outyye h
yearyyi m
,yym n
outyyo r
	yearMonthyys |
)yy| }
;yy} ~
monthszz 
.zz 
Addzz 
(zz 
newzz "
Monthzz# (
(zz( )
yearzz) -
,zz- .
	yearMonthzz/ 8
,zz8 9
Calendarzz: B
)zzB C
)zzC D
;zzD E
}{{ 
}|| 
return}} 
months}} 
;}} 
}~~ 	
	protected
ÅÅ 
override
ÅÅ 
bool
ÅÅ 
IsEqual
ÅÅ  '
(
ÅÅ' (
object
ÅÅ( .
obj
ÅÅ/ 2
)
ÅÅ2 3
{
ÇÇ 	
return
ÉÉ 
base
ÉÉ 
.
ÉÉ 
IsEqual
ÉÉ 
(
ÉÉ  
obj
ÉÉ  #
)
ÉÉ# $
&&
ÉÉ% '
HasSameData
ÉÉ( 3
(
ÉÉ3 4
obj
ÉÉ4 7
as
ÉÉ8 :
HalfyearTimeRange
ÉÉ; L
)
ÉÉL M
;
ÉÉM N
}
ÑÑ 	
private
áá 
bool
áá 
HasSameData
áá  
(
áá  !
HalfyearTimeRange
áá! 2
comp
áá3 7
)
áá7 8
{
àà 	
return
ââ 
	startYear
ää 
==
ää 
comp
ää !
.
ää! "
	startYear
ää" +
&&
ää, .
startHalfyear
ãã 
==
ãã  
comp
ãã! %
.
ãã% &
startHalfyear
ãã& 3
&&
ãã4 6
halfyearCount
åå 
==
åå  
comp
åå! %
.
åå% &
halfyearCount
åå& 3
&&
åå4 6
endYear
çç 
==
çç 
comp
çç 
.
çç  
endYear
çç  '
&&
çç( *
endHalfyear
éé 
==
éé 
comp
éé #
.
éé# $
endHalfyear
éé$ /
;
éé/ 0
}
èè 	
	protected
íí 
override
íí 
int
íí 
ComputeHashCode
íí .
(
íí. /
)
íí/ 0
{
ìì 	
return
îî 
HashTool
îî 
.
îî 
ComputeHashCode
îî +
(
îî+ ,
base
îî, 0
.
îî0 1
ComputeHashCode
îî1 @
(
îî@ A
)
îîA B
,
îîB C
	startYear
îîD M
,
îîM N
startHalfyear
îîO \
,
îî\ ]
halfyearCount
îî^ k
,
îîk l
endYear
îîm t
,
îît u
endHalfyearîîv Å
)îîÅ Ç
;îîÇ É
}
ïï 	
private
òò 
static
òò 
DateTime
òò  
GetStartOfHalfyear
òò  2
(
òò2 3
ITimeCalendar
òò3 @
calendar
òòA I
,
òòI J
int
òòK N
year
òòO S
,
òòS T
YearHalfyear
òòU a
halfyear
òòb j
)
òòj k
{
ôô 	
DateTime
öö 
startOfHalfyear
öö $
;
öö$ %
switch
úú 
(
úú 
calendar
úú 
.
úú 
YearType
úú %
)
úú% &
{
ùù 
case
ûû 
YearType
ûû 
.
ûû 

FiscalYear
ûû (
:
ûû( )
startOfHalfyear
üü #
=
üü$ % 
FiscalCalendarTool
üü& 8
.
üü8 9 
GetStartOfHalfyear
üü9 K
(
üüK L
year
üüL P
,
üüP Q
halfyear
üüR Z
,
üüZ [
calendar
††  
.
††  !
YearBaseMonth
††! .
,
††. /
calendar
††0 8
.
††8 9"
FiscalFirstDayOfYear
††9 M
,
††M N
calendar
††O W
.
††W X!
FiscalYearAlignment
††X k
)
††k l
;
††l m
break
°° 
;
°° 
default
¢¢ 
:
¢¢ 
DateTime
££ 
	yearStart
££ &
=
££' (
new
££) ,
DateTime
££- 5
(
££5 6
year
££6 :
,
££: ;
(
££< =
int
££= @
)
££@ A
calendar
££A I
.
££I J
YearBaseMonth
££J W
,
££W X
$num
££Y Z
)
££Z [
;
££[ \
startOfHalfyear
§§ #
=
§§$ %
	yearStart
§§& /
.
§§/ 0
	AddMonths
§§0 9
(
§§9 :
(
§§: ;
(
§§; <
int
§§< ?
)
§§? @
halfyear
§§@ H
-
§§I J
$num
§§K L
)
§§L M
*
§§N O
TimeSpec
§§P X
.
§§X Y
MonthsPerHalfyear
§§Y j
)
§§j k
;
§§k l
break
•• 
;
•• 
}
¶¶ 
return
ßß 
startOfHalfyear
ßß "
;
ßß" #
}
®® 	
private
´´ 
static
´´ 
	TimeRange
´´  
GetPeriodOf
´´! ,
(
´´, -
ITimeCalendar
´´- :
calendar
´´; C
,
´´C D
int
´´E H
	startYear
´´I R
,
´´R S
YearHalfyear
´´T `
startHalfyear
´´a n
,
´´n o
int
´´p s
halfyearCount´´t Å
)´´Å Ç
{
¨¨ 	
if
≠≠ 
(
≠≠ 
halfyearCount
≠≠ 
<
≠≠ 
$num
≠≠  !
)
≠≠! "
{
ÆÆ 
throw
ØØ 
new
ØØ )
ArgumentOutOfRangeException
ØØ 5
(
ØØ5 6
$str
ØØ6 E
)
ØØE F
;
ØØF G
}
∞∞ 
DateTime
≤≤ 
start
≤≤ 
=
≤≤  
GetStartOfHalfyear
≤≤ /
(
≤≤/ 0
calendar
≤≤0 8
,
≤≤8 9
	startYear
≤≤: C
,
≤≤C D
startHalfyear
≤≤E R
)
≤≤R S
;
≤≤S T
int
≥≥ 
endYear
≥≥ 
;
≥≥ 
YearHalfyear
¥¥ 
endHalfyear
¥¥ $
;
¥¥$ %
TimeTool
µµ 
.
µµ 
AddHalfyear
µµ  
(
µµ  !
	startYear
µµ! *
,
µµ* +
startHalfyear
µµ, 9
,
µµ9 :
halfyearCount
µµ; H
,
µµH I
out
µµJ M
endYear
µµN U
,
µµU V
out
µµW Z
endHalfyear
µµ[ f
)
µµf g
;
µµg h
DateTime
∂∂ 
end
∂∂ 
=
∂∂  
GetStartOfHalfyear
∂∂ -
(
∂∂- .
calendar
∂∂. 6
,
∂∂6 7
endYear
∂∂8 ?
,
∂∂? @
endHalfyear
∂∂A L
)
∂∂L M
;
∂∂M N
return
∏∏ 
new
∏∏ 
	TimeRange
∏∏  
(
∏∏  !
start
∏∏! &
,
∏∏& '
end
∏∏( +
)
∏∏+ ,
;
∏∏, -
}
ππ 	
private
ΩΩ 
readonly
ΩΩ 
int
ΩΩ 
	startYear
ΩΩ &
;
ΩΩ& '
private
ææ 
readonly
ææ 
YearHalfyear
ææ %
startHalfyear
ææ& 3
;
ææ3 4
private
øø 
readonly
øø 
int
øø 
halfyearCount
øø *
;
øø* +
private
¿¿ 
readonly
¿¿ 
int
¿¿ 
endYear
¿¿ $
;
¿¿$ %
private
¡¡ 
readonly
¡¡ 
YearHalfyear
¡¡ %
endHalfyear
¡¡& 1
;
¡¡1 2
}
√√ 
}≈≈ ≠ 
iF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\HashTool.cs
	namespace 	
Phoenix
 
. 
CrossCutting 
. 

TimePeriod )
{ 
public 

static 
class 
HashTool  
{ 
public 
static 
int 
AddHashCode %
(% &
int& )
hash* .
,. /
object0 6
obj7 :
): ;
{ 	
int 
combinedHash 
= 
obj "
!=# %
null& *
?+ ,
obj- 0
.0 1
GetHashCode1 <
(< =
)= >
:? @
	nullValueA J
;J K
combinedHash 
+= 
hash  
*! "
factor# )
;) *
return 
combinedHash 
;  
} 	
public"" 
static"" 
int"" 
AddHashCode"" %
(""% &
int""& )
hash""* .
,"". /
int""0 3
objHash""4 ;
)""; <
{## 	
int$$ 
combinedHash$$ 
=$$ 
objHash$$ &
;$$& '
combinedHash'' 
+='' 
hash''  
*''! "
factor''# )
;'') *
return)) 
combinedHash)) 
;))  
}** 	
public-- 
static-- 
int-- 
ComputeHashCode-- )
(--) *
object--* 0
obj--1 4
)--4 5
{.. 	
return// 
obj// 
!=// 
null// 
?//  
obj//! $
.//$ %
GetHashCode//% 0
(//0 1
)//1 2
://3 4
	nullValue//5 >
;//> ?
}00 	
public33 
static33 
int33 
ComputeHashCode33 )
(33) *
params33* 0
object331 7
[337 8
]338 9
objs33: >
)33> ?
{44 	
int55 
hash55 
=55 
	initValue55  
;55  !
if66 
(66 
objs66 
!=66 
null66 
)66 
{77 
foreach88 
(88 
object88 
obj88  #
in88$ &
objs88' +
)88+ ,
{99 
hash:: 
=:: 
hash:: 
*::  !
factor::" (
+::) *
(::+ ,
obj::, /
!=::0 2
null::3 7
?::8 9
obj::: =
.::= >
GetHashCode::> I
(::I J
)::J K
:::L M
	nullValue::N W
)::W X
;::X Y
};; 
}<< 
return== 
hash== 
;== 
}>> 	
publicAA 
staticAA 
intAA 
ComputeHashCodeAA )
(AA) *
IEnumerableAA* 5

enumerableAA6 @
)AA@ A
{BB 	
intCC 
hashCC 
=CC 
	initValueCC  
;CC  !
foreachDD 
(DD 
objectDD 
itemDD  
inDD! #

enumerableDD$ .
)DD. /
{EE 
hashFF 
=FF 
hashFF 
*FF 
factorFF $
+FF% &
(FF' (
itemFF( ,
!=FF- /
nullFF0 4
?FF5 6
itemFF7 ;
.FF; <
GetHashCodeFF< G
(FFG H
)FFH I
:FFJ K
	nullValueFFL U
)FFU V
;FFV W
}GG 
returnHH 
hashHH 
;HH 
}II 	
privateMM 
constMM 
intMM 
	nullValueMM #
=MM$ %
$numMM& '
;MM' (
privateNN 
constNN 
intNN 
	initValueNN #
=NN$ %
$numNN& '
;NN' (
privateOO 
constOO 
intOO 
factorOO  
=OO! "
$numOO# %
;OO% &
}QQ 
}SS µ.
eF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\Hour.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

sealed 
class 
Hour 
: 
HourTimeRange ,
{ 
public 
Hour 
( 
) 
: 
this 
( 
new 
TimeCalendar !
(! "
)" #
)# $
{ 	
} 	
public 
Hour 
( 
ITimeCalendar !
calendar" *
)* +
:, -
this 
( 

ClockProxy 
. 
Clock !
.! "
Now" %
,% &
calendar' /
)/ 0
{ 	
} 	
public 
Hour 
( 
DateTime 
moment #
)# $
:% &
this 
( 
moment 
, 
new 
TimeCalendar )
() *
)* +
)+ ,
{   	
}!! 	
public$$ 
Hour$$ 
($$ 
DateTime$$ 
moment$$ #
,$$# $
ITimeCalendar$$% 2
calendar$$3 ;
)$$; <
:$$= >
this%% 
(%% 
calendar%% 
.%% 
GetYear%% !
(%%! "
moment%%" (
)%%( )
,%%) *
calendar%%+ 3
.%%3 4
GetMonth%%4 <
(%%< =
moment%%= C
)%%C D
,%%D E
calendar&& 
.&& 
GetDayOfMonth&& &
(&&& '
moment&&' -
)&&- .
,&&. /
calendar&&0 8
.&&8 9
GetHour&&9 @
(&&@ A
moment&&A G
)&&G H
,&&H I
calendar&&J R
)&&R S
{'' 	
}(( 	
public++ 
Hour++ 
(++ 
int++ 
year++ 
,++ 
int++ !
month++" '
,++' (
int++) ,
day++- 0
,++0 1
int++2 5
hour++6 :
)++: ;
:++< =
this,, 
(,, 
year,, 
,,, 
month,, 
,,, 
day,, !
,,,! "
hour,,# '
,,,' (
new,,) ,
TimeCalendar,,- 9
(,,9 :
),,: ;
),,; <
{-- 	
}.. 	
public11 
Hour11 
(11 
int11 
year11 
,11 
int11 !
month11" '
,11' (
int11) ,
day11- 0
,110 1
int112 5
hour116 :
,11: ;
ITimeCalendar11< I
calendar11J R
)11R S
:11T U
base22 
(22 
year22 
,22 
month22 
,22 
day22 !
,22! "
hour22# '
,22' (
$num22) *
,22* +
calendar22, 4
)224 5
{33 	
}44 	
public77 
int77 
Year77 
{88 	
get99 
{99 
return99 
	StartYear99 "
;99" #
}99$ %
}:: 	
public== 
int== 
Month== 
{>> 	
get?? 
{?? 
return?? 

StartMonth?? #
;??# $
}??% &
}@@ 	
publicCC 
intCC 
DayCC 
{DD 	
getEE 
{EE 
returnEE 
StartDayEE !
;EE! "
}EE# $
}FF 	
publicII 
intII 
	HourValueII 
{JJ 	
getKK 
{KK 
returnKK 
	StartHourKK "
;KK" #
}KK$ %
}LL 	
publicOO 
HourOO 
GetPreviousHourOO #
(OO# $
)OO$ %
{PP 	
returnQQ 
AddHoursQQ 
(QQ 
-QQ 
$numQQ 
)QQ 
;QQ  
}RR 	
publicUU 
HourUU 
GetNextHourUU 
(UU  
)UU  !
{VV 	
returnWW 
AddHoursWW 
(WW 
$numWW 
)WW 
;WW 
}XX 	
public[[ 
Hour[[ 
AddHours[[ 
([[ 
int[[  
hours[[! &
)[[& '
{\\ 	
DateTime]] 
	startHour]] 
=]]  
new]]! $
DateTime]]% -
(]]- .
	StartYear]]. 7
,]]7 8

StartMonth]]9 C
,]]C D
StartDay]]E M
,]]M N
	StartHour]]O X
,]]X Y
$num]]Z [
,]][ \
$num]]] ^
)]]^ _
;]]_ `
return^^ 
new^^ 
Hour^^ 
(^^ 
	startHour^^ %
.^^% &
AddHours^^& .
(^^. /
hours^^/ 4
)^^4 5
,^^5 6
Calendar^^7 ?
)^^? @
;^^@ A
}__ 	
	protectedbb 
overridebb 
stringbb !
Formatbb" (
(bb( )
ITimeFormatterbb) 7
	formatterbb8 A
)bbA B
{cc 	
returndd 
	formatterdd 
.dd 
GetCalendarPerioddd .
(dd. /
	formatterdd/ 8
.dd8 9
GetShortDatedd9 E
(ddE F
StartddF K
)ddK L
,ddL M
	formatteree 
.ee 
GetShortTimeee &
(ee& '
Startee' ,
)ee, -
,ee- .
	formatteree/ 8
.ee8 9
GetShortTimeee9 E
(eeE F
EndeeF I
)eeI J
,eeJ K
DurationeeL T
)eeT U
;eeU V
}ff 	
}hh 
}jj û
jF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\HourRange.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

class 
	HourRange 
{ 
public 
	HourRange 
( 
int 
hour !
)! "
:# $
this 
( 
hour 
, 
hour 
) 
{ 	
} 	
public 
	HourRange 
( 
int 
	startHour &
,& '
int( +
endHour, 3
)3 4
:5 6
this 
( 
new 
Time 
( 
	startHour #
)# $
,$ %
new& )
Time* .
(. /
endHour/ 6
)6 7
)7 8
{ 	
} 	
public 
	HourRange 
( 
Time 
start #
,# $
Time% )
end* -
)- .
{ 	
if   
(   
start   
.   
Ticks   
<=   
end   "
.  " #
Ticks  # (
)  ( )
{!! 
this"" 
."" 
start"" 
="" 
start"" "
;""" #
this## 
.## 
end## 
=## 
end## 
;## 
}$$ 
else%% 
{&& 
this'' 
.'' 
end'' 
='' 
start''  
;''  !
this(( 
.(( 
start(( 
=(( 
end((  
;((  !
})) 
}** 	
public-- 
Time-- 
Start-- 
{.. 	
get// 
{// 
return// 
start// 
;// 
}//  !
}00 	
public33 
Time33 
End33 
{44 	
get55 
{55 
return55 
end55 
;55 
}55 
}66 	
public99 
bool99 
IsMoment99 
{:: 	
get;; 
{;; 
return;; 
start;; 
.;; 
Equals;; %
(;;% &
end;;& )
);;) *
;;;* +
};;, -
}<< 	
public?? 
override?? 
string?? 
ToString?? '
(??' (
)??( )
{@@ 	
returnAA 
startAA 
+AA 
$strAA  
+AA! "
endAA# &
;AA& '
}BB 	
privateFF 
readonlyFF 
TimeFF 
startFF #
;FF# $
privateGG 
readonlyGG 
TimeGG 
endGG !
;GG! "
}II 
}KK •(
fF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\Hours.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

sealed 
class 
Hours 
: 
HourTimeRange  -
{ 
public 
Hours 
( 
DateTime 
moment $
,$ %
int& )
count* /
)/ 0
:1 2
this 
( 
moment 
, 
count 
, 
new  #
TimeCalendar$ 0
(0 1
)1 2
)2 3
{ 	
} 	
public 
Hours 
( 
DateTime 
moment $
,$ %
int& )
count* /
,/ 0
ITimeCalendar1 >
calendar? G
)G H
:I J
this 
( 
calendar 
. 
GetYear !
(! "
moment" (
)( )
,) *
calendar+ 3
.3 4
GetMonth4 <
(< =
moment= C
)C D
,D E
calendar 
. 
GetDayOfMonth &
(& '
moment' -
)- .
,. /
calendar0 8
.8 9
GetHour9 @
(@ A
momentA G
)G H
,H I
countJ O
,O P
calendarQ Y
)Y Z
{ 	
} 	
public 
Hours 
( 
int 
	startYear "
," #
int$ '

startMonth( 2
,2 3
int4 7
startDay8 @
,@ A
intB E
hourF J
,J K
intL O
	hourCountP Y
)Y Z
:[ \
this   
(   
	startYear   
,   

startMonth   &
,  & '
startDay  ( 0
,  0 1
hour  2 6
,  6 7
	hourCount  8 A
,  A B
new  C F
TimeCalendar  G S
(  S T
)  T U
)  U V
{!! 	
}"" 	
public%% 
Hours%% 
(%% 
int%% 
	startYear%% "
,%%" #
int%%$ '

startMonth%%( 2
,%%2 3
int%%4 7
startDay%%8 @
,%%@ A
int%%B E
hour%%F J
,%%J K
int%%L O
	hourCount%%P Y
,%%Y Z
ITimeCalendar%%[ h
calendar%%i q
)%%q r
:%%s t
base&& 
(&& 
	startYear&& 
,&& 

startMonth&& &
,&&& '
startDay&&( 0
,&&0 1
hour&&2 6
,&&6 7
	hourCount&&8 A
,&&A B
calendar&&C K
)&&K L
{'' 	
}(( 	
public++ !
ITimePeriodCollection++ $
GetHours++% -
(++- .
)++. /
{,, 	 
TimePeriodCollection--  
hours--! &
=--' (
new--) , 
TimePeriodCollection--- A
(--A B
)--B C
;--C D
DateTime.. 
	startHour.. 
=..  
new..! $
DateTime..% -
(..- .
	StartYear... 7
,..7 8

StartMonth..9 C
,..C D
StartDay..E M
,..M N
	StartHour..O X
,..X Y
$num..Z [
,..[ \
$num..] ^
)..^ _
;.._ `
for// 
(// 
int// 
i// 
=// 
$num// 
;// 
i// 
<// 
	HourCount//  )
;//) *
i//+ ,
++//, .
)//. /
{00 
hours11 
.11 
Add11 
(11 
new11 
Hour11 "
(11" #
	startHour11# ,
.11, -
AddHours11- 5
(115 6
i116 7
)117 8
,118 9
Calendar11: B
)11B C
)11C D
;11D E
}22 
return33 
hours33 
;33 
}44 	
	protected77 
override77 
string77 !
Format77" (
(77( )
ITimeFormatter77) 7
	formatter778 A
)77A B
{88 	
return99 
	formatter99 
.99 
GetCalendarPeriod99 .
(99. /
	formatter99/ 8
.998 9
GetShortDate999 E
(99E F
Start99F K
)99K L
,99L M
	formatter99N W
.99W X
GetShortDate99X d
(99d e
End99e h
)99h i
,99i j
	formatter:: 
.:: 
GetShortTime:: &
(::& '
Start::' ,
)::, -
,::- .
	formatter::/ 8
.::8 9
GetShortTime::9 E
(::E F
End::F I
)::I J
,::J K
Duration::L T
)::T U
;::U V
};; 	
}== 
}?? ≠G
nF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\HourTimeRange.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

abstract 
class 
HourTimeRange '
:( )
CalendarTimeRange* ;
{ 
	protected 
HourTimeRange 
(  
int  #
	startYear$ -
,- .
int/ 2

startMonth3 =
,= >
int? B
startDayC K
,K L
intM P
	startHourQ Z
,Z [
int\ _
	hourCount` i
)i j
:k l
this 
( 
	startYear 
, 

startMonth &
,& '
startDay( 0
,0 1
	startHour2 ;
,; <
	hourCount= F
,F G
newH K
TimeCalendarL X
(X Y
)Y Z
)Z [
{ 	
} 	
	protected 
HourTimeRange 
(  
int  #
	startYear$ -
,- .
int/ 2

startMonth3 =
,= >
int? B
startDayC K
,K L
intM P
	startHourQ Z
,Z [
int\ _
	hourCount` i
,i j
ITimeCalendark x
calendar	y Å
)
Å Ç
:
É Ñ
base 
( 
GetPeriodOf 
( 
	startYear &
,& '

startMonth( 2
,2 3
startDay4 <
,< =
	startHour> G
,G H
	hourCountI R
)R S
,S T
calendarU ]
)] ^
{ 	
this 
. 
	startHour 
= 
new  
DateTime! )
() *
	startYear* 3
,3 4

startMonth5 ?
,? @
startDayA I
,I J
	startHourK T
,T U
$numV W
,W X
$numY Z
)Z [
;[ \
this 
. 
	hourCount 
= 
	hourCount &
;& '
endHour 
= 
this 
. 
	startHour $
.$ %
AddHours% -
(- .
	hourCount. 7
)7 8
;8 9
} 	
public!! 
int!! 
	StartYear!! 
{"" 	
get## 
{## 
return## 
	startHour## "
.##" #
Year### '
;##' (
}##) *
}$$ 	
public'' 
int'' 

StartMonth'' 
{(( 	
get)) 
{)) 
return)) 
	startHour)) "
.))" #
Month))# (
;))( )
}))* +
}** 	
public-- 
int-- 
StartDay-- 
{.. 	
get// 
{// 
return// 
	startHour// "
.//" #
Day//# &
;//& '
}//( )
}00 	
public33 
int33 
	StartHour33 
{44 	
get55 
{55 
return55 
	startHour55 "
.55" #
Hour55# '
;55' (
}55) *
}66 	
public99 
int99 
EndYear99 
{:: 	
get;; 
{;; 
return;; 
endHour;;  
.;;  !
Year;;! %
;;;% &
};;' (
}<< 	
public?? 
int?? 
EndMonth?? 
{@@ 	
getAA 
{AA 
returnAA 
endHourAA  
.AA  !
MonthAA! &
;AA& '
}AA( )
}BB 	
publicEE 
intEE 
EndDayEE 
{FF 	
getGG 
{GG 
returnGG 
endHourGG  
.GG  !
DayGG! $
;GG$ %
}GG& '
}HH 	
publicKK 
intKK 
EndHourKK 
{LL 	
getMM 
{MM 
returnMM 
endHourMM  
.MM  !
HourMM! %
;MM% &
}MM' (
}NN 	
publicQQ 
intQQ 
	HourCountQQ 
{RR 	
getSS 
{SS 
returnSS 
	hourCountSS "
;SS" #
}SS$ %
}TT 	
publicWW !
ITimePeriodCollectionWW $

GetMinutesWW% /
(WW/ 0
)WW0 1
{XX 	 
TimePeriodCollectionYY  
minutesYY! (
=YY) *
newYY+ . 
TimePeriodCollectionYY/ C
(YYC D
)YYD E
;YYE F
forZZ 
(ZZ 
intZZ 
hourZZ 
=ZZ 
$numZZ 
;ZZ 
hourZZ #
<ZZ$ %
	hourCountZZ& /
;ZZ/ 0
hourZZ1 5
++ZZ5 7
)ZZ7 8
{[[ 
DateTime\\ 
curHour\\  
=\\! "
	startHour\\# ,
.\\, -
AddHours\\- 5
(\\5 6
hour\\6 :
)\\: ;
;\\; <
for]] 
(]] 
int]] 
minute]] 
=]]  !
$num]]" #
;]]# $
minute]]% +
<]], -
TimeSpec]]. 6
.]]6 7
MinutesPerHour]]7 E
;]]E F
minute]]G M
++]]M O
)]]O P
{^^ 
minutes__ 
.__ 
Add__ 
(__  
new__  #
Minute__$ *
(__* +
curHour__+ 2
.__2 3

AddMinutes__3 =
(__= >
minute__> D
)__D E
,__E F
Calendar__G O
)__O P
)__P Q
;__Q R
}`` 
}aa 
returnbb 
minutesbb 
;bb 
}cc 	
	protectedff 
overrideff 
boolff 
IsEqualff  '
(ff' (
objectff( .
objff/ 2
)ff2 3
{gg 	
returnhh 
basehh 
.hh 
IsEqualhh 
(hh  
objhh  #
)hh# $
&&hh% '
HasSameDatahh( 3
(hh3 4
objhh4 7
ashh8 :
HourTimeRangehh; H
)hhH I
;hhI J
}ii 	
privatell 
boolll 
HasSameDatall  
(ll  !
HourTimeRangell! .
compll/ 3
)ll3 4
{mm 	
returnnn 
	startHournn 
==nn 
compnn  $
.nn$ %
	startHournn% .
&&nn/ 1
	hourCountnn2 ;
==nn< >
compnn? C
.nnC D
	hourCountnnD M
&&nnN P
endHournnQ X
==nnY [
compnn\ `
.nn` a
endHournna h
;nnh i
}oo 	
	protectedrr 
overriderr 
intrr 
ComputeHashCoderr .
(rr. /
)rr/ 0
{ss 	
returntt 
HashTooltt 
.tt 
ComputeHashCodett +
(tt+ ,
basett, 0
.tt0 1
ComputeHashCodett1 @
(tt@ A
)ttA B
,ttB C
	startHourttD M
,ttM N
	hourCountttO X
,ttX Y
endHourttZ a
)tta b
;ttb c
}uu 	
privatexx 
staticxx 
	TimeRangexx  
GetPeriodOfxx! ,
(xx, -
intxx- 0
yearxx1 5
,xx5 6
intxx7 :
monthxx; @
,xx@ A
intxxB E
dayxxF I
,xxI J
intxxK N
hourxxO S
,xxS T
intxxU X
	hourCountxxY b
)xxb c
{yy 	
ifzz 
(zz 
	hourCountzz 
<zz 
$numzz 
)zz 
{{{ 
throw|| 
new|| '
ArgumentOutOfRangeException|| 5
(||5 6
$str||6 A
)||A B
;||B C
}}} 
DateTime 
start 
= 
new  
DateTime! )
() *
year* .
,. /
month0 5
,5 6
day7 :
,: ;
hour< @
,@ A
$numB C
,C D
$numE F
)F G
;G H
DateTime
ÄÄ 
end
ÄÄ 
=
ÄÄ 
start
ÄÄ  
.
ÄÄ  !
AddHours
ÄÄ! )
(
ÄÄ) *
	hourCount
ÄÄ* 3
)
ÄÄ3 4
;
ÄÄ4 5
return
ÅÅ 
new
ÅÅ 
	TimeRange
ÅÅ  
(
ÅÅ  !
start
ÅÅ! &
,
ÅÅ& '
end
ÅÅ( +
)
ÅÅ+ ,
;
ÅÅ, -
}
ÇÇ 	
private
ÜÜ 
readonly
ÜÜ 
DateTime
ÜÜ !
	startHour
ÜÜ" +
;
ÜÜ+ ,
private
áá 
readonly
áá 
int
áá 
	hourCount
áá &
;
áá& '
private
àà 
readonly
àà 
DateTime
àà !
endHour
àà" )
;
àà) *
}
ää 
}åå ¶
F:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\ICalendarPeriodCollectorFilter.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

	interface *
ICalendarPeriodCollectorFilter 3
:4 5"
ICalendarVisitorFilter6 L
{ 
IList 
< 

MonthRange 
> 
CollectingMonths *
{+ ,
get- 0
;0 1
}2 3
IList 
< 
DayRange 
> 
CollectingDays &
{' (
get) ,
;, -
}. /
IList 
< 
	HourRange 
> 
CollectingHours (
{) *
get+ .
;. /
}0 1
} 
} à
sF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\ICalendarTimeRange.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

	interface 
ICalendarTimeRange '
:( )

ITimeRange* 4
{ 
ITimeCalendar 
Calendar 
{  
get! $
;$ %
}& '
} 
} ¸
xF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\ICalendarVisitorContext.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

	interface #
ICalendarVisitorContext ,
{ 
} 
} ı
wF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\ICalendarVisitorFilter.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

	interface "
ICalendarVisitorFilter +
{ !
ITimePeriodCollection 
ExcludePeriods ,
{- .
get/ 2
;2 3
}4 5
IList 
< 
int 
> 
Years 
{ 
get 
; 
}  !
IList 
< 
	YearMonth 
> 
Months 
{  !
get" %
;% &
}' (
IList 
< 
int 
> 
Days 
{ 
get 
; 
}  
IList 
< 
	DayOfWeek 
> 
WeekDays !
{" #
get$ '
;' (
}) *
IList!! 
<!! 
int!! 
>!! 
Hours!! 
{!! 
get!! 
;!! 
}!!  !
void$$ 
AddWorkingWeekDays$$ 
($$  
)$$  !
;$$! "
void'' 
AddWeekendWeekDays'' 
(''  
)''  !
;''! "
void** 
Clear** 
(** 
)** 
;** 
},, 
}.. ø
gF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\IClock.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

	interface 
IClock 
{ 
DateTime 
Now 
{ 
get 
; 
} 
} 
} Ã
mF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\IDateTimeSet.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

	interface 
IDateTimeSet !
:" #
ICollection$ /
</ 0
DateTime0 8
>8 9
{ 
DateTime 
this 
[ 
int 
index 
]  
{! "
get# &
;& '
}( )
DateTime 
? 
Min 
{ 
get 
; 
} 
DateTime 
? 
Max 
{ 
get 
; 
} 
TimeSpan 
? 
Duration 
{ 
get  
;  !
}" #
bool 
IsEmpty 
{ 
get 
; 
} 
bool!! 
IsMoment!! 
{!! 
get!! 
;!! 
}!! 
bool$$ 
	IsAnytime$$ 
{$$ 
get$$ 
;$$ 
}$$ 
int'' 
IndexOf'' 
('' 
DateTime'' 
moment'' #
)''# $
;''$ %
new** 
bool** 
Add** 
(** 
DateTime** 
moment** $
)**$ %
;**% &
void-- 
AddAll-- 
(-- 
IEnumerable-- 
<--  
DateTime--  (
>--( )
moments--* 1
)--1 2
;--2 3
IList00 
<00 
TimeSpan00 
>00 
GetDurations00 $
(00$ %
int00% (

startIndex00) 3
,003 4
int005 8
count009 >
)00> ?
;00? @
DateTime33 
?33 
FindPrevious33 
(33 
DateTime33 '
moment33( .
)33. /
;33/ 0
DateTime66 
?66 
FindNext66 
(66 
DateTime66 #
moment66$ *
)66* +
;66+ ,
}88 
}:: ´
rF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\IDurationProvider.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

	interface 
IDurationProvider &
{ 
TimeSpan 
GetDuration 
( 
DateTime %
start& +
,+ ,
DateTime- 5
end6 9
)9 :
;: ;
} 
} •
mF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\IntervalEdge.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

enum 
IntervalEdge 
{ 
Closed 
, 
Open 
, 
} 
} ö
wF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\InvalidMomentException.cs
	namespace 	
Phoenix
 
. 
CrossCutting 
. 

TimePeriod )
{ 
public 

class "
InvalidMomentException '
:( )
	Exception* 3
{ 
public "
InvalidMomentException %
(% &
DateTime& .
moment/ 5
)5 6
{ 	
this 
. 
moment 
= 
moment  
;  !
} 	
public "
InvalidMomentException %
(% &
DateTime& .
moment/ 5
,5 6
string7 =
message> E
)E F
:G H
base 
( 
message 
) 
{   	
this!! 
.!! 
moment!! 
=!! 
moment!!  
;!!  !
}"" 	
public%% "
InvalidMomentException%% %
(%%% &
DateTime%%& .
moment%%/ 5
,%%5 6
	Exception%%7 @
cause%%A F
)%%F G
:%%H I
base&& 
(&& 
cause&& 
.&& 
Message&& 
,&& 
cause&&  %
)&&% &
{'' 	
this(( 
.(( 
moment(( 
=(( 
moment((  
;((  !
})) 	
public,, "
InvalidMomentException,, %
(,,% &
DateTime,,& .
moment,,/ 5
,,,5 6
string,,7 =
message,,> E
,,,E F
	Exception,,G P
cause,,Q V
),,V W
:,,X Y
base-- 
(-- 
message-- 
,-- 
cause-- 
)--  
{.. 	
this// 
.// 
moment// 
=// 
moment//  
;//  !
}00 	
publicCC 
DateTimeCC 
MomentCC 
{DD 	
getEE 
{EE 
returnEE 
momentEE 
;EE  
}EE! "
}FF 	
privateJJ 
readonlyJJ 
DateTimeJJ !
momentJJ" (
;JJ( )
}LL 
}NN »
kF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\ITimeBlock.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

	interface 

ITimeBlock 
:  !
ITimePeriod" -
{ 
new 
DateTime 
Start 
{ 
get  
;  !
set" %
;% &
}' (
new 
DateTime 
End 
{ 
get 
; 
set  #
;# $
}% &
new 
TimeSpan 
Duration 
{ 
get  #
;# $
set% (
;( )
}* +
void 
Setup 
( 
DateTime 
newStart $
,$ %
TimeSpan& .
newDuration/ :
): ;
;; <
void 
Move 
( 
TimeSpan 
delta  
)  !
;! "
void!! 
DurationFromStart!! 
(!! 
TimeSpan!! '
newDuration!!( 3
)!!3 4
;!!4 5
void$$ 
DurationFromEnd$$ 
($$ 
TimeSpan$$ %
newDuration$$& 1
)$$1 2
;$$2 3

ITimeBlock'' 
Copy'' 
('' 
TimeSpan''  
delta''! &
)''& '
;''' (

ITimeBlock** 
GetPreviousPeriod** $
(**$ %
TimeSpan**% -
offset**. 4
)**4 5
;**5 6

ITimeBlock-- 
GetNextPeriod--  
(--  !
TimeSpan--! )
offset--* 0
)--0 1
;--1 2

ITimeBlock00 
GetIntersection00 "
(00" #
ITimePeriod00# .
period00/ 5
)005 6
;006 7
}22 
}44 Ω#
nF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\ITimeCalendar.cs
	namespace 	
Phoenix
 
. 
CrossCutting 
. 

TimePeriod )
{ 
public 

	interface 
ITimeCalendar "
:# $
ITimePeriodMapper% 6
{ 
CultureInfo 
Culture 
{ 
get !
;! "
}# $
YearType 
YearType 
{ 
get 
;  
}! "
TimeSpan 
StartOffset 
{ 
get "
;" #
}$ %
TimeSpan 
	EndOffset 
{ 
get  
;  !
}" #
	YearMonth 
YearBaseMonth 
{  !
get" %
;% &
}' (
	YearMonth"" 
FiscalYearBaseMonth"" %
{""& '
get""( +
;""+ ,
}""- .
	DayOfWeek%%  
FiscalFirstDayOfYear%% &
{%%' (
get%%) ,
;%%, -
}%%. /
FiscalYearAlignment(( 
FiscalYearAlignment(( /
{((0 1
get((2 5
;((5 6
}((7 8!
FiscalQuarterGrouping++ !
FiscalQuarterGrouping++ 3
{++4 5
get++6 9
;++9 :
}++; <
	DayOfWeek.. 
FirstDayOfWeek..  
{..! "
get..# &
;..& '
}..( )
YearWeekType11 
YearWeekType11 !
{11" #
get11$ '
;11' (
}11) *
int44 
GetYear44 
(44 
DateTime44 
time44 !
)44! "
;44" #
int77 
GetMonth77 
(77 
DateTime77 
time77 "
)77" #
;77# $
int:: 
GetHour:: 
(:: 
DateTime:: 
time:: !
)::! "
;::" #
int== 
	GetMinute== 
(== 
DateTime== 
time== #
)==# $
;==$ %
int@@ 
GetDayOfMonth@@ 
(@@ 
DateTime@@ "
time@@# '
)@@' (
;@@( )
	DayOfWeekCC 
GetDayOfWeekCC 
(CC 
DateTimeCC '
timeCC( ,
)CC, -
;CC- .
intFF 
GetDaysInMonthFF 
(FF 
intFF 
yearFF #
,FF# $
intFF% (
monthFF) .
)FF. /
;FF/ 0
intII 
GetYearII 
(II 
intII 
yearII 
,II 
intII !
monthII" '
)II' (
;II( )
stringLL 
GetYearNameLL 
(LL 
intLL 
yearLL #
)LL# $
;LL$ %
stringOO 
GetHalfyearNameOO 
(OO 
YearHalfyearOO +
yearHalfyearOO, 8
)OO8 9
;OO9 :
stringRR !
GetHalfyearOfYearNameRR $
(RR$ %
intRR% (
yearRR) -
,RR- .
YearHalfyearRR/ ;
yearHalfyearRR< H
)RRH I
;RRI J
stringUU 
GetQuarterNameUU 
(UU 
YearQuarterUU )
yearQuarterUU* 5
)UU5 6
;UU6 7
stringXX  
GetQuarterOfYearNameXX #
(XX# $
intXX$ '
yearXX( ,
,XX, -
YearQuarterXX. 9
yearQuarterXX: E
)XXE F
;XXF G
string[[ 
GetMonthName[[ 
([[ 
int[[ 
month[[  %
)[[% &
;[[& '
string^^ 
GetMonthOfYearName^^ !
(^^! "
int^^" %
year^^& *
,^^* +
int^^, /
month^^0 5
)^^5 6
;^^6 7
stringaa 
GetWeekOfYearNameaa  
(aa  !
intaa! $
yearaa% )
,aa) *
intaa+ .

weekOfYearaa/ 9
)aa9 :
;aa: ;
stringdd 

GetDayNamedd 
(dd 
	DayOfWeekdd #
	dayOfWeekdd$ -
)dd- .
;dd. /
intgg 
GetWeekOfYeargg 
(gg 
DateTimegg "
timegg# '
)gg' (
;gg( )
DateTimejj 
GetStartOfYearWeekjj #
(jj# $
intjj$ '
yearjj( ,
,jj, -
intjj. 1

weekOfYearjj2 <
)jj< =
;jj= >
}ll 
}nn ó/
oF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\ITimeFormatter.cs
	namespace 	
Phoenix
 
. 
CrossCutting 
. 

TimePeriod )
{ 
public 

	interface 
ITimeFormatter #
{ 
CultureInfo 
Culture 
{ 
get !
;! "
}# $
string 
ListSeparator 
{ 
get "
;" #
}$ %
string 
ContextSeparator 
{  !
get" %
;% &
}' (
string 
StartEndSeparator  
{! "
get# &
;& '
}( )
string 
DurationSeparator  
{! "
get# &
;& '
}( )
string"" !
DurationItemSeparator"" $
{""% &
get""' *
;""* +
}"", -
string%% %
DurationLastItemSeparator%% (
{%%) *
get%%+ .
;%%. /
}%%0 1
string(( "
DurationValueSeparator(( %
{((& '
get((( +
;((+ ,
}((- .
string++ 
IntervalStartClosed++ "
{++# $
get++% (
;++( )
}++* +
string.. 
IntervalStartOpen..  
{..! "
get..# &
;..& '
}..( )
string11  
IntervalStartOpenIso11 #
{11$ %
get11& )
;11) *
}11+ ,
string44 
IntervalEndClosed44  
{44! "
get44# &
;44& '
}44( )
string77 
IntervalEndOpen77 
{77  
get77! $
;77$ %
}77& '
string:: 
IntervalEndOpenIso:: !
{::" #
get::$ '
;::' (
}::) *
string== 
DateTimeFormat== 
{== 
get==  #
;==# $
}==% &
string@@ 
ShortDateFormat@@ 
{@@  
get@@! $
;@@$ %
}@@& '
stringCC 
LongTimeFormatCC 
{CC 
getCC  #
;CC# $
}CC% &
stringFF 
ShortTimeFormatFF 
{FF  
getFF! $
;FF$ %
}FF& '
DurationFormatTypeII 
DurationTypeII '
{II( )
getII* -
;II- .
}II/ 0
boolLL 
UseDurationSecondsLL 
{LL  !
getLL" %
;LL% &
}LL' (
stringOO 
GetCollectionOO 
(OO 
intOO  
countOO! &
)OO& '
;OO' (
stringRR 
GetCollectionPeriodRR "
(RR" #
intRR# &
countRR' ,
,RR, -
DateTimeRR. 6
startRR7 <
,RR< =
DateTimeRR> F
endRRG J
,RRJ K
TimeSpanRRL T
durationRRU ]
)RR] ^
;RR^ _
stringUU 
GetDateTimeUU 
(UU 
DateTimeUU #
dateTimeUU$ ,
)UU, -
;UU- .
stringXX 
GetShortDateXX 
(XX 
DateTimeXX $
dateTimeXX% -
)XX- .
;XX. /
string[[ 
GetLongTime[[ 
([[ 
DateTime[[ #
dateTime[[$ ,
)[[, -
;[[- .
string^^ 
GetShortTime^^ 
(^^ 
DateTime^^ $
dateTime^^% -
)^^- .
;^^. /
stringaa 
	GetPeriodaa 
(aa 
DateTimeaa !
startaa" '
,aa' (
DateTimeaa) 1
endaa2 5
)aa5 6
;aa6 7
stringdd 
GetDurationdd 
(dd 
TimeSpandd #
timeSpandd$ ,
)dd, -
;dd- .
stringgg 
GetDurationgg 
(gg 
TimeSpangg #
timeSpangg$ ,
,gg, -
DurationFormatTypegg. @
durationFormatTypeggA S
)ggS T
;ggT U
stringjj 
GetDurationjj 
(jj 
intjj 
yearsjj $
,jj$ %
intjj& )
monthsjj* 0
,jj0 1
intjj2 5
daysjj6 :
,jj: ;
intjj< ?
hoursjj@ E
,jjE F
intjjG J
minutesjjK R
,jjR S
intjjT W
secondsjjX _
)jj_ `
;jj` a
stringmm 
	GetPeriodmm 
(mm 
DateTimemm !
startmm" '
,mm' (
DateTimemm) 1
endmm2 5
,mm5 6
TimeSpanmm7 ?
durationmm@ H
)mmH I
;mmI J
stringpp 
GetIntervalpp 
(pp 
DateTimepp #
startpp$ )
,pp) *
DateTimepp+ 3
endpp4 7
,pp7 8
IntervalEdgepp9 E
	startEdgeppF O
,ppO P
IntervalEdgeppQ ]
endEdgepp^ e
,ppe f
TimeSpanppg o
durationppp x
)ppx y
;ppy z
stringss 
GetCalendarPeriodss  
(ss  !
stringss! '
startss( -
,ss- .
stringss/ 5
endss6 9
,ss9 :
TimeSpanss; C
durationssD L
)ssL M
;ssM N
stringvv 
GetCalendarPeriodvv  
(vv  !
stringvv! '
contextvv( /
,vv/ 0
stringvv1 7
startvv8 =
,vv= >
stringvv? E
endvvF I
,vvI J
TimeSpanvvK S
durationvvT \
)vv\ ]
;vv] ^
stringyy 
GetCalendarPeriodyy  
(yy  !
stringyy! '
startContextyy( 4
,yy4 5
stringyy6 <

endContextyy= G
,yyG H
stringyyI O
startyyP U
,yyU V
stringyyW ]
endyy^ a
,yya b
TimeSpanyyc k
durationyyl t
)yyt u
;yyu v
}{{ 
}}} Ç
nF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\ITimeInterval.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

	interface 
ITimeInterval "
:# $
ITimePeriod% 0
{ 
bool 
IsStartOpen 
{ 
get 
; 
}  !
bool 
	IsEndOpen 
{ 
get 
; 
} 
bool 
IsOpen 
{ 
get 
; 
} 
bool 
IsStartClosed 
{ 
get  
;  !
}" #
bool 
IsEndClosed 
{ 
get 
; 
}  !
bool!! 
IsClosed!! 
{!! 
get!! 
;!! 
}!! 
bool$$ 
IsEmpty$$ 
{$$ 
get$$ 
;$$ 
}$$ 
bool'' 
IsDegenerate'' 
{'' 
get'' 
;''  
}''! "
bool** 
IsIntervalEnabled** 
{**  
get**! $
;**$ %
}**& '
DateTime-- 
StartInterval-- 
{--  
get--! $
;--$ %
set--& )
;--) *
}--+ ,
DateTime00 
EndInterval00 
{00 
get00 "
;00" #
set00$ '
;00' (
}00) *
IntervalEdge33 
	StartEdge33 
{33  
get33! $
;33$ %
set33& )
;33) *
}33+ ,
IntervalEdge66 
EndEdge66 
{66 
get66 "
;66" #
set66$ '
;66' (
}66) *
void99 
Move99 
(99 
TimeSpan99 
offset99 !
)99! "
;99" #
void<< 
ExpandStartTo<< 
(<< 
DateTime<< #
moment<<$ *
)<<* +
;<<+ ,
void?? 
ExpandEndTo?? 
(?? 
DateTime?? !
moment??" (
)??( )
;??) *
voidBB 
ExpandToBB 
(BB 
DateTimeBB 
momentBB %
)BB% &
;BB& '
voidEE 
ExpandToEE 
(EE 
ITimePeriodEE !
periodEE" (
)EE( )
;EE) *
voidHH 
ShrinkStartToHH 
(HH 
DateTimeHH #
momentHH$ *
)HH* +
;HH+ ,
voidKK 
ShrinkEndToKK 
(KK 
DateTimeKK !
momentKK" (
)KK( )
;KK) *
voidNN 
ShrinkToNN 
(NN 
ITimePeriodNN !
periodNN" (
)NN( )
;NN) *
ITimeIntervalQQ 
CopyQQ 
(QQ 
TimeSpanQQ #
offsetQQ$ *
)QQ* +
;QQ+ ,
}SS 
}UU ÷	
jF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\ITimeLine.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

	interface 
	ITimeLine 
{  
ITimePeriodContainer 
Periods $
{% &
get' *
;* +
}, -
ITimePeriod 
Limits 
{ 
get  
;  !
}" #
ITimePeriodMapper 
PeriodMapper &
{' (
get) ,
;, -
}. /
bool 
HasOverlaps 
( 
) 
; 
bool 
HasGaps 
( 
) 
; !
ITimePeriodCollection!! 
CombinePeriods!! ,
(!!, -
)!!- .
;!!. /!
ITimePeriodCollection$$ 
IntersectPeriods$$ .
($$. /
bool$$/ 3
combinePeriods$$4 B
)$$B C
;$$C D!
ITimePeriodCollection'' 
CalculateGaps'' +
(''+ ,
)'', -
;''- .
})) 
}++ ƒ	
pF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\ITimeLineMoment.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

	interface 
ITimeLineMoment $
{ 
DateTime 
Moment 
{ 
get 
; 
}  
int 
BalanceCount 
{ 
get 
; 
}  !
int 

StartCount 
{ 
get 
; 
} 
int 
EndCount 
{ 
get 
; 
} 
bool 
IsEmpty 
{ 
get 
; 
} 
void!! 
AddStart!! 
(!! 
)!! 
;!! 
void$$ 
RemoveStart$$ 
($$ 
)$$ 
;$$ 
void'' 
AddEnd'' 
('' 
)'' 
;'' 
void** 
	RemoveEnd** 
(** 
)** 
;** 
},, 
}.. Ã
zF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\ITimeLineMomentCollection.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

	interface %
ITimeLineMomentCollection .
:/ 0
IEnumerable1 <
<< =
ITimeLineMoment= L
>L M
{ 
int 
Count 
{ 
get 
; 
} 
bool 
IsEmpty 
{ 
get 
; 
} 
ITimeLineMoment 
Min 
{ 
get !
;! "
}# $
ITimeLineMoment 
Max 
{ 
get !
;! "
}# $
ITimeLineMoment 
this 
[ 
int  
index! &
]& '
{( )
get* -
;- .
}/ 0
ITimeLineMoment!! 
this!! 
[!! 
DateTime!! %
moment!!& ,
]!!, -
{!!. /
get!!0 3
;!!3 4
}!!5 6
void$$ 
Add$$ 
($$ 
ITimePeriod$$ 
period$$ #
)$$# $
;$$$ %
void'' 
AddAll'' 
('' 
IEnumerable'' 
<''  
ITimePeriod''  +
>''+ ,
periods''- 4
)''4 5
;''5 6
void** 
Remove** 
(** 
ITimePeriod** 
period**  &
)**& '
;**' (
ITimeLineMoment-- 
Find-- 
(-- 
DateTime-- %
moment--& ,
)--, -
;--- .
bool00 
Contains00 
(00 
DateTime00 
moment00 %
)00% &
;00& '
bool33 
HasOverlaps33 
(33 
)33 
;33 
bool66 
HasGaps66 
(66 
)66 
;66 
}88 
}:: ≈
lF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\ITimePeriod.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

	interface 
ITimePeriod  
{ 
bool 
HasStart 
{ 
get 
; 
} 
DateTime 
Start 
{ 
get 
; 
} 
bool 
HasEnd 
{ 
get 
; 
} 
DateTime 
End 
{ 
get 
; 
} 
TimeSpan 
Duration 
{ 
get 
;  
}! "
string!! 
DurationDescription!! "
{!!# $
get!!% (
;!!( )
}!!* +
bool$$ 
IsMoment$$ 
{$$ 
get$$ 
;$$ 
}$$ 
bool'' 
	IsAnytime'' 
{'' 
get'' 
;'' 
}'' 
bool** 

IsReadOnly** 
{** 
get** 
;** 
}**  
TimeSpan-- 
GetDuration-- 
(-- 
IDurationProvider-- .
provider--/ 7
)--7 8
;--8 9
void00 
Setup00 
(00 
DateTime00 
newStart00 $
,00$ %
DateTime00& .
newEnd00/ 5
)005 6
;006 7
bool33 
IsSamePeriod33 
(33 
ITimePeriod33 %
test33& *
)33* +
;33+ ,
bool66 
	HasInside66 
(66 
DateTime66 
test66  $
)66$ %
;66% &
bool99 
	HasInside99 
(99 
ITimePeriod99 "
test99# '
)99' (
;99( )
bool<< 
IntersectsWith<< 
(<< 
ITimePeriod<< '
test<<( ,
)<<, -
;<<- .
bool?? 
OverlapsWith?? 
(?? 
ITimePeriod?? %
test??& *
)??* +
;??+ ,
PeriodRelationBB 
GetRelationBB "
(BB" #
ITimePeriodBB# .
testBB/ 3
)BB3 4
;BB4 5
intEE 
	CompareToEE 
(EE 
ITimePeriodEE !
otherEE" '
,EE' (
ITimePeriodComparerEE) <
comparerEE= E
)EEE F
;EEF G
stringHH 
GetDescriptionHH 
(HH 
ITimeFormatterHH ,
	formatterHH- 6
)HH6 7
;HH7 8
}JJ 
}LL †
qF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\ITimePeriodChain.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

	interface 
ITimePeriodChain %
:& ' 
ITimePeriodContainer( <
{ 
new 
DateTime 
Start 
{ 
get  
;  !
set" %
;% &
}' (
new 
DateTime 
End 
{ 
get 
; 
set  #
;# $
}% &
ITimePeriod 
First 
{ 
get 
;  
}! "
ITimePeriod 
Last 
{ 
get 
; 
}  !
} 
} ª
vF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\ITimePeriodCollection.cs
	namespace 	
Phoenix
 
. 
CrossCutting 
. 

TimePeriod )
{ 
public 

	interface !
ITimePeriodCollection *
:+ , 
ITimePeriodContainer- A
{ 
new 
DateTime 
Start 
{ 
get  
;  !
set" %
;% &
}' (
new 
DateTime 
End 
{ 
get 
; 
set  #
;# $
}% &
TimeSpan 
TotalDuration 
{  
get! $
;$ %
}& '
TimeSpan 
GetTotalDuration !
(! "
IDurationProvider" 3
provider4 <
)< =
;= >
void   
SortBy   
(   
ITimePeriodComparer   '
comparer  ( 0
)  0 1
;  1 2
void## 
SortReverseBy## 
(## 
ITimePeriodComparer## .
comparer##/ 7
)##7 8
;##8 9
void&& 
SortByStart&& 
(&& 
ListSortDirection&& *
sortDirection&&+ 8
=&&9 :
ListSortDirection&&; L
.&&L M
	Ascending&&M V
)&&V W
;&&W X
void)) 
	SortByEnd)) 
()) 
ListSortDirection)) (
sortDirection))) 6
=))7 8
ListSortDirection))9 J
.))J K
	Ascending))K T
)))T U
;))U V
void,, 
SortByDuration,, 
(,, 
ListSortDirection,, -
sortDirection,,. ;
=,,< =
ListSortDirection,,> O
.,,O P
	Ascending,,P Y
),,Y Z
;,,Z [
bool// 
HasInsidePeriods// 
(// 
ITimePeriod// )
test//* .
)//. /
;/// 0
bool22 
HasOverlaps22 
(22 
)22 
;22 
bool55 
HasGaps55 
(55 
)55 
;55 
bool88 
HasOverlapPeriods88 
(88 
ITimePeriod88 *
test88+ /
)88/ 0
;880 1
bool;; "
HasIntersectionPeriods;; #
(;;# $
DateTime;;$ ,
test;;- 1
);;1 2
;;;2 3
bool>> "
HasIntersectionPeriods>> #
(>># $
ITimePeriod>>$ /
test>>0 4
)>>4 5
;>>5 6!
ITimePeriodCollectionAA 
InsidePeriodsAA +
(AA+ ,
ITimePeriodAA, 7
testAA8 <
)AA< =
;AA= >!
ITimePeriodCollectionDD 
OverlapPeriodsDD ,
(DD, -
ITimePeriodDD- 8
testDD9 =
)DD= >
;DD> ?!
ITimePeriodCollectionGG 
IntersectionPeriodsGG 1
(GG1 2
DateTimeGG2 :
testGG; ?
)GG? @
;GG@ A!
ITimePeriodCollectionJJ 
IntersectionPeriodsJJ 1
(JJ1 2
ITimePeriodJJ2 =
testJJ> B
)JJB C
;JJC D!
ITimePeriodCollectionMM 
RelationPeriodsMM -
(MM- .
ITimePeriodMM. 9
testMM: >
,MM> ?
PeriodRelationMM@ N
relationMMO W
)MMW X
;MMX Y
}OO 
}QQ —
tF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\ITimePeriodComparer.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

	interface 
ITimePeriodComparer (
:) *
	IComparer+ 4
<4 5
ITimePeriod5 @
>@ A
{ 
} 
} ®
uF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\ITimePeriodContainer.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

	interface  
ITimePeriodContainer )
:* +
IList, 1
<1 2
ITimePeriod2 =
>= >
,> ?
ITimePeriod@ K
{ 
new 
bool 

IsReadOnly 
{ 
get !
;! "
}# $
bool 
ContainsPeriod 
( 
ITimePeriod '
test( ,
), -
;- .
void 
AddAll 
( 
IEnumerable 
<  
ITimePeriod  +
>+ ,
periods- 4
)4 5
;5 6
void 
Move 
( 
TimeSpan 
delta  
)  !
;! "
} 
} ¸
rF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\ITimePeriodMapper.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

	interface 
ITimePeriodMapper &
{ 
DateTime 
MapStart 
( 
DateTime "
moment# )
)) *
;* +
DateTime 
MapEnd 
( 
DateTime  
moment! '
)' (
;( )
DateTime 

UnmapStart 
( 
DateTime $
moment% +
)+ ,
;, -
DateTime 
UnmapEnd 
( 
DateTime "
moment# )
)) *
;* +
} 
} Ì
kF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\ITimeRange.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

	interface 

ITimeRange 
:  !
ITimePeriod" -
{ 
new 
DateTime 
Start 
{ 
get  
;  !
set" %
;% &
}' (
new 
DateTime 
End 
{ 
get 
; 
set  #
;# $
}% &
new 
TimeSpan 
Duration 
{ 
get  #
;# $
set% (
;( )
}* +
void 
Move 
( 
TimeSpan 
offset !
)! "
;" #
void 
ExpandStartTo 
( 
DateTime #
moment$ *
)* +
;+ ,
void!! 
ExpandEndTo!! 
(!! 
DateTime!! !
moment!!" (
)!!( )
;!!) *
void$$ 
ExpandTo$$ 
($$ 
DateTime$$ 
moment$$ %
)$$% &
;$$& '
void'' 
ExpandTo'' 
('' 
ITimePeriod'' !
period''" (
)''( )
;'') *
void** 
ShrinkStartTo** 
(** 
DateTime** #
moment**$ *
)*** +
;**+ ,
void-- 
ShrinkEndTo-- 
(-- 
DateTime-- !
moment--" (
)--( )
;--) *
void00 
ShrinkTo00 
(00 
ITimePeriod00 !
period00" (
)00( )
;00) *

ITimeRange33 
Copy33 
(33 
TimeSpan33  
offset33! '
)33' (
;33( )

ITimeRange66 
GetIntersection66 "
(66" #
ITimePeriod66# .
period66/ 5
)665 6
;666 7
}88 
}:: ˛
vF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\ListSortDirection.Pcl.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

enum 
ListSortDirection !
{ 
	Ascending 
= 
$num 
, 

Descending 
= 
$num 
, 
} 
} ◊2
gF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\Minute.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

sealed 
class 
Minute 
:  
MinuteTimeRange! 0
{ 
public 
Minute 
( 
) 
: 
this 
( 
new 
TimeCalendar !
(! "
)" #
)# $
{ 	
} 	
public 
Minute 
( 
ITimeCalendar #
calendar$ ,
), -
:. /
this 
( 

ClockProxy 
. 
Clock !
.! "
Now" %
,% &
calendar' /
)/ 0
{ 	
} 	
public 
Minute 
( 
DateTime 
moment %
)% &
:' (
this 
( 
moment 
, 
new 
TimeCalendar )
() *
)* +
)+ ,
{   	
}!! 	
public$$ 
Minute$$ 
($$ 
DateTime$$ 
moment$$ %
,$$% &
ITimeCalendar$$' 4
calendar$$5 =
)$$= >
:$$? @
this%% 
(%% 
calendar%% 
.%% 
GetYear%% !
(%%! "
moment%%" (
)%%( )
,%%) *
calendar%%+ 3
.%%3 4
GetMonth%%4 <
(%%< =
moment%%= C
)%%C D
,%%D E
calendar%%F N
.%%N O
GetDayOfMonth%%O \
(%%\ ]
moment%%] c
)%%c d
,%%d e
calendar&& 
.&& 
GetHour&& 
(&& 
moment&& #
)&&# $
,&&$ %
calendar&&& .
.&&. /
	GetMinute&&/ 8
(&&8 9
moment&&9 ?
)&&? @
,&&@ A
calendar&&B J
)&&J K
{'' 	
}(( 	
public++ 
Minute++ 
(++ 
int++ 
year++ 
,++ 
int++  #
month++$ )
,++) *
int+++ .
day++/ 2
,++2 3
int++4 7
hour++8 <
,++< =
int++> A
minute++B H
)++H I
:++J K
this,, 
(,, 
year,, 
,,, 
month,, 
,,, 
day,, !
,,,! "
hour,,# '
,,,' (
minute,,) /
,,,/ 0
new,,1 4
TimeCalendar,,5 A
(,,A B
),,B C
),,C D
{-- 	
}.. 	
public11 
Minute11 
(11 
int11 
year11 
,11 
int11  #
month11$ )
,11) *
int11+ .
day11/ 2
,112 3
int114 7
hour118 <
,11< =
int11> A
minute11B H
,11H I
ITimeCalendar11J W
calendar11X `
)11` a
:11b c
base22 
(22 
year22 
,22 
month22 
,22 
day22 !
,22! "
hour22# '
,22' (
minute22) /
,22/ 0
$num221 2
,222 3
calendar224 <
)22< =
{33 	
}44 	
public77 
int77 
Year77 
{88 	
get99 
{99 
return99 
	StartYear99 "
;99" #
}99$ %
}:: 	
public== 
int== 
Month== 
{>> 	
get?? 
{?? 
return?? 

StartMonth?? #
;??# $
}??% &
}@@ 	
publicCC 
intCC 
DayCC 
{DD 	
getEE 
{EE 
returnEE 
StartDayEE !
;EE! "
}EE# $
}FF 	
publicII 
intII 
HourII 
{JJ 	
getKK 
{KK 
returnKK 
	StartHourKK "
;KK" #
}KK$ %
}LL 	
publicOO 
intOO 
MinuteValueOO 
{PP 	
getQQ 
{QQ 
returnQQ 
StartMinuteQQ $
;QQ$ %
}QQ& '
}RR 	
publicUU 
MinuteUU 
GetPreviousMinuteUU '
(UU' (
)UU( )
{VV 	
returnWW 

AddMinutesWW 
(WW 
-WW 
$numWW  
)WW  !
;WW! "
}XX 	
public[[ 
Minute[[ 
GetNextMinute[[ #
([[# $
)[[$ %
{\\ 	
return]] 

AddMinutes]] 
(]] 
$num]] 
)]]  
;]]  !
}^^ 	
publicaa 
Minuteaa 

AddMinutesaa  
(aa  !
intaa! $
minutesaa% ,
)aa, -
{bb 	
DateTimecc 
startMinutecc  
=cc! "
newcc# &
DateTimecc' /
(cc/ 0
	StartYearcc0 9
,cc9 :

StartMonthcc; E
,ccE F
StartDayccG O
,ccO P
	StartHourccQ Z
,ccZ [
StartMinutecc\ g
,ccg h
$numcci j
)ccj k
;cck l
returndd 
newdd 
Minutedd 
(dd 
startMinutedd )
.dd) *

AddMinutesdd* 4
(dd4 5
minutesdd5 <
)dd< =
,dd= >
Calendardd? G
)ddG H
;ddH I
}ee 	
	protectedhh 
overridehh 
stringhh !
Formathh" (
(hh( )
ITimeFormatterhh) 7
	formatterhh8 A
)hhA B
{ii 	
returnjj 
	formatterjj 
.jj 
GetCalendarPeriodjj .
(jj. /
	formatterjj/ 8
.jj8 9
GetShortDatejj9 E
(jjE F
StartjjF K
)jjK L
,jjL M
	formatterkk 
.kk 
GetShortTimekk &
(kk& '
Startkk' ,
)kk, -
,kk- .
	formatterkk/ 8
.kk8 9
GetShortTimekk9 E
(kkE F
EndkkF I
)kkI J
,kkJ K
DurationkkL T
)kkT U
;kkU V
}ll 	
}nn 
}pp Æ+
hF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\Minutes.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

sealed 
class 
Minutes 
:  !
MinuteTimeRange" 1
{ 
public 
Minutes 
( 
DateTime 
moment  &
,& '
int( +
count, 1
)1 2
:3 4
this 
( 
moment 
, 
count 
, 
new  #
TimeCalendar$ 0
(0 1
)1 2
)2 3
{ 	
} 	
public 
Minutes 
( 
DateTime 
moment  &
,& '
int( +
count, 1
,1 2
ITimeCalendar3 @
calendarA I
)I J
:K L
this 
( 
calendar 
. 
GetYear !
(! "
moment" (
)( )
,) *
calendar+ 3
.3 4
GetMonth4 <
(< =
moment= C
)C D
,D E
calendarF N
.N O
GetDayOfMonthO \
(\ ]
moment] c
)c d
,d e
calendar 
. 
GetHour 
( 
moment #
)# $
,$ %
calendar& .
.. /
	GetMinute/ 8
(8 9
moment9 ?
)? @
,@ A
countB G
,G H
calendarI Q
)Q R
{ 	
} 	
public 
Minutes 
( 
int 
	startYear $
,$ %
int& )

startMonth* 4
,4 5
int6 9
startDay: B
,B C
intD G
	startHourH Q
,Q R
intS V
startMinuteW b
,b c
intd g
minuteCounth s
)s t
:u v
this   
(   
	startYear   
,   

startMonth   &
,  & '
startDay  ( 0
,  0 1
	startHour  2 ;
,  ; <
startMinute  = H
,  H I
minuteCount  J U
,  U V
new  W Z
TimeCalendar  [ g
(  g h
)  h i
)  i j
{!! 	
}"" 	
public%% 
Minutes%% 
(%% 
int%% 
	startYear%% $
,%%$ %
int%%& )

startMonth%%* 4
,%%4 5
int%%6 9
startDay%%: B
,%%B C
int%%D G
	startHour%%H Q
,%%Q R
int%%S V
startMinute%%W b
,%%b c
int%%d g
minuteCount%%h s
,%%s t
ITimeCalendar	%%u Ç
calendar
%%É ã
)
%%ã å
:
%%ç é
base&& 
(&& 
	startYear&& 
,&& 

startMonth&& &
,&&& '
startDay&&( 0
,&&0 1
	startHour&&2 ;
,&&; <
startMinute&&= H
,&&H I
minuteCount&&J U
,&&U V
calendar&&W _
)&&_ `
{'' 	
}(( 	
public++ !
ITimePeriodCollection++ $

GetMinutes++% /
(++/ 0
)++0 1
{,, 	 
TimePeriodCollection--  
minutes--! (
=--) *
new--+ . 
TimePeriodCollection--/ C
(--C D
)--D E
;--E F
DateTime.. 
startMinute..  
=..! "
new..# &
DateTime..' /
(../ 0
	StartYear..0 9
,..9 :

StartMonth..; E
,..E F
StartDay..G O
,..O P
	StartHour..Q Z
,..Z [
StartMinute..\ g
,..g h
$num..i j
)..j k
;..k l
for// 
(// 
int// 
i// 
=// 
$num// 
;// 
i// 
<// 
MinuteCount//  +
;//+ ,
i//- .
++//. 0
)//0 1
{00 
minutes11 
.11 
Add11 
(11 
new11 
Minute11  &
(11& '
startMinute11' 2
.112 3

AddMinutes113 =
(11= >
i11> ?
)11? @
,11@ A
Calendar11B J
)11J K
)11K L
;11L M
}22 
return33 
minutes33 
;33 
}44 	
	protected77 
override77 
string77 !
Format77" (
(77( )
ITimeFormatter77) 7
	formatter778 A
)77A B
{88 	
return99 
	formatter99 
.99 
GetCalendarPeriod99 .
(99. /
	formatter99/ 8
.998 9
GetShortDate999 E
(99E F
Start99F K
)99K L
,99L M
	formatter99N W
.99W X
GetShortDate99X d
(99d e
End99e h
)99h i
,99i j
	formatter:: 
.:: 
GetShortTime:: &
(::& '
Start::' ,
)::, -
,::- .
	formatter::/ 8
.::8 9
GetShortTime::9 E
(::E F
End::F I
)::I J
,::J K
Duration::L T
)::T U
;::U V
};; 	
}== 
}?? óB
pF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\MinuteTimeRange.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

abstract 
class 
MinuteTimeRange )
:* +
CalendarTimeRange, =
{ 
	protected 
MinuteTimeRange !
(! "
int" %
	startYear& /
,/ 0
int1 4

startMonth5 ?
,? @
intA D
startDayE M
,M N
intO R
	startHourS \
,\ ]
int^ a
startMinuteb m
,m n
into r
minuteCounts ~
)~ 
:
Ä Å
this 
( 
	startYear 
, 

startMonth &
,& '
startDay( 0
,0 1
	startHour2 ;
,; <
startMinute= H
,H I
minuteCountJ U
,U V
newW Z
TimeCalendar[ g
(g h
)h i
)i j
{ 	
} 	
	protected 
MinuteTimeRange !
(! "
int" %
	startYear& /
,/ 0
int1 4

startMonth5 ?
,? @
intA D
startDayE M
,M N
intO R
	startHourS \
,\ ]
int^ a
startMinuteb m
,m n
into r
minuteCounts ~
,~ 
ITimeCalendar
Ä ç
calendar
é ñ
)
ñ ó
:
ò ô
base 
( 
GetPeriodOf 
( 
	startYear &
,& '

startMonth( 2
,2 3
startDay4 <
,< =
	startHour> G
,G H
startMinuteI T
,T U
minuteCountV a
)a b
,b c
calendard l
)l m
{ 	
this 
. 
startMinute 
= 
new "
DateTime# +
(+ ,
	startYear, 5
,5 6

startMonth7 A
,A B
startDayC K
,K L
	startHourM V
,V W
startMinuteX c
,c d
$nume f
)f g
;g h
this 
. 
minuteCount 
= 
minuteCount *
;* +
	endMinute 
= 
this 
. 
startMinute (
.( )

AddMinutes) 3
(3 4
minuteCount4 ?
)? @
;@ A
} 	
public!! 
int!! 
	StartYear!! 
{"" 	
get## 
{## 
return## 
startMinute## $
.##$ %
Year##% )
;##) *
}##+ ,
}$$ 	
public'' 
int'' 

StartMonth'' 
{(( 	
get)) 
{)) 
return)) 
startMinute)) $
.))$ %
Month))% *
;))* +
})), -
}** 	
public-- 
int-- 
StartDay-- 
{.. 	
get// 
{// 
return// 
startMinute// $
.//$ %
Day//% (
;//( )
}//* +
}00 	
public33 
int33 
	StartHour33 
{44 	
get55 
{55 
return55 
startMinute55 $
.55$ %
Hour55% )
;55) *
}55+ ,
}66 	
public99 
int99 
StartMinute99 
{:: 	
get;; 
{;; 
return;; 
startMinute;; $
.;;$ %
Minute;;% +
;;;+ ,
};;- .
}<< 	
public?? 
int?? 
EndYear?? 
{@@ 	
getAA 
{AA 
returnAA 
	endMinuteAA "
.AA" #
YearAA# '
;AA' (
}AA) *
}BB 	
publicEE 
intEE 
EndMonthEE 
{FF 	
getGG 
{GG 
returnGG 
	endMinuteGG "
.GG" #
MonthGG# (
;GG( )
}GG* +
}HH 	
publicKK 
intKK 
EndDayKK 
{LL 	
getMM 
{MM 
returnMM 
	endMinuteMM "
.MM" #
DayMM# &
;MM& '
}MM( )
}NN 	
publicQQ 
intQQ 
EndHourQQ 
{RR 	
getSS 
{SS 
returnSS 
	endMinuteSS "
.SS" #
HourSS# '
;SS' (
}SS) *
}TT 	
publicWW 
intWW 
	EndMinuteWW 
{XX 	
getYY 
{YY 
returnYY 
	endMinuteYY "
.YY" #
MinuteYY# )
;YY) *
}YY+ ,
}ZZ 	
public]] 
int]] 
MinuteCount]] 
{^^ 	
get__ 
{__ 
return__ 
minuteCount__ $
;__$ %
}__& '
}`` 	
	protectedcc 
overridecc 
boolcc 
IsEqualcc  '
(cc' (
objectcc( .
objcc/ 2
)cc2 3
{dd 	
returnee 
baseee 
.ee 
IsEqualee 
(ee  
objee  #
)ee# $
&&ee% '
HasSameDataee( 3
(ee3 4
objee4 7
asee8 :
MinuteTimeRangeee; J
)eeJ K
;eeK L
}ff 	
privateii 
boolii 
HasSameDataii  
(ii  !
MinuteTimeRangeii! 0
compii1 5
)ii5 6
{jj 	
returnkk 
startMinutekk 
==kk !
compkk" &
.kk& '
startMinutekk' 2
&&kk3 5
minuteCountkk6 A
==kkB D
compkkE I
.kkI J
minuteCountkkJ U
&&kkV X
	endMinutekkY b
==kkc e
compkkf j
.kkj k
	endMinutekkk t
;kkt u
}ll 	
	protectedoo 
overrideoo 
intoo 
ComputeHashCodeoo .
(oo. /
)oo/ 0
{pp 	
returnqq 
HashToolqq 
.qq 
ComputeHashCodeqq +
(qq+ ,
baseqq, 0
.qq0 1
ComputeHashCodeqq1 @
(qq@ A
)qqA B
,qqB C
startMinuteqqD O
,qqO P
minuteCountqqQ \
,qq\ ]
	endMinuteqq^ g
)qqg h
;qqh i
}rr 	
privateuu 
staticuu 
	TimeRangeuu  
GetPeriodOfuu! ,
(uu, -
intuu- 0
yearuu1 5
,uu5 6
intuu7 :
monthuu; @
,uu@ A
intuuB E
dayuuF I
,uuI J
intuuK N
houruuO S
,uuS T
intuuU X
minuteuuY _
,uu_ `
intuua d
minuteCountuue p
)uup q
{vv 	
ifww 
(ww 
minuteCountww 
<ww 
$numww 
)ww  
{xx 
throwyy 
newyy '
ArgumentOutOfRangeExceptionyy 5
(yy5 6
$stryy6 C
)yyC D
;yyD E
}zz 
DateTime|| 
start|| 
=|| 
new||  
DateTime||! )
(||) *
year||* .
,||. /
month||0 5
,||5 6
day||7 :
,||: ;
hour||< @
,||@ A
minute||B H
,||H I
$num||J K
)||K L
;||L M
DateTime}} 
end}} 
=}} 
start}}  
.}}  !

AddMinutes}}! +
(}}+ ,
minuteCount}}, 7
)}}7 8
;}}8 9
return~~ 
new~~ 
	TimeRange~~  
(~~  !
start~~! &
,~~& '
end~~( +
)~~+ ,
;~~, -
} 	
private
ÉÉ 
readonly
ÉÉ 
DateTime
ÉÉ !
startMinute
ÉÉ" -
;
ÉÉ- .
private
ÑÑ 
readonly
ÑÑ 
int
ÑÑ 
minuteCount
ÑÑ (
;
ÑÑ( )
private
ÖÖ 
readonly
ÖÖ 
DateTime
ÖÖ !
	endMinute
ÖÖ" +
;
ÖÖ+ ,
}
áá 
}ââ ·.
fF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\Month.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

sealed 
class 
Month 
: 
MonthTimeRange  .
{ 
public 
Month 
( 
) 
: 
this 
( 
new 
TimeCalendar !
(! "
)" #
)# $
{ 	
} 	
public 
Month 
( 
ITimeCalendar "
calendar# +
)+ ,
:- .
this 
( 

ClockProxy 
. 
Clock !
.! "
Now" %
,% &
calendar' /
)/ 0
{ 	
} 	
public 
Month 
( 
DateTime 
moment $
)$ %
:& '
this 
( 
moment 
, 
new 
TimeCalendar )
() *
)* +
)+ ,
{   	
}!! 	
public$$ 
Month$$ 
($$ 
DateTime$$ 
moment$$ $
,$$$ %
ITimeCalendar$$& 3
calendar$$4 <
)$$< =
:$$> ?
this%% 
(%% 
calendar%% 
.%% 
GetYear%% !
(%%! "
moment%%" (
)%%( )
,%%) *
(%%+ ,
	YearMonth%%, 5
)%%5 6
calendar%%6 >
.%%> ?
GetMonth%%? G
(%%G H
moment%%H N
)%%N O
,%%O P
calendar%%Q Y
)%%Y Z
{&& 	
}'' 	
public** 
Month** 
(** 
int** 
year** 
,** 
	YearMonth** (
	yearMonth**) 2
)**2 3
:**4 5
this++ 
(++ 
year++ 
,++ 
	yearMonth++  
,++  !
new++" %
TimeCalendar++& 2
(++2 3
)++3 4
)++4 5
{,, 	
}-- 	
public00 
Month00 
(00 
int00 
year00 
,00 
	YearMonth00 (
	yearMonth00) 2
,002 3
ITimeCalendar004 A
calendar00B J
)00J K
:00L M
base11 
(11 
year11 
,11 
	yearMonth11  
,11  !
$num11" #
,11# $
calendar11% -
)11- .
{22 	
}33 	
public66 
int66 
Year66 
{77 	
get88 
{88 
return88 
	StartYear88 "
;88" #
}88$ %
}99 	
public<< 
	YearMonth<< 
	YearMonth<< "
{== 	
get>> 
{>> 
return>> 

StartMonth>> #
;>># $
}>>% &
}?? 	
publicBB 
intBB 

MonthValueBB 
{CC 	
getDD 
{DD 
returnDD 
(DD 
intDD 
)DD 

StartMonthDD (
;DD( )
}DD* +
}EE 	
publicHH 
stringHH 
	MonthNameHH 
{II 	
getJJ 
{JJ 
returnJJ 
StartMonthNameJJ '
;JJ' (
}JJ) *
}KK 	
publicNN 
stringNN 
MonthOfYearNameNN %
{OO 	
getPP 
{PP 
returnPP  
StartMonthOfYearNamePP -
;PP- .
}PP/ 0
}QQ 	
publicTT 
intTT 
DaysInMonthTT 
{UU 	
getVV 
{VV 
returnVV 
TimeToolVV !
.VV! "
GetDaysInMonthVV" 0
(VV0 1
	StartYearVV1 :
,VV: ;
(VV< =
intVV= @
)VV@ A

StartMonthVVA K
)VVK L
;VVL M
}VVN O
}WW 	
publicZZ 
MonthZZ 
GetPreviousMonthZZ %
(ZZ% &
)ZZ& '
{[[ 	
return\\ 
	AddMonths\\ 
(\\ 
-\\ 
$num\\ 
)\\  
;\\  !
}]] 	
public`` 
Month`` 
GetNextMonth`` !
(``! "
)``" #
{aa 	
returnbb 
	AddMonthsbb 
(bb 
$numbb 
)bb 
;bb  
}cc 	
publicff 
Monthff 
	AddMonthsff 
(ff 
intff "
monthsff# )
)ff) *
{gg 	
DateTimehh 
	startDatehh 
=hh  
newhh! $
DateTimehh% -
(hh- .
	StartYearhh. 7
,hh7 8
(hh9 :
inthh: =
)hh= >

StartMonthhh> H
,hhH I
$numhhJ K
)hhK L
;hhL M
returnii 
newii 
Monthii 
(ii 
	startDateii &
.ii& '
	AddMonthsii' 0
(ii0 1
monthsii1 7
)ii7 8
,ii8 9
Calendarii: B
)iiB C
;iiC D
}jj 	
	protectedmm 
overridemm 
stringmm !
Formatmm" (
(mm( )
ITimeFormattermm) 7
	formattermm8 A
)mmA B
{nn 	
returnoo 
	formatteroo 
.oo 
GetCalendarPeriodoo .
(oo. /
MonthOfYearNameoo/ >
,oo> ?
	formatterpp 
.pp 
GetShortDatepp &
(pp& '
Startpp' ,
)pp, -
,pp- .
	formatterpp/ 8
.pp8 9
GetShortDatepp9 E
(ppE F
EndppF I
)ppI J
,ppJ K
DurationppL T
)ppT U
;ppU V
}qq 	
}ss 
}uu ”
kF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\MonthRange.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

struct 

MonthRange 
{ 
public 

MonthRange 
( 
	YearMonth #
month$ )
)) *
:+ ,
this 
( 
month 
, 
month 
) 
{ 	
} 	
public 

MonthRange 
( 
	YearMonth #
min$ '
,' (
	YearMonth) 2
max3 6
)6 7
{ 	
if 
( 
max 
< 
min 
) 
{ 
throw 
new '
ArgumentOutOfRangeException 5
(5 6
$str6 ;
); <
;< =
} 
this 
. 
min 
= 
min 
; 
this 
. 
max 
= 
max 
; 
}   	
public## 
	YearMonth## 
Min## 
{$$ 	
get%% 
{%% 
return%% 
min%% 
;%% 
}%% 
}&& 	
public)) 
	YearMonth)) 
Max)) 
{** 	
get++ 
{++ 
return++ 
max++ 
;++ 
}++ 
},, 	
public// 
bool// 
IsSingleMonth// !
{00 	
get11 
{11 
return11 
min11 
==11 
max11  #
;11# $
}11% &
}22 	
public55 
bool55 
	HasInside55 
(55 
	YearMonth55 '
test55( ,
)55, -
{66 	
return77 
test77 
>=77 
min77 
&&77 !
test77" &
<=77' )
max77* -
;77- .
}88 	
private<< 
readonly<< 
	YearMonth<< "
min<<# &
;<<& '
private== 
readonly== 
	YearMonth== "
max==# &
;==& '
}?? 
}AA †#
gF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\Months.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

sealed 
class 
Months 
:  
MonthTimeRange! /
{ 
public 
Months 
( 
DateTime 
moment %
,% &
	YearMonth' 0

startMonth1 ;
,; <
int= @
countA F
)F G
:H I
this 
( 
moment 
, 

startMonth #
,# $
count% *
,* +
new, /
TimeCalendar0 <
(< =
)= >
)> ?
{ 	
} 	
public 
Months 
( 
DateTime 
moment %
,% &
	YearMonth' 0

startMonth1 ;
,; <
int= @
countA F
,F G
ITimeCalendarH U
calendarV ^
)^ _
:` a
this 
( 
calendar 
. 
GetYear !
(! "
moment" (
)( )
,) *

startMonth+ 5
,5 6
count7 <
,< =
calendar> F
)F G
{ 	
} 	
public 
Months 
( 
int 
	startYear #
,# $
	YearMonth% .

startMonth/ 9
,9 :
int; >
monthCounth? J
)J K
:L M
this 
( 
	startYear 
, 

startMonth &
,& '
monthCounth( 3
,3 4
new5 8
TimeCalendar9 E
(E F
)F G
)G H
{   	
}!! 	
public$$ 
Months$$ 
($$ 
int$$ 
	startYear$$ #
,$$# $
	YearMonth$$% .

startMonth$$/ 9
,$$9 :
int$$; >

monthCount$$? I
,$$I J
ITimeCalendar$$K X
calendar$$Y a
)$$a b
:$$c d
base%% 
(%% 
	startYear%% 
,%% 

startMonth%% &
,%%& '

monthCount%%( 2
,%%2 3
calendar%%4 <
)%%< =
{&& 	
}'' 	
public** !
ITimePeriodCollection** $
	GetMonths**% .
(**. /
)**/ 0
{++ 	 
TimePeriodCollection,,  
months,,! '
=,,( )
new,,* - 
TimePeriodCollection,,. B
(,,B C
),,C D
;,,D E
for-- 
(-- 
int-- 
i-- 
=-- 
$num-- 
;-- 
i-- 
<-- 

MonthCount--  *
;--* +
i--, -
++--- /
)--/ 0
{.. 
int// 
year// 
;// 
	YearMonth00 
month00 
;00  
TimeTool11 
.11 
AddMonth11 !
(11! "
	StartYear11" +
,11+ ,

StartMonth11- 7
,117 8
i119 :
,11: ;
out11< ?
year11@ D
,11D E
out11F I
month11J O
)11O P
;11P Q
months22 
.22 
Add22 
(22 
new22 
Month22 $
(22$ %
year22% )
,22) *
month22+ 0
,220 1
Calendar222 :
)22: ;
)22; <
;22< =
}33 
return44 
months44 
;44 
}55 	
	protected88 
override88 
string88 !
Format88" (
(88( )
ITimeFormatter88) 7
	formatter888 A
)88A B
{99 	
return:: 
	formatter:: 
.:: 
GetCalendarPeriod:: .
(::. / 
StartMonthOfYearName::/ C
,::C D
EndMonthOfYearName::E W
,::W X
	formatter;; 
.;; 
GetShortDate;; &
(;;& '
Start;;' ,
);;, -
,;;- .
	formatter;;/ 8
.;;8 9
GetShortDate;;9 E
(;;E F
End;;F I
);;I J
,;;J K
Duration;;L T
);;T U
;;;U V
}<< 	
}>> 
}@@ „g
oF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\MonthTimeRange.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

abstract 
class 
MonthTimeRange (
:) *
CalendarTimeRange+ <
{ 
	protected 
MonthTimeRange  
(  !
int! $
	startYear% .
,. /
	YearMonth0 9

startMonth: D
,D E
intF I
monthCounthJ U
)U V
:W X
this 
( 
	startYear 
, 

startMonth &
,& '
monthCounth( 3
,3 4
new5 8
TimeCalendar9 E
(E F
)F G
)G H
{ 	
} 	
	protected 
MonthTimeRange  
(  !
int! $
	startYear% .
,. /
	YearMonth0 9

startMonth: D
,D E
intF I

monthCountJ T
,T U
ITimeCalendarV c
calendard l
)l m
:n o
base 
( 
GetPeriodOf 
( 
calendar %
,% &
	startYear' 0
,0 1

startMonth2 <
,< =

monthCount> H
)H I
,I J
calendarK S
)S T
{ 	
this 
. 
	startYear 
= 
	startYear &
;& '
this 
. 

startMonth 
= 

startMonth (
;( )
this 
. 

monthCount 
= 

monthCount (
;( )
TimeTool 
. 
AddMonth 
( 
	startYear '
,' (

startMonth) 3
,3 4

monthCount5 ?
-@ A
$numB C
,C D
outE H
endYearI P
,P Q
outR U
endMonthV ^
)^ _
;_ `
} 	
public"" 
int"" 
	StartYear"" 
{## 	
get$$ 
{$$ 
return$$ 
Calendar$$ !
.$$! "
GetYear$$" )
($$) *
	startYear$$* 3
,$$3 4
($$5 6
int$$6 9
)$$9 :

startMonth$$: D
)$$D E
;$$E F
}$$G H
}%% 	
public(( 
int(( 
EndYear(( 
{)) 	
get** 
{** 
return** 
Calendar** !
.**! "
GetYear**" )
(**) *
endYear*** 1
,**1 2
(**3 4
int**4 7
)**7 8
endMonth**8 @
)**@ A
;**A B
}**C D
}++ 	
public.. 
	YearMonth.. 

StartMonth.. #
{// 	
get00 
{00 
return00 

startMonth00 #
;00# $
}00% &
}11 	
public44 
	YearMonth44 
EndMonth44 !
{55 	
get66 
{66 
return66 
endMonth66 !
;66! "
}66# $
}77 	
public:: 
int:: 

MonthCount:: 
{;; 	
get<< 
{<< 
return<< 

monthCount<< #
;<<# $
}<<% &
}== 	
public@@ 
string@@ 
StartMonthName@@ $
{AA 	
getBB 
{BB 
returnBB 
CalendarBB !
.BB! "
GetMonthNameBB" .
(BB. /
(BB/ 0
intBB0 3
)BB3 4

StartMonthBB4 >
)BB> ?
;BB? @
}BBA B
}CC 	
publicFF 
stringFF  
StartMonthOfYearNameFF *
{GG 	
getHH 
{HH 
returnHH 
CalendarHH !
.HH! "
GetMonthOfYearNameHH" 4
(HH4 5
	StartYearHH5 >
,HH> ?
(HH@ A
intHHA D
)HHD E

StartMonthHHE O
)HHO P
;HHP Q
}HHR S
}II 	
publicLL 
stringLL 
EndMonthNameLL "
{MM 	
getNN 
{NN 
returnNN 
CalendarNN !
.NN! "
GetMonthNameNN" .
(NN. /
(NN/ 0
intNN0 3
)NN3 4
EndMonthNN4 <
)NN< =
;NN= >
}NN? @
}OO 	
publicRR 
stringRR 
EndMonthOfYearNameRR (
{SS 	
getTT 
{TT 
returnTT 
CalendarTT !
.TT! "
GetMonthOfYearNameTT" 4
(TT4 5
EndYearTT5 <
,TT< =
(TT> ?
intTT? B
)TTB C
EndMonthTTC K
)TTK L
;TTL M
}TTN O
}UU 	
publicXX !
ITimePeriodCollectionXX $
GetDaysXX% ,
(XX, -
)XX- .
{YY 	 
TimePeriodCollectionZZ  
daysZZ! %
=ZZ& '
newZZ( + 
TimePeriodCollectionZZ, @
(ZZ@ A
)ZZA B
;ZZB C
DateTime[[ 
	startDate[[ 
=[[  
GetStartOfMonth[[! 0
([[0 1
Calendar[[1 9
,[[9 :
	startYear[[; D
,[[D E

startMonth[[F P
)[[P Q
;[[Q R
for\\ 
(\\ 
int\\ 
month\\ 
=\\ 
$num\\ 
;\\ 
month\\  %
<\\& '

monthCount\\( 2
;\\2 3
month\\4 9
++\\9 ;
)\\; <
{]] 
DateTime^^ 

monthStart^^ #
=^^$ %
	startDate^^& /
.^^/ 0
	AddMonths^^0 9
(^^9 :
month^^: ?
)^^? @
;^^@ A
int__ 
daysOfMonth__ 
=__  !
TimeTool__" *
.__* +
GetDaysInMonth__+ 9
(__9 :

monthStart__: D
.__D E
Year__E I
,__I J

monthStart__K U
.__U V
Month__V [
)__[ \
;__\ ]
for`` 
(`` 
int`` 
day`` 
=`` 
$num``  
;``  !
day``" %
<``& '
daysOfMonth``( 3
;``3 4
day``5 8
++``8 :
)``: ;
{aa 
daysbb 
.bb 
Addbb 
(bb 
newbb  
Daybb! $
(bb$ %

monthStartbb% /
.bb/ 0
AddDaysbb0 7
(bb7 8
daybb8 ;
)bb; <
,bb< =
Calendarbb> F
)bbF G
)bbG H
;bbH I
}cc 
}dd 
returnee 
daysee 
;ee 
}ff 	
	protectedii 
overrideii 
boolii 
IsEqualii  '
(ii' (
objectii( .
objii/ 2
)ii2 3
{jj 	
returnkk 
basekk 
.kk 
IsEqualkk 
(kk  
objkk  #
)kk# $
&&kk% '
HasSameDatakk( 3
(kk3 4
objkk4 7
askk8 :
MonthTimeRangekk; I
)kkI J
;kkJ K
}ll 	
privateoo 
booloo 
HasSameDataoo  
(oo  !
MonthTimeRangeoo! /
compoo0 4
)oo4 5
{pp 	
returnqq 
	startYearrr 
==rr 
comprr !
.rr! "
	startYearrr" +
&&rr, .

startMonthss 
==ss 
compss "
.ss" #

startMonthss# -
&&ss. 0

monthCounttt 
==tt 
comptt "
.tt" #

monthCounttt# -
&&tt. 0
endYearuu 
==uu 
compuu 
.uu  
endYearuu  '
&&uu( *
endMonthvv 
==vv 
compvv  
.vv  !
endMonthvv! )
;vv) *
}ww 	
	protectedzz 
overridezz 
intzz 
ComputeHashCodezz .
(zz. /
)zz/ 0
{{{ 	
return|| 
HashTool|| 
.|| 
ComputeHashCode|| +
(||+ ,
base||, 0
.||0 1
ComputeHashCode||1 @
(||@ A
)||A B
,||B C
	startYear||D M
,||M N

startMonth||O Y
,||Y Z

monthCount||[ e
,||e f
endYear||g n
,||n o
endMonth||p x
)||x y
;||y z
}}} 	
private
ÄÄ 
static
ÄÄ 
DateTime
ÄÄ 
GetStartOfMonth
ÄÄ  /
(
ÄÄ/ 0
ITimeCalendar
ÄÄ0 =
calendar
ÄÄ> F
,
ÄÄF G
int
ÄÄH K
year
ÄÄL P
,
ÄÄP Q
	YearMonth
ÄÄR [
month
ÄÄ\ a
)
ÄÄa b
{
ÅÅ 	
DateTime
ÇÇ 
startOfMonth
ÇÇ !
;
ÇÇ! "
if
ÉÉ 
(
ÉÉ 
calendar
ÉÉ 
.
ÉÉ 
YearType
ÉÉ !
==
ÉÉ" $
YearType
ÉÉ% -
.
ÉÉ- .

FiscalYear
ÉÉ. 8
)
ÉÉ8 9
{
ÑÑ 
startOfMonth
ÖÖ 
=
ÖÖ  
FiscalCalendarTool
ÖÖ 1
.
ÖÖ1 2
GetStartOfMonth
ÖÖ2 A
(
ÖÖA B
year
ÜÜ 
,
ÜÜ 
month
ÜÜ 
,
ÜÜ  
calendar
ÜÜ! )
.
ÜÜ) *
YearBaseMonth
ÜÜ* 7
,
ÜÜ7 8
calendar
ÜÜ9 A
.
ÜÜA B"
FiscalFirstDayOfYear
ÜÜB V
,
ÜÜV W
calendar
ÜÜX `
.
ÜÜ` a!
FiscalYearAlignment
ÜÜa t
,
ÜÜt u
calendar
ÜÜv ~
.
ÜÜ~ $
FiscalQuarterGroupingÜÜ î
)ÜÜî ï
;ÜÜï ñ
}
áá 
else
àà 
{
ââ 
startOfMonth
ää 
=
ää 
new
ää "
DateTime
ää# +
(
ää+ ,
year
ää, 0
,
ää0 1
(
ää2 3
int
ää3 6
)
ää6 7
month
ää7 <
,
ää< =
$num
ää> ?
)
ää? @
;
ää@ A
}
ãã 
return
åå 
startOfMonth
åå 
;
åå  
}
çç 	
private
êê 
static
êê 
	TimeRange
êê  
GetPeriodOf
êê! ,
(
êê, -
ITimeCalendar
êê- :
calendar
êê; C
,
êêC D
int
êêE H
	startYear
êêI R
,
êêR S
	YearMonth
êêT ]

startMonth
êê^ h
,
êêh i
int
êêj m

monthCount
êên x
)
êêx y
{
ëë 	
if
íí 
(
íí 

monthCount
íí 
<
íí 
$num
íí 
)
íí 
{
ìì 
throw
îî 
new
îî )
ArgumentOutOfRangeException
îî 5
(
îî5 6
$str
îî6 B
)
îîB C
;
îîC D
}
ïï 
DateTime
óó 
start
óó 
=
óó 
GetStartOfMonth
óó ,
(
óó, -
calendar
óó- 5
,
óó5 6
	startYear
óó7 @
,
óó@ A

startMonth
óóB L
)
óóL M
;
óóM N
DateTime
òò 
end
òò 
;
òò 
if
ôô 
(
ôô 
calendar
ôô 
.
ôô 
YearType
ôô !
==
ôô" $
YearType
ôô% -
.
ôô- .

FiscalYear
ôô. 8
)
ôô8 9
{
öö 
int
õõ 
endYear
õõ 
;
õõ 
	YearMonth
úú 
endMonth
úú "
;
úú" #
TimeTool
ùù 
.
ùù 
AddMonth
ùù !
(
ùù! "
	startYear
ùù" +
,
ùù+ ,

startMonth
ùù- 7
,
ùù7 8

monthCount
ùù9 C
,
ùùC D
out
ùùE H
endYear
ùùI P
,
ùùP Q
out
ùùR U
endMonth
ùùV ^
)
ùù^ _
;
ùù_ `
end
ûû 
=
ûû 
GetStartOfMonth
ûû %
(
ûû% &
calendar
ûû& .
,
ûû. /
endYear
ûû0 7
,
ûû7 8
endMonth
ûû9 A
)
ûûA B
;
ûûB C
}
üü 
else
†† 
{
°° 
end
¢¢ 
=
¢¢ 
start
¢¢ 
.
¢¢ 
	AddMonths
¢¢ %
(
¢¢% &

monthCount
¢¢& 0
)
¢¢0 1
;
¢¢1 2
}
££ 
return
§§ 
new
§§ 
	TimeRange
§§  
(
§§  !
start
§§! &
,
§§& '
end
§§( +
)
§§+ ,
;
§§, -
}
•• 	
private
©© 
readonly
©© 
int
©© 
	startYear
©© &
;
©©& '
private
™™ 
readonly
™™ 
	YearMonth
™™ "

startMonth
™™# -
;
™™- .
private
´´ 
readonly
´´ 
int
´´ 

monthCount
´´ '
;
´´' (
private
¨¨ 
readonly
¨¨ 
int
¨¨ 
endYear
¨¨ $
;
¨¨$ %
private
≠≠ 
readonly
≠≠ 
	YearMonth
≠≠ "
endMonth
≠≠# +
;
≠≠+ ,
}
ØØ 
}±± °L
dF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\Now.cs
	namespace 	
Phoenix
 
. 
CrossCutting 
. 

TimePeriod )
{ 
public 

static 
class 
Now 
{ 
public 
static 
DateTime 
CalendarYear +
{ 	
get 
{ 
return 
Year 
( 
TimeSpec &
.& '"
CalendarYearStartMonth' =
)= >
;> ?
}@ A
} 	
public 
static 
DateTime 
Year #
(# $
	YearMonth$ -
yearStartMonth. <
)< =
{ 	
DateTime 
now 
= 

ClockProxy %
.% &
Clock& +
.+ ,
Now, /
;/ 0
int 

startMonth 
= 
( 
int !
)! "
yearStartMonth" 0
;0 1
int 
monthOffset 
= 
now !
.! "
Month" '
-( )

startMonth* 4
;4 5
int   
year   
=   
monthOffset   "
<  # $
$num  % &
?  ' (
now  ) ,
.  , -
Year  - 1
-  2 3
$num  4 5
:  6 7
now  8 ;
.  ; <
Year  < @
;  @ A
return!! 
new!! 
DateTime!! 
(!!  
year!!  $
,!!$ %

startMonth!!& 0
,!!0 1
$num!!2 3
)!!3 4
;!!4 5
}"" 	
public)) 
static)) 
DateTime)) 
CalendarHalfyear)) /
{** 	
get++ 
{++ 
return++ 
Halfyear++ !
(++! "
TimeSpec++" *
.++* +"
CalendarYearStartMonth+++ A
)++A B
;++B C
}++D E
},, 	
public// 
static// 
DateTime// 
Halfyear// '
(//' (
	YearMonth//( 1
yearStartMonth//2 @
)//@ A
{00 	
DateTime11 
now11 
=11 

ClockProxy11 %
.11% &
Clock11& +
.11+ ,
Now11, /
;11/ 0
int22 
year22 
=22 
now22 
.22 
Year22 
;22  
if33 
(33 
now33 
.33 
Month33 
-33 
(33 
int33  
)33  !
yearStartMonth33! /
<330 1
$num332 3
)333 4
{44 
year55 
--55 
;55 
}66 
YearHalfyear77 
halfyear77 !
=77" #
TimeTool77$ ,
.77, -
GetHalfyearOfMonth77- ?
(77? @
yearStartMonth77@ N
,77N O
(77P Q
	YearMonth77Q Z
)77Z [
now77[ ^
.77^ _
Month77_ d
)77d e
;77e f
int88 
months88 
=88 
(88 
(88 
int88 
)88 
halfyear88 '
-88( )
$num88* +
)88+ ,
*88- .
TimeSpec88/ 7
.887 8
MonthsPerHalfyear888 I
;88I J
return99 
new99 
DateTime99 
(99  
year99  $
,99$ %
(99& '
int99' *
)99* +
yearStartMonth99+ 9
,999 :
$num99; <
)99< =
.99= >
	AddMonths99> G
(99G H
months99H N
)99N O
;99O P
}:: 	
publicAA 
staticAA 
DateTimeAA 
CalendarQuarterAA .
{BB 	
getCC 
{CC 
returnCC 
QuarterCC  
(CC  !
TimeSpecCC! )
.CC) *"
CalendarYearStartMonthCC* @
)CC@ A
;CCA B
}CCC D
}DD 	
publicGG 
staticGG 
DateTimeGG 
QuarterGG &
(GG& '
	YearMonthGG' 0
yearStartMonthGG1 ?
)GG? @
{HH 	
DateTimeII 
nowII 
=II 

ClockProxyII %
.II% &
ClockII& +
.II+ ,
NowII, /
;II/ 0
intJJ 
yearJJ 
=JJ 
nowJJ 
.JJ 
YearJJ 
;JJ  
ifKK 
(KK 
nowKK 
.KK 
MonthKK 
-KK 
(KK 
intKK  
)KK  !
yearStartMonthKK! /
<KK0 1
$numKK2 3
)KK3 4
{LL 
yearMM 
--MM 
;MM 
}NN 
YearQuarterOO 
quarterOO 
=OO  !
TimeToolOO" *
.OO* +
GetQuarterOfMonthOO+ <
(OO< =
yearStartMonthOO= K
,OOK L
(OOM N
	YearMonthOON W
)OOW X
nowOOX [
.OO[ \
MonthOO\ a
)OOa b
;OOb c
intPP 
monthsPP 
=PP 
(PP 
(PP 
intPP 
)PP 
quarterPP &
-PP' (
$numPP) *
)PP* +
*PP, -
TimeSpecPP. 6
.PP6 7
MonthsPerQuarterPP7 G
;PPG H
returnQQ 
newQQ 
DateTimeQQ 
(QQ  
yearQQ  $
,QQ$ %
(QQ& '
intQQ' *
)QQ* +
yearStartMonthQQ+ 9
,QQ9 :
$numQQ; <
)QQ< =
.QQ= >
	AddMonthsQQ> G
(QQG H
monthsQQH N
)QQN O
;QQO P
}RR 	
publicYY 
staticYY 
DateTimeYY 
MonthYY $
{ZZ 	
get[[ 
{[[ 
return[[ 
TimeTrim[[ !
.[[! "
Day[[" %
([[% &

ClockProxy[[& 0
.[[0 1
Clock[[1 6
.[[6 7
Now[[7 :
)[[: ;
;[[; <
}[[= >
}\\ 	
public__ 
static__ 
	YearMonth__ 
	YearMonth__  )
{`` 	
getaa 
{aa 
returnaa 
(aa 
	YearMonthaa #
)aa# $

ClockProxyaa$ .
.aa. /
Clockaa/ 4
.aa4 5
Nowaa5 8
.aa8 9
Monthaa9 >
;aa> ?
}aa@ A
}bb 	
publicii 
staticii 
DateTimeii 
Weekii #
(ii# $
)ii$ %
{jj 	
returnkk 
DateTimeFormatInfokk %
.kk% &
CurrentInfokk& 1
==kk2 4
nullkk5 9
?kk: ;
DateTimekk< D
.kkD E
NowkkE H
:kkI J
WeekkkK O
(kkO P
DateTimeFormatInfokkP b
.kkb c
CurrentInfokkc n
.kkn o
FirstDayOfWeekkko }
)kk} ~
;kk~ 
}ll 	
publicoo 
staticoo 
DateTimeoo 
Weekoo #
(oo# $
	DayOfWeekoo$ -
firstDayOfWeekoo. <
)oo< =
{pp 	
DateTimeqq 

currentDayqq 
=qq  !

ClockProxyqq" ,
.qq, -
Clockqq- 2
.qq2 3
Nowqq3 6
;qq6 7
whilerr 
(rr 

currentDayrr 
.rr 
	DayOfWeekrr '
!=rr( *
firstDayOfWeekrr+ 9
)rr9 :
{ss 

currentDaytt 
=tt 

currentDaytt '
.tt' (
AddDaystt( /
(tt/ 0
-tt0 1
$numtt1 2
)tt2 3
;tt3 4
}uu 
returnvv 
newvv 
DateTimevv 
(vv  

currentDayvv  *
.vv* +
Yearvv+ /
,vv/ 0

currentDayvv1 ;
.vv; <
Monthvv< A
,vvA B

currentDayvvC M
.vvM N
DayvvN Q
)vvQ R
;vvR S
}ww 	
public~~ 
static~~ 
DateTime~~ 
Today~~ $
{ 	
get
ÄÄ 
{
ÄÄ 
return
ÄÄ 

ClockProxy
ÄÄ #
.
ÄÄ# $
Clock
ÄÄ$ )
.
ÄÄ) *
Now
ÄÄ* -
.
ÄÄ- .
Date
ÄÄ. 2
;
ÄÄ2 3
}
ÄÄ4 5
}
ÅÅ 	
public
àà 
static
àà 
DateTime
àà 
Hour
àà #
{
ââ 	
get
ää 
{
ää 
return
ää 
TimeTrim
ää !
.
ää! "
Minute
ää" (
(
ää( )

ClockProxy
ää) 3
.
ää3 4
Clock
ää4 9
.
ää9 :
Now
ää: =
)
ää= >
;
ää> ?
}
ää@ A
}
ãã 	
public
íí 
static
íí 
DateTime
íí 
Minute
íí %
{
ìì 	
get
îî 
{
îî 
return
îî 
TimeTrim
îî !
.
îî! "
Second
îî" (
(
îî( )

ClockProxy
îî) 3
.
îî3 4
Clock
îî4 9
.
îî9 :
Now
îî: =
)
îî= >
;
îî> ?
}
îî@ A
}
ïï 	
public
úú 
static
úú 
DateTime
úú 
Second
úú %
{
ùù 	
get
ûû 
{
ûû 
return
ûû 
TimeTrim
ûû !
.
ûû! "
Millisecond
ûû" -
(
ûû- .

ClockProxy
ûû. 8
.
ûû8 9
Clock
ûû9 >
.
ûû> ?
Now
ûû? B
)
ûûB C
;
ûûC D
}
ûûE F
}
üü 	
}
££ 
}•• ¸
oF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\PeriodRelation.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

enum 
PeriodRelation 
{ 
After 
, 
StartTouching 
, 
StartInside 
, 
InsideStartTouching 
, "
EnclosingStartTouching 
, 
	Enclosing 
,  
EnclosingEndTouching 
, 

ExactMatch 
, 
Inside 
, 
InsideEndTouching 
, 
	EndInside 
, 
EndTouching 
, 
Before 
, 
} 
} üN
hF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\Quarter.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

sealed 
class 
Quarter 
:  !
QuarterTimeRange" 2
{ 
public 
Quarter 
( 
) 
: 
this 
( 
new 
TimeCalendar !
(! "
)" #
)# $
{ 	
} 	
public 
Quarter 
( 
ITimeCalendar $
calendar% -
)- .
:/ 0
this 
( 

ClockProxy 
. 
Clock !
.! "
Now" %
,% &
calendar' /
)/ 0
{ 	
} 	
public 
Quarter 
( 
DateTime 
moment  &
)& '
:( )
this 
( 
moment 
, 
new 
TimeCalendar )
() *
)* +
)+ ,
{   	
}!! 	
public$$ 
Quarter$$ 
($$ 
DateTime$$ 
moment$$  &
,$$& '
ITimeCalendar$$( 5
calendar$$6 >
)$$> ?
:$$@ A
this%% 
(%% 
TimeTool%% 
.%% 
	GetYearOf%% #
(%%# $
calendar%%$ ,
.%%, -
YearBaseMonth%%- :
,%%: ;
calendar%%< D
.%%D E
GetYear%%E L
(%%L M
moment%%M S
)%%S T
,%%T U
calendar%%V ^
.%%^ _
GetMonth%%_ g
(%%g h
moment%%h n
)%%n o
)%%o p
,%%p q
TimeTool&& 
.&& 
GetQuarterOfMonth&& *
(&&* +
calendar&&+ 3
.&&3 4
YearBaseMonth&&4 A
,&&A B
(&&C D
	YearMonth&&D M
)&&M N
moment&&N T
.&&T U
Month&&U Z
)&&Z [
,&&[ \
calendar&&] e
)&&e f
{'' 	
}(( 	
public++ 
Quarter++ 
(++ 
int++ 
baseYear++ #
,++# $
YearQuarter++% 0
yearQuarter++1 <
)++< =
:++> ?
this,, 
(,, 
baseYear,, 
,,, 
yearQuarter,, &
,,,& '
new,,( +
TimeCalendar,,, 8
(,,8 9
),,9 :
),,: ;
{-- 	
}.. 	
public11 
Quarter11 
(11 
int11 
baseYear11 #
,11# $
YearQuarter11% 0
yearQuarter111 <
,11< =
ITimeCalendar11> K
calendar11L T
)11T U
:11V W
base22 
(22 
baseYear22 
,22 
yearQuarter22 &
,22& '
$num22( )
,22) *
calendar22+ 3
)223 4
{33 	
}44 	
public77 
int77 
Year77 
{88 	
get99 
{:: 
int;; 
year;; 
;;; 
	YearMonth<< 
month<< 
;<<  
int== 

monthCount== 
===  
(==! "
(==" #
int==# &
)==& '
StartQuarter==' 3
-==4 5
$num==6 7
)==7 8
*==9 :
TimeSpec==; C
.==C D
MonthsPerQuarter==D T
;==T U
TimeTool>> 
.>> 
AddMonth>> !
(>>! "
BaseYear>>" *
,>>* +
Calendar>>, 4
.>>4 5
YearBaseMonth>>5 B
,>>B C

monthCount>>D N
,>>N O
out>>P S
year>>T X
,>>X Y
out>>Z ]
month>>^ c
)>>c d
;>>d e
return?? 
Calendar?? 
.??  
GetYear??  '
(??' (
year??( ,
,??, -
(??. /
int??/ 2
)??2 3
month??3 8
)??8 9
;??9 :
}@@ 
}AA 	
publicDD 
	YearMonthDD 

StartMonthDD #
{EE 	
getFF 
{GG 
intHH 
yearHH 
;HH 
	YearMonthII 
monthII 
;II  
intJJ 

monthCountJJ 
=JJ  
(JJ! "
(JJ" #
intJJ# &
)JJ& '
StartQuarterJJ' 3
-JJ4 5
$numJJ6 7
)JJ7 8
*JJ9 :
TimeSpecJJ; C
.JJC D
MonthsPerQuarterJJD T
;JJT U
TimeToolKK 
.KK 
AddMonthKK !
(KK! "
BaseYearKK" *
,KK* +
CalendarKK, 4
.KK4 5
YearBaseMonthKK5 B
,KKB C

monthCountKKD N
,KKN O
outKKP S
yearKKT X
,KKX Y
outKKZ ]
monthKK^ c
)KKc d
;KKd e
returnLL 
monthLL 
;LL 
}MM 
}NN 	
publicQQ 
YearQuarterQQ 
YearQuarterQQ &
{RR 	
getSS 
{SS 
returnSS 
StartQuarterSS %
;SS% &
}SS' (
}TT 	
publicWW 
stringWW 
QuarterNameWW !
{XX 	
getYY 
{YY 
returnYY 
StartQuarterNameYY )
;YY) *
}YY+ ,
}ZZ 	
public]] 
string]] 
QuarterOfYearName]] '
{^^ 	
get__ 
{__ 
return__ "
StartQuarterOfYearName__ /
;__/ 0
}__1 2
}`` 	
publiccc 
boolcc 
IsCalendarQuartercc %
{dd 	
getee 
{ee 
returnee 
(ee 
(ee 
intee 
)ee 
YearBaseMonthee ,
-ee- .
$numee/ 0
)ee0 1
%ee2 3
TimeSpecee4 <
.ee< =
MonthsPerQuarteree= M
==eeN P
$numeeQ R
;eeR S
}eeT U
}ff 	
publicii 
boolii !
MultipleCalendarYearsii )
{jj 	
getkk 
{ll 
ifmm 
(mm 
IsCalendarQuartermm %
)mm% &
{nn 
returnoo 
falseoo  
;oo  !
}pp 
intqq 
	startYearqq 
;qq 
	YearMonthrr 
monthrr 
;rr  
intss 

monthCountss 
=ss  
(ss! "
(ss" #
intss# &
)ss& '
StartQuarterss' 3
-ss4 5
$numss6 7
)ss7 8
*ss9 :
TimeSpecss; C
.ssC D
MonthsPerQuarterssD T
;ssT U
TimeTooltt 
.tt 
AddMonthtt !
(tt! "
BaseYeartt" *
,tt* +
YearBaseMonthtt, 9
,tt9 :

monthCounttt; E
,ttE F
outttG J
	startYearttK T
,ttT U
outttV Y
monthttZ _
)tt_ `
;tt` a
intvv 
endYearvv 
;vv 

monthCountww 
+=ww 
TimeSpecww &
.ww& '
MonthsPerQuarterww' 7
;ww7 8
TimeToolxx 
.xx 
AddMonthxx !
(xx! "
BaseYearxx" *
,xx* +
YearBaseMonthxx, 9
,xx9 :

monthCountxx; E
,xxE F
outxxG J
endYearxxK R
,xxR S
outxxT W
monthxxX ]
)xx] ^
;xx^ _
returnyy 
	startYearyy  
!=yy! #
endYearyy$ +
;yy+ ,
}zz 
}{{ 	
public~~ 
Quarter~~ 
GetPreviousQuarter~~ )
(~~) *
)~~* +
{ 	
return
ÄÄ 
AddQuarters
ÄÄ 
(
ÄÄ 
-
ÄÄ  
$num
ÄÄ  !
)
ÄÄ! "
;
ÄÄ" #
}
ÅÅ 	
public
ÑÑ 
Quarter
ÑÑ 
GetNextQuarter
ÑÑ %
(
ÑÑ% &
)
ÑÑ& '
{
ÖÖ 	
return
ÜÜ 
AddQuarters
ÜÜ 
(
ÜÜ 
$num
ÜÜ  
)
ÜÜ  !
;
ÜÜ! "
}
áá 	
public
ää 
Quarter
ää 
AddQuarters
ää "
(
ää" #
int
ää# &
count
ää' ,
)
ää, -
{
ãã 	
int
åå 
year
åå 
;
åå 
YearQuarter
çç 
quarter
çç 
;
çç  
TimeTool
éé 
.
éé 

AddQuarter
éé 
(
éé  
BaseYear
éé  (
,
éé( )
StartQuarter
éé* 6
,
éé6 7
count
éé8 =
,
éé= >
out
éé? B
year
ééC G
,
ééG H
out
ééI L
quarter
ééM T
)
ééT U
;
ééU V
return
èè 
new
èè 
Quarter
èè 
(
èè 
year
èè #
,
èè# $
quarter
èè% ,
,
èè, -
Calendar
èè. 6
)
èè6 7
;
èè7 8
}
êê 	
	protected
ìì 
override
ìì 
string
ìì !
Format
ìì" (
(
ìì( )
ITimeFormatter
ìì) 7
	formatter
ìì8 A
)
ììA B
{
îî 	
return
ïï 
	formatter
ïï 
.
ïï 
GetCalendarPeriod
ïï .
(
ïï. /
QuarterOfYearName
ïï/ @
,
ïï@ A
	formatter
ññ 
.
ññ 
GetShortDate
ññ &
(
ññ& '
Start
ññ' ,
)
ññ, -
,
ññ- .
	formatter
ññ/ 8
.
ññ8 9
GetShortDate
ññ9 E
(
ññE F
End
ññF I
)
ññI J
,
ññJ K
Duration
ññL T
)
ññT U
;
ññU V
}
óó 	
}
ôô 
}õõ ¨&
iF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\Quarters.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

sealed 
class 
Quarters  
:! "
QuarterTimeRange# 3
{ 
public 
Quarters 
( 
DateTime  
moment! '
,' (
YearQuarter) 4
startYearQuarter5 E
,E F
intG J
countK P
)P Q
:R S
this 
( 
moment 
, 
startYearQuarter )
,) *
count+ 0
,0 1
new2 5
TimeCalendar6 B
(B C
)C D
)D E
{ 	
} 	
public 
Quarters 
( 
DateTime  
moment! '
,' (
YearQuarter) 4
startYearQuarter5 E
,E F
intG J
countK P
,P Q
ITimeCalendarR _
calendar` h
)h i
:j k
this 
( 
TimeTool 
. 
	GetYearOf #
(# $
calendar$ ,
., -
YearBaseMonth- :
,: ;
calendar< D
.D E
GetYearE L
(L M
momentM S
)S T
,T U
calendarV ^
.^ _
GetMonth_ g
(g h
momenth n
)n o
)o p
,p q
startYearQuarter 
, 
count #
,# $
calendar% -
)- .
{ 	
} 	
public 
Quarters 
( 
int 
	startYear %
,% &
YearQuarter' 2
startYearQuarter3 C
,C D
intE H
quarterCountI U
)U V
:W X
this   
(   
	startYear   
,   
startYearQuarter   ,
,  , -
quarterCount  . :
,  : ;
new  < ?
TimeCalendar  @ L
(  L M
)  M N
)  N O
{!! 	
}"" 	
public%% 
Quarters%% 
(%% 
int%% 
	startYear%% %
,%%% &
YearQuarter%%' 2
startYearQuarter%%3 C
,%%C D
int%%E H
quarterCount%%I U
,%%U V
ITimeCalendar%%W d
calendar%%e m
)%%m n
:%%o p
base&& 
(&& 
	startYear&& 
,&& 
startYearQuarter&& ,
,&&, -
quarterCount&&. :
,&&: ;
calendar&&< D
)&&D E
{'' 	
}(( 	
public++ !
ITimePeriodCollection++ $
GetQuarters++% 0
(++0 1
)++1 2
{,, 	 
TimePeriodCollection--  
quarters--! )
=--* +
new--, / 
TimePeriodCollection--0 D
(--D E
)--E F
;--F G
for.. 
(.. 
int.. 
i.. 
=.. 
$num.. 
;.. 
i.. 
<.. 
QuarterCount..  ,
;.., -
i... /
++../ 1
)..1 2
{// 
int00 
year00 
;00 
YearQuarter11 
quarter11 #
;11# $
TimeTool22 
.22 

AddQuarter22 #
(22# $
BaseYear22$ ,
,22, -
StartQuarter22. :
,22: ;
i22< =
,22= >
out22? B
year22C G
,22G H
out22I L
quarter22M T
)22T U
;22U V
quarters33 
.33 
Add33 
(33 
new33  
Quarter33! (
(33( )
year33) -
,33- .
quarter33/ 6
,336 7
Calendar338 @
)33@ A
)33A B
;33B C
}44 
return55 
quarters55 
;55 
}66 	
	protected99 
override99 
string99 !
Format99" (
(99( )
ITimeFormatter99) 7
	formatter998 A
)99A B
{:: 	
return;; 
	formatter;; 
.;; 
GetCalendarPeriod;; .
(;;. /"
StartQuarterOfYearName;;/ E
,;;E F 
EndQuarterOfYearName;;G [
,;;[ \
	formatter<< 
.<< 
GetShortDate<< &
(<<& '
Start<<' ,
)<<, -
,<<- .
	formatter<</ 8
.<<8 9
GetShortDate<<9 E
(<<E F
End<<F I
)<<I J
,<<J K
Duration<<L T
)<<T U
;<<U V
}== 	
}?? 
}AA ƒh
qF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\QuarterTimeRange.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

abstract 
class 
QuarterTimeRange *
:+ ,
CalendarTimeRange- >
{ 
	protected 
QuarterTimeRange "
(" #
int# &
	startYear' 0
,0 1
YearQuarter2 =
startQuarter> J
,J K
intL O
quarterCountP \
)\ ]
:^ _
this 
( 
	startYear 
, 
startQuarter (
,( )
quarterCount* 6
,6 7
new8 ;
TimeCalendar< H
(H I
)I J
)J K
{ 	
} 	
	protected 
QuarterTimeRange "
(" #
int# &
	startYear' 0
,0 1
YearQuarter2 =
startQuarter> J
,J K
intL O
quarterCountP \
,\ ]
ITimeCalendar^ k
calendarl t
)t u
:v w
base 
( 
GetPeriodOf 
( 
calendar %
,% &
	startYear' 0
,0 1
startQuarter2 >
,> ?
quarterCount@ L
)L M
,M N
calendarO W
)W X
{ 	
this 
. 
	startYear 
= 
	startYear &
;& '
this 
. 
startQuarter 
= 
startQuarter  ,
;, -
this 
. 
quarterCount 
= 
quarterCount  ,
;, -
TimeTool 
. 

AddQuarter 
(  
	startYear  )
,) *
startQuarter+ 7
,7 8
quarterCount9 E
-F G
$numH I
,I J
outK N
endYearO V
,V W
outX [

endQuarter\ f
)f g
;g h
} 	
public"" 
override"" 
int"" 
BaseYear"" $
{## 	
get$$ 
{$$ 
return$$ 
	startYear$$ "
;$$" #
}$$$ %
}%% 	
public(( 
int(( 
	StartYear(( 
{)) 	
get** 
{** 
return** 
Calendar** !
.**! "
GetYear**" )
(**) *
	startYear*** 3
,**3 4
(**5 6
int**6 9
)**9 :
Calendar**: B
.**B C
YearBaseMonth**C P
)**P Q
;**Q R
}**S T
}++ 	
public.. 
int.. 
EndYear.. 
{// 	
get00 
{00 
return00 
Calendar00 !
.00! "
GetYear00" )
(00) *
endYear00* 1
,001 2
(003 4
int004 7
)007 8
Calendar008 @
.00@ A
YearBaseMonth00A N
)00N O
;00O P
}00Q R
}11 	
public44 
YearQuarter44 
StartQuarter44 '
{55 	
get66 
{66 
return66 
startQuarter66 %
;66% &
}66' (
}77 	
public:: 
YearQuarter:: 

EndQuarter:: %
{;; 	
get<< 
{<< 
return<< 

endQuarter<< #
;<<# $
}<<% &
}== 	
public@@ 
int@@ 
QuarterCount@@ 
{AA 	
getBB 
{BB 
returnBB 
quarterCountBB %
;BB% &
}BB' (
}CC 	
publicFF 
stringFF 
StartQuarterNameFF &
{GG 	
getHH 
{HH 
returnHH 
CalendarHH !
.HH! "
GetQuarterNameHH" 0
(HH0 1
StartQuarterHH1 =
)HH= >
;HH> ?
}HH@ A
}II 	
publicLL 
stringLL "
StartQuarterOfYearNameLL ,
{MM 	
getNN 
{NN 
returnNN 
CalendarNN !
.NN! " 
GetQuarterOfYearNameNN" 6
(NN6 7
	StartYearNN7 @
,NN@ A
StartQuarterNNB N
)NNN O
;NNO P
}NNQ R
}OO 	
publicRR 
stringRR 
EndQuarterNameRR $
{SS 	
getTT 
{TT 
returnTT 
CalendarTT !
.TT! "
GetQuarterNameTT" 0
(TT0 1

EndQuarterTT1 ;
)TT; <
;TT< =
}TT> ?
}UU 	
publicXX 
stringXX  
EndQuarterOfYearNameXX *
{YY 	
getZZ 
{ZZ 
returnZZ 
CalendarZZ !
.ZZ! " 
GetQuarterOfYearNameZZ" 6
(ZZ6 7
EndYearZZ7 >
,ZZ> ?

EndQuarterZZ@ J
)ZZJ K
;ZZK L
}ZZM N
}[[ 	
public^^ !
ITimePeriodCollection^^ $
	GetMonths^^% .
(^^. /
)^^/ 0
{__ 	 
TimePeriodCollection``  
months``! '
=``( )
new``* - 
TimePeriodCollection``. B
(``B C
)``C D
;``D E
foraa 
(aa 
intaa 
iaa 
=aa 
$numaa 
;aa 
iaa 
<aa 
quarterCountaa  ,
;aa, -
iaa. /
++aa/ 1
)aa1 2
{bb 
forcc 
(cc 
intcc 
monthcc 
=cc  
$numcc! "
;cc" #
monthcc$ )
<cc* +
TimeSpeccc, 4
.cc4 5
MonthsPerQuartercc5 E
;ccE F
monthccG L
++ccL N
)ccN O
{dd 
intee 
yearee 
;ee 
	YearMonthff 
	yearMonthff '
;ff' (
TimeToolgg 
.gg 
AddMonthgg %
(gg% &
	startYeargg& /
,gg/ 0
YearBaseMonthgg1 >
,gg> ?
igg@ A
*ggB C
TimeSpecggD L
.ggL M
MonthsPerQuarterggM ]
+gg^ _
monthgg` e
,gge f
outggg j
yearggk o
,ggo p
outggq t
	yearMonthggu ~
)gg~ 
;	gg Ä
monthshh 
.hh 
Addhh 
(hh 
newhh "
Monthhh# (
(hh( )
yearhh) -
,hh- .
	yearMonthhh/ 8
,hh8 9
Calendarhh: B
)hhB C
)hhC D
;hhD E
}ii 
}jj 
returnkk 
monthskk 
;kk 
}ll 	
	protectedoo 
overrideoo 
booloo 
IsEqualoo  '
(oo' (
objectoo( .
objoo/ 2
)oo2 3
{pp 	
returnqq 
baseqq 
.qq 
IsEqualqq 
(qq  
objqq  #
)qq# $
&&qq% '
HasSameDataqq( 3
(qq3 4
objqq4 7
asqq8 :
QuarterTimeRangeqq; K
)qqK L
;qqL M
}rr 	
privateuu 
booluu 
HasSameDatauu  
(uu  !
QuarterTimeRangeuu! 1
compuu2 6
)uu6 7
{vv 	
returnww 
	startYearxx 
==xx 
compxx !
.xx! "
	startYearxx" +
&&xx, .
startQuarteryy 
==yy 
compyy  $
.yy$ %
startQuarteryy% 1
&&yy2 4
quarterCountzz 
==zz 
compzz  $
.zz$ %
quarterCountzz% 1
&&zz2 4
endYear{{ 
=={{ 
comp{{ 
.{{  
endYear{{  '
&&{{( *

endQuarter|| 
==|| 
comp|| "
.||" #

endQuarter||# -
;||- .
}}} 	
	protected
ÄÄ 
override
ÄÄ 
int
ÄÄ 
ComputeHashCode
ÄÄ .
(
ÄÄ. /
)
ÄÄ/ 0
{
ÅÅ 	
return
ÇÇ 
HashTool
ÇÇ 
.
ÇÇ 
ComputeHashCode
ÇÇ +
(
ÇÇ+ ,
base
ÇÇ, 0
.
ÇÇ0 1
ComputeHashCode
ÇÇ1 @
(
ÇÇ@ A
)
ÇÇA B
,
ÇÇB C
	startYear
ÇÇD M
,
ÇÇM N
startQuarter
ÇÇO [
,
ÇÇ[ \
quarterCount
ÇÇ] i
,
ÇÇi j
endYear
ÇÇk r
,
ÇÇr s

endQuarter
ÇÇt ~
)
ÇÇ~ 
;ÇÇ Ä
}
ÉÉ 	
private
ÜÜ 
static
ÜÜ 
DateTime
ÜÜ 
GetStartOfQuarter
ÜÜ  1
(
ÜÜ1 2
ITimeCalendar
ÜÜ2 ?
calendar
ÜÜ@ H
,
ÜÜH I
int
ÜÜJ M
year
ÜÜN R
,
ÜÜR S
YearQuarter
ÜÜT _
quarter
ÜÜ` g
)
ÜÜg h
{
áá 	
DateTime
àà 
startOfQuarter
àà #
;
àà# $
switch
ää 
(
ää 
calendar
ää 
.
ää 
YearType
ää %
)
ää% &
{
ãã 
case
åå 
YearType
åå 
.
åå 

FiscalYear
åå (
:
åå( )
startOfQuarter
çç "
=
çç# $ 
FiscalCalendarTool
çç% 7
.
çç7 8
GetStartOfQuarter
çç8 I
(
ççI J
year
ççJ N
,
ççN O
quarter
ççP W
,
ççW X
calendar
éé  
.
éé  !
YearBaseMonth
éé! .
,
éé. /
calendar
éé0 8
.
éé8 9"
FiscalFirstDayOfYear
éé9 M
,
ééM N
calendar
ééO W
.
ééW X!
FiscalYearAlignment
ééX k
)
éék l
;
éél m
break
èè 
;
èè 
default
êê 
:
êê 
DateTime
ëë 
	yearStart
ëë &
=
ëë' (
new
ëë) ,
DateTime
ëë- 5
(
ëë5 6
year
ëë6 :
,
ëë: ;
(
ëë< =
int
ëë= @
)
ëë@ A
calendar
ëëA I
.
ëëI J
YearBaseMonth
ëëJ W
,
ëëW X
$num
ëëY Z
)
ëëZ [
;
ëë[ \
startOfQuarter
íí "
=
íí# $
	yearStart
íí% .
.
íí. /
	AddMonths
íí/ 8
(
íí8 9
(
íí9 :
(
íí: ;
int
íí; >
)
íí> ?
quarter
íí? F
-
ííG H
$num
ííI J
)
ííJ K
*
ííL M
TimeSpec
ííN V
.
ííV W
MonthsPerQuarter
ííW g
)
ííg h
;
ííh i
break
ìì 
;
ìì 
}
îî 
return
ññ 
startOfQuarter
ññ !
;
ññ! "
}
óó 	
private
öö 
static
öö 
	TimeRange
öö  
GetPeriodOf
öö! ,
(
öö, -
ITimeCalendar
öö- :
calendar
öö; C
,
ööC D
int
ööE H
	startYear
ööI R
,
ööR S
YearQuarter
ööT _
startQuarter
öö` l
,
ööl m
int
öön q
quarterCount
öör ~
)
öö~ 
{
õõ 	
if
úú 
(
úú 
quarterCount
úú 
<
úú 
$num
úú  
)
úú  !
{
ùù 
throw
ûû 
new
ûû )
ArgumentOutOfRangeException
ûû 5
(
ûû5 6
$str
ûû6 D
)
ûûD E
;
ûûE F
}
üü 
DateTime
°° 
start
°° 
=
°° 
GetStartOfQuarter
°° .
(
°°. /
calendar
°°/ 7
,
°°7 8
	startYear
°°9 B
,
°°B C
startQuarter
°°D P
)
°°P Q
;
°°Q R
int
¢¢ 
endYear
¢¢ 
;
¢¢ 
YearQuarter
££ 

endQuarter
££ "
;
££" #
TimeTool
§§ 
.
§§ 

AddQuarter
§§ 
(
§§  
	startYear
§§  )
,
§§) *
startQuarter
§§+ 7
,
§§7 8
quarterCount
§§9 E
,
§§E F
out
§§G J
endYear
§§K R
,
§§R S
out
§§T W

endQuarter
§§X b
)
§§b c
;
§§c d
DateTime
•• 
end
•• 
=
•• 
GetStartOfQuarter
•• ,
(
••, -
calendar
••- 5
,
••5 6
endYear
••7 >
,
••> ?

endQuarter
••@ J
)
••J K
;
••K L
return
ßß 
new
ßß 
	TimeRange
ßß  
(
ßß  !
start
ßß! &
,
ßß& '
end
ßß( +
)
ßß+ ,
;
ßß, -
}
®® 	
private
¨¨ 
readonly
¨¨ 
int
¨¨ 
	startYear
¨¨ &
;
¨¨& '
private
≠≠ 
readonly
≠≠ 
YearQuarter
≠≠ $
startQuarter
≠≠% 1
;
≠≠1 2
private
ÆÆ 
readonly
ÆÆ 
int
ÆÆ 
quarterCount
ÆÆ )
;
ÆÆ) *
private
ØØ 
readonly
ØØ 
int
ØØ 
endYear
ØØ $
;
ØØ$ %
private
∞∞ 
readonly
∞∞ 
YearQuarter
∞∞ $

endQuarter
∞∞% /
;
∞∞/ 0
}
≤≤ 
}¥¥ ´
qF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\SeekBoundaryMode.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

enum 
SeekBoundaryMode  
{ 
Fill 
, 
Next 
, 
} 
} ¨
nF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\SeekDirection.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

enum 
SeekDirection 
{ 
Forward 
, 
Backward 
, 
} 
} ë
lF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\StaticClock.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

class 
StaticClock 
: 
IClock %
{ 
public 
StaticClock 
( 
DateTime #
now$ '
)' (
{ 	
this 
. 
now 
= 
now 
; 
} 	
public 
DateTime 
Now 
{ 	
get 
{ 
return 
now 
; 
} 
} 	
private 
readonly 
DateTime !
now" %
;% &
}!! 
}## ¶è
hF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\Strings.cs
	namespace 	
Phoenix
 
. 
CrossCutting 
. 

TimePeriod )
{ 
internal 
sealed 
class 
Strings !
{ 
public 
static 
string 
SystemYearName +
(+ ,
int, /
year0 4
)4 5
{ 	
return 
Format 
( 
inst 
. 
	GetString (
(( )
$str) 9
)9 :
,: ;
year< @
)@ A
;A B
} 	
public 
static 
string 
CalendarYearName -
(- .
int. 1
year2 6
)6 7
{ 	
return 
Format 
( 
inst 
. 
	GetString (
(( )
$str) ;
); <
,< =
year> B
)B C
;C D
} 	
public"" 
static"" 
string"" 
FiscalYearName"" +
(""+ ,
int"", /
year""0 4
)""4 5
{## 	
return$$ 
Format$$ 
($$ 
inst$$ 
.$$ 
	GetString$$ (
($$( )
$str$$) 9
)$$9 :
,$$: ;
year$$< @
)$$@ A
;$$A B
}%% 	
public(( 
static(( 
string(( 
SchoolYearName(( +
(((+ ,
int((, /
year((0 4
)((4 5
{)) 	
return** 
Format** 
(** 
inst** 
.** 
	GetString** (
(**( )
$str**) 9
)**9 :
,**: ;
year**< @
)**@ A
;**A B
}++ 	
public22 
static22 
string22 
SystemHalfyearName22 /
(22/ 0
YearHalfyear220 <
yearHalfyear22= I
)22I J
{33 	
return44 
Format44 
(44 
inst44 
.44 
	GetString44 (
(44( )
$str44) =
)44= >
,44> ?
(44@ A
int44A D
)44D E
yearHalfyear44E Q
)44Q R
;44R S
}55 	
public88 
static88 
string88  
CalendarHalfyearName88 1
(881 2
YearHalfyear882 >
yearHalfyear88? K
)88K L
{99 	
return:: 
Format:: 
(:: 
inst:: 
.:: 
	GetString:: (
(::( )
$str::) ?
)::? @
,::@ A
(::B C
int::C F
)::F G
yearHalfyear::G S
)::S T
;::T U
};; 	
public>> 
static>> 
string>> 
FiscalHalfyearName>> /
(>>/ 0
YearHalfyear>>0 <
yearHalfyear>>= I
)>>I J
{?? 	
return@@ 
Format@@ 
(@@ 
inst@@ 
.@@ 
	GetString@@ (
(@@( )
$str@@) =
)@@= >
,@@> ?
(@@@ A
int@@A D
)@@D E
yearHalfyear@@E Q
)@@Q R
;@@R S
}AA 	
publicDD 
staticDD 
stringDD 
SchoolHalfyearNameDD /
(DD/ 0
YearHalfyearDD0 <
yearHalfyearDD= I
)DDI J
{EE 	
returnFF 
FormatFF 
(FF 
instFF 
.FF 
	GetStringFF (
(FF( )
$strFF) =
)FF= >
,FF> ?
(FF@ A
intFFA D
)FFD E
yearHalfyearFFE Q
)FFQ R
;FFR S
}GG 	
publicJJ 
staticJJ 
stringJJ $
SystemHalfyearOfYearNameJJ 5
(JJ5 6
YearHalfyearJJ6 B
yearHalfyearJJC O
,JJO P
intJJQ T
yearJJU Y
)JJY Z
{KK 	
returnLL 
FormatLL 
(LL 
instLL 
.LL 
	GetStringLL (
(LL( )
$strLL) C
)LLC D
,LLD E
(LLF G
intLLG J
)LLJ K
yearHalfyearLLK W
,LLW X
yearLLY ]
)LL] ^
;LL^ _
}MM 	
publicPP 
staticPP 
stringPP &
CalendarHalfyearOfYearNamePP 7
(PP7 8
YearHalfyearPP8 D
yearHalfyearPPE Q
,PPQ R
intPPS V
yearPPW [
)PP[ \
{QQ 	
returnRR 
FormatRR 
(RR 
instRR 
.RR 
	GetStringRR (
(RR( )
$strRR) E
)RRE F
,RRF G
(RRH I
intRRI L
)RRL M
yearHalfyearRRM Y
,RRY Z
yearRR[ _
)RR_ `
;RR` a
}SS 	
publicVV 
staticVV 
stringVV $
FiscalHalfyearOfYearNameVV 5
(VV5 6
YearHalfyearVV6 B
yearHalfyearVVC O
,VVO P
intVVQ T
yearVVU Y
)VVY Z
{WW 	
returnXX 
FormatXX 
(XX 
instXX 
.XX 
	GetStringXX (
(XX( )
$strXX) C
)XXC D
,XXD E
(XXF G
intXXG J
)XXJ K
yearHalfyearXXK W
,XXW X
yearXXY ]
)XX] ^
;XX^ _
}YY 	
public\\ 
static\\ 
string\\ $
SchoolHalfyearOfYearName\\ 5
(\\5 6
YearHalfyear\\6 B
yearHalfyear\\C O
,\\O P
int\\Q T
year\\U Y
)\\Y Z
{]] 	
return^^ 
Format^^ 
(^^ 
inst^^ 
.^^ 
	GetString^^ (
(^^( )
$str^^) C
)^^C D
,^^D E
(^^F G
int^^G J
)^^J K
yearHalfyear^^K W
,^^W X
year^^Y ]
)^^] ^
;^^^ _
}__ 	
publicff 
staticff 
stringff 
SystemQuarterNameff .
(ff. /
YearQuarterff/ :
yearQuarterff; F
)ffF G
{gg 	
returnhh 
Formathh 
(hh 
insthh 
.hh 
	GetStringhh (
(hh( )
$strhh) <
)hh< =
,hh= >
(hh? @
inthh@ C
)hhC D
yearQuarterhhD O
)hhO P
;hhP Q
}ii 	
publicll 
staticll 
stringll 
CalendarQuarterNamell 0
(ll0 1
YearQuarterll1 <
yearQuarterll= H
)llH I
{mm 	
returnnn 
Formatnn 
(nn 
instnn 
.nn 
	GetStringnn (
(nn( )
$strnn) >
)nn> ?
,nn? @
(nnA B
intnnB E
)nnE F
yearQuarternnF Q
)nnQ R
;nnR S
}oo 	
publicrr 
staticrr 
stringrr 
FiscalQuarterNamerr .
(rr. /
YearQuarterrr/ :
yearQuarterrr; F
)rrF G
{ss 	
returntt 
Formattt 
(tt 
insttt 
.tt 
	GetStringtt (
(tt( )
$strtt) <
)tt< =
,tt= >
(tt? @
inttt@ C
)ttC D
yearQuarterttD O
)ttO P
;ttP Q
}uu 	
publicxx 
staticxx 
stringxx 
SchoolQuarterNamexx .
(xx. /
YearQuarterxx/ :
yearQuarterxx; F
)xxF G
{yy 	
returnzz 
Formatzz 
(zz 
instzz 
.zz 
	GetStringzz (
(zz( )
$strzz) <
)zz< =
,zz= >
(zz? @
intzz@ C
)zzC D
yearQuarterzzD O
)zzO P
;zzP Q
}{{ 	
public~~ 
static~~ 
string~~ #
SystemQuarterOfYearName~~ 4
(~~4 5
YearQuarter~~5 @
yearQuarter~~A L
,~~L M
int~~N Q
year~~R V
)~~V W
{ 	
return
ÄÄ 
Format
ÄÄ 
(
ÄÄ 
inst
ÄÄ 
.
ÄÄ 
	GetString
ÄÄ (
(
ÄÄ( )
$str
ÄÄ) B
)
ÄÄB C
,
ÄÄC D
(
ÄÄE F
int
ÄÄF I
)
ÄÄI J
yearQuarter
ÄÄJ U
,
ÄÄU V
year
ÄÄW [
)
ÄÄ[ \
;
ÄÄ\ ]
}
ÅÅ 	
public
ÑÑ 
static
ÑÑ 
string
ÑÑ '
CalendarQuarterOfYearName
ÑÑ 6
(
ÑÑ6 7
YearQuarter
ÑÑ7 B
yearQuarter
ÑÑC N
,
ÑÑN O
int
ÑÑP S
year
ÑÑT X
)
ÑÑX Y
{
ÖÖ 	
return
ÜÜ 
Format
ÜÜ 
(
ÜÜ 
inst
ÜÜ 
.
ÜÜ 
	GetString
ÜÜ (
(
ÜÜ( )
$str
ÜÜ) D
)
ÜÜD E
,
ÜÜE F
(
ÜÜG H
int
ÜÜH K
)
ÜÜK L
yearQuarter
ÜÜL W
,
ÜÜW X
year
ÜÜY ]
)
ÜÜ] ^
;
ÜÜ^ _
}
áá 	
public
ää 
static
ää 
string
ää %
FiscalQuarterOfYearName
ää 4
(
ää4 5
YearQuarter
ää5 @
yearQuarter
ääA L
,
ääL M
int
ääN Q
year
ääR V
)
ääV W
{
ãã 	
return
åå 
Format
åå 
(
åå 
inst
åå 
.
åå 
	GetString
åå (
(
åå( )
$str
åå) B
)
ååB C
,
ååC D
(
ååE F
int
ååF I
)
ååI J
yearQuarter
ååJ U
,
ååU V
year
ååW [
)
åå[ \
;
åå\ ]
}
çç 	
public
êê 
static
êê 
string
êê %
SchoolQuarterOfYearName
êê 4
(
êê4 5
YearQuarter
êê5 @
yearQuarter
êêA L
,
êêL M
int
êêN Q
year
êêR V
)
êêV W
{
ëë 	
return
íí 
Format
íí 
(
íí 
inst
íí 
.
íí 
	GetString
íí (
(
íí( )
$str
íí) B
)
ííB C
,
ííC D
(
ííE F
int
ííF I
)
ííI J
yearQuarter
ííJ U
,
ííU V
year
ííW [
)
íí[ \
;
íí\ ]
}
ìì 	
public
öö 
static
öö 
string
öö 
MonthOfYearName
öö ,
(
öö, -
string
öö- 3
	monthName
öö4 =
,
öö= >
string
öö? E
yearName
ööF N
)
ööN O
{
õõ 	
return
úú 
Format
úú 
(
úú 
inst
úú 
.
úú 
	GetString
úú (
(
úú( )
$str
úú) :
)
úú: ;
,
úú; <
	monthName
úú= F
,
úúF G
yearName
úúH P
)
úúP Q
;
úúQ R
}
ùù 	
public
§§ 
static
§§ 
string
§§ 
WeekOfYearName
§§ +
(
§§+ ,
int
§§, /

weekOfYear
§§0 :
,
§§: ;
string
§§< B
yearName
§§C K
)
§§K L
{
•• 	
return
¶¶ 
Format
¶¶ 
(
¶¶ 
inst
¶¶ 
.
¶¶ 
	GetString
¶¶ (
(
¶¶( )
$str
¶¶) 9
)
¶¶9 :
,
¶¶: ;

weekOfYear
¶¶< F
,
¶¶F G
yearName
¶¶H P
)
¶¶P Q
;
¶¶Q R
}
ßß 	
public
ÆÆ 
static
ÆÆ 
string
ÆÆ 
TimeSpanYears
ÆÆ *
{
ØØ 	
get
∞∞ 
{
∞∞ 
return
∞∞ 
inst
∞∞ 
.
∞∞ 
	GetString
∞∞ '
(
∞∞' (
$str
∞∞( 7
)
∞∞7 8
;
∞∞8 9
}
∞∞: ;
}
±± 	
public
¥¥ 
static
¥¥ 
string
¥¥ 
TimeSpanYear
¥¥ )
{
µµ 	
get
∂∂ 
{
∂∂ 
return
∂∂ 
inst
∂∂ 
.
∂∂ 
	GetString
∂∂ '
(
∂∂' (
$str
∂∂( 6
)
∂∂6 7
;
∂∂7 8
}
∂∂9 :
}
∑∑ 	
public
∫∫ 
static
∫∫ 
string
∫∫ 
TimeSpanMonths
∫∫ +
{
ªª 	
get
ºº 
{
ºº 
return
ºº 
inst
ºº 
.
ºº 
	GetString
ºº '
(
ºº' (
$str
ºº( 8
)
ºº8 9
;
ºº9 :
}
ºº; <
}
ΩΩ 	
public
¿¿ 
static
¿¿ 
string
¿¿ 
TimeSpanMonth
¿¿ *
{
¡¡ 	
get
¬¬ 
{
¬¬ 
return
¬¬ 
inst
¬¬ 
.
¬¬ 
	GetString
¬¬ '
(
¬¬' (
$str
¬¬( 7
)
¬¬7 8
;
¬¬8 9
}
¬¬: ;
}
√√ 	
public
∆∆ 
static
∆∆ 
string
∆∆ 
TimeSpanWeeks
∆∆ *
{
«« 	
get
»» 
{
»» 
return
»» 
inst
»» 
.
»» 
	GetString
»» '
(
»»' (
$str
»»( 7
)
»»7 8
;
»»8 9
}
»»: ;
}
…… 	
public
ÃÃ 
static
ÃÃ 
string
ÃÃ 
TimeSpanWeek
ÃÃ )
{
ÕÕ 	
get
ŒŒ 
{
ŒŒ 
return
ŒŒ 
inst
ŒŒ 
.
ŒŒ 
	GetString
ŒŒ '
(
ŒŒ' (
$str
ŒŒ( 6
)
ŒŒ6 7
;
ŒŒ7 8
}
ŒŒ9 :
}
œœ 	
public
““ 
static
““ 
string
““ 
TimeSpanDays
““ )
{
”” 	
get
‘‘ 
{
‘‘ 
return
‘‘ 
inst
‘‘ 
.
‘‘ 
	GetString
‘‘ '
(
‘‘' (
$str
‘‘( 6
)
‘‘6 7
;
‘‘7 8
}
‘‘9 :
}
’’ 	
public
ÿÿ 
static
ÿÿ 
string
ÿÿ 
TimeSpanDay
ÿÿ (
{
ŸŸ 	
get
⁄⁄ 
{
⁄⁄ 
return
⁄⁄ 
inst
⁄⁄ 
.
⁄⁄ 
	GetString
⁄⁄ '
(
⁄⁄' (
$str
⁄⁄( 5
)
⁄⁄5 6
;
⁄⁄6 7
}
⁄⁄8 9
}
€€ 	
public
ﬁﬁ 
static
ﬁﬁ 
string
ﬁﬁ 
TimeSpanHours
ﬁﬁ *
{
ﬂﬂ 	
get
‡‡ 
{
‡‡ 
return
‡‡ 
inst
‡‡ 
.
‡‡ 
	GetString
‡‡ '
(
‡‡' (
$str
‡‡( 7
)
‡‡7 8
;
‡‡8 9
}
‡‡: ;
}
·· 	
public
‰‰ 
static
‰‰ 
string
‰‰ 
TimeSpanHour
‰‰ )
{
ÂÂ 	
get
ÊÊ 
{
ÊÊ 
return
ÊÊ 
inst
ÊÊ 
.
ÊÊ 
	GetString
ÊÊ '
(
ÊÊ' (
$str
ÊÊ( 6
)
ÊÊ6 7
;
ÊÊ7 8
}
ÊÊ9 :
}
ÁÁ 	
public
ÍÍ 
static
ÍÍ 
string
ÍÍ 
TimeSpanMinutes
ÍÍ ,
{
ÎÎ 	
get
ÏÏ 
{
ÏÏ 
return
ÏÏ 
inst
ÏÏ 
.
ÏÏ 
	GetString
ÏÏ '
(
ÏÏ' (
$str
ÏÏ( 9
)
ÏÏ9 :
;
ÏÏ: ;
}
ÏÏ< =
}
ÌÌ 	
public
 
static
 
string
 
TimeSpanMinute
 +
{
ÒÒ 	
get
ÚÚ 
{
ÚÚ 
return
ÚÚ 
inst
ÚÚ 
.
ÚÚ 
	GetString
ÚÚ '
(
ÚÚ' (
$str
ÚÚ( 8
)
ÚÚ8 9
;
ÚÚ9 :
}
ÚÚ; <
}
ÛÛ 	
public
ˆˆ 
static
ˆˆ 
string
ˆˆ 
TimeSpanSeconds
ˆˆ ,
{
˜˜ 	
get
¯¯ 
{
¯¯ 
return
¯¯ 
inst
¯¯ 
.
¯¯ 
	GetString
¯¯ '
(
¯¯' (
$str
¯¯( 9
)
¯¯9 :
;
¯¯: ;
}
¯¯< =
}
˘˘ 	
public
¸¸ 
static
¸¸ 
string
¸¸ 
TimeSpanSecond
¸¸ +
{
˝˝ 	
get
˛˛ 
{
˛˛ 
return
˛˛ 
inst
˛˛ 
.
˛˛ 
	GetString
˛˛ '
(
˛˛' (
$str
˛˛( 8
)
˛˛8 9
;
˛˛9 :
}
˛˛; <
}
ˇˇ 	
private
ÑÑ 
static
ÑÑ 
string
ÑÑ 
Format
ÑÑ $
(
ÑÑ$ %
string
ÑÑ% +
format
ÑÑ, 2
,
ÑÑ2 3
params
ÑÑ4 :
object
ÑÑ; A
[
ÑÑA B
]
ÑÑB C
args
ÑÑD H
)
ÑÑH I
{
ÖÖ 	
return
ÜÜ 
string
ÜÜ 
.
ÜÜ 
Format
ÜÜ  
(
ÜÜ  !
CultureInfo
ÜÜ! ,
.
ÜÜ, -
InvariantCulture
ÜÜ- =
,
ÜÜ= >
format
ÜÜ? E
,
ÜÜE F
args
ÜÜG K
)
ÜÜK L
;
ÜÜL M
}
áá 	
private
ää 
static
ää 
ResourceManager
ää &
NewInst
ää' .
(
ää. /
Type
ää/ 3
singletonType
ää4 A
)
ääA B
{
ãã 	
if
åå 
(
åå 
singletonType
åå 
==
åå  
null
åå! %
)
åå% &
{
çç 
throw
éé 
new
éé #
ArgumentNullException
éé /
(
éé/ 0
$str
éé0 ?
)
éé? @
;
éé@ A
}
èè 
if
êê 
(
êê 
singletonType
êê 
.
êê 
FullName
êê &
==
êê' )
null
êê* .
)
êê. /
{
ëë 
throw
íí 
new
íí '
InvalidOperationException
íí 3
(
íí3 4
)
íí4 5
;
íí5 6
}
ìì 
return
óó 
new
óó 
ResourceManager
óó &
(
óó& '
singletonType
óó' 4
)
óó4 5
;
óó5 6
}
ôô 	
private
ùù 
static
ùù 
readonly
ùù 
ResourceManager
ùù  /
inst
ùù0 4
=
ùù5 6
NewInst
ùù7 >
(
ùù> ?
typeof
ùù? E
(
ùùE F
Strings
ùùF M
)
ùùM N
)
ùùN O
;
ùùO P
}
üü 
}°° œ
lF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\SystemClock.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

class 
SystemClock 
: 
IClock %
{ 
internal 
SystemClock 
( 
) 
{ 	
} 	
public 
DateTime 
Now 
{ 	
get 
{ 
return 
DateTime !
.! "
Now" %
;% &
}' (
} 	
} 
} ∑ò
eF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\Time.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

struct 
Time 
: 
IComparable $
,$ %
IComparable& 1
<1 2
Time2 6
>6 7
,7 8

IEquatable9 C
<C D
TimeD H
>H I
{ 
public 
Time 
( 
DateTime 
dateTime %
)% &
{ 	
duration 
= 
dateTime 
.  
	TimeOfDay  )
;) *
} 	
public 
Time 
( 
TimeSpan 
duration %
)% &
:' (
this 
( 
Math 
. 
Abs 
( 
duration "
." #
Hours# (
)( )
,) *
Math+ /
./ 0
Abs0 3
(3 4
duration4 <
.< =
Minutes= D
)D E
,E F
Math 
. 
Abs  
(  !
duration! )
.) *
Seconds* 1
)1 2
,2 3
Math4 8
.8 9
Abs9 <
(< =
duration= E
.E F
MillisecondsF R
)R S
)S T
{ 	
} 	
public 
Time 
( 
int 
hour 
= 
$num  
,  !
int" %
minute& ,
=- .
$num/ 0
,0 1
int2 5
second6 <
== >
$num? @
,@ A
intB E
millisecondF Q
=R S
$numT U
)U V
{   	
if!! 
(!! 
hour!! 
<!! 
$num!! 
||!! 
hour!!  
>!!! "
TimeSpec!!# +
.!!+ ,
HoursPerDay!!, 7
)!!7 8
{"" 
throw## 
new## '
ArgumentOutOfRangeException## 5
(##5 6
$str##6 <
)##< =
;##= >
}$$ 
if%% 
(%% 
hour%% 
==%% 
TimeSpec%%  
.%%  !
HoursPerDay%%! ,
)%%, -
{&& 
if'' 
('' 
minute'' 
>'' 
$num'' 
)'' 
{(( 
throw)) 
new)) '
ArgumentOutOfRangeException)) 9
())9 :
$str)): B
)))B C
;))C D
}** 
if++ 
(++ 
second++ 
>++ 
$num++ 
)++ 
{,, 
throw-- 
new-- '
ArgumentOutOfRangeException-- 9
(--9 :
$str--: B
)--B C
;--C D
}.. 
if// 
(// 
millisecond// 
>//  !
$num//" #
)//# $
{00 
throw11 
new11 '
ArgumentOutOfRangeException11 9
(119 :
$str11: G
)11G H
;11H I
}22 
}33 
if44 
(44 
minute44 
<44 
$num44 
||44 
minute44 $
>=44% '
TimeSpec44( 0
.440 1
MinutesPerHour441 ?
)44? @
{55 
throw66 
new66 '
ArgumentOutOfRangeException66 5
(665 6
$str666 >
)66> ?
;66? @
}77 
if88 
(88 
second88 
<88 
$num88 
||88 
second88 $
>=88% '
TimeSpec88( 0
.880 1
SecondsPerMinute881 A
)88A B
{99 
throw:: 
new:: '
ArgumentOutOfRangeException:: 5
(::5 6
$str::6 >
)::> ?
;::? @
};; 
if<< 
(<< 
millisecond<< 
<<< 
$num<< 
||<<  "
millisecond<<# .
>=<</ 1
TimeSpec<<2 :
.<<: ;!
MillisecondsPerSecond<<; P
)<<P Q
{== 
throw>> 
new>> '
ArgumentOutOfRangeException>> 5
(>>5 6
$str>>6 C
)>>C D
;>>D E
}?? 
durationAA 
=AA 
newAA 
TimeSpanAA #
(AA# $
$numAA$ %
,AA% &
hourAA' +
,AA+ ,
minuteAA- 3
,AA3 4
secondAA5 ;
,AA; <
millisecondAA= H
)AAH I
;AAI J
}BB 	
publicEE 
intEE 
HourEE 
{FF 	
getGG 
{GG 
returnGG 
durationGG !
.GG! "
HoursGG" '
;GG' (
}GG) *
}HH 	
publicKK 
intKK 
MinuteKK 
{LL 	
getMM 
{MM 
returnMM 
durationMM !
.MM! "
MinutesMM" )
;MM) *
}MM+ ,
}NN 	
publicQQ 
intQQ 
SecondQQ 
{RR 	
getSS 
{SS 
returnSS 
durationSS !
.SS! "
SecondsSS" )
;SS) *
}SS+ ,
}TT 	
publicWW 
intWW 
MillisecondWW 
{XX 	
getYY 
{YY 
returnYY 
durationYY !
.YY! "
MillisecondsYY" .
;YY. /
}YY0 1
}ZZ 	
public]] 
TimeSpan]] 
Duration]]  
{^^ 	
get__ 
{__ 
return__ 
duration__ !
;__! "
}__# $
}`` 	
publiccc 
boolcc 
IsZerocc 
{dd 	
getee 
{ee 
returnee 
durationee !
.ee! "
Equalsee" (
(ee( )
TimeSpanee) 1
.ee1 2
Zeroee2 6
)ee6 7
;ee7 8
}ee9 :
}ff 	
publicii 
boolii 
	IsFullDayii 
{jj 	
getkk 
{kk 
returnkk 
(kk 
intkk 
)kk 
durationkk &
.kk& '

TotalHourskk' 1
==kk2 4
TimeSpeckk5 =
.kk= >
HoursPerDaykk> I
;kkI J
}kkK L
}ll 	
publicoo 
booloo 
IsFullDayOrZerooo #
{pp 	
getqq 
{qq 
returnqq 
	IsFullDayqq "
||qq# %
IsZeroqq& ,
;qq, -
}qq. /
}rr 	
publicuu 
longuu 
Ticksuu 
{vv 	
getww 
{ww 
returnww 
durationww !
.ww! "
Ticksww" '
;ww' (
}ww) *
}xx 	
public{{ 
double{{ 

TotalHours{{  
{|| 	
get}} 
{}} 
return}} 
duration}} !
.}}! "

TotalHours}}" ,
;}}, -
}}}. /
}~~ 	
public
ÅÅ 
double
ÅÅ 
TotalMinutes
ÅÅ "
{
ÇÇ 	
get
ÉÉ 
{
ÉÉ 
return
ÉÉ 
duration
ÉÉ !
.
ÉÉ! "
TotalMinutes
ÉÉ" .
;
ÉÉ. /
}
ÉÉ0 1
}
ÑÑ 	
public
áá 
double
áá 
TotalSeconds
áá "
{
àà 	
get
ââ 
{
ââ 
return
ââ 
duration
ââ !
.
ââ! "
TotalSeconds
ââ" .
;
ââ. /
}
ââ0 1
}
ää 	
public
çç 
double
çç 
TotalMilliseconds
çç '
{
éé 	
get
èè 
{
èè 
return
èè 
duration
èè !
.
èè! "
TotalMilliseconds
èè" 3
;
èè3 4
}
èè5 6
}
êê 	
public
ìì 
int
ìì 
	CompareTo
ìì 
(
ìì 
Time
ìì !
other
ìì" '
)
ìì' (
{
îî 	
return
ïï 
duration
ïï 
.
ïï 
	CompareTo
ïï %
(
ïï% &
other
ïï& +
.
ïï+ ,
duration
ïï, 4
)
ïï4 5
;
ïï5 6
}
ññ 	
public
ôô 
int
ôô 
	CompareTo
ôô 
(
ôô 
object
ôô #
obj
ôô$ '
)
ôô' (
{
öö 	
return
õõ 
duration
õõ 
.
õõ 
	CompareTo
õõ %
(
õõ% &
(
õõ& '
(
õõ' (
Time
õõ( ,
)
õõ, -
obj
õõ- 0
)
õõ0 1
.
õõ1 2
duration
õõ2 :
)
õõ: ;
;
õõ; <
}
úú 	
public
üü 
bool
üü 
Equals
üü 
(
üü 
Time
üü 
other
üü  %
)
üü% &
{
†† 	
return
°° 
duration
°° 
.
°° 
Equals
°° "
(
°°" #
other
°°# (
.
°°( )
duration
°°) 1
)
°°1 2
;
°°2 3
}
¢¢ 	
public
•• 
override
•• 
string
•• 
ToString
•• '
(
••' (
)
••( )
{
¶¶ 	
return
ßß 
(
ßß 
(
ßß 
int
ßß 
)
ßß 

TotalHours
ßß #
)
ßß# $
.
ßß$ %
ToString
ßß% -
(
ßß- .
$str
ßß. 2
)
ßß2 3
+
ßß4 5
$str
ßß6 9
+
ßß: ;
Minute
ßß< B
.
ßßB C
ToString
ßßC K
(
ßßK L
$str
ßßL P
)
ßßP Q
+
ßßR S
$str
®® 
+
®® 
Second
®® 
.
®® 
ToString
®® %
(
®®% &
$str
®®& *
)
®®* +
+
®®, -
$str
®®. 1
+
®®2 3
Millisecond
®®4 ?
.
®®? @
ToString
®®@ H
(
®®H I
$str
®®I N
)
®®N O
;
®®O P
}
©© 	
public
¨¨ 
override
¨¨ 
bool
¨¨ 
Equals
¨¨ #
(
¨¨# $
object
¨¨$ *
obj
¨¨+ .
)
¨¨. /
{
≠≠ 	
if
ÆÆ 
(
ÆÆ 
obj
ÆÆ 
==
ÆÆ 
null
ÆÆ 
||
ÆÆ 
GetType
ÆÆ &
(
ÆÆ& '
)
ÆÆ' (
!=
ÆÆ) +
obj
ÆÆ, /
.
ÆÆ/ 0
GetType
ÆÆ0 7
(
ÆÆ7 8
)
ÆÆ8 9
)
ÆÆ9 :
{
ØØ 
return
∞∞ 
false
∞∞ 
;
∞∞ 
}
±± 
return
≥≥ 
Equals
≥≥ 
(
≥≥ 
(
≥≥ 
Time
≥≥ 
)
≥≥  
obj
≥≥  #
)
≥≥# $
;
≥≥$ %
}
¥¥ 	
public
∑∑ 
override
∑∑ 
int
∑∑ 
GetHashCode
∑∑ '
(
∑∑' (
)
∑∑( )
{
∏∏ 	
return
ππ 
HashTool
ππ 
.
ππ 
ComputeHashCode
ππ +
(
ππ+ ,
GetType
ππ, 3
(
ππ3 4
)
ππ4 5
.
ππ5 6
GetHashCode
ππ6 A
(
ππA B
)
ππB C
,
ππC D
duration
ππE M
)
ππM N
;
ππN O
}
∫∫ 	
public
ΩΩ 
static
ΩΩ 
TimeSpan
ΩΩ 
operator
ΩΩ '
-
ΩΩ( )
(
ΩΩ) *
Time
ΩΩ* .
time1
ΩΩ/ 4
,
ΩΩ4 5
Time
ΩΩ6 :
time2
ΩΩ; @
)
ΩΩ@ A
{
ææ 	
return
øø 
(
øø 
time1
øø 
-
øø 
time2
øø !
.
øø! "
duration
øø" *
)
øø* +
.
øø+ ,
duration
øø, 4
;
øø4 5
}
¿¿ 	
public
√√ 
static
√√ 
Time
√√ 
operator
√√ #
-
√√$ %
(
√√% &
Time
√√& *
time
√√+ /
,
√√/ 0
TimeSpan
√√1 9
duration
√√: B
)
√√B C
{
ƒƒ 	
if
≈≈ 
(
≈≈ 
Equals
≈≈ 
(
≈≈ 
duration
≈≈ 
,
≈≈  
TimeSpan
≈≈! )
.
≈≈) *
Zero
≈≈* .
)
≈≈. /
)
≈≈/ 0
{
∆∆ 
return
«« 
time
«« 
;
«« 
}
»» 
DateTime
…… 
day
…… 
=
…… 
duration
…… #
>
……$ %
TimeSpan
……& .
.
……. /
Zero
……/ 3
?
……4 5
DateTime
……6 >
.
……> ?
MaxValue
……? G
.
……G H
Date
……H L
:
……M N
DateTime
……O W
.
……W X
MinValue
……X `
.
……` a
Date
……a e
;
……e f
return
   
new
   
Time
   
(
   
time
    
.
    !

ToDateTime
  ! +
(
  + ,
day
  , /
)
  / 0
.
  0 1
Subtract
  1 9
(
  9 :
duration
  : B
)
  B C
)
  C D
;
  D E
}
ÀÀ 	
public
ŒŒ 
static
ŒŒ 
TimeSpan
ŒŒ 
operator
ŒŒ '
+
ŒŒ( )
(
ŒŒ) *
Time
ŒŒ* .
time1
ŒŒ/ 4
,
ŒŒ4 5
Time
ŒŒ6 :
time2
ŒŒ; @
)
ŒŒ@ A
{
œœ 	
return
–– 
(
–– 
time1
–– 
+
–– 
time2
–– !
.
––! "
duration
––" *
)
––* +
.
––+ ,
duration
––, 4
;
––4 5
}
—— 	
public
‘‘ 
static
‘‘ 
Time
‘‘ 
operator
‘‘ #
+
‘‘$ %
(
‘‘% &
Time
‘‘& *
time
‘‘+ /
,
‘‘/ 0
TimeSpan
‘‘1 9
duration
‘‘: B
)
‘‘B C
{
’’ 	
if
÷÷ 
(
÷÷ 
Equals
÷÷ 
(
÷÷ 
duration
÷÷ 
,
÷÷  
TimeSpan
÷÷! )
.
÷÷) *
Zero
÷÷* .
)
÷÷. /
)
÷÷/ 0
{
◊◊ 
return
ÿÿ 
time
ÿÿ 
;
ÿÿ 
}
ŸŸ 
DateTime
⁄⁄ 
day
⁄⁄ 
=
⁄⁄ 
duration
⁄⁄ #
>
⁄⁄$ %
TimeSpan
⁄⁄& .
.
⁄⁄. /
Zero
⁄⁄/ 3
?
⁄⁄4 5
DateTime
⁄⁄6 >
.
⁄⁄> ?
MinValue
⁄⁄? G
:
⁄⁄H I
DateTime
⁄⁄J R
.
⁄⁄R S
MaxValue
⁄⁄S [
;
⁄⁄[ \
return
€€ 
new
€€ 
Time
€€ 
(
€€ 
time
€€  
.
€€  !

ToDateTime
€€! +
(
€€+ ,
day
€€, /
)
€€/ 0
.
€€0 1
Add
€€1 4
(
€€4 5
duration
€€5 =
)
€€= >
)
€€> ?
;
€€? @
}
‹‹ 	
public
ﬂﬂ 
static
ﬂﬂ 
bool
ﬂﬂ 
operator
ﬂﬂ #
<
ﬂﬂ$ %
(
ﬂﬂ% &
Time
ﬂﬂ& *
time1
ﬂﬂ+ 0
,
ﬂﬂ0 1
Time
ﬂﬂ2 6
time2
ﬂﬂ7 <
)
ﬂﬂ< =
{
‡‡ 	
return
·· 
time1
·· 
.
·· 
duration
·· !
<
··" #
time2
··$ )
.
··) *
duration
··* 2
;
··2 3
}
‚‚ 	
public
ÂÂ 
static
ÂÂ 
bool
ÂÂ 
operator
ÂÂ #
<=
ÂÂ$ &
(
ÂÂ& '
Time
ÂÂ' +
time1
ÂÂ, 1
,
ÂÂ1 2
Time
ÂÂ3 7
time2
ÂÂ8 =
)
ÂÂ= >
{
ÊÊ 	
return
ÁÁ 
time1
ÁÁ 
.
ÁÁ 
duration
ÁÁ !
<=
ÁÁ" $
time2
ÁÁ% *
.
ÁÁ* +
duration
ÁÁ+ 3
;
ÁÁ3 4
}
ËË 	
public
ÎÎ 
static
ÎÎ 
bool
ÎÎ 
operator
ÎÎ #
==
ÎÎ$ &
(
ÎÎ& '
Time
ÎÎ' +
left
ÎÎ, 0
,
ÎÎ0 1
Time
ÎÎ2 6
right
ÎÎ7 <
)
ÎÎ< =
{
ÏÏ 	
return
ÌÌ 
Equals
ÌÌ 
(
ÌÌ 
left
ÌÌ 
,
ÌÌ 
right
ÌÌ  %
)
ÌÌ% &
;
ÌÌ& '
}
ÓÓ 	
public
ÒÒ 
static
ÒÒ 
bool
ÒÒ 
operator
ÒÒ #
!=
ÒÒ$ &
(
ÒÒ& '
Time
ÒÒ' +
left
ÒÒ, 0
,
ÒÒ0 1
Time
ÒÒ2 6
right
ÒÒ7 <
)
ÒÒ< =
{
ÚÚ 	
return
ÛÛ 
!
ÛÛ 
Equals
ÛÛ 
(
ÛÛ 
left
ÛÛ 
,
ÛÛ  
right
ÛÛ! &
)
ÛÛ& '
;
ÛÛ' (
}
ÙÙ 	
public
˜˜ 
static
˜˜ 
bool
˜˜ 
operator
˜˜ #
>
˜˜$ %
(
˜˜% &
Time
˜˜& *
time1
˜˜+ 0
,
˜˜0 1
Time
˜˜2 6
time2
˜˜7 <
)
˜˜< =
{
¯¯ 	
return
˘˘ 
time1
˘˘ 
.
˘˘ 
duration
˘˘ !
>
˘˘" #
time2
˘˘$ )
.
˘˘) *
duration
˘˘* 2
;
˘˘2 3
}
˙˙ 	
public
˝˝ 
static
˝˝ 
bool
˝˝ 
operator
˝˝ #
>=
˝˝$ &
(
˝˝& '
Time
˝˝' +
time1
˝˝, 1
,
˝˝1 2
Time
˝˝3 7
time2
˝˝8 =
)
˝˝= >
{
˛˛ 	
return
ˇˇ 
time1
ˇˇ 
.
ˇˇ 
duration
ˇˇ !
>=
ˇˇ" $
time2
ˇˇ% *
.
ˇˇ* +
duration
ˇˇ+ 3
;
ˇˇ3 4
}
ÄÄ 	
public
ÉÉ 
DateTime
ÉÉ 

ToDateTime
ÉÉ "
(
ÉÉ" #
Date
ÉÉ# '
date
ÉÉ( ,
)
ÉÉ, -
{
ÑÑ 	
return
ÖÖ 

ToDateTime
ÖÖ 
(
ÖÖ 
date
ÖÖ "
.
ÖÖ" #
DateTime
ÖÖ# +
)
ÖÖ+ ,
;
ÖÖ, -
}
ÜÜ 	
public
ââ 
DateTime
ââ 

ToDateTime
ââ "
(
ââ" #
DateTime
ââ# +
dateTime
ââ, 4
)
ââ4 5
{
ää 	
return
ãã 

ToDateTime
ãã 
(
ãã 
dateTime
ãã &
,
ãã& '
this
ãã( ,
)
ãã, -
;
ãã- .
}
åå 	
public
èè 
static
èè 
DateTime
èè 

ToDateTime
èè )
(
èè) *
Date
èè* .
date
èè/ 3
,
èè3 4
Time
èè5 9
time
èè: >
)
èè> ?
{
êê 	
return
ëë 

ToDateTime
ëë 
(
ëë 
date
ëë "
.
ëë" #
DateTime
ëë# +
,
ëë+ ,
time
ëë- 1
)
ëë1 2
;
ëë2 3
}
íí 	
public
ïï 
static
ïï 
DateTime
ïï 

ToDateTime
ïï )
(
ïï) *
DateTime
ïï* 2
dateTime
ïï3 ;
,
ïï; <
Time
ïï= A
time
ïïB F
)
ïïF G
{
ññ 	
return
óó 
dateTime
óó 
.
óó 
Date
óó  
.
óó  !
Add
óó! $
(
óó$ %
time
óó% )
.
óó) *
Duration
óó* 2
)
óó2 3
;
óó3 4
}
òò 	
private
úú 
readonly
úú 
TimeSpan
úú !
duration
úú" *
;
úú* +
}
ûû 
}†† ÜÎ
jF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\TimeBlock.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

class 
	TimeBlock 
: 

ITimeBlock '
{ 
public 
static 
readonly 
	TimeBlock (
Anytime) 0
=1 2
new3 6
	TimeBlock7 @
(@ A
trueA E
)E F
;F G
public 
	TimeBlock 
( 
) 
: 
this 
( 
TimeSpec 
. 
MinPeriodDate '
,' (
TimeSpec) 1
.1 2
MaxPeriodDate2 ?
)? @
{ 	
} 	
internal 
	TimeBlock 
( 
bool 

isReadOnly  *
=+ ,
false- 2
)2 3
:4 5
this 
( 
TimeSpec 
. 
MinPeriodDate '
,' (
TimeSpec) 1
.1 2
MaxPeriodDate2 ?
,? @

isReadOnlyA K
)K L
{ 	
} 	
public!! 
	TimeBlock!! 
(!! 
DateTime!! !
moment!!" (
,!!( )
bool!!* .

isReadOnly!!/ 9
=!!: ;
false!!< A
)!!A B
:!!C D
this"" 
("" 
moment"" 
,"" 
TimeSpec"" !
.""! "
MinPeriodDuration""" 3
,""3 4

isReadOnly""5 ?
)""? @
{## 	
}$$ 	
public'' 
	TimeBlock'' 
('' 
DateTime'' !
start''" '
,''' (
DateTime'') 1
end''2 5
,''5 6
bool''7 ;

isReadOnly''< F
=''G H
false''I N
)''N O
{(( 	
if)) 
()) 
start)) 
<=)) 
end)) 
))) 
{** 
this++ 
.++ 
start++ 
=++ 
start++ "
;++" #
this,, 
.,, 
end,, 
=,, 
end,, 
;,, 
}-- 
else.. 
{// 
this00 
.00 
end00 
=00 
start00  
;00  !
this11 
.11 
start11 
=11 
end11  
;11  !
}22 
duration33 
=33 
this33 
.33 
end33 
-33  !
this33" &
.33& '
start33' ,
;33, -
this44 
.44 

isReadOnly44 
=44 

isReadOnly44 (
;44( )
}55 	
public88 
	TimeBlock88 
(88 
DateTime88 !
start88" '
,88' (
TimeSpan88) 1
duration882 :
,88: ;
bool88< @

isReadOnly88A K
=88L M
false88N S
)88S T
{99 	
if:: 
(:: 
duration:: 
<:: 
TimeSpec:: #
.::# $
MinPeriodDuration::$ 5
)::5 6
{;; 
throw<< 
new<< '
ArgumentOutOfRangeException<< 5
(<<5 6
$str<<6 @
)<<@ A
;<<A B
}== 
this>> 
.>> 
start>> 
=>> 
start>> 
;>> 
this?? 
.?? 
duration?? 
=?? 
duration?? $
;??$ %
end@@ 
=@@ 
start@@ 
.@@ 
Add@@ 
(@@ 
duration@@ $
)@@$ %
;@@% &
thisAA 
.AA 

isReadOnlyAA 
=AA 

isReadOnlyAA (
;AA( )
}BB 	
publicEE 
	TimeBlockEE 
(EE 
TimeSpanEE !
durationEE" *
,EE* +
DateTimeEE, 4
endEE5 8
,EE8 9
boolEE: >

isReadOnlyEE? I
=EEJ K
falseEEL Q
)EEQ R
{FF 	
ifGG 
(GG 
durationGG 
<GG 
TimeSpecGG #
.GG# $
MinPeriodDurationGG$ 5
)GG5 6
{HH 
throwII 
newII '
ArgumentOutOfRangeExceptionII 5
(II5 6
$strII6 @
)II@ A
;IIA B
}JJ 
thisKK 
.KK 
endKK 
=KK 
endKK 
;KK 
thisLL 
.LL 
durationLL 
=LL 
durationLL $
;LL$ %
startMM 
=MM 
endMM 
.MM 
SubtractMM  
(MM  !
durationMM! )
)MM) *
;MM* +
thisNN 
.NN 

isReadOnlyNN 
=NN 

isReadOnlyNN (
;NN( )
}OO 	
publicRR 
	TimeBlockRR 
(RR 
ITimePeriodRR $
copyRR% )
)RR) *
{SS 	
ifTT 
(TT 
copyTT 
==TT 
nullTT 
)TT 
{UU 
throwVV 
newVV !
ArgumentNullExceptionVV /
(VV/ 0
$strVV0 6
)VV6 7
;VV7 8
}WW 
startXX 
=XX 
copyXX 
.XX 
StartXX 
;XX 
endYY 
=YY 
copyYY 
.YY 
EndYY 
;YY 
durationZZ 
=ZZ 
copyZZ 
.ZZ 
DurationZZ $
;ZZ$ %

isReadOnly[[ 
=[[ 
copy[[ 
.[[ 

IsReadOnly[[ (
;[[( )
}\\ 	
	protected__ 
	TimeBlock__ 
(__ 
ITimePeriod__ '
copy__( ,
,__, -
bool__. 2

isReadOnly__3 =
)__= >
{`` 	
ifaa 
(aa 
copyaa 
==aa 
nullaa 
)aa 
{bb 
throwcc 
newcc !
ArgumentNullExceptioncc /
(cc/ 0
$strcc0 6
)cc6 7
;cc7 8
}dd 
startee 
=ee 
copyee 
.ee 
Startee 
;ee 
endff 
=ff 
copyff 
.ff 
Endff 
;ff 
durationgg 
=gg 
copygg 
.gg 
Durationgg $
;gg$ %
thishh 
.hh 

isReadOnlyhh 
=hh 

isReadOnlyhh (
;hh( )
}ii 	
publicll 
boolll 

IsReadOnlyll 
{mm 	
getnn 
{nn 
returnnn 

isReadOnlynn #
;nn# $
}nn% &
}oo 	
publicrr 
boolrr 
	IsAnytimerr 
{ss 	
gettt 
{tt 
returntt 
!tt 
HasStarttt "
&&tt# %
!tt& '
HasEndtt' -
;tt- .
}tt/ 0
}uu 	
publicxx 
boolxx 
IsMomentxx 
{yy 	
getzz 
{zz 
returnzz 
startzz 
.zz 
Equalszz %
(zz% &
endzz& )
)zz) *
;zz* +
}zz, -
}{{ 	
public~~ 
bool~~ 
HasStart~~ 
{ 	
get
ÄÄ 
{
ÄÄ 
return
ÄÄ 
start
ÄÄ 
!=
ÄÄ !
TimeSpec
ÄÄ" *
.
ÄÄ* +
MinPeriodDate
ÄÄ+ 8
;
ÄÄ8 9
}
ÄÄ: ;
}
ÅÅ 	
public
ÑÑ 
DateTime
ÑÑ 
Start
ÑÑ 
{
ÖÖ 	
get
ÜÜ 
{
ÜÜ 
return
ÜÜ 
start
ÜÜ 
;
ÜÜ 
}
ÜÜ  !
set
áá 
{
àà 
CheckModification
ââ !
(
ââ! "
)
ââ" #
;
ââ# $
start
ää 
=
ää 
value
ää 
;
ää 
end
ãã 
=
ãã 
start
ãã 
.
ãã 
Add
ãã 
(
ãã  
duration
ãã  (
)
ãã( )
;
ãã) *
}
åå 
}
çç 	
public
êê 
bool
êê 
HasEnd
êê 
{
ëë 	
get
íí 
{
íí 
return
íí 
end
íí 
!=
íí 
TimeSpec
íí  (
.
íí( )
MaxPeriodDate
íí) 6
;
íí6 7
}
íí8 9
}
ìì 	
public
ññ 
DateTime
ññ 
End
ññ 
{
óó 	
get
òò 
{
òò 
return
òò 
end
òò 
;
òò 
}
òò 
set
ôô 
{
öö 
CheckModification
õõ !
(
õõ! "
)
õõ" #
;
õõ# $
end
úú 
=
úú 
value
úú 
;
úú 
start
ùù 
=
ùù 
end
ùù 
.
ùù 
Subtract
ùù $
(
ùù$ %
duration
ùù% -
)
ùù- .
;
ùù. /
}
ûû 
}
üü 	
public
¢¢ 
TimeSpan
¢¢ 
Duration
¢¢  
{
££ 	
get
§§ 
{
§§ 
return
§§ 
duration
§§ !
;
§§! "
}
§§# $
set
•• 
{
•• 
DurationFromStart
•• #
(
••# $
value
••$ )
)
••) *
;
••* +
}
••, -
}
¶¶ 	
public
©© 
string
©© !
DurationDescription
©© )
{
™™ 	
get
´´ 
{
´´ 
return
´´ 
TimeFormatter
´´ &
.
´´& '
Instance
´´' /
.
´´/ 0
GetDuration
´´0 ;
(
´´; <
Duration
´´< D
,
´´D E 
DurationFormatType
´´F X
.
´´X Y
Detailed
´´Y a
)
´´a b
;
´´b c
}
´´d e
}
¨¨ 	
public
ØØ 
virtual
ØØ 
TimeSpan
ØØ 
GetDuration
ØØ  +
(
ØØ+ ,
IDurationProvider
ØØ, =
provider
ØØ> F
)
ØØF G
{
∞∞ 	
if
±± 
(
±± 
provider
±± 
==
±± 
null
±±  
)
±±  !
{
≤≤ 
throw
≥≥ 
new
≥≥ #
ArgumentNullException
≥≥ /
(
≥≥/ 0
$str
≥≥0 :
)
≥≥: ;
;
≥≥; <
}
¥¥ 
return
µµ 
provider
µµ 
.
µµ 
GetDuration
µµ '
(
µµ' (
Start
µµ( -
,
µµ- .
End
µµ/ 2
)
µµ2 3
;
µµ3 4
}
∂∂ 	
public
ππ 
virtual
ππ 
void
ππ 
Setup
ππ !
(
ππ! "
DateTime
ππ" *
newStart
ππ+ 3
,
ππ3 4
DateTime
ππ5 =
newEnd
ππ> D
)
ππD E
{
∫∫ 	
CheckModification
ªª 
(
ªª 
)
ªª 
;
ªª  
if
ºº 
(
ºº 
newStart
ºº 
<=
ºº 
newEnd
ºº "
)
ºº" #
{
ΩΩ 
start
ææ 
=
ææ 
newStart
ææ  
;
ææ  !
end
øø 
=
øø 
newEnd
øø 
;
øø 
}
¿¿ 
else
¡¡ 
{
¬¬ 
end
√√ 
=
√√ 
newStart
√√ 
;
√√ 
start
ƒƒ 
=
ƒƒ 
newEnd
ƒƒ 
;
ƒƒ 
}
≈≈ 
duration
∆∆ 
=
∆∆ 
end
∆∆ 
-
∆∆ 
start
∆∆ "
;
∆∆" #
}
«« 	
public
   
virtual
   
void
   
Setup
   !
(
  ! "
DateTime
  " *
newStart
  + 3
,
  3 4
TimeSpan
  5 =
newDuration
  > I
)
  I J
{
ÀÀ 	
CheckModification
ÃÃ 
(
ÃÃ 
)
ÃÃ 
;
ÃÃ  
if
ÕÕ 
(
ÕÕ 
newDuration
ÕÕ 
<
ÕÕ 
TimeSpec
ÕÕ &
.
ÕÕ& '
MinPeriodDuration
ÕÕ' 8
)
ÕÕ8 9
{
ŒŒ 
throw
œœ 
new
œœ )
ArgumentOutOfRangeException
œœ 5
(
œœ5 6
$str
œœ6 C
)
œœC D
;
œœD E
}
–– 
start
—— 
=
—— 
newStart
—— 
;
—— 
duration
““ 
=
““ 
newDuration
““ "
;
““" #
end
”” 
=
”” 
start
”” 
.
”” 
Add
”” 
(
”” 
duration
”” $
)
””$ %
;
””% &
}
‘‘ 	
public
◊◊ 

ITimeBlock
◊◊ 
Copy
◊◊ 
(
◊◊ 
)
◊◊  
{
ÿÿ 	
return
ŸŸ 
Copy
ŸŸ 
(
ŸŸ 
TimeSpan
ŸŸ  
.
ŸŸ  !
Zero
ŸŸ! %
)
ŸŸ% &
;
ŸŸ& '
}
⁄⁄ 	
public
›› 
virtual
›› 

ITimeBlock
›› !
Copy
››" &
(
››& '
TimeSpan
››' /
offset
››0 6
)
››6 7
{
ﬁﬁ 	
return
ﬂﬂ 
new
ﬂﬂ 
	TimeBlock
ﬂﬂ  
(
ﬂﬂ  !
start
ﬂﬂ! &
.
ﬂﬂ& '
Add
ﬂﬂ' *
(
ﬂﬂ* +
offset
ﬂﬂ+ 1
)
ﬂﬂ1 2
,
ﬂﬂ2 3
end
ﬂﬂ4 7
.
ﬂﬂ7 8
Add
ﬂﬂ8 ;
(
ﬂﬂ; <
offset
ﬂﬂ< B
)
ﬂﬂB C
,
ﬂﬂC D

IsReadOnly
ﬂﬂE O
)
ﬂﬂO P
;
ﬂﬂP Q
}
‡‡ 	
public
„„ 
virtual
„„ 
void
„„ 
Move
„„  
(
„„  !
TimeSpan
„„! )
offset
„„* 0
)
„„0 1
{
‰‰ 	
CheckModification
ÂÂ 
(
ÂÂ 
)
ÂÂ 
;
ÂÂ  
if
ÊÊ 
(
ÊÊ 
offset
ÊÊ 
==
ÊÊ 
TimeSpan
ÊÊ "
.
ÊÊ" #
Zero
ÊÊ# '
)
ÊÊ' (
{
ÁÁ 
return
ËË 
;
ËË 
}
ÈÈ 
start
ÍÍ 
=
ÍÍ 
start
ÍÍ 
.
ÍÍ 
Add
ÍÍ 
(
ÍÍ 
offset
ÍÍ $
)
ÍÍ$ %
;
ÍÍ% &
end
ÎÎ 
=
ÎÎ 
end
ÎÎ 
.
ÎÎ 
Add
ÎÎ 
(
ÎÎ 
offset
ÎÎ  
)
ÎÎ  !
;
ÎÎ! "
}
ÏÏ 	
public
ÔÔ 

ITimeBlock
ÔÔ 
GetPreviousPeriod
ÔÔ +
(
ÔÔ+ ,
)
ÔÔ, -
{
 	
return
ÒÒ 
GetPreviousPeriod
ÒÒ $
(
ÒÒ$ %
TimeSpan
ÒÒ% -
.
ÒÒ- .
Zero
ÒÒ. 2
)
ÒÒ2 3
;
ÒÒ3 4
}
ÚÚ 	
public
ıı 
virtual
ıı 

ITimeBlock
ıı !
GetPreviousPeriod
ıı" 3
(
ıı3 4
TimeSpan
ıı4 <
offset
ıı= C
)
ııC D
{
ˆˆ 	
return
˜˜ 
new
˜˜ 
	TimeBlock
˜˜  
(
˜˜  !
Duration
˜˜! )
,
˜˜) *
Start
˜˜+ 0
.
˜˜0 1
Add
˜˜1 4
(
˜˜4 5
offset
˜˜5 ;
)
˜˜; <
,
˜˜< =

IsReadOnly
˜˜> H
)
˜˜H I
;
˜˜I J
}
¯¯ 	
public
˚˚ 

ITimeBlock
˚˚ 
GetNextPeriod
˚˚ '
(
˚˚' (
)
˚˚( )
{
¸¸ 	
return
˝˝ 
GetNextPeriod
˝˝  
(
˝˝  !
TimeSpan
˝˝! )
.
˝˝) *
Zero
˝˝* .
)
˝˝. /
;
˝˝/ 0
}
˛˛ 	
public
ÅÅ 
virtual
ÅÅ 

ITimeBlock
ÅÅ !
GetNextPeriod
ÅÅ" /
(
ÅÅ/ 0
TimeSpan
ÅÅ0 8
offset
ÅÅ9 ?
)
ÅÅ? @
{
ÇÇ 	
return
ÉÉ 
new
ÉÉ 
	TimeBlock
ÉÉ  
(
ÉÉ  !
End
ÉÉ! $
.
ÉÉ$ %
Add
ÉÉ% (
(
ÉÉ( )
offset
ÉÉ) /
)
ÉÉ/ 0
,
ÉÉ0 1
Duration
ÉÉ2 :
,
ÉÉ: ;

IsReadOnly
ÉÉ< F
)
ÉÉF G
;
ÉÉG H
}
ÑÑ 	
public
áá 
virtual
áá 
void
áá 
DurationFromStart
áá -
(
áá- .
TimeSpan
áá. 6
newDuration
áá7 B
)
ááB C
{
àà 	
if
ââ 
(
ââ 
newDuration
ââ 
<
ââ 
TimeSpec
ââ &
.
ââ& '
MinPeriodDuration
ââ' 8
)
ââ8 9
{
ää 
throw
ãã 
new
ãã )
ArgumentOutOfRangeException
ãã 5
(
ãã5 6
$str
ãã6 C
)
ããC D
;
ããD E
}
åå 
CheckModification
çç 
(
çç 
)
çç 
;
çç  
duration
èè 
=
èè 
newDuration
èè "
;
èè" #
end
êê 
=
êê 
start
êê 
.
êê 
Add
êê 
(
êê 
newDuration
êê '
)
êê' (
;
êê( )
}
ëë 	
public
îî 
virtual
îî 
void
îî 
DurationFromEnd
îî +
(
îî+ ,
TimeSpan
îî, 4
newDuration
îî5 @
)
îî@ A
{
ïï 	
if
ññ 
(
ññ 
newDuration
ññ 
<
ññ 
TimeSpec
ññ &
.
ññ& '
MinPeriodDuration
ññ' 8
)
ññ8 9
{
óó 
throw
òò 
new
òò )
ArgumentOutOfRangeException
òò 5
(
òò5 6
$str
òò6 C
)
òòC D
;
òòD E
}
ôô 
CheckModification
öö 
(
öö 
)
öö 
;
öö  
duration
úú 
=
úú 
newDuration
úú "
;
úú" #
start
ùù 
=
ùù 
end
ùù 
.
ùù 
Subtract
ùù  
(
ùù  !
newDuration
ùù! ,
)
ùù, -
;
ùù- .
}
ûû 	
public
°° 
virtual
°° 
bool
°° 
IsSamePeriod
°° (
(
°°( )
ITimePeriod
°°) 4
test
°°5 9
)
°°9 :
{
¢¢ 	
if
££ 
(
££ 
test
££ 
==
££ 
null
££ 
)
££ 
{
§§ 
throw
•• 
new
•• #
ArgumentNullException
•• /
(
••/ 0
$str
••0 6
)
••6 7
;
••7 8
}
¶¶ 
return
ßß 
start
ßß 
==
ßß 
test
ßß  
.
ßß  !
Start
ßß! &
&&
ßß' )
end
ßß* -
==
ßß. 0
test
ßß1 5
.
ßß5 6
End
ßß6 9
;
ßß9 :
}
®® 	
public
´´ 
virtual
´´ 
bool
´´ 
	HasInside
´´ %
(
´´% &
DateTime
´´& .
test
´´/ 3
)
´´3 4
{
¨¨ 	
return
≠≠ 
TimePeriodCalc
≠≠ !
.
≠≠! "
	HasInside
≠≠" +
(
≠≠+ ,
this
≠≠, 0
,
≠≠0 1
test
≠≠2 6
)
≠≠6 7
;
≠≠7 8
}
ÆÆ 	
public
±± 
virtual
±± 
bool
±± 
	HasInside
±± %
(
±±% &
ITimePeriod
±±& 1
test
±±2 6
)
±±6 7
{
≤≤ 	
if
≥≥ 
(
≥≥ 
test
≥≥ 
==
≥≥ 
null
≥≥ 
)
≥≥ 
{
¥¥ 
throw
µµ 
new
µµ #
ArgumentNullException
µµ /
(
µµ/ 0
$str
µµ0 6
)
µµ6 7
;
µµ7 8
}
∂∂ 
return
∑∑ 
TimePeriodCalc
∑∑ !
.
∑∑! "
	HasInside
∑∑" +
(
∑∑+ ,
this
∑∑, 0
,
∑∑0 1
test
∑∑2 6
)
∑∑6 7
;
∑∑7 8
}
∏∏ 	
public
ªª 
virtual
ªª 
bool
ªª 
IntersectsWith
ªª *
(
ªª* +
ITimePeriod
ªª+ 6
test
ªª7 ;
)
ªª; <
{
ºº 	
if
ΩΩ 
(
ΩΩ 
test
ΩΩ 
==
ΩΩ 
null
ΩΩ 
)
ΩΩ 
{
ææ 
throw
øø 
new
øø #
ArgumentNullException
øø /
(
øø/ 0
$str
øø0 6
)
øø6 7
;
øø7 8
}
¿¿ 
return
¡¡ 
TimePeriodCalc
¡¡ !
.
¡¡! "
IntersectsWith
¡¡" 0
(
¡¡0 1
this
¡¡1 5
,
¡¡5 6
test
¡¡7 ;
)
¡¡; <
;
¡¡< =
}
¬¬ 	
public
≈≈ 
virtual
≈≈ 

ITimeBlock
≈≈ !
GetIntersection
≈≈" 1
(
≈≈1 2
ITimePeriod
≈≈2 =
period
≈≈> D
)
≈≈D E
{
∆∆ 	
if
«« 
(
«« 
period
«« 
==
«« 
null
«« 
)
«« 
{
»» 
throw
…… 
new
…… #
ArgumentNullException
…… /
(
……/ 0
$str
……0 8
)
……8 9
;
……9 :
}
   
if
ÀÀ 
(
ÀÀ 
!
ÀÀ 
IntersectsWith
ÀÀ 
(
ÀÀ  
period
ÀÀ  &
)
ÀÀ& '
)
ÀÀ' (
{
ÃÃ 
return
ÕÕ 
null
ÕÕ 
;
ÕÕ 
}
ŒŒ 
DateTime
œœ 
periodStart
œœ  
=
œœ! "
period
œœ# )
.
œœ) *
Start
œœ* /
;
œœ/ 0
DateTime
–– 
	periodEnd
–– 
=
––  
period
––! '
.
––' (
End
––( +
;
––+ ,
return
—— 
new
—— 
	TimeBlock
——  
(
——  !
periodStart
““ 
>
““ 
start
““ #
?
““$ %
periodStart
““& 1
:
““2 3
start
““4 9
,
““9 :
	periodEnd
”” 
<
”” 
end
”” 
?
””  !
	periodEnd
””" +
:
””, -
end
””. 1
,
””1 2

IsReadOnly
‘‘ 
)
‘‘ 
;
‘‘ 
}
’’ 	
public
ÿÿ 
virtual
ÿÿ 
bool
ÿÿ 
OverlapsWith
ÿÿ (
(
ÿÿ( )
ITimePeriod
ÿÿ) 4
test
ÿÿ5 9
)
ÿÿ9 :
{
ŸŸ 	
if
⁄⁄ 
(
⁄⁄ 
test
⁄⁄ 
==
⁄⁄ 
null
⁄⁄ 
)
⁄⁄ 
{
€€ 
throw
‹‹ 
new
‹‹ #
ArgumentNullException
‹‹ /
(
‹‹/ 0
$str
‹‹0 6
)
‹‹6 7
;
‹‹7 8
}
›› 
return
ﬁﬁ 
TimePeriodCalc
ﬁﬁ !
.
ﬁﬁ! "
OverlapsWith
ﬁﬁ" .
(
ﬁﬁ. /
this
ﬁﬁ/ 3
,
ﬁﬁ3 4
test
ﬁﬁ5 9
)
ﬁﬁ9 :
;
ﬁﬁ: ;
}
ﬂﬂ 	
public
‚‚ 
virtual
‚‚ 
PeriodRelation
‚‚ %
GetRelation
‚‚& 1
(
‚‚1 2
ITimePeriod
‚‚2 =
test
‚‚> B
)
‚‚B C
{
„„ 	
if
‰‰ 
(
‰‰ 
test
‰‰ 
==
‰‰ 
null
‰‰ 
)
‰‰ 
{
ÂÂ 
throw
ÊÊ 
new
ÊÊ #
ArgumentNullException
ÊÊ /
(
ÊÊ/ 0
$str
ÊÊ0 6
)
ÊÊ6 7
;
ÊÊ7 8
}
ÁÁ 
return
ËË 
TimePeriodCalc
ËË !
.
ËË! "
GetRelation
ËË" -
(
ËË- .
this
ËË. 2
,
ËË2 3
test
ËË4 8
)
ËË8 9
;
ËË9 :
}
ÈÈ 	
public
ÏÏ 
virtual
ÏÏ 
int
ÏÏ 
	CompareTo
ÏÏ $
(
ÏÏ$ %
ITimePeriod
ÏÏ% 0
other
ÏÏ1 6
,
ÏÏ6 7!
ITimePeriodComparer
ÏÏ8 K
comparer
ÏÏL T
)
ÏÏT U
{
ÌÌ 	
if
ÓÓ 
(
ÓÓ 
other
ÓÓ 
==
ÓÓ 
null
ÓÓ 
)
ÓÓ 
{
ÔÔ 
throw
 
new
 #
ArgumentNullException
 /
(
/ 0
$str
0 7
)
7 8
;
8 9
}
ÒÒ 
if
ÚÚ 
(
ÚÚ 
comparer
ÚÚ 
==
ÚÚ 
null
ÚÚ  
)
ÚÚ  !
{
ÛÛ 
throw
ÙÙ 
new
ÙÙ #
ArgumentNullException
ÙÙ /
(
ÙÙ/ 0
$str
ÙÙ0 :
)
ÙÙ: ;
;
ÙÙ; <
}
ıı 
return
ˆˆ 
comparer
ˆˆ 
.
ˆˆ 
Compare
ˆˆ #
(
ˆˆ# $
this
ˆˆ$ (
,
ˆˆ( )
other
ˆˆ* /
)
ˆˆ/ 0
;
ˆˆ0 1
}
˜˜ 	
public
˙˙ 
virtual
˙˙ 
void
˙˙ 
Reset
˙˙ !
(
˙˙! "
)
˙˙" #
{
˚˚ 	
CheckModification
¸¸ 
(
¸¸ 
)
¸¸ 
;
¸¸  
start
˝˝ 
=
˝˝ 
TimeSpec
˝˝ 
.
˝˝ 
MinPeriodDate
˝˝ *
;
˝˝* +
duration
˛˛ 
=
˛˛ 
TimeSpec
˛˛ 
.
˛˛  
MaxPeriodDuration
˛˛  1
;
˛˛1 2
end
ˇˇ 
=
ˇˇ 
TimeSpec
ˇˇ 
.
ˇˇ 
MaxPeriodDate
ˇˇ (
;
ˇˇ( )
}
ÄÄ 	
public
ÉÉ 
string
ÉÉ 
GetDescription
ÉÉ $
(
ÉÉ$ %
ITimeFormatter
ÉÉ% 3
	formatter
ÉÉ4 =
=
ÉÉ> ?
null
ÉÉ@ D
)
ÉÉD E
{
ÑÑ 	
return
ÖÖ 
Format
ÖÖ 
(
ÖÖ 
	formatter
ÖÖ #
??
ÖÖ$ &
TimeFormatter
ÖÖ' 4
.
ÖÖ4 5
Instance
ÖÖ5 =
)
ÖÖ= >
;
ÖÖ> ?
}
ÜÜ 	
	protected
ââ 
virtual
ââ 
string
ââ  
Format
ââ! '
(
ââ' (
ITimeFormatter
ââ( 6
	formatter
ââ7 @
)
ââ@ A
{
ää 	
return
ãã 
	formatter
ãã 
.
ãã 
	GetPeriod
ãã &
(
ãã& '
start
ãã' ,
,
ãã, -
end
ãã. 1
,
ãã1 2
duration
ãã3 ;
)
ãã; <
;
ãã< =
}
åå 	
public
èè 
override
èè 
string
èè 
ToString
èè '
(
èè' (
)
èè( )
{
êê 	
return
ëë 
GetDescription
ëë !
(
ëë! "
)
ëë" #
;
ëë# $
}
íí 	
public
ïï 
sealed
ïï 
override
ïï 
bool
ïï #
Equals
ïï$ *
(
ïï* +
object
ïï+ 1
obj
ïï2 5
)
ïï5 6
{
ññ 	
if
óó 
(
óó 
obj
óó 
==
óó 
this
óó 
)
óó 
{
òò 
return
ôô 
true
ôô 
;
ôô 
}
öö 
if
õõ 
(
õõ 
obj
õõ 
==
õõ 
null
õõ 
||
õõ 
GetType
õõ &
(
õõ& '
)
õõ' (
!=
õõ) +
obj
õõ, /
.
õõ/ 0
GetType
õõ0 7
(
õõ7 8
)
õõ8 9
)
õõ9 :
{
úú 
return
ùù 
false
ùù 
;
ùù 
}
ûû 
return
üü 
IsEqual
üü 
(
üü 
obj
üü 
)
üü 
;
üü  
}
†† 	
	protected
££ 
virtual
££ 
bool
££ 
IsEqual
££ &
(
££& '
object
££' -
obj
££. 1
)
££1 2
{
§§ 	
return
•• 
HasSameData
•• 
(
•• 
obj
•• "
as
••# %
	TimeBlock
••& /
)
••/ 0
;
••0 1
}
¶¶ 	
private
©© 
bool
©© 
HasSameData
©©  
(
©©  !
	TimeBlock
©©! *
comp
©©+ /
)
©©/ 0
{
™™ 	
return
´´ 
start
´´ 
==
´´ 
comp
´´  
.
´´  !
start
´´! &
&&
´´' )
end
´´* -
==
´´. 0
comp
´´1 5
.
´´5 6
end
´´6 9
&&
´´: <

isReadOnly
´´= G
==
´´H J
comp
´´K O
.
´´O P

isReadOnly
´´P Z
;
´´Z [
}
¨¨ 	
public
ØØ 
sealed
ØØ 
override
ØØ 
int
ØØ "
GetHashCode
ØØ# .
(
ØØ. /
)
ØØ/ 0
{
∞∞ 	
return
±± 
HashTool
±± 
.
±± 
AddHashCode
±± '
(
±±' (
GetType
±±( /
(
±±/ 0
)
±±0 1
.
±±1 2
GetHashCode
±±2 =
(
±±= >
)
±±> ?
,
±±? @
ComputeHashCode
±±A P
(
±±P Q
)
±±Q R
)
±±R S
;
±±S T
}
≤≤ 	
	protected
µµ 
virtual
µµ 
int
µµ 
ComputeHashCode
µµ -
(
µµ- .
)
µµ. /
{
∂∂ 	
return
∑∑ 
HashTool
∑∑ 
.
∑∑ 
ComputeHashCode
∑∑ +
(
∑∑+ ,

isReadOnly
∑∑, 6
,
∑∑6 7
start
∑∑8 =
,
∑∑= >
end
∑∑? B
,
∑∑B C
duration
∑∑D L
)
∑∑L M
;
∑∑M N
}
∏∏ 	
	protected
ªª 
void
ªª 
CheckModification
ªª (
(
ªª( )
)
ªª) *
{
ºº 	
if
ΩΩ 
(
ΩΩ 

IsReadOnly
ΩΩ 
)
ΩΩ 
{
ææ 
throw
øø 
new
øø #
NotSupportedException
øø /
(
øø/ 0
$str
øø0 H
)
øøH I
;
øøI J
}
¿¿ 
}
¡¡ 	
private
≈≈ 
readonly
≈≈ 
bool
≈≈ 

isReadOnly
≈≈ (
;
≈≈( )
private
∆∆ 
DateTime
∆∆ 
start
∆∆ 
;
∆∆ 
private
«« 
TimeSpan
«« 
duration
«« !
;
««! "
private
»» 
DateTime
»» 
end
»» 
;
»» 
}
   
}ÃÃ –í
mF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\TimeCalendar.cs
	namespace 	
Phoenix
 
. 
CrossCutting 
. 

TimePeriod )
{ 
public 

class 
TimeCalendar 
: 
ITimeCalendar  -
{ 
public 
static 
readonly 
TimeSpan '
DefaultStartOffset( :
=; <
TimeSpec= E
.E F

NoDurationF P
;P Q
public 
static 
readonly 
TimeSpan '
DefaultEndOffset( 8
=9 :
TimeSpec; C
.C D
MinNegativeDurationD W
;W X
public 
TimeCalendar 
( 
) 
: 
this 
( 
new 
TimeCalendarConfig '
(' (
)( )
)) *
{ 	
} 	
public 
TimeCalendar 
( 
TimeCalendarConfig .
config/ 5
)5 6
{ 	
if 
( 
config 
. 
StartOffset "
<# $
TimeSpan% -
.- .
Zero. 2
)2 3
{   
throw!! 
new!! '
ArgumentOutOfRangeException!! 5
(!!5 6
$str!!6 >
)!!> ?
;!!? @
}"" 
if## 
(## 
config## 
.## 
	EndOffset##  
>##! "
TimeSpan### +
.##+ ,
Zero##, 0
)##0 1
{$$ 
throw%% 
new%% '
ArgumentOutOfRangeException%% 5
(%%5 6
$str%%6 >
)%%> ?
;%%? @
}&& 
culture(( 
=(( 
config(( 
.(( 
Culture(( $
??((% '
CultureInfo((( 3
.((3 4
CurrentCulture((4 B
;((B C
yearType)) 
=)) 
config)) 
.)) 
YearType)) &
.))& '
HasValue))' /
?))0 1
config))2 8
.))8 9
YearType))9 A
.))A B
Value))B G
:))H I
YearType))J R
.))R S

SystemYear))S ]
;))] ^
startOffset** 
=** 
config**  
.**  !
StartOffset**! ,
.**, -
HasValue**- 5
?**6 7
config**8 >
.**> ?
StartOffset**? J
.**J K
Value**K P
:**Q R
DefaultStartOffset**S e
;**e f
	endOffset++ 
=++ 
config++ 
.++ 
	EndOffset++ (
.++( )
HasValue++) 1
?++2 3
config++4 :
.++: ;
	EndOffset++; D
.++D E
Value++E J
:++K L
DefaultEndOffset++M ]
;++] ^
yearBaseMonth,, 
=,, 
config,, "
.,," #
YearBaseMonth,,# 0
.,,0 1
HasValue,,1 9
?,,: ;
config,,< B
.,,B C
YearBaseMonth,,C P
.,,P Q
Value,,Q V
:,,W X
TimeSpec,,Y a
.,,a b"
CalendarYearStartMonth,,b x
;,,x y
fiscalYearBaseMonth-- 
=--  !
config--" (
.--( )
FiscalYearBaseMonth--) <
.--< =
HasValue--= E
?--F G
config--H N
.--N O
FiscalYearBaseMonth--O b
.--b c
Value--c h
:--i j
TimeSpec--k s
.--s t 
FiscalYearBaseMonth	--t á
;
--á à 
fiscalFirstDayOfYear..  
=..! "
config..# )
...) * 
FiscalFirstDayOfYear..* >
...> ?
HasValue..? G
?..H I
config..J P
...P Q 
FiscalFirstDayOfYear..Q e
...e f
Value..f k
:..l m
	DayOfWeek..n w
...w x
Sunday..x ~
;..~ 
fiscalYearAlignment// 
=//  !
config//" (
.//( )
FiscalYearAlignment//) <
.//< =
HasValue//= E
?//F G
config//H N
.//N O
FiscalYearAlignment//O b
.//b c
Value//c h
://i j
FiscalYearAlignment//k ~
.//~ 
None	// É
;
//É Ñ!
fiscalQuarterGrouping00 !
=00" #
config00$ *
.00* +!
FiscalQuarterGrouping00+ @
.00@ A
HasValue00A I
?00J K
config00L R
.00R S!
FiscalQuarterGrouping00S h
.00h i
Value00i n
:00o p"
FiscalQuarterGrouping	00q Ü
.
00Ü á
FourFourFiveWeeks
00á ò
;
00ò ô
yearWeekType11 
=11 
config11 !
.11! "
YearWeekType11" .
.11. /
HasValue11/ 7
?118 9
config11: @
.11@ A
YearWeekType11A M
.11M N
Value11N S
:11T U
YearWeekType11V b
.11b c
Calendar11c k
;11k l
dayNameType22 
=22 
config22  
.22  !
DayNameType22! ,
.22, -
HasValue22- 5
?226 7
config228 >
.22> ?
DayNameType22? J
.22J K
Value22K P
:22Q R
CalendarNameType22S c
.22c d
Full22d h
;22h i
monthNameType33 
=33 
config33 "
.33" #
MonthNameType33# 0
.330 1
HasValue331 9
?33: ;
config33< B
.33B C
MonthNameType33C P
.33P Q
Value33Q V
:33W X
CalendarNameType33Y i
.33i j
Full33j n
;33n o
}44 	
public77 
CultureInfo77 
Culture77 "
{88 	
get99 
{99 
return99 
culture99  
;99  !
}99" #
}:: 	
public== 
YearType== 
YearType==  
{>> 	
get?? 
{?? 
return?? 
yearType?? !
;??! "
}??# $
}@@ 	
publicCC 
TimeSpanCC 
StartOffsetCC #
{DD 	
getEE 
{EE 
returnEE 
startOffsetEE $
;EE$ %
}EE& '
}FF 	
publicII 
TimeSpanII 
	EndOffsetII !
{JJ 	
getKK 
{KK 
returnKK 
	endOffsetKK "
;KK" #
}KK$ %
}LL 	
publicOO 
	YearMonthOO 
YearBaseMonthOO &
{PP 	
getQQ 
{QQ 
returnQQ 
yearBaseMonthQQ &
;QQ& '
}QQ( )
}RR 	
publicUU 
	YearMonthUU 
FiscalYearBaseMonthUU ,
{VV 	
getWW 
{WW 
returnWW 
fiscalYearBaseMonthWW ,
;WW, -
}WW. /
}XX 	
public[[ 
	DayOfWeek[[  
FiscalFirstDayOfYear[[ -
{\\ 	
get]] 
{]] 
return]]  
fiscalFirstDayOfYear]] -
;]]- .
}]]/ 0
}^^ 	
publicaa 
FiscalYearAlignmentaa "
FiscalYearAlignmentaa# 6
{bb 	
getcc 
{cc 
returncc 
fiscalYearAlignmentcc ,
;cc, -
}cc. /
}dd 	
publicgg !
FiscalQuarterGroupinggg $!
FiscalQuarterGroupinggg% :
{hh 	
getii 
{ii 
returnii !
fiscalQuarterGroupingii .
;ii. /
}ii0 1
}jj 	
publicmm 
virtualmm 
	DayOfWeekmm  
FirstDayOfWeekmm! /
{nn 	
getoo 
{oo 
returnoo 
cultureoo  
.oo  !
DateTimeFormatoo! /
.oo/ 0
FirstDayOfWeekoo0 >
;oo> ?
}oo@ A
}pp 	
publicss 
YearWeekTypess 
YearWeekTypess (
{tt 	
getuu 
{uu 
returnuu 
yearWeekTypeuu %
;uu% &
}uu' (
}vv 	
publicyy 
staticyy 
TimeCalendaryy "
Newyy# &
(yy& '
CultureInfoyy' 2
cultureyy3 :
)yy: ;
{zz 	
return{{ 
new{{ 
TimeCalendar{{ #
({{# $
new{{$ '
TimeCalendarConfig{{( :
{|| 
Culture}} 
=}} 
culture}} !
}~~ 
)~~ 
;~~ 
} 	
public
ÇÇ 
static
ÇÇ 
TimeCalendar
ÇÇ "
New
ÇÇ# &
(
ÇÇ& '
	YearMonth
ÇÇ' 0
yearBaseMonth
ÇÇ1 >
)
ÇÇ> ?
{
ÉÉ 	
return
ÑÑ 
new
ÑÑ 
TimeCalendar
ÑÑ #
(
ÑÑ# $
new
ÑÑ$ ' 
TimeCalendarConfig
ÑÑ( :
{
ÖÖ 
YearBaseMonth
ÜÜ 
=
ÜÜ 
yearBaseMonth
ÜÜ  -
}
áá 
)
áá 
;
áá 
}
àà 	
public
ãã 
static
ãã 
TimeCalendar
ãã "
New
ãã# &
(
ãã& '
TimeSpan
ãã' /
startOffset
ãã0 ;
,
ãã; <
TimeSpan
ãã= E
	endOffset
ããF O
)
ããO P
{
åå 	
return
çç 
new
çç 
TimeCalendar
çç #
(
çç# $
new
çç$ ' 
TimeCalendarConfig
çç( :
{
éé 
StartOffset
èè 
=
èè 
startOffset
èè )
,
èè) *
	EndOffset
êê 
=
êê 
	endOffset
êê %
}
ëë 
)
ëë 
;
ëë 
}
íí 	
public
ïï 
static
ïï 
TimeCalendar
ïï "
New
ïï# &
(
ïï& '
TimeSpan
ïï' /
startOffset
ïï0 ;
,
ïï; <
TimeSpan
ïï= E
	endOffset
ïïF O
,
ïïO P
	YearMonth
ïïQ Z
yearBaseMonth
ïï[ h
)
ïïh i
{
ññ 	
return
óó 
new
óó 
TimeCalendar
óó #
(
óó# $
new
óó$ ' 
TimeCalendarConfig
óó( :
{
òò 
StartOffset
ôô 
=
ôô 
startOffset
ôô )
,
ôô) *
	EndOffset
öö 
=
öö 
	endOffset
öö %
,
öö% &
YearBaseMonth
õõ 
=
õõ 
yearBaseMonth
õõ  -
,
õõ- .
}
úú 
)
úú 
;
úú 
}
ùù 	
public
†† 
static
†† 
TimeCalendar
†† "
New
††# &
(
††& '
CultureInfo
††' 2
culture
††3 :
,
††: ;
TimeSpan
††< D
startOffset
††E P
,
††P Q
TimeSpan
††R Z
	endOffset
††[ d
)
††d e
{
°° 	
return
¢¢ 
new
¢¢ 
TimeCalendar
¢¢ #
(
¢¢# $
new
¢¢$ ' 
TimeCalendarConfig
¢¢( :
{
££ 
Culture
§§ 
=
§§ 
culture
§§ !
,
§§! "
StartOffset
•• 
=
•• 
startOffset
•• )
,
••) *
	EndOffset
¶¶ 
=
¶¶ 
	endOffset
¶¶ %
}
ßß 
)
ßß 
;
ßß 
}
®® 	
public
´´ 
static
´´ 
TimeCalendar
´´ "
New
´´# &
(
´´& '
CultureInfo
´´' 2
culture
´´3 :
,
´´: ;
	YearMonth
´´< E
yearBaseMonth
´´F S
,
´´S T
YearWeekType
´´U a
yearWeekType
´´b n
)
´´n o
{
¨¨ 	
return
≠≠ 
new
≠≠ 
TimeCalendar
≠≠ #
(
≠≠# $
new
≠≠$ ' 
TimeCalendarConfig
≠≠( :
{
ÆÆ 
Culture
ØØ 
=
ØØ 
culture
ØØ !
,
ØØ! "
YearBaseMonth
∞∞ 
=
∞∞ 
yearBaseMonth
∞∞  -
,
∞∞- .
YearWeekType
±± 
=
±± 
yearWeekType
±± +
}
≤≤ 
)
≤≤ 
;
≤≤ 
}
≥≥ 	
public
∂∂ 
static
∂∂ 
TimeCalendar
∂∂ "
NewEmptyOffset
∂∂# 1
(
∂∂1 2
)
∂∂2 3
{
∑∑ 	
return
∏∏ 
new
∏∏ 
TimeCalendar
∏∏ #
(
∏∏# $
new
∏∏$ ' 
TimeCalendarConfig
∏∏( :
{
ππ 
StartOffset
∫∫ 
=
∫∫ 
TimeSpan
∫∫ &
.
∫∫& '
Zero
∫∫' +
,
∫∫+ ,
	EndOffset
ªª 
=
ªª 
TimeSpan
ªª $
.
ªª$ %
Zero
ªª% )
}
ºº 
)
ºº 
;
ºº 
}
ΩΩ 	
public
¿¿ 
virtual
¿¿ 
DateTime
¿¿ 
MapStart
¿¿  (
(
¿¿( )
DateTime
¿¿) 1
moment
¿¿2 8
)
¿¿8 9
{
¡¡ 	
return
¬¬ 
moment
¬¬ 
.
¬¬ 
Add
¬¬ 
(
¬¬ 
startOffset
¬¬ )
)
¬¬) *
;
¬¬* +
}
√√ 	
public
∆∆ 
virtual
∆∆ 
DateTime
∆∆ 
MapEnd
∆∆  &
(
∆∆& '
DateTime
∆∆' /
moment
∆∆0 6
)
∆∆6 7
{
«« 	
return
»» 
moment
»» 
.
»» 
Add
»» 
(
»» 
	endOffset
»» '
)
»»' (
;
»»( )
}
…… 	
public
ÃÃ 
virtual
ÃÃ 
DateTime
ÃÃ 

UnmapStart
ÃÃ  *
(
ÃÃ* +
DateTime
ÃÃ+ 3
moment
ÃÃ4 :
)
ÃÃ: ;
{
ÕÕ 	
return
ŒŒ 
moment
ŒŒ 
.
ŒŒ 
Subtract
ŒŒ "
(
ŒŒ" #
startOffset
ŒŒ# .
)
ŒŒ. /
;
ŒŒ/ 0
}
œœ 	
public
““ 
virtual
““ 
DateTime
““ 
UnmapEnd
““  (
(
““( )
DateTime
““) 1
moment
““2 8
)
““8 9
{
”” 	
return
‘‘ 
moment
‘‘ 
.
‘‘ 
Subtract
‘‘ "
(
‘‘" #
	endOffset
‘‘# ,
)
‘‘, -
;
‘‘- .
}
’’ 	
public
ÿÿ 
virtual
ÿÿ 
int
ÿÿ 
GetYear
ÿÿ "
(
ÿÿ" #
DateTime
ÿÿ# +
time
ÿÿ, 0
)
ÿÿ0 1
{
ŸŸ 	
return
⁄⁄ 
culture
⁄⁄ 
.
⁄⁄ 
Calendar
⁄⁄ #
.
⁄⁄# $
GetYear
⁄⁄$ +
(
⁄⁄+ ,
time
⁄⁄, 0
)
⁄⁄0 1
;
⁄⁄1 2
}
€€ 	
public
ﬁﬁ 
virtual
ﬁﬁ 
int
ﬁﬁ 
GetMonth
ﬁﬁ #
(
ﬁﬁ# $
DateTime
ﬁﬁ$ ,
time
ﬁﬁ- 1
)
ﬁﬁ1 2
{
ﬂﬂ 	
return
‡‡ 
culture
‡‡ 
.
‡‡ 
Calendar
‡‡ #
.
‡‡# $
GetMonth
‡‡$ ,
(
‡‡, -
time
‡‡- 1
)
‡‡1 2
;
‡‡2 3
}
·· 	
public
‰‰ 
virtual
‰‰ 
int
‰‰ 
GetHour
‰‰ "
(
‰‰" #
DateTime
‰‰# +
time
‰‰, 0
)
‰‰0 1
{
ÂÂ 	
return
ÊÊ 
culture
ÊÊ 
.
ÊÊ 
Calendar
ÊÊ #
.
ÊÊ# $
GetHour
ÊÊ$ +
(
ÊÊ+ ,
time
ÊÊ, 0
)
ÊÊ0 1
;
ÊÊ1 2
}
ÁÁ 	
public
ÍÍ 
virtual
ÍÍ 
int
ÍÍ 
	GetMinute
ÍÍ $
(
ÍÍ$ %
DateTime
ÍÍ% -
time
ÍÍ. 2
)
ÍÍ2 3
{
ÎÎ 	
return
ÏÏ 
culture
ÏÏ 
.
ÏÏ 
Calendar
ÏÏ #
.
ÏÏ# $
	GetMinute
ÏÏ$ -
(
ÏÏ- .
time
ÏÏ. 2
)
ÏÏ2 3
;
ÏÏ3 4
}
ÌÌ 	
public
 
virtual
 
int
 
GetDayOfMonth
 (
(
( )
DateTime
) 1
time
2 6
)
6 7
{
ÒÒ 	
return
ÚÚ 
culture
ÚÚ 
.
ÚÚ 
Calendar
ÚÚ #
.
ÚÚ# $
GetDayOfMonth
ÚÚ$ 1
(
ÚÚ1 2
time
ÚÚ2 6
)
ÚÚ6 7
;
ÚÚ7 8
}
ÛÛ 	
public
ˆˆ 
virtual
ˆˆ 
	DayOfWeek
ˆˆ  
GetDayOfWeek
ˆˆ! -
(
ˆˆ- .
DateTime
ˆˆ. 6
time
ˆˆ7 ;
)
ˆˆ; <
{
˜˜ 	
return
¯¯ 
culture
¯¯ 
.
¯¯ 
Calendar
¯¯ #
.
¯¯# $
GetDayOfWeek
¯¯$ 0
(
¯¯0 1
time
¯¯1 5
)
¯¯5 6
;
¯¯6 7
}
˘˘ 	
public
¸¸ 
virtual
¸¸ 
int
¸¸ 
GetDaysInMonth
¸¸ )
(
¸¸) *
int
¸¸* -
year
¸¸. 2
,
¸¸2 3
int
¸¸4 7
month
¸¸8 =
)
¸¸= >
{
˝˝ 	
return
˛˛ 
culture
˛˛ 
.
˛˛ 
Calendar
˛˛ #
.
˛˛# $
GetDaysInMonth
˛˛$ 2
(
˛˛2 3
year
˛˛3 7
,
˛˛7 8
month
˛˛9 >
)
˛˛> ?
;
˛˛? @
}
ˇˇ 	
public
ÇÇ 
int
ÇÇ 
GetYear
ÇÇ 
(
ÇÇ 
int
ÇÇ 
year
ÇÇ #
,
ÇÇ# $
int
ÇÇ% (
month
ÇÇ) .
)
ÇÇ. /
{
ÉÉ 	
if
ÑÑ 
(
ÑÑ 
YearType
ÑÑ 
==
ÑÑ 
YearType
ÑÑ $
.
ÑÑ$ %

FiscalYear
ÑÑ% /
)
ÑÑ/ 0
{
ÖÖ 
year
ÜÜ 
=
ÜÜ  
FiscalCalendarTool
ÜÜ )
.
ÜÜ) *
GetYear
ÜÜ* 1
(
ÜÜ1 2
year
ÜÜ2 6
,
ÜÜ6 7
(
ÜÜ8 9
	YearMonth
ÜÜ9 B
)
ÜÜB C
month
ÜÜC H
,
ÜÜH I
YearBaseMonth
ÜÜJ W
,
ÜÜW X!
FiscalYearBaseMonth
ÜÜY l
)
ÜÜl m
;
ÜÜm n
}
áá 
return
àà 
year
àà 
;
àà 
}
ââ 	
public
åå 
virtual
åå 
string
åå 
GetYearName
åå )
(
åå) *
int
åå* -
year
åå. 2
)
åå2 3
{
çç 	
switch
éé 
(
éé 
YearType
éé 
)
éé 
{
èè 
case
êê 
YearType
êê 
.
êê 
CalendarYear
êê *
:
êê* +
return
ëë 
Strings
ëë "
.
ëë" #
CalendarYearName
ëë# 3
(
ëë3 4
year
ëë4 8
)
ëë8 9
;
ëë9 :
case
íí 
YearType
íí 
.
íí 

FiscalYear
íí (
:
íí( )
return
ìì 
Strings
ìì "
.
ìì" #
FiscalYearName
ìì# 1
(
ìì1 2
year
ìì2 6
)
ìì6 7
;
ìì7 8
case
îî 
YearType
îî 
.
îî 

SchoolYear
îî (
:
îî( )
return
ïï 
Strings
ïï "
.
ïï" #
SchoolYearName
ïï# 1
(
ïï1 2
year
ïï2 6
)
ïï6 7
;
ïï7 8
default
ññ 
:
ññ 
return
óó 
Strings
óó "
.
óó" #
SystemYearName
óó# 1
(
óó1 2
year
óó2 6
)
óó6 7
;
óó7 8
}
òò 
}
ôô 	
public
úú 
virtual
úú 
string
úú 
GetHalfyearName
úú -
(
úú- .
YearHalfyear
úú. :
yearHalfyear
úú; G
)
úúG H
{
ùù 	
switch
ûû 
(
ûû 
YearType
ûû 
)
ûû 
{
üü 
case
†† 
YearType
†† 
.
†† 
CalendarYear
†† *
:
††* +
return
°° 
Strings
°° "
.
°°" #"
CalendarHalfyearName
°°# 7
(
°°7 8
yearHalfyear
°°8 D
)
°°D E
;
°°E F
case
¢¢ 
YearType
¢¢ 
.
¢¢ 

FiscalYear
¢¢ (
:
¢¢( )
return
££ 
Strings
££ "
.
££" # 
FiscalHalfyearName
££# 5
(
££5 6
yearHalfyear
££6 B
)
££B C
;
££C D
case
§§ 
YearType
§§ 
.
§§ 

SchoolYear
§§ (
:
§§( )
return
•• 
Strings
•• "
.
••" # 
SchoolHalfyearName
••# 5
(
••5 6
yearHalfyear
••6 B
)
••B C
;
••C D
default
¶¶ 
:
¶¶ 
return
ßß 
Strings
ßß "
.
ßß" # 
SystemHalfyearName
ßß# 5
(
ßß5 6
yearHalfyear
ßß6 B
)
ßßB C
;
ßßC D
}
®® 
}
©© 	
public
¨¨ 
virtual
¨¨ 
string
¨¨ #
GetHalfyearOfYearName
¨¨ 3
(
¨¨3 4
int
¨¨4 7
year
¨¨8 <
,
¨¨< =
YearHalfyear
¨¨> J
yearHalfyear
¨¨K W
)
¨¨W X
{
≠≠ 	
switch
ÆÆ 
(
ÆÆ 
YearType
ÆÆ 
)
ÆÆ 
{
ØØ 
case
∞∞ 
YearType
∞∞ 
.
∞∞ 
CalendarYear
∞∞ *
:
∞∞* +
return
±± 
Strings
±± "
.
±±" #(
CalendarHalfyearOfYearName
±±# =
(
±±= >
yearHalfyear
±±> J
,
±±J K
year
±±L P
)
±±P Q
;
±±Q R
case
≤≤ 
YearType
≤≤ 
.
≤≤ 

FiscalYear
≤≤ (
:
≤≤( )
return
≥≥ 
Strings
≥≥ "
.
≥≥" #&
FiscalHalfyearOfYearName
≥≥# ;
(
≥≥; <
yearHalfyear
≥≥< H
,
≥≥H I
year
≥≥J N
)
≥≥N O
;
≥≥O P
case
¥¥ 
YearType
¥¥ 
.
¥¥ 

SchoolYear
¥¥ (
:
¥¥( )
return
µµ 
Strings
µµ "
.
µµ" #&
SchoolHalfyearOfYearName
µµ# ;
(
µµ; <
yearHalfyear
µµ< H
,
µµH I
year
µµJ N
)
µµN O
;
µµO P
default
∂∂ 
:
∂∂ 
return
∑∑ 
Strings
∑∑ "
.
∑∑" #&
SystemHalfyearOfYearName
∑∑# ;
(
∑∑; <
yearHalfyear
∑∑< H
,
∑∑H I
year
∑∑J N
)
∑∑N O
;
∑∑O P
}
∏∏ 
}
ππ 	
public
ºº 
virtual
ºº 
string
ºº 
GetQuarterName
ºº ,
(
ºº, -
YearQuarter
ºº- 8
yearQuarter
ºº9 D
)
ººD E
{
ΩΩ 	
switch
ææ 
(
ææ 
YearType
ææ 
)
ææ 
{
øø 
case
¿¿ 
YearType
¿¿ 
.
¿¿ 
CalendarYear
¿¿ *
:
¿¿* +
return
¡¡ 
Strings
¡¡ "
.
¡¡" #!
CalendarQuarterName
¡¡# 6
(
¡¡6 7
yearQuarter
¡¡7 B
)
¡¡B C
;
¡¡C D
case
¬¬ 
YearType
¬¬ 
.
¬¬ 

FiscalYear
¬¬ (
:
¬¬( )
return
√√ 
Strings
√√ "
.
√√" #
FiscalQuarterName
√√# 4
(
√√4 5
yearQuarter
√√5 @
)
√√@ A
;
√√A B
case
ƒƒ 
YearType
ƒƒ 
.
ƒƒ 

SchoolYear
ƒƒ (
:
ƒƒ( )
return
≈≈ 
Strings
≈≈ "
.
≈≈" #
SchoolQuarterName
≈≈# 4
(
≈≈4 5
yearQuarter
≈≈5 @
)
≈≈@ A
;
≈≈A B
default
∆∆ 
:
∆∆ 
return
«« 
Strings
«« "
.
««" #
SystemQuarterName
««# 4
(
««4 5
yearQuarter
««5 @
)
««@ A
;
««A B
}
»» 
}
…… 	
public
ÃÃ 
virtual
ÃÃ 
string
ÃÃ "
GetQuarterOfYearName
ÃÃ 2
(
ÃÃ2 3
int
ÃÃ3 6
year
ÃÃ7 ;
,
ÃÃ; <
YearQuarter
ÃÃ= H
yearQuarter
ÃÃI T
)
ÃÃT U
{
ÕÕ 	
switch
ŒŒ 
(
ŒŒ 
YearType
ŒŒ 
)
ŒŒ 
{
œœ 
case
–– 
YearType
–– 
.
–– 
CalendarYear
–– *
:
––* +
return
—— 
Strings
—— "
.
——" #'
CalendarQuarterOfYearName
——# <
(
——< =
yearQuarter
——= H
,
——H I
year
——J N
)
——N O
;
——O P
case
““ 
YearType
““ 
.
““ 

FiscalYear
““ (
:
““( )
return
”” 
Strings
”” "
.
””" #%
FiscalQuarterOfYearName
””# :
(
””: ;
yearQuarter
””; F
,
””F G
year
””H L
)
””L M
;
””M N
case
‘‘ 
YearType
‘‘ 
.
‘‘ 

SchoolYear
‘‘ (
:
‘‘( )
return
’’ 
Strings
’’ "
.
’’" #%
SchoolQuarterOfYearName
’’# :
(
’’: ;
yearQuarter
’’; F
,
’’F G
year
’’H L
)
’’L M
;
’’M N
default
÷÷ 
:
÷÷ 
return
◊◊ 
Strings
◊◊ "
.
◊◊" #%
SystemQuarterOfYearName
◊◊# :
(
◊◊: ;
yearQuarter
◊◊; F
,
◊◊F G
year
◊◊H L
)
◊◊L M
;
◊◊M N
}
ÿÿ 
}
ŸŸ 	
public
‹‹ 
virtual
‹‹ 
string
‹‹ 
GetMonthName
‹‹ *
(
‹‹* +
int
‹‹+ .
month
‹‹/ 4
)
‹‹4 5
{
›› 	
switch
ﬁﬁ 
(
ﬁﬁ 
monthNameType
ﬁﬁ !
)
ﬁﬁ! "
{
ﬂﬂ 
case
‡‡ 
CalendarNameType
‡‡ %
.
‡‡% &
Abbreviated
‡‡& 1
:
‡‡1 2
return
·· 
culture
·· "
.
··" #
DateTimeFormat
··# 1
.
··1 2%
GetAbbreviatedMonthName
··2 I
(
··I J
month
··J O
)
··O P
;
··P Q
default
‚‚ 
:
‚‚ 
return
„„ 
culture
„„ "
.
„„" #
DateTimeFormat
„„# 1
.
„„1 2
GetMonthName
„„2 >
(
„„> ?
month
„„? D
)
„„D E
;
„„E F
}
‰‰ 
}
ÂÂ 	
public
ËË 
virtual
ËË 
string
ËË  
GetMonthOfYearName
ËË 0
(
ËË0 1
int
ËË1 4
year
ËË5 9
,
ËË9 :
int
ËË; >
month
ËË? D
)
ËËD E
{
ÈÈ 	
return
ÍÍ 
Strings
ÍÍ 
.
ÍÍ 
MonthOfYearName
ÍÍ *
(
ÍÍ* +
GetMonthName
ÍÍ+ 7
(
ÍÍ7 8
month
ÍÍ8 =
)
ÍÍ= >
,
ÍÍ> ?
GetYearName
ÍÍ@ K
(
ÍÍK L
year
ÍÍL P
)
ÍÍP Q
)
ÍÍQ R
;
ÍÍR S
}
ÎÎ 	
public
ÓÓ 
virtual
ÓÓ 
string
ÓÓ 
GetWeekOfYearName
ÓÓ /
(
ÓÓ/ 0
int
ÓÓ0 3
year
ÓÓ4 8
,
ÓÓ8 9
int
ÓÓ: =

weekOfYear
ÓÓ> H
)
ÓÓH I
{
ÔÔ 	
return
 
Strings
 
.
 
WeekOfYearName
 )
(
) *

weekOfYear
* 4
,
4 5
GetYearName
6 A
(
A B
year
B F
)
F G
)
G H
;
H I
}
ÒÒ 	
public
ÙÙ 
virtual
ÙÙ 
string
ÙÙ 

GetDayName
ÙÙ (
(
ÙÙ( )
	DayOfWeek
ÙÙ) 2
	dayOfWeek
ÙÙ3 <
)
ÙÙ< =
{
ıı 	
switch
ˆˆ 
(
ˆˆ 
dayNameType
ˆˆ 
)
ˆˆ  
{
˜˜ 
case
¯¯ 
CalendarNameType
¯¯ %
.
¯¯% &
Abbreviated
¯¯& 1
:
¯¯1 2
return
˘˘ 
culture
˘˘ "
.
˘˘" #
DateTimeFormat
˘˘# 1
.
˘˘1 2#
GetAbbreviatedDayName
˘˘2 G
(
˘˘G H
	dayOfWeek
˘˘H Q
)
˘˘Q R
;
˘˘R S
default
˙˙ 
:
˙˙ 
return
˚˚ 
culture
˚˚ "
.
˚˚" #
DateTimeFormat
˚˚# 1
.
˚˚1 2

GetDayName
˚˚2 <
(
˚˚< =
	dayOfWeek
˚˚= F
)
˚˚F G
;
˚˚G H
}
¸¸ 
}
˝˝ 	
public
ÄÄ 
virtual
ÄÄ 
int
ÄÄ 
GetWeekOfYear
ÄÄ (
(
ÄÄ( )
DateTime
ÄÄ) 1
time
ÄÄ2 6
)
ÄÄ6 7
{
ÅÅ 	
int
ÇÇ 
year
ÇÇ 
;
ÇÇ 
int
ÉÉ 

weekOfYear
ÉÉ 
;
ÉÉ 
TimeTool
ÑÑ 
.
ÑÑ 
GetWeekOfYear
ÑÑ "
(
ÑÑ" #
time
ÑÑ# '
,
ÑÑ' (
culture
ÑÑ) 0
,
ÑÑ0 1
yearWeekType
ÑÑ2 >
,
ÑÑ> ?
out
ÑÑ@ C
year
ÑÑD H
,
ÑÑH I
out
ÑÑJ M

weekOfYear
ÑÑN X
)
ÑÑX Y
;
ÑÑY Z
return
ÖÖ 

weekOfYear
ÖÖ 
;
ÖÖ 
}
ÜÜ 	
public
ââ 
virtual
ââ 
DateTime
ââ  
GetStartOfYearWeek
ââ  2
(
ââ2 3
int
ââ3 6
year
ââ7 ;
,
ââ; <
int
ââ= @

weekOfYear
ââA K
)
ââK L
{
ää 	
return
ãã 
TimeTool
ãã 
.
ãã  
GetStartOfYearWeek
ãã .
(
ãã. /
year
ãã/ 3
,
ãã3 4

weekOfYear
ãã5 ?
,
ãã? @
culture
ããA H
,
ããH I
yearWeekType
ããJ V
)
ããV W
;
ããW X
}
åå 	
public
èè 
sealed
èè 
override
èè 
bool
èè #
Equals
èè$ *
(
èè* +
object
èè+ 1
obj
èè2 5
)
èè5 6
{
êê 	
if
ëë 
(
ëë 
obj
ëë 
==
ëë 
this
ëë 
)
ëë 
{
íí 
return
ìì 
true
ìì 
;
ìì 
}
îî 
if
ïï 
(
ïï 
obj
ïï 
==
ïï 
null
ïï 
||
ïï 
GetType
ïï &
(
ïï& '
)
ïï' (
!=
ïï) +
obj
ïï, /
.
ïï/ 0
GetType
ïï0 7
(
ïï7 8
)
ïï8 9
)
ïï9 :
{
ññ 
return
óó 
false
óó 
;
óó 
}
òò 
return
ôô 
IsEqual
ôô 
(
ôô 
obj
ôô 
)
ôô 
;
ôô  
}
öö 	
	protected
ùù 
virtual
ùù 
bool
ùù 
IsEqual
ùù &
(
ùù& '
object
ùù' -
obj
ùù. 1
)
ùù1 2
{
ûû 	
return
üü 
HasSameData
üü 
(
üü 
obj
üü "
as
üü# %
TimeCalendar
üü& 2
)
üü2 3
;
üü3 4
}
†† 	
private
££ 
bool
££ 
HasSameData
££  
(
££  !
TimeCalendar
££! -
comp
££. 2
)
££2 3
{
§§ 	
return
•• 
culture
•• 
.
•• 
Equals
•• !
(
••! "
comp
••" &
.
••& '
culture
••' .
)
••. /
&&
••0 2
startOffset
¶¶ 
==
¶¶ 
comp
¶¶ #
.
¶¶# $
startOffset
¶¶$ /
&&
¶¶0 2
	endOffset
ßß 
==
ßß 
comp
ßß !
.
ßß! "
	endOffset
ßß" +
&&
ßß, .
yearBaseMonth
®® 
==
®®  
comp
®®! %
.
®®% &
yearBaseMonth
®®& 3
&&
®®4 6!
fiscalYearBaseMonth
©© #
==
©©$ &
comp
©©' +
.
©©+ ,!
fiscalYearBaseMonth
©©, ?
&&
©©@ B
yearWeekType
™™ 
==
™™ 
comp
™™  $
.
™™$ %
yearWeekType
™™% 1
&&
™™2 4
dayNameType
´´ 
==
´´ 
comp
´´ #
.
´´# $
dayNameType
´´$ /
&&
´´0 2
monthNameType
¨¨ 
==
¨¨  
comp
¨¨! %
.
¨¨% &
monthNameType
¨¨& 3
;
¨¨3 4
}
≠≠ 	
public
∞∞ 
sealed
∞∞ 
override
∞∞ 
int
∞∞ "
GetHashCode
∞∞# .
(
∞∞. /
)
∞∞/ 0
{
±± 	
return
≤≤ 
HashTool
≤≤ 
.
≤≤ 
AddHashCode
≤≤ '
(
≤≤' (
GetType
≤≤( /
(
≤≤/ 0
)
≤≤0 1
.
≤≤1 2
GetHashCode
≤≤2 =
(
≤≤= >
)
≤≤> ?
,
≤≤? @
ComputeHashCode
≤≤A P
(
≤≤P Q
)
≤≤Q R
)
≤≤R S
;
≤≤S T
}
≥≥ 	
	protected
∂∂ 
virtual
∂∂ 
int
∂∂ 
ComputeHashCode
∂∂ -
(
∂∂- .
)
∂∂. /
{
∑∑ 	
return
∏∏ 
HashTool
∏∏ 
.
∏∏ 
ComputeHashCode
∏∏ +
(
∏∏+ ,
culture
ππ 
,
ππ 
startOffset
∫∫ 
,
∫∫ 
	endOffset
ªª 
,
ªª 
yearBaseMonth
ºº 
,
ºº !
fiscalYearBaseMonth
ΩΩ #
,
ΩΩ# $"
fiscalFirstDayOfYear
ææ $
,
ææ$ %!
fiscalYearAlignment
øø #
,
øø# $#
fiscalQuarterGrouping
¿¿ %
,
¿¿% &
yearWeekType
¡¡ 
,
¡¡ 
dayNameType
¬¬ 
,
¬¬ 
monthNameType
√√ 
)
√√ 
;
√√ 
}
ƒƒ 	
private
»» 
readonly
»» 
CultureInfo
»» $
culture
»»% ,
;
»», -
private
…… 
readonly
…… 
YearType
…… !
yearType
……" *
;
……* +
private
   
readonly
   
TimeSpan
   !
startOffset
  " -
;
  - .
private
ÀÀ 
readonly
ÀÀ 
TimeSpan
ÀÀ !
	endOffset
ÀÀ" +
;
ÀÀ+ ,
private
ÃÃ 
readonly
ÃÃ 
	YearMonth
ÃÃ "
yearBaseMonth
ÃÃ# 0
;
ÃÃ0 1
private
ÕÕ 
readonly
ÕÕ 
	YearMonth
ÕÕ "!
fiscalYearBaseMonth
ÕÕ# 6
;
ÕÕ6 7
private
ŒŒ 
readonly
ŒŒ 
	DayOfWeek
ŒŒ ""
fiscalFirstDayOfYear
ŒŒ# 7
;
ŒŒ7 8
private
œœ 
readonly
œœ !
FiscalYearAlignment
œœ ,!
fiscalYearAlignment
œœ- @
;
œœ@ A
private
–– 
readonly
–– #
FiscalQuarterGrouping
–– .#
fiscalQuarterGrouping
––/ D
;
––D E
private
—— 
readonly
—— 
YearWeekType
—— %
yearWeekType
——& 2
;
——2 3
private
““ 
readonly
““ 
CalendarNameType
““ )
dayNameType
““* 5
;
““5 6
private
”” 
readonly
”” 
CalendarNameType
”” )
monthNameType
””* 7
;
””7 8
}
’’ 
}◊◊ Ò
sF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\TimeCalendarConfig.cs
	namespace 	
Phoenix
 
. 
CrossCutting 
. 

TimePeriod )
{ 
public 

struct 
TimeCalendarConfig $
{ 
public 
CultureInfo 
Culture "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
YearType 
? 
YearType !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
TimeSpan 
? 
StartOffset $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
TimeSpan 
? 
	EndOffset "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
	YearMonth 
? 
YearBaseMonth '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public"" 
	YearMonth"" 
?"" 
FiscalYearBaseMonth"" -
{"". /
get""0 3
;""3 4
set""5 8
;""8 9
}"": ;
public%% 
	DayOfWeek%% 
?%%  
FiscalFirstDayOfYear%% .
{%%/ 0
get%%1 4
;%%4 5
set%%6 9
;%%9 :
}%%; <
public(( 
FiscalYearAlignment(( "
?((" #
FiscalYearAlignment(($ 7
{((8 9
get((: =
;((= >
set((? B
;((B C
}((D E
public++ !
FiscalQuarterGrouping++ $
?++$ %!
FiscalQuarterGrouping++& ;
{++< =
get++> A
;++A B
set++C F
;++F G
}++H I
public.. 
YearWeekType.. 
?.. 
YearWeekType.. )
{..* +
get.., /
;../ 0
set..1 4
;..4 5
}..6 7
public11 
CalendarNameType11 
?11  
DayNameType11! ,
{11- .
get11/ 2
;112 3
set114 7
;117 8
}119 :
public44 
CalendarNameType44 
?44  
MonthNameType44! .
{44/ 0
get441 4
;444 5
set446 9
;449 :
}44; <
}66 
}88 ºU
lF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\TimeCompare.cs
	namespace 	
Phoenix
 
. 
CrossCutting 
. 

TimePeriod )
{ 
public 

static 
class 
TimeCompare #
{ 
public 
static 
bool 

IsSameYear %
(% &
DateTime& .
left/ 3
,3 4
DateTime5 =
right> C
)C D
{ 	
return 
left 
. 
Year 
== 
right  %
.% &
Year& *
;* +
} 	
public 
static 
bool 

IsSameYear %
(% &
	YearMonth& /
yearStartMonth0 >
,> ?
DateTime@ H
leftI M
,M N
DateTimeO W
rightX ]
)] ^
{ 	
return 
TimeTool 
. 
	GetYearOf %
(% &
yearStartMonth& 4
,4 5
left6 :
): ;
==< >
TimeTool? G
.G H
	GetYearOfH Q
(Q R
yearStartMonthR `
,` a
rightb g
)g h
;h i
} 	
public%% 
static%% 
bool%% 
IsSameHalfyear%% )
(%%) *
DateTime%%* 2
left%%3 7
,%%7 8
DateTime%%9 A
right%%B G
)%%G H
{&& 	
return'' 
IsSameHalfyear'' !
(''! "
TimeSpec''" *
.''* +"
CalendarYearStartMonth''+ A
,''A B
left''C G
,''G H
right''I N
)''N O
;''O P
}(( 	
public++ 
static++ 
bool++ 
IsSameHalfyear++ )
(++) *
	YearMonth++* 3
yearStartMonth++4 B
,++B C
DateTime++D L
left++M Q
,++Q R
DateTime++S [
right++\ a
)++a b
{,, 	
int-- 
leftYear-- 
=-- 
TimeTool-- #
.--# $
	GetYearOf--$ -
(--- .
yearStartMonth--. <
,--< =
left--> B
)--B C
;--C D
int.. 
	rightYear.. 
=.. 
TimeTool.. $
...$ %
	GetYearOf..% .
(... /
yearStartMonth../ =
,..= >
right..? D
)..D E
;..E F
if// 
(// 
leftYear// 
!=// 
	rightYear// %
)//% &
{00 
return11 
false11 
;11 
}22 
return44 
TimeTool44 
.44 
GetHalfyearOfMonth44 .
(44. /
yearStartMonth44/ =
,44= >
(44? @
	YearMonth44@ I
)44I J
left44J N
.44N O
Month44O T
)44T U
==44V X
TimeTool44Y a
.44a b
GetHalfyearOfMonth44b t
(44t u
yearStartMonth	44u É
,
44É Ñ
(
44Ö Ü
	YearMonth
44Ü è
)
44è ê
right
44ê ï
.
44ï ñ
Month
44ñ õ
)
44õ ú
;
44ú ù
}55 	
public<< 
static<< 
bool<< 
IsSameQuarter<< (
(<<( )
DateTime<<) 1
left<<2 6
,<<6 7
DateTime<<8 @
right<<A F
)<<F G
{== 	
return>> 
IsSameQuarter>>  
(>>  !
TimeSpec>>! )
.>>) *"
CalendarYearStartMonth>>* @
,>>@ A
left>>B F
,>>F G
right>>H M
)>>M N
;>>N O
}?? 	
publicBB 
staticBB 
boolBB 
IsSameQuarterBB (
(BB( )
	YearMonthBB) 2
yearStartMonthBB3 A
,BBA B
DateTimeBBC K
leftBBL P
,BBP Q
DateTimeBBR Z
rightBB[ `
)BB` a
{CC 	
intDD 
leftYearDD 
=DD 
TimeToolDD #
.DD# $
	GetYearOfDD$ -
(DD- .
yearStartMonthDD. <
,DD< =
leftDD> B
)DDB C
;DDC D
intEE 
	rightYearEE 
=EE 
TimeToolEE $
.EE$ %
	GetYearOfEE% .
(EE. /
yearStartMonthEE/ =
,EE= >
rightEE? D
)EED E
;EEE F
ifFF 
(FF 
leftYearFF 
!=FF 
	rightYearFF %
)FF% &
{GG 
returnHH 
falseHH 
;HH 
}II 
returnKK 
TimeToolKK 
.KK 
GetQuarterOfMonthKK -
(KK- .
yearStartMonthKK. <
,KK< =
(KK> ?
	YearMonthKK? H
)KKH I
leftKKI M
.KKM N
MonthKKN S
)KKS T
==KKU W
TimeToolKKX `
.KK` a
GetQuarterOfMonthKKa r
(KKr s
yearStartMonth	KKs Å
,
KKÅ Ç
(
KKÉ Ñ
	YearMonth
KKÑ ç
)
KKç é
right
KKé ì
.
KKì î
Month
KKî ô
)
KKô ö
;
KKö õ
}LL 	
publicSS 
staticSS 
boolSS 
IsSameMonthSS &
(SS& '
DateTimeSS' /
leftSS0 4
,SS4 5
DateTimeSS6 >
rightSS? D
)SSD E
{TT 	
returnUU 

IsSameYearUU 
(UU 
leftUU "
,UU" #
rightUU$ )
)UU) *
&&UU+ -
leftUU. 2
.UU2 3
MonthUU3 8
==UU9 ;
rightUU< A
.UUA B
MonthUUB G
;UUG H
}VV 	
public]] 
static]] 
bool]] 

IsSameWeek]] %
(]]% &
DateTime]]& .
left]]/ 3
,]]3 4
DateTime]]5 =
right]]> C
,]]C D
CultureInfo]]E P
culture]]Q X
,]]X Y
YearWeekType]]Z f
weekType]]g o
)]]o p
{^^ 	
return__ 

IsSameWeek__ 
(__ 
left__ "
,__" #
right__$ )
,__) *
culture__+ 2
,__2 3
culture__4 ;
.__; <
DateTimeFormat__< J
.__J K
CalendarWeekRule__K [
,__[ \
culture__] d
.__d e
DateTimeFormat__e s
.__s t
FirstDayOfWeek	__t Ç
,
__Ç É
weekType
__Ñ å
)
__å ç
;
__ç é
}`` 	
publiccc 
staticcc 
boolcc 

IsSameWeekcc %
(cc% &
DateTimecc& .
leftcc/ 3
,cc3 4
DateTimecc5 =
rightcc> C
,ccC D
CultureInfoccE P
cultureccQ X
,ccX Y
CalendarWeekRuledd 
weekRuledd %
,dd% &
	DayOfWeekdd' 0
firstDayOfWeekdd1 ?
,dd? @
YearWeekTypeddA M
weekTypeddN V
)ddV W
{ee 	
ifff 
(ff 
cultureff 
==ff 
nullff 
)ff  
{gg 
throwhh 
newhh !
ArgumentNullExceptionhh /
(hh/ 0
$strhh0 9
)hh9 :
;hh: ;
}ii 
intll 
leftWeekOfYearll 
;ll 
intmm 
leftYearmm 
;mm 
TimeToolnn 
.nn 
GetWeekOfYearnn "
(nn" #
leftnn# '
,nn' (
culturenn) 0
,nn0 1
weekRulenn2 :
,nn: ;
firstDayOfWeeknn< J
,nnJ K
weekTypennL T
,nnT U
outnnV Y
leftYearnnZ b
,nnb c
outnnd g
leftWeekOfYearnnh v
)nnv w
;nnw x
intqq 
rightWeekOfYearqq 
;qq  
intrr 
	rightYearrr 
;rr 
TimeToolss 
.ss 
GetWeekOfYearss "
(ss" #
rightss# (
,ss( )
culturess* 1
,ss1 2
weekRuless3 ;
,ss; <
firstDayOfWeekss= K
,ssK L
weekTypessM U
,ssU V
outssW Z
	rightYearss[ d
,ssd e
outssf i
rightWeekOfYearssj y
)ssy z
;ssz {
returnuu 
leftYearuu 
==uu 
	rightYearuu (
&&uu) +
leftWeekOfYearuu, :
==uu; =
rightWeekOfYearuu> M
;uuM N
}vv 	
public}} 
static}} 
bool}} 
	IsSameDay}} $
(}}$ %
DateTime}}% -
left}}. 2
,}}2 3
DateTime}}4 <
right}}= B
)}}B C
{~~ 	
return 
IsSameMonth 
( 
left #
,# $
right% *
)* +
&&, .
left/ 3
.3 4
Day4 7
==8 :
right; @
.@ A
DayA D
;D E
}
ÄÄ 	
public
áá 
static
áá 
bool
áá 

IsSameHour
áá %
(
áá% &
DateTime
áá& .
left
áá/ 3
,
áá3 4
DateTime
áá5 =
right
áá> C
)
ááC D
{
àà 	
return
ââ 
	IsSameDay
ââ 
(
ââ 
left
ââ !
,
ââ! "
right
ââ# (
)
ââ( )
&&
ââ* ,
left
ââ- 1
.
ââ1 2
Hour
ââ2 6
==
ââ7 9
right
ââ: ?
.
ââ? @
Hour
ââ@ D
;
ââD E
}
ää 	
public
ëë 
static
ëë 
bool
ëë 
IsSameMinute
ëë '
(
ëë' (
DateTime
ëë( 0
left
ëë1 5
,
ëë5 6
DateTime
ëë7 ?
right
ëë@ E
)
ëëE F
{
íí 	
return
ìì 

IsSameHour
ìì 
(
ìì 
left
ìì "
,
ìì" #
right
ìì$ )
)
ìì) *
&&
ìì+ -
left
ìì. 2
.
ìì2 3
Minute
ìì3 9
==
ìì: <
right
ìì= B
.
ììB C
Minute
ììC I
;
ììI J
}
îî 	
public
õõ 
static
õõ 
bool
õõ 
IsSameSecond
õõ '
(
õõ' (
DateTime
õõ( 0
left
õõ1 5
,
õõ5 6
DateTime
õõ7 ?
right
õõ@ E
)
õõE F
{
úú 	
return
ùù 
IsSameMinute
ùù 
(
ùù  
left
ùù  $
,
ùù$ %
right
ùù& +
)
ùù+ ,
&&
ùù- /
left
ùù0 4
.
ùù4 5
Second
ùù5 ;
==
ùù< >
right
ùù? D
.
ùùD E
Second
ùùE K
;
ùùK L
}
ûû 	
}
¢¢ 
}§§ ¶œ
nF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\TimeFormatter.cs
	namespace 	
Phoenix
 
. 
CrossCutting 
. 

TimePeriod )
{ 
public 

class 
TimeFormatter 
:  
ITimeFormatter! /
{ 
public 
TimeFormatter 
( 
) 
:  
this 
( 
CultureInfo 
. 
CurrentCulture +
)+ ,
{ 	
} 	
public 
TimeFormatter 
( 
CultureInfo (
culture) 0
=1 2
null3 7
,7 8
string 
contextSeparator #
=$ %
$str& *
,* +
string, 2
startEndSeparator3 D
=E F
$strG L
,L M
string 
durationSeparator $
=% &
$str' ,
,, -
string 
dateTimeFormat !
=" #
null$ (
,( )
string 
shortDateFormat "
=# $
null% )
,) *
string 
longTimeFormat !
=" #
null$ (
,( )
string   
shortTimeFormat   "
=  # $
null  % )
,  ) *
DurationFormatType!! 
durationType!! +
=!!, -
DurationFormatType!!. @
.!!@ A
Compact!!A H
,!!H I
bool"" 
useDurationSeconds"" #
=""$ %
false""& +
,""+ ,
bool## "
useIsoIntervalNotation## '
=##( )
false##* /
,##/ 0
string$$ !
durationItemSeparator$$ (
=$$) *
$str$$+ .
,$$. /
string%% %
durationLastItemSeparator%% ,
=%%- .
$str%%/ 2
,%%2 3
string&& "
durationValueSeparator&& )
=&&* +
$str&&, /
,&&/ 0
string'' 
intervalStartClosed'' &
=''' (
$str'') ,
,'', -
string(( 
intervalStartOpen(( $
=((% &
$str((' *
,((* +
string))  
intervalStartOpenIso)) '
=))( )
$str))* -
,))- .
string** 
intervalEndClosed** $
=**% &
$str**' *
,*** +
string++ 
intervalEndOpen++ "
=++# $
$str++% (
,++( )
string,, 
intervalEndOpenIso,, %
=,,& '
$str,,( +
),,+ ,
{-- 	
if.. 
(.. 
culture.. 
==.. 
null.. 
)..  
{// 
culture00 
=00 
CultureInfo00 %
.00% &
CurrentCulture00& 4
;004 5
}11 
this22 
.22 
culture22 
=22 
culture22 "
;22" #
listSeparator33 
=33 
culture33 #
.33# $
TextInfo33$ ,
.33, -
ListSeparator33- :
;33: ;
this44 
.44 
contextSeparator44 !
=44" #
contextSeparator44$ 4
;444 5
this55 
.55 
startEndSeparator55 "
=55# $
startEndSeparator55% 6
;556 7
this66 
.66 
durationSeparator66 "
=66# $
durationSeparator66% 6
;666 7
this77 
.77 !
durationItemSeparator77 &
=77' (!
durationItemSeparator77) >
;77> ?
this88 
.88 %
durationLastItemSeparator88 *
=88+ ,%
durationLastItemSeparator88- F
;88F G
this99 
.99 "
durationValueSeparator99 '
=99( )"
durationValueSeparator99* @
;99@ A
this:: 
.:: 
intervalStartClosed:: $
=::% &
intervalStartClosed::' :
;::: ;
this;; 
.;; 
intervalStartOpen;; "
=;;# $
intervalStartOpen;;% 6
;;;6 7
this<< 
.<<  
intervalStartOpenIso<< %
=<<& ' 
intervalStartOpenIso<<( <
;<<< =
this== 
.== 
intervalEndClosed== "
===# $
intervalEndClosed==% 6
;==6 7
this>> 
.>> 
intervalEndOpen>>  
=>>! "
intervalEndOpen>># 2
;>>2 3
this?? 
.?? 
intervalEndOpenIso?? #
=??$ %
intervalEndOpenIso??& 8
;??8 9
this@@ 
.@@ 
dateTimeFormat@@ 
=@@  !
dateTimeFormat@@" 0
;@@0 1
thisAA 
.AA 
shortDateFormatAA  
=AA! "
shortDateFormatAA# 2
;AA2 3
thisBB 
.BB 
longTimeFormatBB 
=BB  !
longTimeFormatBB" 0
;BB0 1
thisCC 
.CC 
shortTimeFormatCC  
=CC! "
shortTimeFormatCC# 2
;CC2 3
thisDD 
.DD 
durationTypeDD 
=DD 
durationTypeDD  ,
;DD, -
thisEE 
.EE 
useDurationSecondsEE #
=EE$ %
useDurationSecondsEE& 8
;EE8 9
thisFF 
.FF "
useIsoIntervalNotationFF '
=FF( )"
useIsoIntervalNotationFF* @
;FF@ A
}GG 	
publicJJ 
staticJJ 
TimeFormatterJJ #
InstanceJJ$ ,
{KK 	
getLL 
{MM 
ifNN 
(NN 
instanceNN 
==NN 
nullNN  $
)NN$ %
{OO 
lockPP 
(PP 
mutexPP 
)PP  
{QQ 
ifRR 
(RR 
instanceRR $
==RR% '
nullRR( ,
)RR, -
{SS 
instanceTT $
=TT% &
newTT' *
TimeFormatterTT+ 8
(TT8 9
)TT9 :
;TT: ;
}UU 
}VV 
}WW 
returnXX 
instanceXX 
;XX  
}YY 
setZZ 
{[[ 
if\\ 
(\\ 
value\\ 
==\\ 
null\\ !
)\\! "
{]] 
throw^^ 
new^^ !
ArgumentNullException^^ 3
(^^3 4
$str^^4 ;
)^^; <
;^^< =
}__ 
lock`` 
(`` 
mutex`` 
)`` 
{aa 
instancebb 
=bb 
valuebb $
;bb$ %
}cc 
}dd 
}ee 	
publichh 
CultureInfohh 
Culturehh "
{ii 	
getjj 
{jj 
returnjj 
culturejj  
;jj  !
}jj" #
}kk 	
publicnn 
stringnn 
ListSeparatornn #
{oo 	
getpp 
{pp 
returnpp 
listSeparatorpp &
;pp& '
}pp( )
}qq 	
publictt 
stringtt 
ContextSeparatortt &
{uu 	
getvv 
{vv 
returnvv 
contextSeparatorvv )
;vv) *
}vv+ ,
}ww 	
publiczz 
stringzz 
StartEndSeparatorzz '
{{{ 	
get|| 
{|| 
return|| 
startEndSeparator|| *
;||* +
}||, -
}}} 	
public
ÄÄ 
string
ÄÄ 
DurationSeparator
ÄÄ '
{
ÅÅ 	
get
ÇÇ 
{
ÇÇ 
return
ÇÇ 
durationSeparator
ÇÇ *
;
ÇÇ* +
}
ÇÇ, -
}
ÉÉ 	
public
ÜÜ 
string
ÜÜ #
DurationItemSeparator
ÜÜ +
{
áá 	
get
àà 
{
àà 
return
àà #
durationItemSeparator
àà .
;
àà. /
}
àà0 1
}
ââ 	
public
åå 
string
åå '
DurationLastItemSeparator
åå /
{
çç 	
get
éé 
{
éé 
return
éé '
durationLastItemSeparator
éé 2
;
éé2 3
}
éé4 5
}
èè 	
public
íí 
string
íí $
DurationValueSeparator
íí ,
{
ìì 	
get
îî 
{
îî 
return
îî $
durationValueSeparator
îî /
;
îî/ 0
}
îî1 2
}
ïï 	
public
òò 
string
òò !
IntervalStartClosed
òò )
{
ôô 	
get
öö 
{
öö 
return
öö !
intervalStartClosed
öö ,
;
öö, -
}
öö. /
}
õõ 	
public
ûû 
string
ûû 
IntervalStartOpen
ûû '
{
üü 	
get
†† 
{
†† 
return
†† 
intervalStartOpen
†† *
;
††* +
}
††, -
}
°° 	
public
§§ 
string
§§ "
IntervalStartOpenIso
§§ *
{
•• 	
get
¶¶ 
{
¶¶ 
return
¶¶ "
intervalStartOpenIso
¶¶ -
;
¶¶- .
}
¶¶/ 0
}
ßß 	
public
™™ 
string
™™ 
IntervalEndClosed
™™ '
{
´´ 	
get
¨¨ 
{
¨¨ 
return
¨¨ 
intervalEndClosed
¨¨ *
;
¨¨* +
}
¨¨, -
}
≠≠ 	
public
∞∞ 
string
∞∞ 
IntervalEndOpen
∞∞ %
{
±± 	
get
≤≤ 
{
≤≤ 
return
≤≤ 
intervalEndOpen
≤≤ (
;
≤≤( )
}
≤≤* +
}
≥≥ 	
public
∂∂ 
string
∂∂  
IntervalEndOpenIso
∂∂ (
{
∑∑ 	
get
∏∏ 
{
∏∏ 
return
∏∏  
intervalEndOpenIso
∏∏ +
;
∏∏+ ,
}
∏∏- .
}
ππ 	
public
ºº 
string
ºº 
DateTimeFormat
ºº $
{
ΩΩ 	
get
ææ 
{
ææ 
return
ææ 
dateTimeFormat
ææ '
;
ææ' (
}
ææ) *
}
øø 	
public
¬¬ 
string
¬¬ 
ShortDateFormat
¬¬ %
{
√√ 	
get
ƒƒ 
{
ƒƒ 
return
ƒƒ 
shortDateFormat
ƒƒ (
;
ƒƒ( )
}
ƒƒ* +
}
≈≈ 	
public
»» 
string
»» 
LongTimeFormat
»» $
{
…… 	
get
   
{
   
return
   
longTimeFormat
   '
;
  ' (
}
  ) *
}
ÀÀ 	
public
ŒŒ 
string
ŒŒ 
ShortTimeFormat
ŒŒ %
{
œœ 	
get
–– 
{
–– 
return
–– 
shortTimeFormat
–– (
;
––( )
}
––* +
}
—— 	
public
‘‘  
DurationFormatType
‘‘ !
DurationType
‘‘" .
{
’’ 	
get
÷÷ 
{
÷÷ 
return
÷÷ 
durationType
÷÷ %
;
÷÷% &
}
÷÷' (
}
◊◊ 	
public
⁄⁄ 
bool
⁄⁄  
UseDurationSeconds
⁄⁄ &
{
€€ 	
get
‹‹ 
{
‹‹ 
return
‹‹  
useDurationSeconds
‹‹ +
;
‹‹+ ,
}
‹‹- .
}
›› 	
public
‡‡ 
bool
‡‡ $
UseIsoIntervalNotation
‡‡ *
{
·· 	
get
‚‚ 
{
‚‚ 
return
‚‚ $
useIsoIntervalNotation
‚‚ /
;
‚‚/ 0
}
‚‚1 2
}
„„ 	
public
ËË 
virtual
ËË 
string
ËË 
GetCollection
ËË +
(
ËË+ ,
int
ËË, /
count
ËË0 5
)
ËË5 6
{
ÈÈ 	
return
ÍÍ 
string
ÍÍ 
.
ÍÍ 
Format
ÍÍ  
(
ÍÍ  !
$str
ÍÍ! .
,
ÍÍ. /
count
ÍÍ0 5
)
ÍÍ5 6
;
ÍÍ6 7
}
ÎÎ 	
public
ÓÓ 
virtual
ÓÓ 
string
ÓÓ !
GetCollectionPeriod
ÓÓ 1
(
ÓÓ1 2
int
ÓÓ2 5
count
ÓÓ6 ;
,
ÓÓ; <
DateTime
ÓÓ= E
start
ÓÓF K
,
ÓÓK L
DateTime
ÓÓM U
end
ÓÓV Y
,
ÓÓY Z
TimeSpan
ÓÓ[ c
duration
ÓÓd l
)
ÓÓl m
{
ÔÔ 	
return
 
string
 
.
 
Format
  
(
  !
$str
! -
,
- .
GetCollection
/ <
(
< =
count
= B
)
B C
,
C D
ListSeparator
E R
,
R S
	GetPeriod
T ]
(
] ^
start
^ c
,
c d
end
e h
,
h i
duration
j r
)
r s
)
s t
;
t u
}
ÒÒ 	
public
¯¯ 
string
¯¯ 
GetDateTime
¯¯ !
(
¯¯! "
DateTime
¯¯" *
dateTime
¯¯+ 3
)
¯¯3 4
{
˘˘ 	
return
˙˙ 
!
˙˙ 
string
˙˙ 
.
˙˙ 
IsNullOrEmpty
˙˙ (
(
˙˙( )
dateTimeFormat
˙˙) 7
)
˙˙7 8
?
˙˙9 :
dateTime
˙˙; C
.
˙˙C D
ToString
˙˙D L
(
˙˙L M
dateTimeFormat
˙˙M [
)
˙˙[ \
:
˙˙] ^
dateTime
˙˙_ g
.
˙˙g h
ToString
˙˙h p
(
˙˙p q
culture
˙˙q x
)
˙˙x y
;
˙˙y z
}
˚˚ 	
public
˛˛ 
string
˛˛ 
GetShortDate
˛˛ "
(
˛˛" #
DateTime
˛˛# +
dateTime
˛˛, 4
)
˛˛4 5
{
ˇˇ 	
return
ÄÄ 
!
ÄÄ 
string
ÄÄ 
.
ÄÄ 
IsNullOrEmpty
ÄÄ (
(
ÄÄ( )
shortDateFormat
ÄÄ) 8
)
ÄÄ8 9
?
ÄÄ: ;
dateTime
ÄÄ< D
.
ÄÄD E
ToString
ÄÄE M
(
ÄÄM N
shortDateFormat
ÄÄN ]
)
ÄÄ] ^
:
ÄÄ_ `
dateTime
ÄÄa i
.
ÄÄi j
ToString
ÄÄj r
(
ÄÄr s
$str
ÄÄs v
)
ÄÄv w
;
ÄÄw x
}
ÅÅ 	
public
ÑÑ 
string
ÑÑ 
GetLongTime
ÑÑ !
(
ÑÑ! "
DateTime
ÑÑ" *
dateTime
ÑÑ+ 3
)
ÑÑ3 4
{
ÖÖ 	
return
ÜÜ 
!
ÜÜ 
string
ÜÜ 
.
ÜÜ 
IsNullOrEmpty
ÜÜ (
(
ÜÜ( )
longTimeFormat
ÜÜ) 7
)
ÜÜ7 8
?
ÜÜ9 :
dateTime
ÜÜ; C
.
ÜÜC D
ToString
ÜÜD L
(
ÜÜL M
longTimeFormat
ÜÜM [
)
ÜÜ[ \
:
ÜÜ] ^
dateTime
ÜÜ_ g
.
ÜÜg h
ToString
ÜÜh p
(
ÜÜp q
$str
ÜÜq t
)
ÜÜt u
;
ÜÜu v
}
áá 	
public
ää 
string
ää 
GetShortTime
ää "
(
ää" #
DateTime
ää# +
dateTime
ää, 4
)
ää4 5
{
ãã 	
return
åå 
!
åå 
string
åå 
.
åå 
IsNullOrEmpty
åå (
(
åå( )
shortTimeFormat
åå) 8
)
åå8 9
?
åå: ;
dateTime
åå< D
.
ååD E
ToString
ååE M
(
ååM N
shortTimeFormat
ååN ]
)
åå] ^
:
åå_ `
dateTime
ååa i
.
ååi j
ToString
ååj r
(
åår s
$str
åås v
)
ååv w
;
ååw x
}
çç 	
public
îî 
string
îî 
	GetPeriod
îî 
(
îî  
DateTime
îî  (
start
îî) .
,
îî. /
DateTime
îî0 8
end
îî9 <
)
îî< =
{
ïï 	
return
ññ 
	GetPeriod
ññ 
(
ññ 
start
ññ "
,
ññ" #
end
ññ$ '
,
ññ' (
end
ññ) ,
-
ññ- .
start
ññ/ 4
)
ññ4 5
;
ññ5 6
}
óó 	
public
öö 
string
öö 
GetDuration
öö !
(
öö! "
TimeSpan
öö" *
timeSpan
öö+ 3
)
öö3 4
{
õõ 	
return
úú 
GetDuration
úú 
(
úú 
timeSpan
úú '
,
úú' (
durationType
úú) 5
)
úú5 6
;
úú6 7
}
ùù 	
public
†† 
string
†† 
GetDuration
†† !
(
††! "
TimeSpan
††" *
timeSpan
††+ 3
,
††3 4 
DurationFormatType
††5 G 
durationFormatType
††H Z
)
††Z [
{
°° 	
switch
¢¢ 
(
¢¢  
durationFormatType
¢¢ &
)
¢¢& '
{
££ 
case
§§  
DurationFormatType
§§ '
.
§§' (
Detailed
§§( 0
:
§§0 1
int
•• 
days
•• 
=
•• 
(
••  
int
••  #
)
••# $
timeSpan
••$ ,
.
••, -
	TotalDays
••- 6
;
••6 7
int
¶¶ 
hours
¶¶ 
=
¶¶ 
timeSpan
¶¶  (
.
¶¶( )
Hours
¶¶) .
;
¶¶. /
int
ßß 
minutes
ßß 
=
ßß  !
timeSpan
ßß" *
.
ßß* +
Minutes
ßß+ 2
;
ßß2 3
int
®® 
seconds
®® 
=
®®  ! 
UseDurationSeconds
®®" 4
?
®®5 6
timeSpan
®®7 ?
.
®®? @
Seconds
®®@ G
:
®®H I
$num
®®J K
;
®®K L
return
©© 
GetDuration
©© &
(
©©& '
$num
©©' (
,
©©( )
$num
©©* +
,
©©+ ,
days
©©- 1
,
©©1 2
hours
©©3 8
,
©©8 9
minutes
©©: A
,
©©A B
seconds
©©C J
)
©©J K
;
©©K L
default
™™ 
:
™™ 
return
´´  
UseDurationSeconds
´´ -
?
´´. /
string
¨¨ 
.
¨¨ 
Format
¨¨ %
(
¨¨% &
$str
¨¨& @
,
¨¨@ A
timeSpan
¨¨B J
.
¨¨J K
Days
¨¨K O
,
¨¨O P
timeSpan
¨¨Q Y
.
¨¨Y Z
Hours
¨¨Z _
,
¨¨_ `
timeSpan
¨¨a i
.
¨¨i j
Minutes
¨¨j q
,
¨¨q r
timeSpan
¨¨s {
.
¨¨{ |
Seconds¨¨| É
)¨¨É Ñ
:¨¨Ö Ü
string
≠≠ 
.
≠≠ 
Format
≠≠ %
(
≠≠% &
$str
≠≠& 9
,
≠≠9 :
timeSpan
≠≠; C
.
≠≠C D
Days
≠≠D H
,
≠≠H I
timeSpan
≠≠J R
.
≠≠R S
Hours
≠≠S X
,
≠≠X Y
timeSpan
≠≠Z b
.
≠≠b c
Minutes
≠≠c j
)
≠≠j k
;
≠≠k l
}
ÆÆ 
}
ØØ 	
public
≤≤ 
virtual
≤≤ 
string
≤≤ 
GetDuration
≤≤ )
(
≤≤) *
int
≤≤* -
years
≤≤. 3
,
≤≤3 4
int
≤≤5 8
months
≤≤9 ?
,
≤≤? @
int
≤≤A D
days
≤≤E I
,
≤≤I J
int
≤≤K N
hours
≤≤O T
,
≤≤T U
int
≤≤V Y
minutes
≤≤Z a
,
≤≤a b
int
≤≤c f
seconds
≤≤g n
)
≤≤n o
{
≥≥ 	
StringBuilder
¥¥ 
sb
¥¥ 
=
¥¥ 
new
¥¥ "
StringBuilder
¥¥# 0
(
¥¥0 1
)
¥¥1 2
;
¥¥2 3
if
∑∑ 
(
∑∑ 
years
∑∑ 
!=
∑∑ 
$num
∑∑ 
)
∑∑ 
{
∏∏ 
sb
ππ 
.
ππ 
Append
ππ 
(
ππ 
years
ππ 
)
ππ  
;
ππ  !
sb
∫∫ 
.
∫∫ 
Append
∫∫ 
(
∫∫ $
DurationValueSeparator
∫∫ 0
)
∫∫0 1
;
∫∫1 2
sb
ªª 
.
ªª 
Append
ªª 
(
ªª 
years
ªª 
==
ªª  "
$num
ªª# $
?
ªª% &
Strings
ªª' .
.
ªª. /
TimeSpanYear
ªª/ ;
:
ªª< =
Strings
ªª> E
.
ªªE F
TimeSpanYears
ªªF S
)
ªªS T
;
ªªT U
}
ºº 
if
øø 
(
øø 
months
øø 
!=
øø 
$num
øø 
)
øø 
{
¿¿ 
if
¡¡ 
(
¡¡ 
sb
¡¡ 
.
¡¡ 
Length
¡¡ 
>
¡¡ 
$num
¡¡  !
)
¡¡! "
{
¬¬ 
sb
√√ 
.
√√ 
Append
√√ 
(
√√ 
days
√√ "
==
√√# %
$num
√√& '
&&
√√( *
hours
√√+ 0
==
√√1 3
$num
√√4 5
&&
√√6 8
minutes
√√9 @
==
√√A C
$num
√√D E
&&
√√F H
seconds
√√I P
==
√√Q S
$num
√√T U
?
√√V W'
DurationLastItemSeparator
√√X q
:
√√r s$
DurationItemSeparator√√t â
)√√â ä
;√√ä ã
}
ƒƒ 
sb
≈≈ 
.
≈≈ 
Append
≈≈ 
(
≈≈ 
months
≈≈  
)
≈≈  !
;
≈≈! "
sb
∆∆ 
.
∆∆ 
Append
∆∆ 
(
∆∆ $
DurationValueSeparator
∆∆ 0
)
∆∆0 1
;
∆∆1 2
sb
«« 
.
«« 
Append
«« 
(
«« 
months
««  
==
««! #
$num
««$ %
?
««& '
Strings
««( /
.
««/ 0
TimeSpanMonth
««0 =
:
««> ?
Strings
««@ G
.
««G H
TimeSpanMonths
««H V
)
««V W
;
««W X
}
»» 
if
ÀÀ 
(
ÀÀ 
days
ÀÀ 
!=
ÀÀ 
$num
ÀÀ 
)
ÀÀ 
{
ÃÃ 
if
ÕÕ 
(
ÕÕ 
sb
ÕÕ 
.
ÕÕ 
Length
ÕÕ 
>
ÕÕ 
$num
ÕÕ  !
)
ÕÕ! "
{
ŒŒ 
sb
œœ 
.
œœ 
Append
œœ 
(
œœ 
hours
œœ #
==
œœ$ &
$num
œœ' (
&&
œœ) +
minutes
œœ, 3
==
œœ4 6
$num
œœ7 8
&&
œœ9 ;
seconds
œœ< C
==
œœD F
$num
œœG H
?
œœI J'
DurationLastItemSeparator
œœK d
:
œœe f#
DurationItemSeparator
œœg |
)
œœ| }
;
œœ} ~
}
–– 
sb
—— 
.
—— 
Append
—— 
(
—— 
days
—— 
)
—— 
;
——  
sb
““ 
.
““ 
Append
““ 
(
““ $
DurationValueSeparator
““ 0
)
““0 1
;
““1 2
sb
”” 
.
”” 
Append
”” 
(
”” 
days
”” 
==
”” !
$num
””" #
?
””$ %
Strings
””& -
.
””- .
TimeSpanDay
””. 9
:
””: ;
Strings
””< C
.
””C D
TimeSpanDays
””D P
)
””P Q
;
””Q R
}
‘‘ 
if
◊◊ 
(
◊◊ 
hours
◊◊ 
!=
◊◊ 
$num
◊◊ 
)
◊◊ 
{
ÿÿ 
if
ŸŸ 
(
ŸŸ 
sb
ŸŸ 
.
ŸŸ 
Length
ŸŸ 
>
ŸŸ 
$num
ŸŸ  !
)
ŸŸ! "
{
⁄⁄ 
sb
€€ 
.
€€ 
Append
€€ 
(
€€ 
minutes
€€ %
==
€€& (
$num
€€) *
&&
€€+ -
seconds
€€. 5
==
€€6 8
$num
€€9 :
?
€€; <'
DurationLastItemSeparator
€€= V
:
€€W X#
DurationItemSeparator
€€Y n
)
€€n o
;
€€o p
}
‹‹ 
sb
›› 
.
›› 
Append
›› 
(
›› 
hours
›› 
)
››  
;
››  !
sb
ﬁﬁ 
.
ﬁﬁ 
Append
ﬁﬁ 
(
ﬁﬁ $
DurationValueSeparator
ﬁﬁ 0
)
ﬁﬁ0 1
;
ﬁﬁ1 2
sb
ﬂﬂ 
.
ﬂﬂ 
Append
ﬂﬂ 
(
ﬂﬂ 
hours
ﬂﬂ 
==
ﬂﬂ  "
$num
ﬂﬂ# $
?
ﬂﬂ% &
Strings
ﬂﬂ' .
.
ﬂﬂ. /
TimeSpanHour
ﬂﬂ/ ;
:
ﬂﬂ< =
Strings
ﬂﬂ> E
.
ﬂﬂE F
TimeSpanHours
ﬂﬂF S
)
ﬂﬂS T
;
ﬂﬂT U
}
‡‡ 
if
„„ 
(
„„ 
minutes
„„ 
!=
„„ 
$num
„„ 
)
„„ 
{
‰‰ 
if
ÂÂ 
(
ÂÂ 
sb
ÂÂ 
.
ÂÂ 
Length
ÂÂ 
>
ÂÂ 
$num
ÂÂ  !
)
ÂÂ! "
{
ÊÊ 
sb
ÁÁ 
.
ÁÁ 
Append
ÁÁ 
(
ÁÁ 
seconds
ÁÁ %
==
ÁÁ& (
$num
ÁÁ) *
?
ÁÁ+ ,'
DurationLastItemSeparator
ÁÁ- F
:
ÁÁG H#
DurationItemSeparator
ÁÁI ^
)
ÁÁ^ _
;
ÁÁ_ `
}
ËË 
sb
ÈÈ 
.
ÈÈ 
Append
ÈÈ 
(
ÈÈ 
minutes
ÈÈ !
)
ÈÈ! "
;
ÈÈ" #
sb
ÍÍ 
.
ÍÍ 
Append
ÍÍ 
(
ÍÍ $
DurationValueSeparator
ÍÍ 0
)
ÍÍ0 1
;
ÍÍ1 2
sb
ÎÎ 
.
ÎÎ 
Append
ÎÎ 
(
ÎÎ 
minutes
ÎÎ !
==
ÎÎ" $
$num
ÎÎ% &
?
ÎÎ' (
Strings
ÎÎ) 0
.
ÎÎ0 1
TimeSpanMinute
ÎÎ1 ?
:
ÎÎ@ A
Strings
ÎÎB I
.
ÎÎI J
TimeSpanMinutes
ÎÎJ Y
)
ÎÎY Z
;
ÎÎZ [
}
ÏÏ 
if
ÔÔ 
(
ÔÔ 
seconds
ÔÔ 
!=
ÔÔ 
$num
ÔÔ 
)
ÔÔ 
{
 
if
ÒÒ 
(
ÒÒ 
sb
ÒÒ 
.
ÒÒ 
Length
ÒÒ 
>
ÒÒ 
$num
ÒÒ  !
)
ÒÒ! "
{
ÚÚ 
sb
ÛÛ 
.
ÛÛ 
Append
ÛÛ 
(
ÛÛ '
DurationLastItemSeparator
ÛÛ 7
)
ÛÛ7 8
;
ÛÛ8 9
}
ÙÙ 
sb
ıı 
.
ıı 
Append
ıı 
(
ıı 
seconds
ıı !
)
ıı! "
;
ıı" #
sb
ˆˆ 
.
ˆˆ 
Append
ˆˆ 
(
ˆˆ $
DurationValueSeparator
ˆˆ 0
)
ˆˆ0 1
;
ˆˆ1 2
sb
˜˜ 
.
˜˜ 
Append
˜˜ 
(
˜˜ 
seconds
˜˜ !
==
˜˜" $
$num
˜˜% &
?
˜˜' (
Strings
˜˜) 0
.
˜˜0 1
TimeSpanSecond
˜˜1 ?
:
˜˜@ A
Strings
˜˜B I
.
˜˜I J
TimeSpanSeconds
˜˜J Y
)
˜˜Y Z
;
˜˜Z [
}
¯¯ 
return
˙˙ 
sb
˙˙ 
.
˙˙ 
ToString
˙˙ 
(
˙˙ 
)
˙˙  
;
˙˙  !
}
˚˚ 	
public
ÇÇ 
virtual
ÇÇ 
string
ÇÇ 
	GetPeriod
ÇÇ '
(
ÇÇ' (
DateTime
ÇÇ( 0
start
ÇÇ1 6
,
ÇÇ6 7
DateTime
ÇÇ8 @
end
ÇÇA D
,
ÇÇD E
TimeSpan
ÇÇF N
duration
ÇÇO W
)
ÇÇW X
{
ÉÉ 	
if
ÑÑ 
(
ÑÑ 
end
ÑÑ 
<
ÑÑ 
start
ÑÑ 
)
ÑÑ 
{
ÖÖ 
throw
ÜÜ 
new
ÜÜ )
ArgumentOutOfRangeException
ÜÜ 5
(
ÜÜ5 6
$str
ÜÜ6 ;
)
ÜÜ; <
;
ÜÜ< =
}
áá 
bool
ââ 
startHasTimeOfDay
ââ "
=
ââ# $
TimeTool
ââ% -
.
ââ- .
HasTimeOfDay
ââ. :
(
ââ: ;
start
ââ; @
)
ââ@ A
;
ââA B
if
åå 
(
åå 
duration
åå 
==
åå 
TimeSpec
åå $
.
åå$ %
MinPeriodDuration
åå% 6
)
åå6 7
{
çç 
return
éé 
startHasTimeOfDay
éé (
?
éé) *
GetDateTime
éé+ 6
(
éé6 7
start
éé7 <
)
éé< =
:
éé> ?
GetShortDate
éé@ L
(
ééL M
start
ééM R
)
ééR S
;
ééS T
}
èè 
if
íí 
(
íí 
TimeCompare
íí 
.
íí 
	IsSameDay
íí %
(
íí% &
start
íí& +
,
íí+ ,
end
íí- 0
)
íí0 1
)
íí1 2
{
ìì 
return
îî 
GetDateTime
îî "
(
îî" #
start
îî# (
)
îî( )
+
îî* +
startEndSeparator
îî, =
+
îî> ?
GetLongTime
îî@ K
(
îîK L
end
îîL O
)
îîO P
+
îîQ R
durationSeparator
îîS d
+
îîe f
GetDuration
îîg r
(
îîr s
duration
îîs {
)
îî{ |
;
îî| }
}
ïï 
bool
òò 
endHasTimeOfDay
òò  
=
òò! "
TimeTool
òò# +
.
òò+ ,
HasTimeOfDay
òò, 8
(
òò8 9
end
òò9 <
)
òò< =
;
òò= >
bool
ôô 
hasTimeOfDays
ôô 
=
ôô  
startHasTimeOfDay
ôô! 2
||
ôô3 5
endHasTimeOfDay
ôô6 E
;
ôôE F
string
öö 
	startPart
öö 
=
öö 
hasTimeOfDays
öö ,
?
öö- .
GetDateTime
öö/ :
(
öö: ;
start
öö; @
)
öö@ A
:
ööB C
GetShortDate
ööD P
(
ööP Q
start
ööQ V
)
ööV W
;
ööW X
string
õõ 
endPart
õõ 
=
õõ 
hasTimeOfDays
õõ *
?
õõ+ ,
GetDateTime
õõ- 8
(
õõ8 9
end
õõ9 <
)
õõ< =
:
õõ> ?
GetShortDate
õõ@ L
(
õõL M
end
õõM P
)
õõP Q
;
õõQ R
return
úú 
	startPart
úú 
+
úú 
startEndSeparator
úú 0
+
úú1 2
endPart
úú3 :
+
úú; <
durationSeparator
úú= N
+
úúO P
GetDuration
úúQ \
(
úú\ ]
duration
úú] e
)
úúe f
;
úúf g
}
ùù 	
public
†† 
string
†† 
GetCalendarPeriod
†† '
(
††' (
string
††( .
start
††/ 4
,
††4 5
string
††6 <
end
††= @
,
††@ A
TimeSpan
††B J
duration
††K S
)
††S T
{
°° 	
string
¢¢ 

timePeriod
¢¢ 
=
¢¢ 
start
¢¢  %
.
¢¢% &
Equals
¢¢& ,
(
¢¢, -
end
¢¢- 0
)
¢¢0 1
?
¢¢2 3
start
¢¢4 9
:
¢¢: ;
start
¢¢< A
+
¢¢B C
startEndSeparator
¢¢D U
+
¢¢V W
end
¢¢X [
;
¢¢[ \
return
££ 

timePeriod
££ 
+
££ 
durationSeparator
££  1
+
££2 3
GetDuration
££4 ?
(
££? @
duration
££@ H
)
££H I
;
££I J
}
§§ 	
public
ßß 
string
ßß 
GetCalendarPeriod
ßß '
(
ßß' (
string
ßß( .
context
ßß/ 6
,
ßß6 7
string
ßß8 >
start
ßß? D
,
ßßD E
string
ßßF L
end
ßßM P
,
ßßP Q
TimeSpan
ßßR Z
duration
ßß[ c
)
ßßc d
{
®® 	
string
©© 

timePeriod
©© 
=
©© 
start
©©  %
.
©©% &
Equals
©©& ,
(
©©, -
end
©©- 0
)
©©0 1
?
©©2 3
start
©©4 9
:
©©: ;
start
©©< A
+
©©B C
startEndSeparator
©©D U
+
©©V W
end
©©X [
;
©©[ \
return
™™ 
context
™™ 
+
™™ 
contextSeparator
™™ -
+
™™. /

timePeriod
™™0 :
+
™™; <
durationSeparator
™™= N
+
™™O P
GetDuration
™™Q \
(
™™\ ]
duration
™™] e
)
™™e f
;
™™f g
}
´´ 	
public
ÆÆ 
string
ÆÆ 
GetCalendarPeriod
ÆÆ '
(
ÆÆ' (
string
ÆÆ( .
startContext
ÆÆ/ ;
,
ÆÆ; <
string
ÆÆ= C

endContext
ÆÆD N
,
ÆÆN O
string
ÆÆP V
start
ÆÆW \
,
ÆÆ\ ]
string
ÆÆ^ d
end
ÆÆe h
,
ÆÆh i
TimeSpan
ÆÆj r
duration
ÆÆs {
)
ÆÆ{ |
{
ØØ 	
string
∞∞ 
contextPeriod
∞∞  
=
∞∞! "
startContext
∞∞# /
.
∞∞/ 0
Equals
∞∞0 6
(
∞∞6 7

endContext
∞∞7 A
)
∞∞A B
?
∞∞C D
startContext
∞∞E Q
:
∞∞R S
startContext
∞∞T `
+
∞∞a b
startEndSeparator
∞∞c t
+
∞∞u v

endContext∞∞w Å
;∞∞Å Ç
string
±± 

timePeriod
±± 
=
±± 
start
±±  %
.
±±% &
Equals
±±& ,
(
±±, -
end
±±- 0
)
±±0 1
?
±±2 3
start
±±4 9
:
±±: ;
start
±±< A
+
±±B C
startEndSeparator
±±D U
+
±±V W
end
±±X [
;
±±[ \
return
≤≤ 
contextPeriod
≤≤  
+
≤≤! "
contextSeparator
≤≤# 3
+
≤≤4 5

timePeriod
≤≤6 @
+
≤≤A B
durationSeparator
≤≤C T
+
≤≤U V
GetDuration
≤≤W b
(
≤≤b c
duration
≤≤c k
)
≤≤k l
;
≤≤l m
}
≥≥ 	
public
∫∫ 
string
∫∫ 
GetInterval
∫∫ !
(
∫∫! "
DateTime
∫∫" *
start
∫∫+ 0
,
∫∫0 1
DateTime
∫∫2 :
end
∫∫; >
,
∫∫> ?
IntervalEdge
ªª 
	startEdge
ªª "
,
ªª" #
IntervalEdge
ªª$ 0
endEdge
ªª1 8
,
ªª8 9
TimeSpan
ªª: B
duration
ªªC K
)
ªªK L
{
ºº 	
if
ΩΩ 
(
ΩΩ 
end
ΩΩ 
<
ΩΩ 
start
ΩΩ 
)
ΩΩ 
{
ææ 
throw
øø 
new
øø )
ArgumentOutOfRangeException
øø 5
(
øø5 6
$str
øø6 ;
)
øø; <
;
øø< =
}
¿¿ 
StringBuilder
¬¬ 
sb
¬¬ 
=
¬¬ 
new
¬¬ "
StringBuilder
¬¬# 0
(
¬¬0 1
)
¬¬1 2
;
¬¬2 3
switch
≈≈ 
(
≈≈ 
	startEdge
≈≈ 
)
≈≈ 
{
∆∆ 
case
«« 
IntervalEdge
«« !
.
««! "
Closed
««" (
:
««( )
sb
»» 
.
»» 
Append
»» 
(
»» !
IntervalStartClosed
»» 1
)
»»1 2
;
»»2 3
break
…… 
;
…… 
case
   
IntervalEdge
   !
.
  ! "
Open
  " &
:
  & '
sb
ÀÀ 
.
ÀÀ 
Append
ÀÀ 
(
ÀÀ $
UseIsoIntervalNotation
ÀÀ 4
?
ÀÀ5 6"
intervalStartOpenIso
ÀÀ7 K
:
ÀÀL M
intervalStartOpen
ÀÀN _
)
ÀÀ_ `
;
ÀÀ` a
break
ÃÃ 
;
ÃÃ 
}
ÕÕ 
bool
œœ 
addDuration
œœ 
=
œœ 
true
œœ #
;
œœ# $
bool
–– 
startHasTimeOfDay
–– "
=
––# $
TimeTool
––% -
.
––- .
HasTimeOfDay
––. :
(
––: ;
start
––; @
)
––@ A
;
––A B
if
”” 
(
”” 
duration
”” 
==
”” 
TimeSpec
”” $
.
””$ %
MinPeriodDuration
””% 6
)
””6 7
{
‘‘ 
sb
’’ 
.
’’ 
Append
’’ 
(
’’ 
startHasTimeOfDay
’’ +
?
’’, -
GetDateTime
’’. 9
(
’’9 :
start
’’: ?
)
’’? @
:
’’A B
GetShortDate
’’C O
(
’’O P
start
’’P U
)
’’U V
)
’’V W
;
’’W X
addDuration
÷÷ 
=
÷÷ 
false
÷÷ #
;
÷÷# $
}
◊◊ 
else
ŸŸ 
if
ŸŸ 
(
ŸŸ 
TimeCompare
ŸŸ  
.
ŸŸ  !
	IsSameDay
ŸŸ! *
(
ŸŸ* +
start
ŸŸ+ 0
,
ŸŸ0 1
end
ŸŸ2 5
)
ŸŸ5 6
)
ŸŸ6 7
{
⁄⁄ 
sb
€€ 
.
€€ 
Append
€€ 
(
€€ 
GetDateTime
€€ %
(
€€% &
start
€€& +
)
€€+ ,
)
€€, -
;
€€- .
sb
‹‹ 
.
‹‹ 
Append
‹‹ 
(
‹‹ 
startEndSeparator
‹‹ +
)
‹‹+ ,
;
‹‹, -
sb
›› 
.
›› 
Append
›› 
(
›› 
GetLongTime
›› %
(
››% &
end
››& )
)
››) *
)
››* +
;
››+ ,
}
ﬁﬁ 
else
ﬂﬂ 
{
‡‡ 
bool
·· 
endHasTimeOfDay
·· $
=
··% &
TimeTool
··' /
.
··/ 0
HasTimeOfDay
··0 <
(
··< =
start
··= B
)
··B C
;
··C D
bool
‚‚ 
hasTimeOfDays
‚‚ "
=
‚‚# $
startHasTimeOfDay
‚‚% 6
||
‚‚7 9
endHasTimeOfDay
‚‚: I
;
‚‚I J
if
„„ 
(
„„ 
hasTimeOfDays
„„ !
)
„„! "
{
‰‰ 
sb
ÂÂ 
.
ÂÂ 
Append
ÂÂ 
(
ÂÂ 
GetDateTime
ÂÂ )
(
ÂÂ) *
start
ÂÂ* /
)
ÂÂ/ 0
)
ÂÂ0 1
;
ÂÂ1 2
sb
ÊÊ 
.
ÊÊ 
Append
ÊÊ 
(
ÊÊ 
startEndSeparator
ÊÊ /
)
ÊÊ/ 0
;
ÊÊ0 1
sb
ÁÁ 
.
ÁÁ 
Append
ÁÁ 
(
ÁÁ 
GetDateTime
ÁÁ )
(
ÁÁ) *
end
ÁÁ* -
)
ÁÁ- .
)
ÁÁ. /
;
ÁÁ/ 0
}
ËË 
else
ÈÈ 
{
ÍÍ 
sb
ÎÎ 
.
ÎÎ 
Append
ÎÎ 
(
ÎÎ 
GetShortDate
ÎÎ *
(
ÎÎ* +
start
ÎÎ+ 0
)
ÎÎ0 1
)
ÎÎ1 2
;
ÎÎ2 3
sb
ÏÏ 
.
ÏÏ 
Append
ÏÏ 
(
ÏÏ 
startEndSeparator
ÏÏ /
)
ÏÏ/ 0
;
ÏÏ0 1
sb
ÌÌ 
.
ÌÌ 
Append
ÌÌ 
(
ÌÌ 
GetShortDate
ÌÌ *
(
ÌÌ* +
end
ÌÌ+ .
)
ÌÌ. /
)
ÌÌ/ 0
;
ÌÌ0 1
}
ÓÓ 
}
ÔÔ 
switch
ÚÚ 
(
ÚÚ 
endEdge
ÚÚ 
)
ÚÚ 
{
ÛÛ 
case
ÙÙ 
IntervalEdge
ÙÙ !
.
ÙÙ! "
Closed
ÙÙ" (
:
ÙÙ( )
sb
ıı 
.
ıı 
Append
ıı 
(
ıı 
IntervalEndClosed
ıı /
)
ıı/ 0
;
ıı0 1
break
ˆˆ 
;
ˆˆ 
case
˜˜ 
IntervalEdge
˜˜ !
.
˜˜! "
Open
˜˜" &
:
˜˜& '
sb
¯¯ 
.
¯¯ 
Append
¯¯ 
(
¯¯ $
UseIsoIntervalNotation
¯¯ 4
?
¯¯5 6 
IntervalEndOpenIso
¯¯7 I
:
¯¯J K
IntervalEndOpen
¯¯L [
)
¯¯[ \
;
¯¯\ ]
break
˘˘ 
;
˘˘ 
}
˙˙ 
if
˝˝ 
(
˝˝ 
addDuration
˝˝ 
)
˝˝ 
{
˛˛ 
sb
ˇˇ 
.
ˇˇ 
Append
ˇˇ 
(
ˇˇ 
durationSeparator
ˇˇ +
)
ˇˇ+ ,
;
ˇˇ, -
sb
ÄÄ 
.
ÄÄ 
Append
ÄÄ 
(
ÄÄ 
GetDuration
ÄÄ %
(
ÄÄ% &
duration
ÄÄ& .
)
ÄÄ. /
)
ÄÄ/ 0
;
ÄÄ0 1
}
ÅÅ 
return
ÉÉ 
sb
ÉÉ 
.
ÉÉ 
ToString
ÉÉ 
(
ÉÉ 
)
ÉÉ  
;
ÉÉ  !
}
ÑÑ 	
private
ää 
readonly
ää 
CultureInfo
ää $
culture
ää% ,
;
ää, -
private
ãã 
readonly
ãã 
string
ãã 
listSeparator
ãã  -
;
ãã- .
private
åå 
readonly
åå 
string
åå 
contextSeparator
åå  0
;
åå0 1
private
çç 
readonly
çç 
string
çç 
startEndSeparator
çç  1
;
çç1 2
private
éé 
readonly
éé 
string
éé 
durationSeparator
éé  1
;
éé1 2
private
èè 
readonly
èè 
string
èè #
durationItemSeparator
èè  5
;
èè5 6
private
êê 
readonly
êê 
string
êê '
durationLastItemSeparator
êê  9
;
êê9 :
private
ëë 
readonly
ëë 
string
ëë $
durationValueSeparator
ëë  6
;
ëë6 7
private
íí 
readonly
íí 
string
íí !
intervalStartClosed
íí  3
;
íí3 4
private
ìì 
readonly
ìì 
string
ìì 
intervalStartOpen
ìì  1
;
ìì1 2
private
îî 
readonly
îî 
string
îî "
intervalStartOpenIso
îî  4
;
îî4 5
private
ïï 
readonly
ïï 
string
ïï 
intervalEndClosed
ïï  1
;
ïï1 2
private
ññ 
readonly
ññ 
string
ññ 
intervalEndOpen
ññ  /
;
ññ/ 0
private
óó 
readonly
óó 
string
óó  
intervalEndOpenIso
óó  2
;
óó2 3
private
òò 
readonly
òò 
string
òò 
dateTimeFormat
òò  .
;
òò. /
private
ôô 
readonly
ôô 
string
ôô 
shortDateFormat
ôô  /
;
ôô/ 0
private
öö 
readonly
öö 
string
öö 
longTimeFormat
öö  .
;
öö. /
private
õõ 
readonly
õõ 
string
õõ 
shortTimeFormat
õõ  /
;
õõ/ 0
private
úú 
readonly
úú  
DurationFormatType
úú +
durationType
úú, 8
;
úú8 9
private
ùù 
readonly
ùù 
bool
ùù  
useDurationSeconds
ùù 0
;
ùù0 1
private
ûû 
readonly
ûû 
bool
ûû $
useIsoIntervalNotation
ûû 4
;
ûû4 5
private
†† 
static
†† 
readonly
†† 
object
††  &
mutex
††' ,
=
††- .
new
††/ 2
object
††3 9
(
††9 :
)
††: ;
;
††; <
private
°° 
static
°° 
volatile
°° 
TimeFormatter
°°  -
instance
°°. 6
;
°°6 7
}
££ 
}•• À
rF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\TimeGapCalculator.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

class 
TimeGapCalculator "
<" #
T# $
>$ %
where& +
T, -
:. /
ITimePeriod0 ;
,; <
new= @
(@ A
)A B
{ 
public 
TimeGapCalculator  
(  !
)! "
:# $
this 
( 
null 
) 
{ 	
} 	
public 
TimeGapCalculator  
(  !
ITimePeriodMapper! 2
periodMapper3 ?
)? @
{ 	
this 
. 
periodMapper 
= 
periodMapper  ,
;, -
} 	
public 
ITimePeriodMapper  
PeriodMapper! -
{ 	
get   
{   
return   
periodMapper   %
;  % &
}  ' (
}!! 	
public$$ 
virtual$$ !
ITimePeriodCollection$$ ,
GetGaps$$- 4
($$4 5 
ITimePeriodContainer$$5 I
periods$$J Q
,$$Q R
ITimePeriod$$S ^
limits$$_ e
=$$f g
null$$h l
)$$l m
{%% 	
if&& 
(&& 
periods&& 
==&& 
null&& 
)&&  
{'' 
throw(( 
new(( !
ArgumentNullException(( /
(((/ 0
$str((0 9
)((9 :
;((: ;
})) 
TimeLine** 
<** 
T** 
>** 
timeLine**  
=**! "
new**# &
TimeLine**' /
<**/ 0
T**0 1
>**1 2
(**2 3
periods**3 :
,**: ;
limits**< B
,**B C
periodMapper**D P
)**P Q
;**Q R
return++ 
timeLine++ 
.++ 
CalculateGaps++ )
(++) *
)++* +
;+++ ,
},, 	
private00 
readonly00 
ITimePeriodMapper00 *
periodMapper00+ 7
;007 8
}22 
}44 «∞
mF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\TimeInterval.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

class 
TimeInterval 
: 
ITimeInterval  -
{ 
public 
static 
readonly 
TimeInterval +
Anytime, 3
=4 5
new6 9
TimeInterval: F
(F G
TimeSpec 
. 
MinPeriodDate "
," #
TimeSpec$ ,
., -
MaxPeriodDate- :
,: ;
IntervalEdge< H
.H I
ClosedI O
,O P
IntervalEdgeQ ]
.] ^
Closed^ d
,d e
falsef k
,k l
truem q
)q r
;r s
public 
TimeInterval 
( 
) 
: 
this 
( 
TimeSpec 
. 
MinPeriodDate '
,' (
TimeSpec) 1
.1 2
MaxPeriodDate2 ?
)? @
{ 	
} 	
public 
TimeInterval 
( 
DateTime $
moment% +
,+ ,
IntervalEdge 
	startEdge "
=# $
IntervalEdge% 1
.1 2
Closed2 8
,8 9
IntervalEdge: F
endEdgeG N
=O P
IntervalEdgeQ ]
.] ^
Closed^ d
,d e
bool 
isIntervalEnabled "
=# $
true% )
,) *
bool+ /

isReadOnly0 :
=; <
false= B
)B C
:D E
this 
( 
moment 
, 
moment 
,  
	startEdge! *
,* +
endEdge, 3
,3 4
isIntervalEnabled5 F
,F G

isReadOnlyH R
)R S
{   	
}!! 	
public$$ 
TimeInterval$$ 
($$ 
DateTime$$ $
startInterval$$% 2
,$$2 3
DateTime$$4 <
endInterval$$= H
,$$H I
IntervalEdge%% 
	startEdge%% "
=%%# $
IntervalEdge%%% 1
.%%1 2
Closed%%2 8
,%%8 9
IntervalEdge%%: F
endEdge%%G N
=%%O P
IntervalEdge%%Q ]
.%%] ^
Closed%%^ d
,%%d e
bool&& 
isIntervalEnabled&& "
=&&# $
true&&% )
,&&) *
bool&&+ /

isReadOnly&&0 :
=&&; <
false&&= B
)&&B C
{'' 	
if(( 
((( 
startInterval(( 
<=((  
endInterval((! ,
)((, -
{)) 
this** 
.** 
startInterval** "
=**# $
startInterval**% 2
;**2 3
this++ 
.++ 
endInterval++  
=++! "
endInterval++# .
;++. /
},, 
else-- 
{.. 
this// 
.// 
endInterval//  
=//! "
startInterval//# 0
;//0 1
this00 
.00 
startInterval00 "
=00# $
endInterval00% 0
;000 1
}11 
this33 
.33 
	startEdge33 
=33 
	startEdge33 &
;33& '
this44 
.44 
endEdge44 
=44 
endEdge44 "
;44" #
this66 
.66 
isIntervalEnabled66 "
=66# $
isIntervalEnabled66% 6
;666 7
this77 
.77 

isReadOnly77 
=77 

isReadOnly77 (
;77( )
}88 	
public;; 
TimeInterval;; 
(;; 
ITimePeriod;; '
copy;;( ,
);;, -
{<< 	
if== 
(== 
copy== 
==== 
null== 
)== 
{>> 
throw?? 
new?? !
ArgumentNullException?? /
(??/ 0
$str??0 6
)??6 7
;??7 8
}@@ 
ITimeIntervalAA 
timeIntervalAA &
=AA' (
copyAA) -
asAA. 0
ITimeIntervalAA1 >
;AA> ?
ifBB 
(BB 
timeIntervalBB 
!=BB 
nullBB  $
)BB$ %
{CC 
startIntervalDD 
=DD 
timeIntervalDD  ,
.DD, -
StartIntervalDD- :
;DD: ;
endIntervalEE 
=EE 
timeIntervalEE *
.EE* +
EndIntervalEE+ 6
;EE6 7
	startEdgeFF 
=FF 
timeIntervalFF (
.FF( )
	StartEdgeFF) 2
;FF2 3
endEdgeGG 
=GG 
timeIntervalGG &
.GG& '
EndEdgeGG' .
;GG. /
isIntervalEnabledHH !
=HH" #
timeIntervalHH$ 0
.HH0 1
IsIntervalEnabledHH1 B
;HHB C
}II 
elseJJ 
{KK 
startIntervalLL 
=LL 
copyLL  $
.LL$ %
StartLL% *
;LL* +
endIntervalMM 
=MM 
copyMM "
.MM" #
EndMM# &
;MM& '
}NN 

isReadOnlyPP 
=PP 
copyPP 
.PP 

IsReadOnlyPP (
;PP( )
}QQ 	
	protectedTT 
TimeIntervalTT 
(TT 
ITimePeriodTT *
copyTT+ /
,TT/ 0
boolTT1 5

isReadOnlyTT6 @
)TT@ A
{UU 	
ifVV 
(VV 
copyVV 
==VV 
nullVV 
)VV 
{WW 
throwXX 
newXX !
ArgumentNullExceptionXX /
(XX/ 0
$strXX0 6
)XX6 7
;XX7 8
}YY 
ITimeIntervalZZ 
timeIntervalZZ &
=ZZ' (
copyZZ) -
asZZ. 0
ITimeIntervalZZ1 >
;ZZ> ?
if[[ 
([[ 
timeInterval[[ 
!=[[ 
null[[  $
)[[$ %
{\\ 
startInterval]] 
=]] 
timeInterval]]  ,
.]], -
StartInterval]]- :
;]]: ;
endInterval^^ 
=^^ 
timeInterval^^ *
.^^* +
EndInterval^^+ 6
;^^6 7
	startEdge__ 
=__ 
timeInterval__ (
.__( )
	StartEdge__) 2
;__2 3
endEdge`` 
=`` 
timeInterval`` &
.``& '
EndEdge``' .
;``. /
isIntervalEnabledaa !
=aa" #
timeIntervalaa$ 0
.aa0 1
IsIntervalEnabledaa1 B
;aaB C
}bb 
elsecc 
{dd 
startIntervalee 
=ee 
copyee  $
.ee$ %
Startee% *
;ee* +
endIntervalff 
=ff 
copyff "
.ff" #
Endff# &
;ff& '
}gg 
thishh 
.hh 

isReadOnlyhh 
=hh 

isReadOnlyhh (
;hh( )
}ii 	
publicll 
boolll 

IsReadOnlyll 
{mm 	
getnn 
{nn 
returnnn 

isReadOnlynn #
;nn# $
}nn% &
}oo 	
publicrr 
boolrr 
	IsAnytimerr 
{ss 	
gettt 
{tt 
returntt 
!tt 
HasStarttt "
&&tt# %
!tt& '
HasEndtt' -
;tt- .
}tt/ 0
}uu 	
publicxx 
boolxx 
IsMomentxx 
{yy 	
getzz 
{zz 
returnzz 
startIntervalzz &
.zz& '
Equalszz' -
(zz- .
endIntervalzz. 9
)zz9 :
;zz: ;
}zz< =
}{{ 	
public~~ 
bool~~ 
IsStartOpen~~ 
{ 	
get
ÄÄ 
{
ÄÄ 
return
ÄÄ 
	startEdge
ÄÄ "
==
ÄÄ# %
IntervalEdge
ÄÄ& 2
.
ÄÄ2 3
Open
ÄÄ3 7
;
ÄÄ7 8
}
ÄÄ9 :
}
ÅÅ 	
public
ÑÑ 
bool
ÑÑ 
	IsEndOpen
ÑÑ 
{
ÖÖ 	
get
ÜÜ 
{
ÜÜ 
return
ÜÜ 
endEdge
ÜÜ  
==
ÜÜ! #
IntervalEdge
ÜÜ$ 0
.
ÜÜ0 1
Open
ÜÜ1 5
;
ÜÜ5 6
}
ÜÜ7 8
}
áá 	
public
ää 
bool
ää 
IsOpen
ää 
{
ãã 	
get
åå 
{
åå 
return
åå 
IsStartOpen
åå $
&&
åå% '
	IsEndOpen
åå( 1
;
åå1 2
}
åå3 4
}
çç 	
public
êê 
bool
êê 
IsStartClosed
êê !
{
ëë 	
get
íí 
{
íí 
return
íí 
	startEdge
íí "
==
íí# %
IntervalEdge
íí& 2
.
íí2 3
Closed
íí3 9
;
íí9 :
}
íí; <
}
ìì 	
public
ññ 
bool
ññ 
IsEndClosed
ññ 
{
óó 	
get
òò 
{
òò 
return
òò 
endEdge
òò  
==
òò! #
IntervalEdge
òò$ 0
.
òò0 1
Closed
òò1 7
;
òò7 8
}
òò9 :
}
ôô 	
public
úú 
bool
úú 
IsClosed
úú 
{
ùù 	
get
ûû 
{
ûû 
return
ûû 
IsStartClosed
ûû &
&&
ûû' )
IsEndClosed
ûû* 5
;
ûû5 6
}
ûû7 8
}
üü 	
public
¢¢ 
bool
¢¢ 
IsEmpty
¢¢ 
{
££ 	
get
§§ 
{
§§ 
return
§§ 
IsMoment
§§ !
&&
§§" $
!
§§% &
IsClosed
§§& .
;
§§. /
}
§§0 1
}
•• 	
public
®® 
bool
®® 
IsDegenerate
®®  
{
©© 	
get
™™ 
{
™™ 
return
™™ 
IsMoment
™™ !
&&
™™" $
IsClosed
™™% -
;
™™- .
}
™™/ 0
}
´´ 	
public
ÆÆ 
bool
ÆÆ 
IsIntervalEnabled
ÆÆ %
{
ØØ 	
get
∞∞ 
{
∞∞ 
return
∞∞ 
isIntervalEnabled
∞∞ *
;
∞∞* +
}
∞∞, -
set
±± 
{
≤≤ 
CheckModification
≥≥ !
(
≥≥! "
)
≥≥" #
;
≥≥# $
isIntervalEnabled
¥¥ !
=
¥¥" #
value
¥¥$ )
;
¥¥) *
}
µµ 
}
∂∂ 	
public
ππ 
bool
ππ 
HasStart
ππ 
{
∫∫ 	
get
ªª 
{
ªª 
return
ªª 
!
ªª 
(
ªª 
startInterval
ªª (
==
ªª) +
TimeSpec
ªª, 4
.
ªª4 5
MinPeriodDate
ªª5 B
&&
ªªC E
	startEdge
ªªF O
==
ªªP R
IntervalEdge
ªªS _
.
ªª_ `
Closed
ªª` f
)
ªªf g
;
ªªg h
}
ªªi j
}
ºº 	
public
øø 
DateTime
øø 
StartInterval
øø %
{
¿¿ 	
get
¡¡ 
{
¡¡ 
return
¡¡ 
startInterval
¡¡ &
;
¡¡& '
}
¡¡( )
set
¬¬ 
{
√√ 
CheckModification
ƒƒ !
(
ƒƒ! "
)
ƒƒ" #
;
ƒƒ# $
if
≈≈ 
(
≈≈ 
value
≈≈ 
>
≈≈ 
endInterval
≈≈ '
)
≈≈' (
{
∆∆ 
throw
«« 
new
«« )
ArgumentOutOfRangeException
«« 9
(
««9 :
$str
««: A
)
««A B
;
««B C
}
»» 
startInterval
…… 
=
…… 
value
……  %
;
……% &
}
   
}
ÀÀ 	
public
ŒŒ 
DateTime
ŒŒ 
Start
ŒŒ 
{
œœ 	
get
–– 
{
—— 
if
““ 
(
““ 
isIntervalEnabled
““ %
&&
““& (
	startEdge
““) 2
==
““3 5
IntervalEdge
““6 B
.
““B C
Open
““C G
)
““G H
{
”” 
return
‘‘ 
startInterval
‘‘ (
.
‘‘( )
AddTicks
‘‘) 1
(
‘‘1 2
$num
‘‘2 3
)
‘‘3 4
;
‘‘4 5
}
’’ 
return
÷÷ 
startInterval
÷÷ $
;
÷÷$ %
}
◊◊ 
}
ÿÿ 	
public
€€ 
IntervalEdge
€€ 
	StartEdge
€€ %
{
‹‹ 	
get
›› 
{
›› 
return
›› 
	startEdge
›› "
;
››" #
}
››$ %
set
ﬁﬁ 
{
ﬂﬂ 
CheckModification
‡‡ !
(
‡‡! "
)
‡‡" #
;
‡‡# $
	startEdge
·· 
=
·· 
value
·· !
;
··! "
}
‚‚ 
}
„„ 	
public
ÊÊ 
bool
ÊÊ 
HasEnd
ÊÊ 
{
ÁÁ 	
get
ËË 
{
ËË 
return
ËË 
!
ËË 
(
ËË 
endInterval
ËË &
==
ËË' )
TimeSpec
ËË* 2
.
ËË2 3
MaxPeriodDate
ËË3 @
&&
ËËA C
endEdge
ËËD K
==
ËËL N
IntervalEdge
ËËO [
.
ËË[ \
Closed
ËË\ b
)
ËËb c
;
ËËc d
}
ËËe f
}
ÈÈ 	
public
ÏÏ 
DateTime
ÏÏ 
EndInterval
ÏÏ #
{
ÌÌ 	
get
ÓÓ 
{
ÓÓ 
return
ÓÓ 
endInterval
ÓÓ $
;
ÓÓ$ %
}
ÓÓ& '
set
ÔÔ 
{
 
CheckModification
ÒÒ !
(
ÒÒ! "
)
ÒÒ" #
;
ÒÒ# $
if
ÚÚ 
(
ÚÚ 
value
ÚÚ 
<
ÚÚ 
startInterval
ÚÚ )
)
ÚÚ) *
{
ÛÛ 
throw
ÙÙ 
new
ÙÙ )
ArgumentOutOfRangeException
ÙÙ 9
(
ÙÙ9 :
$str
ÙÙ: A
)
ÙÙA B
;
ÙÙB C
}
ıı 
endInterval
ˆˆ 
=
ˆˆ 
value
ˆˆ #
;
ˆˆ# $
}
˜˜ 
}
¯¯ 	
public
˚˚ 
DateTime
˚˚ 
End
˚˚ 
{
¸¸ 	
get
˝˝ 
{
˛˛ 
if
ˇˇ 
(
ˇˇ 
isIntervalEnabled
ˇˇ %
&&
ˇˇ& (
endEdge
ˇˇ) 0
==
ˇˇ1 3
IntervalEdge
ˇˇ4 @
.
ˇˇ@ A
Open
ˇˇA E
)
ˇˇE F
{
ÄÄ 
return
ÅÅ 
endInterval
ÅÅ &
.
ÅÅ& '
AddTicks
ÅÅ' /
(
ÅÅ/ 0
-
ÅÅ0 1
$num
ÅÅ1 2
)
ÅÅ2 3
;
ÅÅ3 4
}
ÇÇ 
return
ÉÉ 
endInterval
ÉÉ "
;
ÉÉ" #
}
ÑÑ 
}
ÖÖ 	
public
àà 
IntervalEdge
àà 
EndEdge
àà #
{
ââ 	
get
ää 
{
ää 
return
ää 
endEdge
ää  
;
ää  !
}
ää" #
set
ãã 
{
åå 
CheckModification
çç !
(
çç! "
)
çç" #
;
çç# $
endEdge
éé 
=
éé 
value
éé 
;
éé  
}
èè 
}
êê 	
public
ìì 
TimeSpan
ìì 
Duration
ìì  
{
îî 	
get
ïï 
{
ïï 
return
ïï 
endInterval
ïï $
.
ïï$ %
Subtract
ïï% -
(
ïï- .
startInterval
ïï. ;
)
ïï; <
;
ïï< =
}
ïï> ?
}
ññ 	
public
ôô 
string
ôô !
DurationDescription
ôô )
{
öö 	
get
õõ 
{
õõ 
return
õõ 
TimeFormatter
õõ &
.
õõ& '
Instance
õõ' /
.
õõ/ 0
GetDuration
õõ0 ;
(
õõ; <
Duration
õõ< D
,
õõD E 
DurationFormatType
õõF X
.
õõX Y
Detailed
õõY a
)
õõa b
;
õõb c
}
õõd e
}
úú 	
public
üü 
virtual
üü 
TimeSpan
üü 
GetDuration
üü  +
(
üü+ ,
IDurationProvider
üü, =
provider
üü> F
)
üüF G
{
†† 	
if
°° 
(
°° 
provider
°° 
==
°° 
null
°°  
)
°°  !
{
¢¢ 
throw
££ 
new
££ #
ArgumentNullException
££ /
(
££/ 0
$str
££0 :
)
££: ;
;
££; <
}
§§ 
return
•• 
provider
•• 
.
•• 
GetDuration
•• '
(
••' (
Start
••( -
,
••- .
End
••/ 2
)
••2 3
;
••3 4
}
¶¶ 	
public
©© 
virtual
©© 
void
©© 
Setup
©© !
(
©©! "
DateTime
©©" *
newStartInterval
©©+ ;
,
©©; <
DateTime
©©= E
newEndInterval
©©F T
)
©©T U
{
™™ 	
CheckModification
´´ 
(
´´ 
)
´´ 
;
´´  
if
¨¨ 
(
¨¨ 
newStartInterval
¨¨  
<=
¨¨! #
newEndInterval
¨¨$ 2
)
¨¨2 3
{
≠≠ 
startInterval
ÆÆ 
=
ÆÆ 
newStartInterval
ÆÆ  0
;
ÆÆ0 1
endInterval
ØØ 
=
ØØ 
newEndInterval
ØØ ,
;
ØØ, -
}
∞∞ 
else
±± 
{
≤≤ 
endInterval
≥≥ 
=
≥≥ 
newStartInterval
≥≥ .
;
≥≥. /
startInterval
¥¥ 
=
¥¥ 
newEndInterval
¥¥  .
;
¥¥. /
}
µµ 
}
∂∂ 	
public
ππ 
virtual
ππ 
bool
ππ 
IsSamePeriod
ππ (
(
ππ( )
ITimePeriod
ππ) 4
test
ππ5 9
)
ππ9 :
{
∫∫ 	
if
ªª 
(
ªª 
test
ªª 
==
ªª 
null
ªª 
)
ªª 
{
ºº 
throw
ΩΩ 
new
ΩΩ #
ArgumentNullException
ΩΩ /
(
ΩΩ/ 0
$str
ΩΩ0 6
)
ΩΩ6 7
;
ΩΩ7 8
}
ææ 
return
øø 
Start
øø 
==
øø 
test
øø  
.
øø  !
Start
øø! &
&&
øø' )
End
øø* -
==
øø. 0
test
øø1 5
.
øø5 6
End
øø6 9
;
øø9 :
}
¿¿ 	
public
√√ 
virtual
√√ 
bool
√√ 
	HasInside
√√ %
(
√√% &
DateTime
√√& .
test
√√/ 3
)
√√3 4
{
ƒƒ 	
return
≈≈ 
TimePeriodCalc
≈≈ !
.
≈≈! "
	HasInside
≈≈" +
(
≈≈+ ,
this
≈≈, 0
,
≈≈0 1
test
≈≈2 6
)
≈≈6 7
;
≈≈7 8
}
∆∆ 	
public
…… 
virtual
…… 
bool
…… 
	HasInside
…… %
(
……% &
ITimePeriod
……& 1
test
……2 6
)
……6 7
{
   	
if
ÀÀ 
(
ÀÀ 
test
ÀÀ 
==
ÀÀ 
null
ÀÀ 
)
ÀÀ 
{
ÃÃ 
throw
ÕÕ 
new
ÕÕ #
ArgumentNullException
ÕÕ /
(
ÕÕ/ 0
$str
ÕÕ0 6
)
ÕÕ6 7
;
ÕÕ7 8
}
ŒŒ 
return
œœ 
TimePeriodCalc
œœ !
.
œœ! "
	HasInside
œœ" +
(
œœ+ ,
this
œœ, 0
,
œœ0 1
test
œœ2 6
)
œœ6 7
;
œœ7 8
}
–– 	
public
”” 
ITimeInterval
”” 
Copy
”” !
(
””! "
)
””" #
{
‘‘ 	
return
’’ 
Copy
’’ 
(
’’ 
TimeSpan
’’  
.
’’  !
Zero
’’! %
)
’’% &
;
’’& '
}
÷÷ 	
public
ŸŸ 
virtual
ŸŸ 
ITimeInterval
ŸŸ $
Copy
ŸŸ% )
(
ŸŸ) *
TimeSpan
ŸŸ* 2
offset
ŸŸ3 9
)
ŸŸ9 :
{
⁄⁄ 	
return
€€ 
new
€€ 
TimeInterval
€€ #
(
€€# $
startInterval
‹‹ 
.
‹‹ 
Add
‹‹ !
(
‹‹! "
offset
‹‹" (
)
‹‹( )
,
‹‹) *
endInterval
›› 
.
›› 
Add
›› 
(
››  
offset
››  &
)
››& '
,
››' (
	startEdge
ﬁﬁ 
,
ﬁﬁ 
endEdge
ﬂﬂ 
,
ﬂﬂ 
IsIntervalEnabled
‡‡ !
,
‡‡! "

IsReadOnly
·· 
)
·· 
;
·· 
}
‚‚ 	
public
ÂÂ 
virtual
ÂÂ 
void
ÂÂ 
Move
ÂÂ  
(
ÂÂ  !
TimeSpan
ÂÂ! )
offset
ÂÂ* 0
)
ÂÂ0 1
{
ÊÊ 	
CheckModification
ÁÁ 
(
ÁÁ 
)
ÁÁ 
;
ÁÁ  
if
ËË 
(
ËË 
offset
ËË 
==
ËË 
TimeSpan
ËË "
.
ËË" #
Zero
ËË# '
)
ËË' (
{
ÈÈ 
return
ÍÍ 
;
ÍÍ 
}
ÎÎ 
startInterval
ÏÏ 
=
ÏÏ 
startInterval
ÏÏ )
.
ÏÏ) *
Add
ÏÏ* -
(
ÏÏ- .
offset
ÏÏ. 4
)
ÏÏ4 5
;
ÏÏ5 6
endInterval
ÌÌ 
=
ÌÌ 
endInterval
ÌÌ %
.
ÌÌ% &
Add
ÌÌ& )
(
ÌÌ) *
offset
ÌÌ* 0
)
ÌÌ0 1
;
ÌÌ1 2
}
ÓÓ 	
public
ÒÒ 
virtual
ÒÒ 
void
ÒÒ 
ExpandStartTo
ÒÒ )
(
ÒÒ) *
DateTime
ÒÒ* 2
moment
ÒÒ3 9
)
ÒÒ9 :
{
ÚÚ 	
CheckModification
ÛÛ 
(
ÛÛ 
)
ÛÛ 
;
ÛÛ  
if
ÙÙ 
(
ÙÙ 
startInterval
ÙÙ 
>
ÙÙ 
moment
ÙÙ  &
)
ÙÙ& '
{
ıı 
startInterval
ˆˆ 
=
ˆˆ 
moment
ˆˆ  &
;
ˆˆ& '
}
˜˜ 
}
¯¯ 	
public
˚˚ 
virtual
˚˚ 
void
˚˚ 
ExpandEndTo
˚˚ '
(
˚˚' (
DateTime
˚˚( 0
moment
˚˚1 7
)
˚˚7 8
{
¸¸ 	
CheckModification
˝˝ 
(
˝˝ 
)
˝˝ 
;
˝˝  
if
˛˛ 
(
˛˛ 
endInterval
˛˛ 
<
˛˛ 
moment
˛˛ $
)
˛˛$ %
{
ˇˇ 
endInterval
ÄÄ 
=
ÄÄ 
moment
ÄÄ $
;
ÄÄ$ %
}
ÅÅ 
}
ÇÇ 	
public
ÖÖ 
void
ÖÖ 
ExpandTo
ÖÖ 
(
ÖÖ 
DateTime
ÖÖ %
moment
ÖÖ& ,
)
ÖÖ, -
{
ÜÜ 	
ExpandStartTo
áá 
(
áá 
moment
áá  
)
áá  !
;
áá! "
ExpandEndTo
àà 
(
àà 
moment
àà 
)
àà 
;
àà  
}
ââ 	
public
åå 
void
åå 
ExpandTo
åå 
(
åå 
ITimePeriod
åå (
period
åå) /
)
åå/ 0
{
çç 	
if
éé 
(
éé 
period
éé 
==
éé 
null
éé 
)
éé 
{
èè 
throw
êê 
new
êê #
ArgumentNullException
êê /
(
êê/ 0
$str
êê0 8
)
êê8 9
;
êê9 :
}
ëë 
ITimeInterval
íí 
timeInterval
íí &
=
íí' (
period
íí) /
as
íí0 2
ITimeInterval
íí3 @
;
íí@ A
if
ìì 
(
ìì 
timeInterval
ìì 
!=
ìì 
null
ìì  $
)
ìì$ %
{
îî 
ExpandStartTo
ïï 
(
ïï 
timeInterval
ïï *
.
ïï* +
StartInterval
ïï+ 8
)
ïï8 9
;
ïï9 :
ExpandEndTo
ññ 
(
ññ 
timeInterval
ññ (
.
ññ( )
EndInterval
ññ) 4
)
ññ4 5
;
ññ5 6
}
óó 
else
òò 
{
ôô 
ExpandStartTo
öö 
(
öö 
period
öö $
.
öö$ %
Start
öö% *
)
öö* +
;
öö+ ,
ExpandEndTo
õõ 
(
õõ 
period
õõ "
.
õõ" #
End
õõ# &
)
õõ& '
;
õõ' (
}
úú 
}
ùù 	
public
†† 
virtual
†† 
void
†† 
ShrinkStartTo
†† )
(
††) *
DateTime
††* 2
moment
††3 9
)
††9 :
{
°° 	
CheckModification
¢¢ 
(
¢¢ 
)
¢¢ 
;
¢¢  
if
££ 
(
££ 
	HasInside
££ 
(
££ 
moment
££  
)
££  !
&&
££" $
startInterval
££% 2
<
££3 4
moment
££5 ;
)
££; <
{
§§ 
startInterval
•• 
=
•• 
moment
••  &
;
••& '
}
¶¶ 
}
ßß 	
public
™™ 
virtual
™™ 
void
™™ 
ShrinkEndTo
™™ '
(
™™' (
DateTime
™™( 0
moment
™™1 7
)
™™7 8
{
´´ 	
CheckModification
¨¨ 
(
¨¨ 
)
¨¨ 
;
¨¨  
if
≠≠ 
(
≠≠ 
	HasInside
≠≠ 
(
≠≠ 
moment
≠≠  
)
≠≠  !
&&
≠≠" $
endInterval
≠≠% 0
>
≠≠1 2
moment
≠≠3 9
)
≠≠9 :
{
ÆÆ 
endInterval
ØØ 
=
ØØ 
moment
ØØ $
;
ØØ$ %
}
∞∞ 
}
±± 	
public
¥¥ 
void
¥¥ 
ShrinkTo
¥¥ 
(
¥¥ 
ITimePeriod
¥¥ (
period
¥¥) /
)
¥¥/ 0
{
µµ 	
if
∂∂ 
(
∂∂ 
period
∂∂ 
==
∂∂ 
null
∂∂ 
)
∂∂ 
{
∑∑ 
throw
∏∏ 
new
∏∏ #
ArgumentNullException
∏∏ /
(
∏∏/ 0
$str
∏∏0 8
)
∏∏8 9
;
∏∏9 :
}
ππ 
ITimeInterval
∫∫ 
timeInterval
∫∫ &
=
∫∫' (
period
∫∫) /
as
∫∫0 2
ITimeInterval
∫∫3 @
;
∫∫@ A
if
ªª 
(
ªª 
timeInterval
ªª 
!=
ªª 
null
ªª  $
)
ªª$ %
{
ºº 
ShrinkStartTo
ΩΩ 
(
ΩΩ 
timeInterval
ΩΩ *
.
ΩΩ* +
StartInterval
ΩΩ+ 8
)
ΩΩ8 9
;
ΩΩ9 :
ShrinkEndTo
ææ 
(
ææ 
timeInterval
ææ (
.
ææ( )
EndInterval
ææ) 4
)
ææ4 5
;
ææ5 6
}
øø 
else
¿¿ 
{
¡¡ 
ShrinkStartTo
¬¬ 
(
¬¬ 
period
¬¬ $
.
¬¬$ %
Start
¬¬% *
)
¬¬* +
;
¬¬+ ,
ShrinkEndTo
√√ 
(
√√ 
period
√√ "
.
√√" #
End
√√# &
)
√√& '
;
√√' (
}
ƒƒ 
ShrinkStartTo
≈≈ 
(
≈≈ 
period
≈≈  
.
≈≈  !
Start
≈≈! &
)
≈≈& '
;
≈≈' (
}
∆∆ 	
public
…… 
virtual
…… 
bool
…… 
IntersectsWith
…… *
(
……* +
ITimePeriod
……+ 6
test
……7 ;
)
……; <
{
   	
if
ÀÀ 
(
ÀÀ 
test
ÀÀ 
==
ÀÀ 
null
ÀÀ 
)
ÀÀ 
{
ÃÃ 
throw
ÕÕ 
new
ÕÕ #
ArgumentNullException
ÕÕ /
(
ÕÕ/ 0
$str
ÕÕ0 6
)
ÕÕ6 7
;
ÕÕ7 8
}
ŒŒ 
return
œœ 
TimePeriodCalc
œœ !
.
œœ! "
IntersectsWith
œœ" 0
(
œœ0 1
this
œœ1 5
,
œœ5 6
test
œœ7 ;
)
œœ; <
;
œœ< =
}
–– 	
public
”” 
virtual
”” 
ITimeInterval
”” $
GetIntersection
””% 4
(
””4 5
ITimePeriod
””5 @
period
””A G
)
””G H
{
‘‘ 	
if
’’ 
(
’’ 
period
’’ 
==
’’ 
null
’’ 
)
’’ 
{
÷÷ 
throw
◊◊ 
new
◊◊ #
ArgumentNullException
◊◊ /
(
◊◊/ 0
$str
◊◊0 8
)
◊◊8 9
;
◊◊9 :
}
ÿÿ 
if
ŸŸ 
(
ŸŸ 
!
ŸŸ 
IntersectsWith
ŸŸ 
(
ŸŸ  
period
ŸŸ  &
)
ŸŸ& '
)
ŸŸ' (
{
⁄⁄ 
return
€€ 
null
€€ 
;
€€ 
}
‹‹ 
DateTime
›› 
start
›› 
=
›› 
Start
›› "
;
››" #
DateTime
ﬁﬁ 
end
ﬁﬁ 
=
ﬁﬁ 
End
ﬁﬁ 
;
ﬁﬁ 
DateTime
ﬂﬂ 
periodStart
ﬂﬂ  
=
ﬂﬂ! "
period
ﬂﬂ# )
.
ﬂﬂ) *
Start
ﬂﬂ* /
;
ﬂﬂ/ 0
DateTime
‡‡ 
	periodEnd
‡‡ 
=
‡‡  
period
‡‡! '
.
‡‡' (
End
‡‡( +
;
‡‡+ ,
return
·· 
new
·· 
TimeInterval
·· #
(
··# $
periodStart
‚‚ 
>
‚‚ 
start
‚‚ #
?
‚‚$ %
periodStart
‚‚& 1
:
‚‚2 3
start
‚‚4 9
,
‚‚9 :
	periodEnd
„„ 
<
„„ 
end
„„ 
?
„„  !
	periodEnd
„„" +
:
„„, -
end
„„. 1
,
„„1 2
IntervalEdge
‰‰ 
.
‰‰ 
Closed
‰‰ #
,
‰‰# $
IntervalEdge
ÂÂ 
.
ÂÂ 
Closed
ÂÂ #
,
ÂÂ# $
IsIntervalEnabled
ÊÊ !
,
ÊÊ! "

IsReadOnly
ÁÁ 
)
ÁÁ 
;
ÁÁ 
}
ËË 	
public
ÎÎ 
virtual
ÎÎ 
bool
ÎÎ 
OverlapsWith
ÎÎ (
(
ÎÎ( )
ITimePeriod
ÎÎ) 4
test
ÎÎ5 9
)
ÎÎ9 :
{
ÏÏ 	
if
ÌÌ 
(
ÌÌ 
test
ÌÌ 
==
ÌÌ 
null
ÌÌ 
)
ÌÌ 
{
ÓÓ 
throw
ÔÔ 
new
ÔÔ #
ArgumentNullException
ÔÔ /
(
ÔÔ/ 0
$str
ÔÔ0 6
)
ÔÔ6 7
;
ÔÔ7 8
}
 
return
ÒÒ 
TimePeriodCalc
ÒÒ !
.
ÒÒ! "
OverlapsWith
ÒÒ" .
(
ÒÒ. /
this
ÒÒ/ 3
,
ÒÒ3 4
test
ÒÒ5 9
)
ÒÒ9 :
;
ÒÒ: ;
}
ÚÚ 	
public
ıı 
virtual
ıı 
PeriodRelation
ıı %
GetRelation
ıı& 1
(
ıı1 2
ITimePeriod
ıı2 =
test
ıı> B
)
ııB C
{
ˆˆ 	
if
˜˜ 
(
˜˜ 
test
˜˜ 
==
˜˜ 
null
˜˜ 
)
˜˜ 
{
¯¯ 
throw
˘˘ 
new
˘˘ #
ArgumentNullException
˘˘ /
(
˘˘/ 0
$str
˘˘0 6
)
˘˘6 7
;
˘˘7 8
}
˙˙ 
return
˚˚ 
TimePeriodCalc
˚˚ !
.
˚˚! "
GetRelation
˚˚" -
(
˚˚- .
this
˚˚. 2
,
˚˚2 3
test
˚˚4 8
)
˚˚8 9
;
˚˚9 :
}
¸¸ 	
public
ˇˇ 
virtual
ˇˇ 
int
ˇˇ 
	CompareTo
ˇˇ $
(
ˇˇ$ %
ITimePeriod
ˇˇ% 0
other
ˇˇ1 6
,
ˇˇ6 7!
ITimePeriodComparer
ˇˇ8 K
comparer
ˇˇL T
)
ˇˇT U
{
ÄÄ 	
if
ÅÅ 
(
ÅÅ 
other
ÅÅ 
==
ÅÅ 
null
ÅÅ 
)
ÅÅ 
{
ÇÇ 
throw
ÉÉ 
new
ÉÉ #
ArgumentNullException
ÉÉ /
(
ÉÉ/ 0
$str
ÉÉ0 7
)
ÉÉ7 8
;
ÉÉ8 9
}
ÑÑ 
if
ÖÖ 
(
ÖÖ 
comparer
ÖÖ 
==
ÖÖ 
null
ÖÖ  
)
ÖÖ  !
{
ÜÜ 
throw
áá 
new
áá #
ArgumentNullException
áá /
(
áá/ 0
$str
áá0 :
)
áá: ;
;
áá; <
}
àà 
return
ââ 
comparer
ââ 
.
ââ 
Compare
ââ #
(
ââ# $
this
ââ$ (
,
ââ( )
other
ââ* /
)
ââ/ 0
;
ââ0 1
}
ää 	
public
çç 
virtual
çç 
void
çç 
Reset
çç !
(
çç! "
)
çç" #
{
éé 	
CheckModification
èè 
(
èè 
)
èè 
;
èè  
isIntervalEnabled
êê 
=
êê 
true
êê  $
;
êê$ %
startInterval
ëë 
=
ëë 
TimeSpec
ëë $
.
ëë$ %
MinPeriodDate
ëë% 2
;
ëë2 3
endInterval
íí 
=
íí 
TimeSpec
íí "
.
íí" #
MaxPeriodDate
íí# 0
;
íí0 1
	startEdge
ìì 
=
ìì 
IntervalEdge
ìì $
.
ìì$ %
Closed
ìì% +
;
ìì+ ,
endEdge
îî 
=
îî 
IntervalEdge
îî "
.
îî" #
Closed
îî# )
;
îî) *
}
ïï 	
public
òò 
string
òò 
GetDescription
òò $
(
òò$ %
ITimeFormatter
òò% 3
	formatter
òò4 =
=
òò> ?
null
òò@ D
)
òòD E
{
ôô 	
return
öö 
Format
öö 
(
öö 
	formatter
öö #
??
öö$ &
TimeFormatter
öö' 4
.
öö4 5
Instance
öö5 =
)
öö= >
;
öö> ?
}
õõ 	
	protected
ûû 
virtual
ûû 
string
ûû  
Format
ûû! '
(
ûû' (
ITimeFormatter
ûû( 6
	formatter
ûû7 @
)
ûû@ A
{
üü 	
return
†† 
	formatter
†† 
.
†† 
GetInterval
†† (
(
††( )
startInterval
††) 6
,
††6 7
endInterval
††8 C
,
††C D
	startEdge
††E N
,
††N O
endEdge
††P W
,
††W X
Duration
††Y a
)
††a b
;
††b c
}
°° 	
public
§§ 
override
§§ 
string
§§ 
ToString
§§ '
(
§§' (
)
§§( )
{
•• 	
return
¶¶ 
GetDescription
¶¶ !
(
¶¶! "
)
¶¶" #
;
¶¶# $
}
ßß 	
public
™™ 
sealed
™™ 
override
™™ 
bool
™™ #
Equals
™™$ *
(
™™* +
object
™™+ 1
obj
™™2 5
)
™™5 6
{
´´ 	
if
¨¨ 
(
¨¨ 
obj
¨¨ 
==
¨¨ 
this
¨¨ 
)
¨¨ 
{
≠≠ 
return
ÆÆ 
true
ÆÆ 
;
ÆÆ 
}
ØØ 
if
∞∞ 
(
∞∞ 
obj
∞∞ 
==
∞∞ 
null
∞∞ 
||
∞∞ 
GetType
∞∞ &
(
∞∞& '
)
∞∞' (
!=
∞∞) +
obj
∞∞, /
.
∞∞/ 0
GetType
∞∞0 7
(
∞∞7 8
)
∞∞8 9
)
∞∞9 :
{
±± 
return
≤≤ 
false
≤≤ 
;
≤≤ 
}
≥≥ 
return
¥¥ 
IsEqual
¥¥ 
(
¥¥ 
obj
¥¥ 
)
¥¥ 
;
¥¥  
}
µµ 	
	protected
∏∏ 
virtual
∏∏ 
bool
∏∏ 
IsEqual
∏∏ &
(
∏∏& '
object
∏∏' -
obj
∏∏. 1
)
∏∏1 2
{
ππ 	
return
∫∫ 
HasSameData
∫∫ 
(
∫∫ 
obj
∫∫ "
as
∫∫# %
TimeInterval
∫∫& 2
)
∫∫2 3
;
∫∫3 4
}
ªª 	
private
ææ 
bool
ææ 
HasSameData
ææ  
(
ææ  !
TimeInterval
ææ! -
comp
ææ. 2
)
ææ2 3
{
øø 	
return
¿¿ 

isReadOnly
¡¡ 
==
¡¡ 
comp
¡¡ "
.
¡¡" #

isReadOnly
¡¡# -
&&
¡¡. 0
isIntervalEnabled
¬¬ !
==
¬¬" $
comp
¬¬% )
.
¬¬) *
isIntervalEnabled
¬¬* ;
&&
¬¬< >
startInterval
√√ 
==
√√  
comp
√√! %
.
√√% &
startInterval
√√& 3
&&
√√4 6
endInterval
ƒƒ 
==
ƒƒ 
comp
ƒƒ #
.
ƒƒ# $
endInterval
ƒƒ$ /
&&
ƒƒ0 2
	startEdge
≈≈ 
==
≈≈ 
comp
≈≈ !
.
≈≈! "
	startEdge
≈≈" +
&&
≈≈, .
endEdge
∆∆ 
==
∆∆ 
comp
∆∆ 
.
∆∆  
endEdge
∆∆  '
;
∆∆' (
}
«« 	
public
   
sealed
   
override
   
int
   "
GetHashCode
  # .
(
  . /
)
  / 0
{
ÀÀ 	
return
ÃÃ 
HashTool
ÃÃ 
.
ÃÃ 
AddHashCode
ÃÃ '
(
ÃÃ' (
GetType
ÃÃ( /
(
ÃÃ/ 0
)
ÃÃ0 1
.
ÃÃ1 2
GetHashCode
ÃÃ2 =
(
ÃÃ= >
)
ÃÃ> ?
,
ÃÃ? @
ComputeHashCode
ÃÃA P
(
ÃÃP Q
)
ÃÃQ R
)
ÃÃR S
;
ÃÃS T
}
ÕÕ 	
	protected
–– 
virtual
–– 
int
–– 
ComputeHashCode
–– -
(
––- .
)
––. /
{
—— 	
return
““ 
HashTool
““ 
.
““ 
ComputeHashCode
““ +
(
““+ ,

isReadOnly
”” 
,
”” 
isIntervalEnabled
‘‘ !
,
‘‘! "
startInterval
’’ 
,
’’ 
endInterval
÷÷ 
,
÷÷ 
	startEdge
◊◊ 
,
◊◊ 
endEdge
ÿÿ 
)
ÿÿ 
;
ÿÿ 
}
ŸŸ 	
	protected
‹‹ 
void
‹‹ 
CheckModification
‹‹ (
(
‹‹( )
)
‹‹) *
{
›› 	
if
ﬁﬁ 
(
ﬁﬁ 

IsReadOnly
ﬁﬁ 
)
ﬁﬁ 
{
ﬂﬂ 
throw
‡‡ 
new
‡‡ #
NotSupportedException
‡‡ /
(
‡‡/ 0
$str
‡‡0 K
)
‡‡K L
;
‡‡L M
}
·· 
}
‚‚ 	
private
ÊÊ 
readonly
ÊÊ 
bool
ÊÊ 

isReadOnly
ÊÊ (
;
ÊÊ( )
private
ÁÁ 
bool
ÁÁ 
isIntervalEnabled
ÁÁ &
=
ÁÁ' (
true
ÁÁ) -
;
ÁÁ- .
private
ËË 
DateTime
ËË 
startInterval
ËË &
;
ËË& '
private
ÈÈ 
DateTime
ÈÈ 
endInterval
ÈÈ $
;
ÈÈ$ %
private
ÍÍ 
IntervalEdge
ÍÍ 
	startEdge
ÍÍ &
;
ÍÍ& '
private
ÎÎ 
IntervalEdge
ÎÎ 
endEdge
ÎÎ $
;
ÎÎ$ %
}
ÌÌ 
}ÔÔ ™„
iF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\TimeLine.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

class 
TimeLine 
< 
T 
> 
: 
	ITimeLine (
where) .
T/ 0
:1 2
ITimePeriod3 >
,> ?
new@ C
(C D
)D E
{ 
public 
TimeLine 
(  
ITimePeriodContainer ,
periods- 4
,4 5
ITimePeriodMapper6 G
periodMapperH T
=U V
nullW [
)[ \
:] ^
this 
( 
periods 
, 
null 
, 
periodMapper  ,
), -
{ 	
} 	
public 
TimeLine 
(  
ITimePeriodContainer ,
periods- 4
,4 5
ITimePeriod6 A
limitsB H
=I J
nullK O
,O P
ITimePeriodMapperQ b
periodMapperc o
=p q
nullr v
)v w
{ 	
if 
( 
periods 
== 
null 
)  
{ 
throw 
new !
ArgumentNullException /
(/ 0
$str0 9
)9 :
;: ;
} 
this 
. 
limits 
= 
limits  
!=! #
null$ (
?) *
new+ .
	TimeRange/ 8
(8 9
limits9 ?
)? @
:A B
newC F
	TimeRangeG P
(P Q
periodsQ X
)X Y
;Y Z
this   
.   
periods   
=   
periods   "
;  " #
this!! 
.!! 
periodMapper!! 
=!! 
periodMapper!!  ,
;!!, -
}"" 	
public%%  
ITimePeriodContainer%% #
Periods%%$ +
{&& 	
get'' 
{'' 
return'' 
periods''  
;''  !
}''" #
}(( 	
public++ 
ITimePeriod++ 
Limits++ !
{,, 	
get-- 
{-- 
return-- 
limits-- 
;--  
}--! "
}.. 	
public11 
ITimePeriodMapper11  
PeriodMapper11! -
{22 	
get33 
{33 
return33 
periodMapper33 %
;33% &
}33' (
}44 	
private77 
bool77 
HasNonMomentPeriods77 (
{88 	
get99 
{:: 
foreach;; 
(;; 
ITimePeriod;; $
period;;% +
in;;, .
periods;;/ 6
);;6 7
{<< 
if== 
(== 
!== 
period== 
.==  
IsMoment==  (
)==( )
{>> 
return?? 
true?? #
;??# $
}@@ 
}AA 
returnBB 
falseBB 
;BB 
}CC 
}DD 	
publicGG 
boolGG 
HasOverlapsGG 
(GG  
)GG  !
{HH 	
returnII 
GetTimeLineMomentsII %
(II% &
)II& '
.II' (
HasOverlapsII( 3
(II3 4
)II4 5
;II5 6
}JJ 	
publicMM 
boolMM 
HasGapsMM 
(MM 
)MM 
{NN 	
returnOO 
GetTimeLineMomentsOO %
(OO% &
)OO& '
.OO' (
HasGapsOO( /
(OO/ 0
)OO0 1
;OO1 2
}PP 	
publicSS !
ITimePeriodCollectionSS $
CombinePeriodsSS% 3
(SS3 4
)SS4 5
{TT 	
ifUU 
(UU 
periodsUU 
.UU 
CountUU 
==UU  
$numUU! "
||UU# %
periodsUU& -
.UU- .
CountUU. 3
>UU4 5
$numUU6 7
&&UU8 :
!UU; <
HasNonMomentPeriodsUU< O
)UUO P
{VV 
returnWW 
newWW  
TimePeriodCollectionWW /
(WW/ 0
)WW0 1
;WW1 2
}XX %
ITimeLineMomentCollectionZZ %
timeLineMomentsZZ& 5
=ZZ6 7
GetTimeLineMomentsZZ8 J
(ZZJ K
)ZZK L
;ZZL M
return[[ 
timeLineMoments[[ "
.[[" #
Count[[# (
==[[) +
$num[[, -
?[[. /
new[[0 3 
TimePeriodCollection[[4 H
{[[I J
new[[K N
	TimeRange[[O X
([[X Y
periods[[Y `
)[[` a
}[[b c
:[[d e
CombinePeriods[[f t
([[t u
timeLineMoments	[[u Ñ
)
[[Ñ Ö
;
[[Ö Ü
}\\ 	
public__ !
ITimePeriodCollection__ $
IntersectPeriods__% 5
(__5 6
bool__6 :
combinePeriods__; I
=__J K
true__L P
)__P Q
{`` 	
ifaa 
(aa 
periodsaa 
.aa 
Countaa 
==aa  
$numaa! "
||aa# %
periodsaa& -
.aa- .
Countaa. 3
>aa4 5
$numaa6 7
&&aa8 :
!aa; <
HasNonMomentPeriodsaa< O
)aaO P
{bb 
returncc 
newcc  
TimePeriodCollectioncc /
(cc/ 0
)cc0 1
;cc1 2
}dd %
ITimeLineMomentCollectionff %
timeLineMomentsff& 5
=ff6 7
GetTimeLineMomentsff8 J
(ffJ K
)ffK L
;ffL M
ifgg 
(gg 
timeLineMomentsgg 
.gg  
Countgg  %
==gg& (
$numgg) *
)gg* +
{hh 
returnii 
newii  
TimePeriodCollectionii /
(ii/ 0
)ii0 1
;ii1 2
}jj 
returnll 
combinePeriodsll !
?ll" #$
IntersectCombinedPeriodsll$ <
(ll< =
timeLineMomentsll= L
)llL M
:llN O
IntersectPeriodsllP `
(ll` a
timeLineMomentslla p
)llp q
;llq r
}mm 	
publicpp !
ITimePeriodCollectionpp $
CalculateGapspp% 2
(pp2 3
)pp3 4
{qq 	 
TimePeriodCollectionss  

gapPeriodsss! +
=ss, -
newss. 1 
TimePeriodCollectionss2 F
(ssF G
)ssG H
;ssH I
foreachtt 
(tt 
ITimePeriodtt  
periodtt! '
intt( *
periodstt+ 2
)tt2 3
{uu 
ifvv 
(vv 
limitsvv 
.vv 
IntersectsWithvv )
(vv) *
periodvv* 0
)vv0 1
)vv1 2
{ww 

gapPeriodsxx 
.xx 
Addxx "
(xx" #
newxx# &
	TimeRangexx' 0
(xx0 1
periodxx1 7
)xx7 8
)xx8 9
;xx9 :
}yy 
}zz %
ITimeLineMomentCollection|| %
timeLineMoments||& 5
=||6 7
GetTimeLineMoments||8 J
(||J K

gapPeriods||K U
)||U V
;||V W
if}} 
(}} 
timeLineMoments}} 
.}}  
Count}}  %
==}}& (
$num}}) *
)}}* +
{~~ 
return 
new  
TimePeriodCollection /
{0 1
limits2 8
}9 :
;: ;
}
ÄÄ 
T
ÇÇ 
range
ÇÇ 
=
ÇÇ 
new
ÇÇ 
T
ÇÇ 
(
ÇÇ 
)
ÇÇ 
;
ÇÇ 
range
ÉÉ 
.
ÉÉ 
Setup
ÉÉ 
(
ÉÉ 
MapPeriodStart
ÉÉ &
(
ÉÉ& '
limits
ÉÉ' -
.
ÉÉ- .
Start
ÉÉ. 3
)
ÉÉ3 4
,
ÉÉ4 5
MapPeriodEnd
ÉÉ6 B
(
ÉÉB C
limits
ÉÉC I
.
ÉÉI J
End
ÉÉJ M
)
ÉÉM N
)
ÉÉN O
;
ÉÉO P
return
ÑÑ 
CalculateGaps
ÑÑ  
(
ÑÑ  !
range
ÑÑ! &
,
ÑÑ& '
timeLineMoments
ÑÑ( 7
)
ÑÑ7 8
;
ÑÑ8 9
}
ÖÖ 	
private
àà '
ITimeLineMomentCollection
àà ) 
GetTimeLineMoments
àà* <
(
àà< =
)
àà= >
{
ââ 	
return
ää  
GetTimeLineMoments
ää %
(
ää% &
periods
ää& -
)
ää- .
;
ää. /
}
ãã 	
private
éé '
ITimeLineMomentCollection
éé ) 
GetTimeLineMoments
éé* <
(
éé< =
ICollection
éé= H
<
ééH I
ITimePeriod
ééI T
>
ééT U
momentPeriods
ééV c
)
ééc d
{
èè 	&
TimeLineMomentCollection
êê $
timeLineMoments
êê% 4
=
êê5 6
new
êê7 :&
TimeLineMomentCollection
êê; S
(
êêS T
)
êêT U
;
êêU V
if
íí 
(
íí 
momentPeriods
íí 
.
íí 
Count
íí #
==
íí$ &
$num
íí' (
)
íí( )
{
ìì 
return
îî 
timeLineMoments
îî &
;
îî& '
}
ïï #
ITimePeriodCollection
òò !
intersections
òò" /
=
òò0 1
new
òò2 5"
TimePeriodCollection
òò6 J
(
òòJ K
)
òòK L
;
òòL M
foreach
ôô 
(
ôô 
ITimePeriod
ôô  
momentPeriod
ôô! -
in
ôô. 0
momentPeriods
ôô1 >
)
ôô> ?
{
öö 
if
õõ 
(
õõ 
momentPeriod
õõ  
.
õõ  !
IsMoment
õõ! )
)
õõ) *
{
úú 
continue
ùù 
;
ùù 
}
ûû 

ITimeRange
°° 
intersection
°° '
=
°°( )
limits
°°* 0
.
°°0 1
GetIntersection
°°1 @
(
°°@ A
momentPeriod
°°A M
)
°°M N
;
°°N O
if
¢¢ 
(
¢¢ 
intersection
¢¢  
==
¢¢! #
null
¢¢$ (
||
¢¢) +
intersection
¢¢, 8
.
¢¢8 9
IsMoment
¢¢9 A
)
¢¢A B
{
££ 
continue
§§ 
;
§§ 
}
•• 
if
ßß 
(
ßß 
periodMapper
ßß  
!=
ßß! #
null
ßß$ (
)
ßß( )
{
®® 
intersection
©©  
=
©©! "
new
©©# &
	TimeRange
©©' 0
(
©©0 1
MapPeriodStart
©©1 ?
(
©©? @
intersection
©©@ L
.
©©L M
Start
©©M R
)
©©R S
,
©©S T
MapPeriodEnd
©©U a
(
©©a b
intersection
©©b n
.
©©n o
End
©©o r
)
©©r s
)
©©s t
;
©©t u
}
™™ 
intersections
¨¨ 
.
¨¨ 
Add
¨¨ !
(
¨¨! "
intersection
¨¨" .
)
¨¨. /
;
¨¨/ 0
}
≠≠ 
timeLineMoments
ØØ 
.
ØØ 
AddAll
ØØ "
(
ØØ" #
intersections
ØØ# 0
)
ØØ0 1
;
ØØ1 2
return
∞∞ 
timeLineMoments
∞∞ "
;
∞∞" #
}
±± 	
private
¥¥ 
static
¥¥ #
ITimePeriodCollection
¥¥ ,
CombinePeriods
¥¥- ;
(
¥¥; <'
ITimeLineMomentCollection
¥¥< U
timeLineMoments
¥¥V e
)
¥¥e f
{
µµ 	"
TimePeriodCollection
∂∂  
periods
∂∂! (
=
∂∂) *
new
∂∂+ ."
TimePeriodCollection
∂∂/ C
(
∂∂C D
)
∂∂D E
;
∂∂E F
if
∑∑ 
(
∑∑ 
timeLineMoments
∑∑ 
.
∑∑  
IsEmpty
∑∑  '
)
∑∑' (
{
∏∏ 
return
ππ 
periods
ππ 
;
ππ 
}
∫∫ 
int
ΩΩ 
	itemIndex
ΩΩ 
=
ΩΩ 
$num
ΩΩ 
;
ΩΩ 
while
ææ 
(
ææ 
	itemIndex
ææ 
<
ææ 
timeLineMoments
ææ .
.
ææ. /
Count
ææ/ 4
)
ææ4 5
{
øø 
ITimeLineMoment
¿¿ 
periodStart
¿¿  +
=
¿¿, -
timeLineMoments
¿¿. =
[
¿¿= >
	itemIndex
¿¿> G
]
¿¿G H
;
¿¿H I
int
¡¡ 

startCount
¡¡ 
=
¡¡  
periodStart
¡¡! ,
.
¡¡, -

StartCount
¡¡- 7
;
¡¡7 8
if
¬¬ 
(
¬¬ 

startCount
¬¬ 
==
¬¬ !
$num
¬¬" #
)
¬¬# $
{
√√ 
throw
ƒƒ 
new
ƒƒ '
InvalidOperationException
ƒƒ 7
(
ƒƒ7 8
)
ƒƒ8 9
;
ƒƒ9 :
}
≈≈ 
int
…… 
balance
…… 
=
…… 

startCount
…… (
;
……( )
ITimeLineMoment
   
	periodEnd
    )
=
  * +
null
  , 0
;
  0 1
while
ÀÀ 
(
ÀÀ 
	itemIndex
ÀÀ  
<
ÀÀ! "
timeLineMoments
ÀÀ# 2
.
ÀÀ2 3
Count
ÀÀ3 8
-
ÀÀ9 :
$num
ÀÀ; <
&&
ÀÀ= ?
balance
ÀÀ@ G
>
ÀÀH I
$num
ÀÀJ K
)
ÀÀK L
{
ÃÃ 
	itemIndex
ÕÕ 
++
ÕÕ 
;
ÕÕ  
	periodEnd
ŒŒ 
=
ŒŒ 
timeLineMoments
ŒŒ  /
[
ŒŒ/ 0
	itemIndex
ŒŒ0 9
]
ŒŒ9 :
;
ŒŒ: ;
balance
œœ 
+=
œœ 
	periodEnd
œœ (
.
œœ( )
BalanceCount
œœ) 5
;
œœ5 6
}
–– 
if
““ 
(
““ 
	periodEnd
““ 
==
““  
null
““! %
)
““% &
{
”” 
throw
‘‘ 
new
‘‘ '
InvalidOperationException
‘‘ 7
(
‘‘7 8
)
‘‘8 9
;
‘‘9 :
}
’’ 
if
◊◊ 
(
◊◊ 
	periodEnd
◊◊ 
.
◊◊ 

StartCount
◊◊ (
>
◊◊) *
$num
◊◊+ ,
)
◊◊, -
{
ÿÿ 
	itemIndex
ŸŸ 
++
ŸŸ 
;
ŸŸ  
continue
⁄⁄ 
;
⁄⁄ 
}
€€ 
if
ﬁﬁ 
(
ﬁﬁ 
	itemIndex
ﬁﬁ 
<
ﬁﬁ 
timeLineMoments
ﬁﬁ  /
.
ﬁﬁ/ 0
Count
ﬁﬁ0 5
)
ﬁﬁ5 6
{
ﬂﬂ 
T
‡‡ 
period
‡‡ 
=
‡‡ 
new
‡‡ "
T
‡‡# $
(
‡‡$ %
)
‡‡% &
;
‡‡& '
period
·· 
.
·· 
Setup
··  
(
··  !
periodStart
··! ,
.
··, -
Moment
··- 3
,
··3 4
	periodEnd
··5 >
.
··> ?
Moment
··? E
)
··E F
;
··F G
periods
‚‚ 
.
‚‚ 
Add
‚‚ 
(
‚‚  
period
‚‚  &
)
‚‚& '
;
‚‚' (
}
„„ 
	itemIndex
ÂÂ 
++
ÂÂ 
;
ÂÂ 
}
ÊÊ 
return
ËË 
periods
ËË 
;
ËË 
}
ÈÈ 	
private
ÏÏ 
static
ÏÏ #
ITimePeriodCollection
ÏÏ ,&
IntersectCombinedPeriods
ÏÏ- E
(
ÏÏE F'
ITimeLineMomentCollection
ÏÏF _
timeLineMoments
ÏÏ` o
)
ÏÏo p
{
ÌÌ 	"
TimePeriodCollection
ÓÓ  
periods
ÓÓ! (
=
ÓÓ) *
new
ÓÓ+ ."
TimePeriodCollection
ÓÓ/ C
(
ÓÓC D
)
ÓÓD E
;
ÓÓE F
if
ÔÔ 
(
ÔÔ 
timeLineMoments
ÔÔ 
.
ÔÔ  
IsEmpty
ÔÔ  '
)
ÔÔ' (
{
 
return
ÒÒ 
periods
ÒÒ 
;
ÒÒ 
}
ÚÚ 
int
ıı 
intersectionStart
ıı !
=
ıı" #
-
ıı$ %
$num
ıı% &
;
ıı& '
int
ˆˆ 
balance
ˆˆ 
=
ˆˆ 
$num
ˆˆ 
;
ˆˆ 
for
˜˜ 
(
˜˜ 
int
˜˜ 
i
˜˜ 
=
˜˜ 
$num
˜˜ 
;
˜˜ 
i
˜˜ 
<
˜˜ 
timeLineMoments
˜˜  /
.
˜˜/ 0
Count
˜˜0 5
;
˜˜5 6
i
˜˜7 8
++
˜˜8 :
)
˜˜: ;
{
¯¯ 
ITimeLineMoment
˘˘ 
moment
˘˘  &
=
˘˘' (
timeLineMoments
˘˘) 8
[
˘˘8 9
i
˘˘9 :
]
˘˘: ;
;
˘˘; <
int
˚˚ 

startCount
˚˚ 
=
˚˚  
moment
˚˚! '
.
˚˚' (

StartCount
˚˚( 2
;
˚˚2 3
int
¸¸ 
endCount
¸¸ 
=
¸¸ 
moment
¸¸ %
.
¸¸% &
EndCount
¸¸& .
;
¸¸. /
balance
˝˝ 
+=
˝˝ 

startCount
˝˝ %
;
˝˝% &
balance
˛˛ 
-=
˛˛ 
endCount
˛˛ #
;
˛˛# $
if
ÅÅ 
(
ÅÅ 

startCount
ÅÅ 
>
ÅÅ  
$num
ÅÅ! "
&&
ÅÅ# %
balance
ÅÅ& -
>
ÅÅ. /
$num
ÅÅ0 1
&&
ÅÅ2 4
intersectionStart
ÅÅ5 F
<
ÅÅG H
$num
ÅÅI J
)
ÅÅJ K
{
ÇÇ 
intersectionStart
ÉÉ %
=
ÉÉ& '
i
ÉÉ( )
;
ÉÉ) *
continue
ÑÑ 
;
ÑÑ 
}
ÖÖ 
if
àà 
(
àà 
endCount
àà 
<=
àà 
$num
àà  !
||
àà" $
balance
àà% ,
>
àà- .
$num
àà/ 0
||
àà1 3
intersectionStart
àà4 E
<
ààF G
$num
ààH I
)
ààI J
{
ââ 
continue
ää 
;
ää 
}
ãã 
T
çç 
period
çç 
=
çç 
new
çç 
T
çç  
(
çç  !
)
çç! "
;
çç" #
period
éé 
.
éé 
Setup
éé 
(
éé 
timeLineMoments
éé ,
[
éé, -
intersectionStart
éé- >
]
éé> ?
.
éé? @
Moment
éé@ F
,
ééF G
moment
ééH N
.
ééN O
Moment
ééO U
)
ééU V
;
ééV W
periods
èè 
.
èè 
Add
èè 
(
èè 
period
èè "
)
èè" #
;
èè# $
intersectionStart
êê !
=
êê" #
-
êê$ %
$num
êê% &
;
êê& '
}
ëë 
return
ìì 
periods
ìì 
;
ìì 
}
îî 	
private
óó 
static
óó #
ITimePeriodCollection
óó ,
IntersectPeriods
óó- =
(
óó= >'
ITimeLineMomentCollection
óó> W
timeLineMoments
óóX g
)
óóg h
{
òò 	"
TimePeriodCollection
ôô  
periods
ôô! (
=
ôô) *
new
ôô+ ."
TimePeriodCollection
ôô/ C
(
ôôC D
)
ôôD E
;
ôôE F
if
öö 
(
öö 
timeLineMoments
öö 
.
öö  
IsEmpty
öö  '
)
öö' (
{
õõ 
return
úú 
periods
úú 
;
úú 
}
ùù 
int
†† 
intersectionStart
†† !
=
††" #
-
††$ %
$num
††% &
;
††& '
int
°° 
balance
°° 
=
°° 
$num
°° 
;
°° 
for
¢¢ 
(
¢¢ 
int
¢¢ 
i
¢¢ 
=
¢¢ 
$num
¢¢ 
;
¢¢ 
i
¢¢ 
<
¢¢ 
timeLineMoments
¢¢  /
.
¢¢/ 0
Count
¢¢0 5
;
¢¢5 6
i
¢¢7 8
++
¢¢8 :
)
¢¢: ;
{
££ 
ITimeLineMoment
§§ 
moment
§§  &
=
§§' (
timeLineMoments
§§) 8
[
§§8 9
i
§§9 :
]
§§: ;
;
§§; <
balance
¶¶ 
+=
¶¶ 
moment
¶¶ !
.
¶¶! "
BalanceCount
¶¶" .
;
¶¶. /
if
©© 
(
©© 
balance
©© 
>
©© 
$num
©© 
&&
©©  "
intersectionStart
©©# 4
<
©©5 6
$num
©©7 8
)
©©8 9
{
™™ 
intersectionStart
´´ %
=
´´& '
i
´´( )
;
´´) *
continue
¨¨ 
;
¨¨ 
}
≠≠ 
if
∞∞ 
(
∞∞ 
intersectionStart
∞∞ %
<
∞∞& '
$num
∞∞( )
)
∞∞) *
{
±± 
continue
≤≤ 
;
≤≤ 
}
≥≥ 
T
µµ 
period
µµ 
=
µµ 
new
µµ 
T
µµ  
(
µµ  !
)
µµ! "
;
µµ" #
period
∂∂ 
.
∂∂ 
Setup
∂∂ 
(
∂∂ 
timeLineMoments
∂∂ ,
[
∂∂, -
intersectionStart
∂∂- >
]
∂∂> ?
.
∂∂? @
Moment
∂∂@ F
,
∂∂F G
moment
∂∂H N
.
∂∂N O
Moment
∂∂O U
)
∂∂U V
;
∂∂V W
periods
∑∑ 
.
∑∑ 
Add
∑∑ 
(
∑∑ 
period
∑∑ "
)
∑∑" #
;
∑∑# $
intersectionStart
∏∏ !
=
∏∏" #
balance
∏∏$ +
>
∏∏, -
$num
∏∏. /
?
∏∏0 1
i
∏∏2 3
:
∏∏4 5
-
∏∏6 7
$num
∏∏7 8
;
∏∏8 9
}
ππ 
return
ªª 
periods
ªª 
;
ªª 
}
ºº 	
private
øø 
static
øø #
ITimePeriodCollection
øø ,
CalculateGaps
øø- :
(
øø: ;
ITimePeriod
øø; F
range
øøG L
,
øøL M'
ITimeLineMomentCollection
øøN g
timeLineMoments
øøh w
)
øøw x
{
¿¿ 	"
TimePeriodCollection
¡¡  
gaps
¡¡! %
=
¡¡& '
new
¡¡( +"
TimePeriodCollection
¡¡, @
(
¡¡@ A
)
¡¡A B
;
¡¡B C
if
¬¬ 
(
¬¬ 
timeLineMoments
¬¬ 
.
¬¬  
IsEmpty
¬¬  '
)
¬¬' (
{
√√ 
return
ƒƒ 
gaps
ƒƒ 
;
ƒƒ 
}
≈≈ 
ITimeLineMoment
»» 
periodStart
»» '
=
»»( )
timeLineMoments
»»* 9
.
»»9 :
Min
»»: =
;
»»= >
if
…… 
(
…… 
periodStart
…… 
!=
…… 
null
…… #
&&
……$ &
range
……' ,
.
……, -
Start
……- 2
<
……3 4
periodStart
……5 @
.
……@ A
Moment
……A G
)
……G H
{
   
T
ÀÀ 
startingGap
ÀÀ 
=
ÀÀ 
new
ÀÀ  #
T
ÀÀ$ %
(
ÀÀ% &
)
ÀÀ& '
;
ÀÀ' (
startingGap
ÃÃ 
.
ÃÃ 
Setup
ÃÃ !
(
ÃÃ! "
range
ÃÃ" '
.
ÃÃ' (
Start
ÃÃ( -
,
ÃÃ- .
periodStart
ÃÃ/ :
.
ÃÃ: ;
Moment
ÃÃ; A
)
ÃÃA B
;
ÃÃB C
gaps
ÕÕ 
.
ÕÕ 
Add
ÕÕ 
(
ÕÕ 
startingGap
ÕÕ $
)
ÕÕ$ %
;
ÕÕ% &
}
ŒŒ 
int
—— 
	itemIndex
—— 
=
—— 
$num
—— 
;
—— 
while
““ 
(
““ 
	itemIndex
““ 
<
““ 
timeLineMoments
““ .
.
““. /
Count
““/ 4
)
““4 5
{
”” 
ITimeLineMoment
‘‘ 
moment
‘‘  &
=
‘‘' (
timeLineMoments
‘‘) 8
[
‘‘8 9
	itemIndex
‘‘9 B
]
‘‘B C
;
‘‘C D
int
’’ 

startCount
’’ 
=
’’  
moment
’’! '
.
’’' (

StartCount
’’( 2
;
’’2 3
if
÷÷ 
(
÷÷ 

startCount
÷÷ 
==
÷÷ !
$num
÷÷" #
)
÷÷# $
{
◊◊ 
throw
ÿÿ 
new
ÿÿ '
InvalidOperationException
ÿÿ 7
(
ÿÿ7 8
)
ÿÿ8 9
;
ÿÿ9 :
}
ŸŸ 
int
›› 
balance
›› 
=
›› 

startCount
›› (
;
››( )
ITimeLineMoment
ﬁﬁ 
gapStart
ﬁﬁ  (
=
ﬁﬁ) *
null
ﬁﬁ+ /
;
ﬁﬁ/ 0
while
ﬂﬂ 
(
ﬂﬂ 
	itemIndex
ﬂﬂ  
<
ﬂﬂ! "
timeLineMoments
ﬂﬂ# 2
.
ﬂﬂ2 3
Count
ﬂﬂ3 8
-
ﬂﬂ9 :
$num
ﬂﬂ; <
&&
ﬂﬂ= ?
balance
ﬂﬂ@ G
>
ﬂﬂH I
$num
ﬂﬂJ K
)
ﬂﬂK L
{
‡‡ 
	itemIndex
·· 
++
·· 
;
··  
gapStart
‚‚ 
=
‚‚ 
timeLineMoments
‚‚ .
[
‚‚. /
	itemIndex
‚‚/ 8
]
‚‚8 9
;
‚‚9 :
balance
„„ 
+=
„„ 
gapStart
„„ '
.
„„' (
BalanceCount
„„( 4
;
„„4 5
}
‰‰ 
if
ÊÊ 
(
ÊÊ 
gapStart
ÊÊ 
==
ÊÊ 
null
ÊÊ  $
)
ÊÊ$ %
{
ÁÁ 
throw
ËË 
new
ËË '
InvalidOperationException
ËË 7
(
ËË7 8
)
ËË8 9
;
ËË9 :
}
ÈÈ 
if
ÎÎ 
(
ÎÎ 
gapStart
ÎÎ 
.
ÎÎ 

StartCount
ÎÎ '
>
ÎÎ( )
$num
ÎÎ* +
)
ÎÎ+ ,
{
ÏÏ 
	itemIndex
ÌÌ 
++
ÌÌ 
;
ÌÌ  
continue
ÓÓ 
;
ÓÓ 
}
ÔÔ 
if
ÚÚ 
(
ÚÚ 
	itemIndex
ÚÚ 
<
ÚÚ 
timeLineMoments
ÚÚ  /
.
ÚÚ/ 0
Count
ÚÚ0 5
-
ÚÚ6 7
$num
ÚÚ8 9
)
ÚÚ9 :
{
ÛÛ 
T
ÙÙ 
gap
ÙÙ 
=
ÙÙ 
new
ÙÙ 
T
ÙÙ  !
(
ÙÙ! "
)
ÙÙ" #
;
ÙÙ# $
gap
ıı 
.
ıı 
Setup
ıı 
(
ıı 
gapStart
ıı &
.
ıı& '
Moment
ıı' -
,
ıı- .
timeLineMoments
ıı/ >
[
ıı> ?
	itemIndex
ıı? H
+
ııI J
$num
ııK L
]
ııL M
.
ııM N
Moment
ııN T
)
ııT U
;
ııU V
gaps
ˆˆ 
.
ˆˆ 
Add
ˆˆ 
(
ˆˆ 
gap
ˆˆ  
)
ˆˆ  !
;
ˆˆ! "
}
˜˜ 
	itemIndex
˘˘ 
++
˘˘ 
;
˘˘ 
}
˙˙ 
ITimeLineMoment
˝˝ 
	periodEnd
˝˝ %
=
˝˝& '
timeLineMoments
˝˝( 7
.
˝˝7 8
Max
˝˝8 ;
;
˝˝; <
if
˛˛ 
(
˛˛ 
	periodEnd
˛˛ 
!=
˛˛ 
null
˛˛ !
&&
˛˛" $
range
˛˛% *
.
˛˛* +
End
˛˛+ .
>
˛˛/ 0
	periodEnd
˛˛1 :
.
˛˛: ;
Moment
˛˛; A
)
˛˛A B
{
ˇˇ 
T
ÄÄ 
	endingGap
ÄÄ 
=
ÄÄ 
new
ÄÄ !
T
ÄÄ" #
(
ÄÄ# $
)
ÄÄ$ %
;
ÄÄ% &
	endingGap
ÅÅ 
.
ÅÅ 
Setup
ÅÅ 
(
ÅÅ  
	periodEnd
ÅÅ  )
.
ÅÅ) *
Moment
ÅÅ* 0
,
ÅÅ0 1
range
ÅÅ2 7
.
ÅÅ7 8
End
ÅÅ8 ;
)
ÅÅ; <
;
ÅÅ< =
gaps
ÇÇ 
.
ÇÇ 
Add
ÇÇ 
(
ÇÇ 
	endingGap
ÇÇ "
)
ÇÇ" #
;
ÇÇ# $
}
ÉÉ 
return
ÖÖ 
gaps
ÖÖ 
;
ÖÖ 
}
ÜÜ 	
private
ââ 
DateTime
ââ 
MapPeriodStart
ââ '
(
ââ' (
DateTime
ââ( 0
start
ââ1 6
)
ââ6 7
{
ää 	
return
ãã 
periodMapper
ãã 
!=
ãã  "
null
ãã# '
?
ãã( )
periodMapper
ãã* 6
.
ãã6 7

UnmapStart
ãã7 A
(
ããA B
start
ããB G
)
ããG H
:
ããI J
start
ããK P
;
ããP Q
}
åå 	
private
èè 
DateTime
èè 
MapPeriodEnd
èè %
(
èè% &
DateTime
èè& .
end
èè/ 2
)
èè2 3
{
êê 	
return
ëë 
periodMapper
ëë 
!=
ëë  "
null
ëë# '
?
ëë( )
periodMapper
ëë* 6
.
ëë6 7
UnmapEnd
ëë7 ?
(
ëë? @
end
ëë@ C
)
ëëC D
:
ëëE F
end
ëëG J
;
ëëJ K
}
íí 	
private
ññ 
readonly
ññ 

ITimeRange
ññ #
limits
ññ$ *
;
ññ* +
private
óó 
readonly
óó "
ITimePeriodContainer
óó -
periods
óó. 5
;
óó5 6
private
òò 
readonly
òò 
ITimePeriodMapper
òò *
periodMapper
òò+ 7
;
òò7 8
}
öö 
}úú ©
oF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\TimeLineMoment.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

class 
TimeLineMoment 
:  !
ITimeLineMoment" 1
{ 
public 
TimeLineMoment 
( 
DateTime &
moment' -
)- .
{ 	
this 
. 
moment 
= 
moment  
;  !
} 	
public 
DateTime 
Moment 
{ 	
get 
{ 
return 
moment 
;  
}! "
} 	
public 
int 
BalanceCount 
{ 	
get   
{   
return   

startCount   #
-  $ %
endCount  & .
;  . /
}  0 1
}!! 	
public$$ 
int$$ 

StartCount$$ 
{%% 	
get&& 
{&& 
return&& 

startCount&& #
;&&# $
}&&% &
}'' 	
public** 
int** 
EndCount** 
{++ 	
get,, 
{,, 
return,, 
endCount,, !
;,,! "
},,# $
}-- 	
public00 
bool00 
IsEmpty00 
{11 	
get22 
{22 
return22 

startCount22 #
==22$ &
$num22' (
&&22) +
endCount22, 4
==225 7
$num228 9
;229 :
}22; <
}33 	
public66 
void66 
AddStart66 
(66 
)66 
{77 	

startCount88 
++88 
;88 
}99 	
public<< 
void<< 
RemoveStart<< 
(<<  
)<<  !
{== 	
if>> 
(>> 

startCount>> 
==>> 
$num>> 
)>>  
{?? 
throw@@ 
new@@ %
InvalidOperationException@@ 3
(@@3 4
)@@4 5
;@@5 6
}AA 

startCountBB 
--BB 
;BB 
}CC 	
publicFF 
voidFF 
AddEndFF 
(FF 
)FF 
{GG 	
endCountHH 
++HH 
;HH 
}II 	
publicLL 
voidLL 
	RemoveEndLL 
(LL 
)LL 
{MM 	
ifNN 
(NN 
endCountNN 
==NN 
$numNN 
)NN 
{OO 
throwPP 
newPP %
InvalidOperationExceptionPP 3
(PP3 4
)PP4 5
;PP5 6
}QQ 
endCountRR 
--RR 
;RR 
}SS 	
publicVV 
overrideVV 
stringVV 
ToStringVV '
(VV' (
)VV( )
{WW 	
returnXX 
stringXX 
.XX 
FormatXX  
(XX  !
$strXX! 0
,XX0 1
MomentXX2 8
,XX8 9

StartCountXX: D
,XXD E
EndCountXXF N
)XXN O
;XXO P
}YY 	
private]] 
readonly]] 
DateTime]] !
moment]]" (
;]]( )
private^^ 
int^^ 

startCount^^ 
;^^ 
private__ 
int__ 
endCount__ 
;__ 
}aa 
}cc Ùá
yF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\TimeLineMomentCollection.cs
	namespace 	
Phoenix
 
. 
CrossCutting 
. 

TimePeriod )
{ 
public 

class $
TimeLineMomentCollection )
:* +%
ITimeLineMomentCollection, E
{ 
public $
TimeLineMomentCollection	 !
(! "
)" #
{ 
} 
public $
TimeLineMomentCollection	 !
(! "
IEnumerable" -
<- .
ITimePeriod. 9
>9 :
periods; B
)B C
{ 
AddAll 	
(	 

periods
 
) 
; 
} 
public 
int	 
Count 
{ 
get   
{   
return  	 
timeLineMoments   
.    
Count    %
;  % &
}  ' (
}!! 
public$$ 
bool$$	 
IsEmpty$$ 
{%% 
get&& 
{&& 
return&&	 
Count&& 
==&& 
$num&& 
;&& 
}&& 
}'' 
public** 
ITimeLineMoment**	 
Min** 
{++ 
get,, 
{,, 
return,,	 
!,, 
IsEmpty,, 
?,, 
timeLineMoments,, *
[,,* +
$num,,+ ,
],,, -
:,,. /
null,,0 4
;,,4 5
},,6 7
}-- 
public00 
ITimeLineMoment00	 
Max00 
{11 
get22 
{22 
return22	 
!22 
IsEmpty22 
?22 
timeLineMoments22 *
[22* +
Count22+ 0
-221 2
$num223 4
]224 5
:226 7
null228 <
;22< =
}22> ?
}33 
public66 
ITimeLineMoment66	 
this66 
[66 
int66 !
index66" '
]66' (
{77 
get88 
{88 
return88	 
timeLineMoments88 
[88  
index88  %
]88% &
;88& '
}88( )
}99 
public<< 
ITimeLineMoment<<	 
this<< 
[<< 
DateTime<< &
moment<<' -
]<<- .
{== 
get>> 
{>> 
return>>	  
timeLineMomentLookup>> $
[>>$ %
moment>>% +
]>>+ ,
;>>, -
}>>. /
}?? 
	protectedBB 
IListBB 
<BB 
ITimeLineMomentBB !
>BB! "
MomentsBB# *
{CC 
getDD 
{DD 
returnDD	 
timeLineMomentsDD 
;DD  
}DD! "
}EE 
publicHH 
voidHH	 
ClearHH 
(HH 
)HH 
{II 
timeLineMomentsJJ 
.JJ 
ClearJJ 
(JJ 
)JJ 
;JJ  
timeLineMomentLookupKK 
.KK 
ClearKK 
(KK 
)KK 
;KK  
}LL 
publicOO 
voidOO	 
AddOO 
(OO 
ITimePeriodOO 
periodOO $
)OO$ %
{PP 
ifQQ 
(QQ 
periodQQ 
==QQ 
nullQQ 
)QQ 
{RR 
throwSS 	
newSS
 !
ArgumentNullExceptionSS #
(SS# $
$strSS$ ,
)SS, -
;SS- .
}TT 
AddStartUU 
(UU 
periodUU 
.UU 
StartUU 
)UU 
;UU 
AddEndVV 	
(VV	 

periodVV
 
.VV 
EndVV 
)VV 
;VV 
SortWW 
(WW 
)WW 	
;WW	 

}XX 
public[[ 
void[[	 
AddAll[[ 
([[ 
IEnumerable[[  
<[[  !
ITimePeriod[[! ,
>[[, -
periods[[. 5
)[[5 6
{\\ 
if]] 
(]] 
periods]] 
==]] 
null]] 
)]] 
{^^ 
throw__ 	
new__
 !
ArgumentNullException__ #
(__# $
$str__$ -
)__- .
;__. /
}`` 
foreachbb 

(bb 
ITimePeriodbb 
periodbb 
inbb !
periodsbb" )
)bb) *
{cc 
AddStartdd 
(dd 
perioddd 
.dd 
Startdd 
)dd 
;dd 
AddEndee 

(ee
 
periodee 
.ee 
Endee 
)ee 
;ee 
}ff 
Sortgg 
(gg 
)gg 	
;gg	 

}hh 
publickk 
voidkk	 
Removekk 
(kk 
ITimePeriodkk  
periodkk! '
)kk' (
{ll 
ifmm 
(mm 
periodmm 
==mm 
nullmm 
)mm 
{nn 
throwoo 	
newoo
 !
ArgumentNullExceptionoo #
(oo# $
$stroo$ ,
)oo, -
;oo- .
}pp 
RemoveStartrr 
(rr 
periodrr 
.rr 
Startrr 
)rr 
;rr 
	RemoveEndss 
(ss 
periodss 
.ss 
Endss 
)ss 
;ss 
Sorttt 
(tt 
)tt 	
;tt	 

}uu 
publicxx 
ITimeLineMomentxx	 
Findxx 
(xx 
DateTimexx &
momentxx' -
)xx- .
{yy 
ITimeLineMomentzz 
timeLineMomentzz !
=zz" #
nullzz$ (
;zz( )
if{{ 
({{ 
Count{{ 
>{{ 
$num{{ 
){{ 
{||  
timeLineMomentLookup}} 
.}} 
TryGetValue}} $
(}}$ %
moment}}% +
,}}+ ,
out}}- 0
timeLineMoment}}1 ?
)}}? @
;}}@ A
}~~ 
return 	
timeLineMoment
 
; 
}
ÄÄ 
public
ÉÉ 
bool
ÉÉ	 
Contains
ÉÉ 
(
ÉÉ 
DateTime
ÉÉ 
moment
ÉÉ  &
)
ÉÉ& '
{
ÑÑ 
return
ÖÖ 	"
timeLineMomentLookup
ÖÖ
 
.
ÖÖ 
ContainsKey
ÖÖ *
(
ÖÖ* +
moment
ÖÖ+ 1
)
ÖÖ1 2
;
ÖÖ2 3
}
ÜÜ 
public
ââ 
bool
ââ	 
HasOverlaps
ââ 
(
ââ 
)
ââ 
{
ää 
bool
ãã 
hasOverlaps
ãã 
=
ãã 
false
ãã 
;
ãã 
if
çç 
(
çç 
Count
çç 
>
çç 
$num
çç 
)
çç 
{
éé 
bool
èè 
start
èè	 
=
èè 
true
èè 
;
èè 
foreach
êê 
(
êê 
ITimeLineMoment
êê 
timeLineMoment
êê +
in
êê, .
timeLineMoments
êê/ >
)
êê> ?
{
ëë 
int
íí 

startCount
íí	 
=
íí 
timeLineMoment
íí $
.
íí$ %

StartCount
íí% /
;
íí/ 0
int
ìì 
endCount
ìì	 
=
ìì 
timeLineMoment
ìì "
.
ìì" #
EndCount
ìì# +
;
ìì+ ,
if
îî 
(
îî 	
start
îî	 
)
îî 
{
ïï 
if
ññ 
(
ññ	 


startCount
ññ
 
!=
ññ 
$num
ññ 
||
ññ 
endCount
ññ %
>
ññ& '
$num
ññ( )
)
ññ) *
{
óó 
hasOverlaps
òò 
=
òò 
true
òò 
;
òò 
break
ôô 
;
ôô 
}
öö 
}
õõ 
else
úú 	
{
ùù 
if
ûû 
(
ûû	 


startCount
ûû
 
>
ûû 
$num
ûû 
||
ûû 
endCount
ûû $
!=
ûû% '
$num
ûû( )
)
ûû) *
{
üü 
hasOverlaps
†† 
=
†† 
true
†† 
;
†† 
break
°° 
;
°° 
}
¢¢ 
}
££ 
start
§§ 

=
§§ 
endCount
§§ 
-
§§ 

startCount
§§ "
>
§§# $
$num
§§% &
;
§§& '
}
•• 
}
¶¶ 
return
®® 	
hasOverlaps
®®
 
;
®® 
}
©© 
public
¨¨ 
bool
¨¨	 
HasGaps
¨¨ 
(
¨¨ 
)
¨¨ 
{
≠≠ 
bool
ÆÆ 
hasGaps
ÆÆ 
=
ÆÆ 
false
ÆÆ 
;
ÆÆ 
if
∞∞ 
(
∞∞ 
Count
∞∞ 
>
∞∞ 
$num
∞∞ 
)
∞∞ 
{
±± 
int
≤≤ 
momentCount
≤≤ 
=
≤≤ 
$num
≤≤ 
;
≤≤ 
for
≥≥ 
(
≥≥ 	
int
≥≥	 
index
≥≥ 
=
≥≥ 
$num
≥≥ 
;
≥≥ 
index
≥≥ 
<
≥≥ 
timeLineMoments
≥≥  /
.
≥≥/ 0
Count
≥≥0 5
;
≥≥5 6
index
≥≥7 <
++
≥≥< >
)
≥≥> ?
{
¥¥ 
ITimeLineMoment
µµ 
timeLineMoment
µµ #
=
µµ$ %
timeLineMoments
µµ& 5
[
µµ5 6
index
µµ6 ;
]
µµ; <
;
µµ< =
momentCount
∂∂ 
+=
∂∂ 
timeLineMoment
∂∂ "
.
∂∂" #

StartCount
∂∂# -
;
∂∂- .
momentCount
∑∑ 
-=
∑∑ 
timeLineMoment
∑∑ "
.
∑∑" #
EndCount
∑∑# +
;
∑∑+ ,
if
∏∏ 
(
∏∏ 	
momentCount
∏∏	 
==
∏∏ 
$num
∏∏ 
&&
∏∏ 
index
∏∏ "
>
∏∏# $
$num
∏∏% &
&&
∏∏' )
index
∏∏* /
<
∏∏0 1
timeLineMoments
∏∏2 A
.
∏∏A B
Count
∏∏B G
-
∏∏H I
$num
∏∏J K
)
∏∏K L
{
ππ 
hasGaps
∫∫ 
=
∫∫ 
true
∫∫ 
;
∫∫ 
break
ªª 
;
ªª 
}
ºº 
}
ΩΩ 
}
ææ 
return
¿¿ 	
hasGaps
¿¿
 
;
¿¿ 
}
¡¡ 
public
ƒƒ 
IEnumerator
ƒƒ	 
<
ƒƒ 
ITimeLineMoment
ƒƒ $
>
ƒƒ$ %
GetEnumerator
ƒƒ& 3
(
ƒƒ3 4
)
ƒƒ4 5
{
≈≈ 
return
∆∆ 	
timeLineMoments
∆∆
 
.
∆∆ 
GetEnumerator
∆∆ '
(
∆∆' (
)
∆∆( )
;
∆∆) *
}
«« 
IEnumerator
   
IEnumerable
   
.
   
GetEnumerator
   '
(
  ' (
)
  ( )
{
ÀÀ 
return
ÃÃ 	
GetEnumerator
ÃÃ
 
(
ÃÃ 
)
ÃÃ 
;
ÃÃ 
}
ÕÕ 
	protected
–– 
virtual
–– 
void
–– 
AddStart
–– !
(
––! "
DateTime
––" *
moment
––+ 1
)
––1 2
{
—— 
ITimeLineMoment
““ 
timeLineMoment
““ !
=
““" #
Find
““$ (
(
““( )
moment
““) /
)
““/ 0
;
““0 1
if
”” 
(
”” 
timeLineMoment
”” 
==
”” 
null
”” 
)
”” 
{
‘‘ 
timeLineMoment
’’ 
=
’’ 
new
’’ 
TimeLineMoment
’’ '
(
’’' (
moment
’’( .
)
’’. /
;
’’/ 0
timeLineMoments
÷÷ 
.
÷÷ 
Add
÷÷ 
(
÷÷ 
timeLineMoment
÷÷ &
)
÷÷& '
;
÷÷' ("
timeLineMomentLookup
◊◊ 
.
◊◊ 
Add
◊◊ 
(
◊◊ 
moment
◊◊ #
,
◊◊# $
timeLineMoment
◊◊% 3
)
◊◊3 4
;
◊◊4 5
}
ÿÿ 
timeLineMoment
ŸŸ 
.
ŸŸ 
AddStart
ŸŸ 
(
ŸŸ 
)
ŸŸ 
;
ŸŸ 
}
⁄⁄ 
	protected
›› 
virtual
›› 
void
›› 
AddEnd
›› 
(
››  
DateTime
››  (
moment
››) /
)
››/ 0
{
ﬁﬁ 
ITimeLineMoment
ﬂﬂ 
timeLineMoment
ﬂﬂ !
=
ﬂﬂ" #
Find
ﬂﬂ$ (
(
ﬂﬂ( )
moment
ﬂﬂ) /
)
ﬂﬂ/ 0
;
ﬂﬂ0 1
if
‡‡ 
(
‡‡ 
timeLineMoment
‡‡ 
==
‡‡ 
null
‡‡ 
)
‡‡ 
{
·· 
timeLineMoment
‚‚ 
=
‚‚ 
new
‚‚ 
TimeLineMoment
‚‚ '
(
‚‚' (
moment
‚‚( .
)
‚‚. /
;
‚‚/ 0
timeLineMoments
„„ 
.
„„ 
Add
„„ 
(
„„ 
timeLineMoment
„„ &
)
„„& '
;
„„' ("
timeLineMomentLookup
‰‰ 
.
‰‰ 
Add
‰‰ 
(
‰‰ 
moment
‰‰ #
,
‰‰# $
timeLineMoment
‰‰% 3
)
‰‰3 4
;
‰‰4 5
}
ÂÂ 
timeLineMoment
ÊÊ 
.
ÊÊ 
AddEnd
ÊÊ 
(
ÊÊ 
)
ÊÊ 
;
ÊÊ 
}
ÁÁ 
	protected
ÍÍ 
virtual
ÍÍ 
void
ÍÍ 
RemoveStart
ÍÍ $
(
ÍÍ$ %
DateTime
ÍÍ% -
moment
ÍÍ. 4
)
ÍÍ4 5
{
ÎÎ 
ITimeLineMoment
ÏÏ 
timeLineMoment
ÏÏ !
=
ÏÏ" #
Find
ÏÏ$ (
(
ÏÏ( )
moment
ÏÏ) /
)
ÏÏ/ 0
;
ÏÏ0 1
if
ÌÌ 
(
ÌÌ 
timeLineMoment
ÌÌ 
==
ÌÌ 
null
ÌÌ 
)
ÌÌ 
{
ÓÓ 
throw
ÔÔ 	
new
ÔÔ
 '
InvalidOperationException
ÔÔ '
(
ÔÔ' (
)
ÔÔ( )
;
ÔÔ) *
}
 
timeLineMoment
ÚÚ 
.
ÚÚ 
RemoveStart
ÚÚ 
(
ÚÚ 
)
ÚÚ 
;
ÚÚ  
if
ÛÛ 
(
ÛÛ 
timeLineMoment
ÛÛ 
.
ÛÛ 
IsEmpty
ÛÛ 
)
ÛÛ 
{
ÙÙ 
timeLineMoments
ıı 
.
ıı 
Remove
ıı 
(
ıı 
timeLineMoment
ıı )
)
ıı) *
;
ıı* +"
timeLineMomentLookup
ˆˆ 
.
ˆˆ 
Remove
ˆˆ 
(
ˆˆ  
moment
ˆˆ  &
)
ˆˆ& '
;
ˆˆ' (
}
˜˜ 
}
¯¯ 
	protected
˚˚ 
virtual
˚˚ 
void
˚˚ 
	RemoveEnd
˚˚ "
(
˚˚" #
DateTime
˚˚# +
moment
˚˚, 2
)
˚˚2 3
{
¸¸ 
ITimeLineMoment
˝˝ 
timeLineMoment
˝˝ !
=
˝˝" #
Find
˝˝$ (
(
˝˝( )
moment
˝˝) /
)
˝˝/ 0
;
˝˝0 1
if
˛˛ 
(
˛˛ 
timeLineMoment
˛˛ 
==
˛˛ 
null
˛˛ 
)
˛˛ 
{
ˇˇ 
throw
ÄÄ 	
new
ÄÄ
 '
InvalidOperationException
ÄÄ '
(
ÄÄ' (
)
ÄÄ( )
;
ÄÄ) *
}
ÅÅ 
timeLineMoment
ÉÉ 
.
ÉÉ 
	RemoveEnd
ÉÉ 
(
ÉÉ 
)
ÉÉ 
;
ÉÉ 
if
ÑÑ 
(
ÑÑ 
timeLineMoment
ÑÑ 
.
ÑÑ 
IsEmpty
ÑÑ 
)
ÑÑ 
{
ÖÖ 
timeLineMoments
ÜÜ 
.
ÜÜ 
Remove
ÜÜ 
(
ÜÜ 
timeLineMoment
ÜÜ )
)
ÜÜ) *
;
ÜÜ* +"
timeLineMomentLookup
áá 
.
áá 
Remove
áá 
(
áá  
moment
áá  &
)
áá& '
;
áá' (
}
àà 
}
ââ 
	protected
åå 
virtual
åå 
void
åå 
Sort
åå 
(
åå 
)
åå 
{
çç 
timeLineMoments
éé 
.
éé 
Sort
éé 
(
éé 
(
éé 
left
éé 
,
éé 
right
éé $
)
éé$ %
=>
éé& (
left
éé) -
.
éé- .
Moment
éé. 4
.
éé4 5
	CompareTo
éé5 >
(
éé> ?
right
éé? D
.
ééD E
Moment
ééE K
)
ééK L
)
ééL M
;
ééM N
}
èè 
private
ìì 	
readonly
ìì
 
List
ìì 
<
ìì 
ITimeLineMoment
ìì '
>
ìì' (
timeLineMoments
ìì) 8
=
ìì9 :
new
ìì; >
List
ìì? C
<
ììC D
ITimeLineMoment
ììD S
>
ììS T
(
ììT U
)
ììU V
;
ììV W
private
îî 	
readonly
îî
 

Dictionary
îî 
<
îî 
DateTime
îî &
,
îî& '
ITimeLineMoment
îî( 7
>
îî7 8"
timeLineMomentLookup
îî9 M
=
îîN O
new
îîP S

Dictionary
îîT ^
<
îî^ _
DateTime
îî_ g
,
îîg h
ITimeLineMoment
îîi x
>
îîx y
(
îîy z
)
îîz {
;
îî{ |
}
ññ 
}òò ©|
ÅF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\TimeLineMomentCollection.Desktop.cs
	namespace 	
Itenso
 
. 

TimePeriod 
{ 
public 

class $
TimeLineMomentCollection )
:* +%
ITimeLineMomentCollection, E
{ 
public $
TimeLineMomentCollection	 !
(! "
)" #
{ 
} 
public $
TimeLineMomentCollection	 !
(! "
IEnumerable# .
<. /
ITimePeriod/ :
>: ;
periods< C
)D E
{ 
AddAll 	
(	 

periods 
) 
; 
} 
public   
int  	 
Count   
{!! 
get"" 
{"" 
return""	 
timeLineMoments"" 
.""  
Count""  %
;""% &
}""' (
}## 
public&& 
bool&&	 
IsEmpty&& 
{'' 
get(( 
{(( 
return((	 
Count(( 
==(( 
$num(( 
;(( 
}(( 
})) 
public,, 
ITimeLineMoment,,	 
Min,, 
{-- 
get.. 
{.. 
return..	 
!.. 
IsEmpty.. 
?.. 
this.. 
[..  
$num..! "
]..# $
:..% &
null..' +
;..+ ,
}..- .
}// 
public22 
ITimeLineMoment22	 
Max22 
{33 
get44 
{44 
return44	 
!44 
IsEmpty44 
?44 
this44 
[44  
Count44! &
-44' (
$num44) *
]44+ ,
:44- .
null44/ 3
;443 4
}445 6
}55 
public88 
ITimeLineMoment88	 
this88 
[88 
int88 "
index88# (
]88) *
{99 
get:: 
{:: 
return::	 
timeLineMoments:: 
.::  
Values::  &
[::& '
index::( -
]::. /
;::/ 0
}::1 2
};; 
public>> 
ITimeLineMoment>>	 
this>> 
[>> 
DateTime>> '
moment>>( .
]>>/ 0
{?? 
get@@ 
{@@ 
return@@	 
timeLineMoments@@ 
[@@  
moment@@! '
]@@( )
;@@) *
}@@+ ,
}AA 
	protectedDD 
IListDD 
<DD 
ITimeLineMomentDD !
>DD! "
MomentsDD# *
{EE 
getFF 
{FF 
returnFF	 
timeLineMomentsFF 
.FF  
ValuesFF  &
;FF& '
}FF( )
}GG 
publicJJ 
voidJJ	 
ClearJJ 
(JJ 
)JJ 
{KK 
timeLineMomentsLL 
.LL 
ClearLL 
(LL 
)LL 
;LL 
}MM 
publicPP 
voidPP	 
AddPP 
(PP 
ITimePeriodPP 
periodPP %
)PP& '
{QQ 
ifRR 
(RR 
periodRR 
==RR 
nullRR 
)RR 
{SS 
throwTT 	
newTT
 !
ArgumentNullExceptionTT #
(TT# $
$strTT% -
)TT. /
;TT/ 0
}UU 
AddStartVV 
(VV 
periodVV 
.VV 
StartVV 
,VV 
periodVV !
)VV" #
;VV# $
AddEndWW 	
(WW	 

periodWW 
.WW 
EndWW 
,WW 
periodWW 
)WW 
;WW  
}XX 
public[[ 
void[[	 
AddAll[[ 
([[ 
IEnumerable[[ !
<[[! "
ITimePeriod[[" -
>[[- .
periods[[/ 6
)[[7 8
{\\ 
if]] 
(]] 
periods]] 
==]] 
null]] 
)]] 
{^^ 
throw__ 	
new__
 !
ArgumentNullException__ #
(__# $
$str__% .
)__/ 0
;__0 1
}`` 
foreachbb 

(bb 
ITimePeriodbb 
periodbb 
inbb  "
periodsbb# *
)bb+ ,
{cc 
AddStartdd 
(dd 
perioddd 
.dd 
Startdd 
,dd 
perioddd "
)dd# $
;dd$ %
AddEndee 

(ee
 
periodee 
.ee 
Endee 
,ee 
periodee 
)ee  
;ee  !
}ff 
}gg 
publicjj 
voidjj	 
Removejj 
(jj 
ITimePeriodjj !
periodjj" (
)jj) *
{kk 
ifll 
(ll 
periodll 
==ll 
nullll 
)ll 
{mm 
thrownn 	
newnn
 !
ArgumentNullExceptionnn #
(nn# $
$strnn% -
)nn. /
;nn/ 0
}oo 
RemoveStartqq 
(qq 
periodqq 
.qq 
Startqq 
,qq 
periodqq $
)qq% &
;qq& '
	RemoveEndrr 
(rr 
periodrr 
.rr 
Endrr 
,rr 
periodrr  
)rr! "
;rr" #
}ss 
publicvv 
ITimeLineMomentvv	 
Findvv 
(vv 
DateTimevv '
momentvv( .
)vv/ 0
{ww 
ITimeLineMomentxx 
timeLineMomentxx !
;xx! "
timeLineMomentsyy 
.yy 
TryGetValueyy 
(yy 
momentyy  &
,yy& '
outyy( +
timeLineMomentyy, :
)yy; <
;yy< =
returnzz 	
timeLineMomentzz
 
;zz 
}{{ 
public~~ 
bool~~	 
Contains~~ 
(~~ 
DateTime~~  
moment~~! '
)~~( )
{ 
return
ÄÄ 	
Find
ÄÄ
 
(
ÄÄ 
moment
ÄÄ 
)
ÄÄ 
!=
ÄÄ 
null
ÄÄ  
;
ÄÄ  !
}
ÅÅ 
public
ÑÑ 
bool
ÑÑ	 
HasOverlaps
ÑÑ 
(
ÑÑ 
)
ÑÑ 
{
ÖÖ 
bool
ÜÜ 

hasOverlap
ÜÜ 
=
ÜÜ 
false
ÜÜ 
;
ÜÜ 
if
áá 
(
áá 
Count
áá 
>
áá 
$num
áá 
)
áá 
{
àà 
bool
ââ 
start
ââ	 
=
ââ 
true
ââ 
;
ââ 
foreach
ää 
(
ää 
ITimeLineMoment
ää 
timeLineMoment
ää ,
in
ää- /
timeLineMoments
ää0 ?
.
ää? @
Values
ää@ F
)
ääG H
{
ãã 
if
åå 
(
åå 	
start
åå
 
)
åå 
{
çç 
if
éé 
(
éé	 

timeLineMoment
éé 
.
éé 

StartCount
éé $
!=
éé% '
$num
éé( )
||
éé* ,
timeLineMoment
éé- ;
.
éé; <
EndCount
éé< D
>
ééE F
$num
ééG H
)
ééI J
{
èè 

hasOverlap
êê 
=
êê 
true
êê 
;
êê 
break
ëë 
;
ëë 
}
íí 
}
ìì 
else
îî 	
{
ïï 
if
ññ 
(
ññ	 

timeLineMoment
ññ 
.
ññ 

StartCount
ññ $
>
ññ% &
$num
ññ' (
||
ññ) +
timeLineMoment
ññ, :
.
ññ: ;
EndCount
ññ; C
!=
ññD F
$num
ññG H
)
ññI J
{
óó 

hasOverlap
òò 
=
òò 
true
òò 
;
òò 
break
ôô 
;
ôô 
}
öö 
}
õõ 
start
úú 

=
úú 
(
úú 
timeLineMoment
úú 
.
úú 
EndCount
úú &
-
úú' (
timeLineMoment
úú) 7
.
úú7 8

StartCount
úú8 B
)
úúC D
>
úúE F
$num
úúG H
;
úúH I
}
ùù 
}
ûû 
return
†† 	

hasOverlap
††
 
;
†† 
}
°° 
public
§§ 
bool
§§	 
HasGaps
§§ 
(
§§ 
)
§§ 
{
•• 
bool
¶¶ 
hasGaps
¶¶ 
=
¶¶ 
false
¶¶ 
;
¶¶ 
if
ßß 
(
ßß 
Count
ßß 
>
ßß 
$num
ßß 
)
ßß 
{
®® 
int
©© 
momentCount
©© 
=
©© 
$num
©© 
;
©© 
for
™™ 
(
™™ 	
int
™™
 
index
™™ 
=
™™ 
$num
™™ 
;
™™ 
index
™™ 
<
™™  
timeLineMoments
™™! 0
.
™™0 1
Count
™™1 6
;
™™6 7
index
™™8 =
++
™™= ?
)
™™@ A
{
´´ 
ITimeLineMoment
¨¨ 
timeLineMoment
¨¨ #
=
¨¨$ %
this
¨¨& *
[
¨¨* +
index
¨¨, 1
]
¨¨2 3
;
¨¨3 4
momentCount
≠≠ 
+=
≠≠ 
timeLineMoment
≠≠ "
.
≠≠" #

StartCount
≠≠# -
;
≠≠- .
momentCount
ÆÆ 
-=
ÆÆ 
timeLineMoment
ÆÆ "
.
ÆÆ" #
EndCount
ÆÆ# +
;
ÆÆ+ ,
if
ØØ 
(
ØØ 	
momentCount
ØØ
 
==
ØØ 
$num
ØØ 
&&
ØØ 
index
ØØ #
>
ØØ$ %
$num
ØØ& '
&&
ØØ( *
index
ØØ+ 0
<
ØØ1 2
timeLineMoments
ØØ3 B
.
ØØB C
Count
ØØC H
-
ØØI J
$num
ØØK L
)
ØØM N
{
∞∞ 
hasGaps
±± 
=
±± 
true
±± 
;
±± 
break
≤≤ 
;
≤≤ 
}
≥≥ 
}
¥¥ 
}
µµ 
return
∑∑ 	
hasGaps
∑∑
 
;
∑∑ 
}
∏∏ 
public
ªª 
IEnumerator
ªª	 
<
ªª 
ITimeLineMoment
ªª $
>
ªª$ %
GetEnumerator
ªª& 3
(
ªª3 4
)
ªª4 5
{
ºº 
return
ΩΩ 	
timeLineMoments
ΩΩ
 
.
ΩΩ 
Values
ΩΩ  
.
ΩΩ  !
GetEnumerator
ΩΩ! .
(
ΩΩ. /
)
ΩΩ/ 0
;
ΩΩ0 1
}
ææ 
IEnumerator
¡¡ 
IEnumerable
¡¡ 
.
¡¡ 
GetEnumerator
¡¡ '
(
¡¡' (
)
¡¡( )
{
¬¬ 
return
√√ 	
GetEnumerator
√√
 
(
√√ 
)
√√ 
;
√√ 
}
ƒƒ 
	protected
«« 
virtual
«« 
void
«« 
AddStart
«« !
(
««! "
DateTime
««# +
moment
««, 2
,
««2 3
ITimePeriod
««4 ?
period
««@ F
)
««G H
{
»» 
ITimeLineMoment
…… 
timeLineMoment
…… !
=
……" #
Find
……$ (
(
……( )
moment
……* 0
)
……1 2
;
……2 3
if
   
(
   
timeLineMoment
   
==
   
null
   
)
    
{
ÀÀ 
timeLineMoment
ÃÃ 
=
ÃÃ 
new
ÃÃ 
TimeLineMoment
ÃÃ '
(
ÃÃ' (
moment
ÃÃ) /
)
ÃÃ0 1
;
ÃÃ1 2
timeLineMoments
ÕÕ 
.
ÕÕ 
Add
ÕÕ 
(
ÕÕ 
moment
ÕÕ 
,
ÕÕ  
timeLineMoment
ÕÕ! /
)
ÕÕ0 1
;
ÕÕ1 2
}
ŒŒ 
timeLineMoment
œœ 
.
œœ 
AddStart
œœ 
(
œœ 
)
œœ 
;
œœ 
}
–– 
	protected
”” 
virtual
”” 
void
”” 
AddEnd
”” 
(
””  
DateTime
””! )
moment
””* 0
,
””0 1
ITimePeriod
””2 =
period
””> D
)
””E F
{
‘‘ 
ITimeLineMoment
’’ 
timeLineMoment
’’ !
=
’’" #
Find
’’$ (
(
’’( )
moment
’’* 0
)
’’1 2
;
’’2 3
if
÷÷ 
(
÷÷ 
timeLineMoment
÷÷ 
==
÷÷ 
null
÷÷ 
)
÷÷  
{
◊◊ 
timeLineMoment
ÿÿ 
=
ÿÿ 
new
ÿÿ 
TimeLineMoment
ÿÿ '
(
ÿÿ' (
moment
ÿÿ) /
)
ÿÿ0 1
;
ÿÿ1 2
timeLineMoments
ŸŸ 
.
ŸŸ 
Add
ŸŸ 
(
ŸŸ 
moment
ŸŸ 
,
ŸŸ  
timeLineMoment
ŸŸ! /
)
ŸŸ0 1
;
ŸŸ1 2
}
⁄⁄ 
timeLineMoment
€€ 
.
€€ 
AddEnd
€€ 
(
€€ 
)
€€ 
;
€€ 
}
‹‹ 
	protected
ﬂﬂ 
virtual
ﬂﬂ 
void
ﬂﬂ 
RemoveStart
ﬂﬂ $
(
ﬂﬂ$ %
DateTime
ﬂﬂ& .
moment
ﬂﬂ/ 5
,
ﬂﬂ5 6
ITimePeriod
ﬂﬂ7 B
period
ﬂﬂC I
)
ﬂﬂJ K
{
‡‡ 
ITimeLineMoment
·· 
timeLineMoment
·· !
=
··" #
Find
··$ (
(
··( )
moment
··* 0
)
··1 2
;
··2 3
if
‚‚ 
(
‚‚ 
timeLineMoment
‚‚ 
==
‚‚ 
null
‚‚ 
)
‚‚  
{
„„ 
throw
‰‰ 	
new
‰‰
 '
InvalidOperationException
‰‰ '
(
‰‰' (
)
‰‰( )
;
‰‰) *
}
ÂÂ 
timeLineMoment
ÁÁ 
.
ÁÁ 
RemoveStart
ÁÁ 
(
ÁÁ 
)
ÁÁ 
;
ÁÁ  
if
ËË 
(
ËË 
timeLineMoment
ËË 
.
ËË 
IsEmpty
ËË 
)
ËË 
{
ÈÈ 
timeLineMoments
ÍÍ 
.
ÍÍ 
Remove
ÍÍ 
(
ÍÍ 
moment
ÍÍ "
)
ÍÍ# $
;
ÍÍ$ %
}
ÎÎ 
}
ÏÏ 
	protected
ÔÔ 
virtual
ÔÔ 
void
ÔÔ 
	RemoveEnd
ÔÔ "
(
ÔÔ" #
DateTime
ÔÔ$ ,
moment
ÔÔ- 3
,
ÔÔ3 4
ITimePeriod
ÔÔ5 @
period
ÔÔA G
)
ÔÔH I
{
 
ITimeLineMoment
ÒÒ 
timeLineMoment
ÒÒ !
=
ÒÒ" #
Find
ÒÒ$ (
(
ÒÒ( )
moment
ÒÒ* 0
)
ÒÒ1 2
;
ÒÒ2 3
if
ÚÚ 
(
ÚÚ 
timeLineMoment
ÚÚ 
==
ÚÚ 
null
ÚÚ 
)
ÚÚ  
{
ÛÛ 
throw
ÙÙ 	
new
ÙÙ
 '
InvalidOperationException
ÙÙ '
(
ÙÙ' (
)
ÙÙ( )
;
ÙÙ) *
}
ıı 
timeLineMoment
˜˜ 
.
˜˜ 
	RemoveEnd
˜˜ 
(
˜˜ 
)
˜˜ 
;
˜˜ 
if
¯¯ 
(
¯¯ 
timeLineMoment
¯¯ 
.
¯¯ 
IsEmpty
¯¯ 
)
¯¯  
{
˘˘ 
timeLineMoments
˙˙ 
.
˙˙ 
Remove
˙˙ 
(
˙˙ 
moment
˙˙ "
)
˙˙# $
;
˙˙$ %
}
˚˚ 
}
¸¸ 
private
ÄÄ 	
readonly
ÄÄ
 

SortedList
ÄÄ 
<
ÄÄ 
DateTime
ÄÄ &
,
ÄÄ& '
ITimeLineMoment
ÄÄ( 7
>
ÄÄ7 8
timeLineMoments
ÄÄ9 H
=
ÄÄI J
new
ÄÄK N

SortedList
ÄÄO Y
<
ÄÄY Z
DateTime
ÄÄZ b
,
ÄÄb c
ITimeLineMoment
ÄÄd s
>
ÄÄs t
(
ÄÄt u
)
ÄÄu v
;
ÄÄv w
}
ÇÇ 
}ÑÑ Í/
xF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\TimeLinePeriodEvaluator.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

abstract 
class #
TimeLinePeriodEvaluator 1
{ 
	protected #
TimeLinePeriodEvaluator )
() * 
ITimePeriodContainer* >
periods? F
,F G
ITimePeriodMapperH Y
periodMapperZ f
=g h
nulli m
)m n
{ 	
if 
( 
periods 
== 
null 
)  
{ 
throw 
new !
ArgumentNullException /
(/ 0
$str0 9
)9 :
;: ;
} 
this 
. 
periods 
= 
periods "
;" #
this 
. 
periodMapper 
= 
periodMapper  ,
;, -
} 	
public  
ITimePeriodContainer #
Periods$ +
{ 	
get   
{   
return   
periods    
;    !
}  " #
}!! 	
public$$ 
ITimePeriodMapper$$  
PeriodMapper$$! -
{%% 	
get&& 
{&& 
return&& 
periodMapper&& %
;&&% &
}&&' (
}'' 	
	protected** 
virtual** 
bool** 
IgnoreEmptyPeriods** 1
{++ 	
get,, 
{,, 
return,, 
false,, 
;,, 
},,  !
}-- 	
	protected00 
virtual00 
void00 
StartEvaluation00 .
(00. /
)00/ 0
{11 	
if22 
(22 
periods22 
.22 
Count22 
>22 
$num22  !
)22! "
{33 $
TimeLineMomentCollection44 (
timeLineMoments44) 8
=449 :
new44; >$
TimeLineMomentCollection44? W
(44W X
)44X Y
;44Y Z
timeLineMoments55 
.55  
AddAll55  &
(55& '
periods55' .
)55. /
;55/ 0
if66 
(66 
timeLineMoments66 #
.66# $
Count66$ )
>66* +
$num66, -
)66- .
{77 
int88 
periodCount88 #
=88$ %
$num88& '
;88' (
for99 
(99 
int99 
i99 
=99  
$num99! "
;99" #
i99$ %
<99& '
timeLineMoments99( 7
.997 8
Count998 =
-99> ?
$num99@ A
;99A B
i99C D
++99D F
)99F G
{:: 
ITimeLineMoment;; '
start;;( -
=;;. /
timeLineMoments;;0 ?
[;;? @
i;;@ A
];;A B
;;;B C
ITimeLineMoment<< '
end<<( +
=<<, -
timeLineMoments<<. =
[<<= >
i<<> ?
+<<@ A
$num<<B C
]<<C D
;<<D E
if>> 
(>> 
i>> 
==>>  
$num>>! "
)>>" #
{?? 
periodCount@@ '
+=@@( *
start@@+ 0
.@@0 1

StartCount@@1 ;
;@@; <
periodCountAA '
-=AA( *
startAA+ 0
.AA0 1
EndCountAA1 9
;AA9 :
}BB 
ITimePeriodDD #
periodDD$ *
=DD+ ,
newDD- 0
	TimeRangeDD1 :
(DD: ;
MapPeriodStartDD; I
(DDI J
startDDJ O
.DDO P
MomentDDP V
)DDV W
,DDW X
MapPeriodEndDDY e
(DDe f
endDDf i
.DDi j
MomentDDj p
)DDp q
)DDq r
;DDr s
ifEE 
(EE 
!EE 
(EE 
IgnoreEmptyPeriodsEE 0
&&EE1 3
periodEE4 :
.EE: ;
IsMomentEE; C
)EEC D
)EED E
{FF 
ifGG 
(GG  
EvaluatePeriodGG  .
(GG. /
periodGG/ 5
,GG5 6
periodCountGG7 B
)GGB C
==GGD F
falseGGG L
)GGL M
{HH 
breakII  %
;II% &
}JJ 
}KK 
periodCountMM #
+=MM$ &
endMM' *
.MM* +

StartCountMM+ 5
;MM5 6
periodCountNN #
-=NN$ &
endNN' *
.NN* +
EndCountNN+ 3
;NN3 4
}OO 
}PP 
}QQ 
}RR 	
	protectedUU 
abstractUU 
boolUU 
EvaluatePeriodUU  .
(UU. /
ITimePeriodUU/ :
periodUU; A
,UUA B
intUUC F
periodCountUUG R
)UUR S
;UUS T
privateXX 
DateTimeXX 
MapPeriodStartXX '
(XX' (
DateTimeXX( 0
startXX1 6
)XX6 7
{YY 	
returnZZ 
periodMapperZZ 
!=ZZ  "
nullZZ# '
?ZZ( )
periodMapperZZ* 6
.ZZ6 7

UnmapStartZZ7 A
(ZZA B
startZZB G
)ZZG H
:ZZI J
startZZK P
;ZZP Q
}[[ 	
private^^ 
DateTime^^ 
MapPeriodEnd^^ %
(^^% &
DateTime^^& .
end^^/ 2
)^^2 3
{__ 	
return`` 
periodMapper`` 
!=``  "
null``# '
?``( )
periodMapper``* 6
.``6 7
UnmapEnd``7 ?
(``? @
end``@ C
)``C D
:``E F
end``G J
;``J K
}aa 	
privateee 
readonlyee  
ITimePeriodContaineree -
periodsee. 5
;ee5 6
privateff 
readonlyff 
ITimePeriodMapperff *
periodMapperff+ 7
;ff7 8
}hh 
}jj é=
oF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\TimePeriodCalc.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
internal 
static 
class 
TimePeriodCalc (
{ 
public 
static 
bool 
	HasInside $
($ %
ITimePeriod% 0
period1 7
,7 8
DateTime9 A
testB F
)F G
{ 	
return 
test 
>= 
period !
.! "
Start" '
&&( *
test+ /
<=0 2
period3 9
.9 :
End: =
;= >
} 	
public 
static 
bool 
	HasInside $
($ %
ITimePeriod% 0
period1 7
,7 8
ITimePeriod9 D
testE I
)I J
{ 	
return 
	HasInside 
( 
period #
,# $
test% )
.) *
Start* /
)/ 0
&&1 3
	HasInside4 =
(= >
period> D
,D E
testF J
.J K
EndK N
)N O
;O P
} 	
public 
static 
bool 
IntersectsWith )
() *
ITimePeriod* 5
period6 <
,< =
ITimePeriod> I
testJ N
)N O
{ 	
return   
	HasInside!! 
(!! 
period!!  
,!!  !
test!!" &
.!!& '
Start!!' ,
)!!, -
||!!. 0
	HasInside"" 
("" 
period""  
,""  !
test""" &
.""& '
End""' *
)""* +
||"", .
test## 
.## 
Start## 
<## 
period## #
.### $
Start##$ )
&&##* ,
test##- 1
.##1 2
End##2 5
>##6 7
period##8 >
.##> ?
End##? B
;##B C
}$$ 	
public'' 
static'' 
bool'' 
OverlapsWith'' '
(''' (
ITimePeriod''( 3
period''4 :
,'': ;
ITimePeriod''< G
test''H L
)''L M
{(( 	
PeriodRelation)) 
relation)) #
=))$ %
GetRelation))& 1
())1 2
period))2 8
,))8 9
test)): >
)))> ?
;))? @
return** 
relation++ 
!=++ 
PeriodRelation++ *
.++* +
After+++ 0
&&++1 3
relation,, 
!=,, 
PeriodRelation,, *
.,,* +
StartTouching,,+ 8
&&,,9 ;
relation-- 
!=-- 
PeriodRelation-- *
.--* +
EndTouching--+ 6
&&--7 9
relation.. 
!=.. 
PeriodRelation.. *
...* +
Before..+ 1
;..1 2
}// 	
public22 
static22 
PeriodRelation22 $
GetRelation22% 0
(220 1
ITimePeriod221 <
period22= C
,22C D
ITimePeriod22E P
test22Q U
)22U V
{33 	
if44 
(44 
test44 
.44 
End44 
<44 
period44 !
.44! "
Start44" '
)44' (
{55 
return66 
PeriodRelation66 %
.66% &
After66& +
;66+ ,
}77 
if88 
(88 
test88 
.88 
Start88 
>88 
period88 #
.88# $
End88$ '
)88' (
{99 
return:: 
PeriodRelation:: %
.::% &
Before::& ,
;::, -
};; 
if<< 
(<< 
test<< 
.<< 
Start<< 
==<< 
period<< $
.<<$ %
Start<<% *
&&<<+ -
test<<. 2
.<<2 3
End<<3 6
==<<7 9
period<<: @
.<<@ A
End<<A D
)<<D E
{== 
return>> 
PeriodRelation>> %
.>>% &

ExactMatch>>& 0
;>>0 1
}?? 
if@@ 
(@@ 
test@@ 
.@@ 
End@@ 
==@@ 
period@@ "
.@@" #
Start@@# (
)@@( )
{AA 
returnBB 
PeriodRelationBB %
.BB% &
StartTouchingBB& 3
;BB3 4
}CC 
ifDD 
(DD 
testDD 
.DD 
StartDD 
==DD 
periodDD $
.DD$ %
EndDD% (
)DD( )
{EE 
returnFF 
PeriodRelationFF %
.FF% &
EndTouchingFF& 1
;FF1 2
}GG 
ifHH 
(HH 
	HasInsideHH 
(HH 
periodHH  
,HH  !
testHH" &
)HH& '
)HH' (
{II 
ifJJ 
(JJ 
testJJ 
.JJ 
StartJJ 
==JJ !
periodJJ" (
.JJ( )
StartJJ) .
)JJ. /
{KK 
returnLL 
PeriodRelationLL )
.LL) *"
EnclosingStartTouchingLL* @
;LL@ A
}MM 
returnNN 
testNN 
.NN 
EndNN 
==NN  "
periodNN# )
.NN) *
EndNN* -
?NN. /
PeriodRelationNN0 >
.NN> ? 
EnclosingEndTouchingNN? S
:NNT U
PeriodRelationNNV d
.NNd e
	EnclosingNNe n
;NNn o
}OO 
boolPP !
periodContainsMyStartPP &
=PP' (
	HasInsidePP) 2
(PP2 3
testPP3 7
,PP7 8
periodPP9 ?
.PP? @
StartPP@ E
)PPE F
;PPF G
boolQQ 
periodContainsMyEndQQ $
=QQ% &
	HasInsideQQ' 0
(QQ0 1
testQQ1 5
,QQ5 6
periodQQ7 =
.QQ= >
EndQQ> A
)QQA B
;QQB C
ifRR 
(RR !
periodContainsMyStartRR %
&&RR& (
periodContainsMyEndRR) <
)RR< =
{SS 
ifTT 
(TT 
testTT 
.TT 
StartTT 
==TT !
periodTT" (
.TT( )
StartTT) .
)TT. /
{UU 
returnVV 
PeriodRelationVV )
.VV) *
InsideStartTouchingVV* =
;VV= >
}WW 
returnXX 
testXX 
.XX 
EndXX 
==XX  "
periodXX# )
.XX) *
EndXX* -
?XX. /
PeriodRelationXX0 >
.XX> ?
InsideEndTouchingXX? P
:XXQ R
PeriodRelationXXS a
.XXa b
InsideXXb h
;XXh i
}YY 
ifZZ 
(ZZ !
periodContainsMyStartZZ %
)ZZ% &
{[[ 
return\\ 
PeriodRelation\\ %
.\\% &
StartInside\\& 1
;\\1 2
}]] 
if^^ 
(^^ 
periodContainsMyEnd^^ #
)^^# $
{__ 
return`` 
PeriodRelation`` %
.``% &
	EndInside``& /
;``/ 0
}aa 
throwbb 
newbb %
InvalidOperationExceptionbb /
(bb/ 0
$strbb0 N
+bbO P
periodbbQ W
+bbX Y
$strbbZ c
+bbd e
testbbf j
+bbk l
$strbbm p
)bbp q
;bbq r
}cc 	
}ee 
}gg ïü
pF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\TimePeriodChain.cs
	namespace 	
Phoenix
 
. 
CrossCutting 
. 

TimePeriod )
{ 
public 

class 
TimePeriodChain  
:! "
ITimePeriodChain# 3
{ 
public 
TimePeriodChain 
( 
)  
{ 	
} 	
public 
TimePeriodChain 
( 
IEnumerable *
<* +
ITimePeriod+ 6
>6 7
timePeriods8 C
)C D
{ 	
if 
( 
timePeriods 
== 
null #
)# $
{ 
throw 
new !
ArgumentNullException /
(/ 0
$str0 =
)= >
;> ?
} 
AddAll 
( 
timePeriods 
) 
;  
} 	
public"" 
bool"" 

IsReadOnly"" 
{## 	
get$$ 
{$$ 
return$$ 
false$$ 
;$$ 
}$$  !
}%% 	
public(( 
ITimePeriod(( 
First((  
{)) 	
get** 
{** 
return** 
periods**  
.**  !
Count**! &
>**' (
$num**) *
?**+ ,
periods**- 4
[**4 5
$num**5 6
]**6 7
:**8 9
null**: >
;**> ?
}**@ A
}++ 	
public.. 
ITimePeriod.. 
Last.. 
{// 	
get00 
{00 
return00 
periods00  
.00  !
Count00! &
>00' (
$num00) *
?00+ ,
periods00- 4
[004 5
periods005 <
.00< =
Count00= B
-00C D
$num00E F
]00F G
:00H I
null00J N
;00N O
}00P Q
}11 	
public44 
int44 
Count44 
{55 	
get66 
{66 
return66 
periods66  
.66  !
Count66! &
;66& '
}66( )
}77 	
public:: 
ITimePeriod:: 
this:: 
[::  
int::  #
index::$ )
]::) *
{;; 	
get<< 
{<< 
return<< 
periods<<  
[<<  !
index<<! &
]<<& '
;<<' (
}<<) *
set== 
{>> 
RemoveAt?? 
(?? 
index?? 
)?? 
;??  
Insert@@ 
(@@ 
index@@ 
,@@ 
value@@ #
)@@# $
;@@$ %
}AA 
}BB 	
publicEE 
boolEE 
	IsAnytimeEE 
{FF 	
getGG 
{GG 
returnGG 
!GG 
HasStartGG "
&&GG# %
!GG& '
HasEndGG' -
;GG- .
}GG/ 0
}HH 	
publicKK 
boolKK 
IsMomentKK 
{LL 	
getMM 
{MM 
returnMM 
CountMM 
!=MM !
$numMM" #
&&MM$ &
FirstMM' ,
.MM, -
StartMM- 2
.MM2 3
EqualsMM3 9
(MM9 :
LastMM: >
.MM> ?
EndMM? B
)MMB C
;MMC D
}MME F
}NN 	
publicQQ 
boolQQ 
HasStartQQ 
{RR 	
getSS 
{SS 
returnSS 
StartSS 
!=SS !
TimeSpecSS" *
.SS* +
MinPeriodDateSS+ 8
;SS8 9
}SS: ;
}TT 	
publicWW 
DateTimeWW 
StartWW 
{XX 	
getYY 
{YY 
returnYY 
CountYY 
>YY  
$numYY! "
?YY# $
FirstYY% *
.YY* +
StartYY+ 0
:YY1 2
TimeSpecYY3 ;
.YY; <
MinPeriodDateYY< I
;YYI J
}YYK L
setZZ 
{[[ 
if\\ 
(\\ 
Count\\ 
==\\ 
$num\\ 
)\\ 
{]] 
return^^ 
;^^ 
}__ 
Move`` 
(`` 
value`` 
-`` 
Start`` "
)``" #
;``# $
}aa 
}bb 	
publicee 
boolee 
HasEndee 
{ff 	
getgg 
{gg 
returngg 
Endgg 
!=gg 
TimeSpecgg  (
.gg( )
MaxPeriodDategg) 6
;gg6 7
}gg8 9
}hh 	
publickk 
DateTimekk 
Endkk 
{ll 	
getmm 
{mm 
returnmm 
Countmm 
>mm  
$nummm! "
?mm# $
Lastmm% )
.mm) *
Endmm* -
:mm. /
TimeSpecmm0 8
.mm8 9
MaxPeriodDatemm9 F
;mmF G
}mmH I
setnn 
{oo 
ifpp 
(pp 
Countpp 
==pp 
$numpp 
)pp 
{qq 
returnrr 
;rr 
}ss 
Movett 
(tt 
valuett 
-tt 
Endtt  
)tt  !
;tt! "
}uu 
}vv 	
publicyy 
TimeSpanyy 
Durationyy  
{zz 	
get{{ 
{{{ 
return{{ 
End{{ 
-{{ 
Start{{ $
;{{$ %
}{{& '
}|| 	
public 
string 
DurationDescription )
{
ÄÄ 	
get
ÅÅ 
{
ÅÅ 
return
ÅÅ 
TimeFormatter
ÅÅ &
.
ÅÅ& '
Instance
ÅÅ' /
.
ÅÅ/ 0
GetDuration
ÅÅ0 ;
(
ÅÅ; <
Duration
ÅÅ< D
,
ÅÅD E 
DurationFormatType
ÅÅF X
.
ÅÅX Y
Detailed
ÅÅY a
)
ÅÅa b
;
ÅÅb c
}
ÅÅd e
}
ÇÇ 	
public
ÖÖ 
virtual
ÖÖ 
TimeSpan
ÖÖ 
GetDuration
ÖÖ  +
(
ÖÖ+ ,
IDurationProvider
ÖÖ, =
provider
ÖÖ> F
)
ÖÖF G
{
ÜÜ 	
if
áá 
(
áá 
provider
áá 
==
áá 
null
áá  
)
áá  !
{
àà 
throw
ââ 
new
ââ #
ArgumentNullException
ââ /
(
ââ/ 0
$str
ââ0 :
)
ââ: ;
;
ââ; <
}
ää 
return
ãã 
provider
ãã 
.
ãã 
GetDuration
ãã '
(
ãã' (
Start
ãã( -
,
ãã- .
End
ãã/ 2
)
ãã2 3
;
ãã3 4
}
åå 	
public
èè 
virtual
èè 
void
èè 
Setup
èè !
(
èè! "
DateTime
èè" *
newStart
èè+ 3
,
èè3 4
DateTime
èè5 =
newEnd
èè> D
)
èèD E
{
êê 	
throw
ëë 
new
ëë '
InvalidOperationException
ëë /
(
ëë/ 0
)
ëë0 1
;
ëë1 2
}
íí 	
IEnumerator
ïï 
IEnumerable
ïï 
.
ïï  
GetEnumerator
ïï  -
(
ïï- .
)
ïï. /
{
ññ 	
return
óó 
GetEnumerator
óó  
(
óó  !
)
óó! "
;
óó" #
}
òò 	
public
õõ 
IEnumerator
õõ 
<
õõ 
ITimePeriod
õõ &
>
õõ& '
GetEnumerator
õõ( 5
(
õõ5 6
)
õõ6 7
{
úú 	
return
ùù 
periods
ùù 
.
ùù 
GetEnumerator
ùù (
(
ùù( )
)
ùù) *
;
ùù* +
}
ûû 	
public
°° 
virtual
°° 
void
°° 
Move
°°  
(
°°  !
TimeSpan
°°! )
delta
°°* /
)
°°/ 0
{
¢¢ 	
if
££ 
(
££ 
delta
££ 
==
££ 
TimeSpan
££ !
.
££! "
Zero
££" &
)
££& '
{
§§ 
return
•• 
;
•• 
}
¶¶ 
foreach
®® 
(
®® 
ITimePeriod
®®  

timePeriod
®®! +
in
®®, .
periods
®®/ 6
)
®®6 7
{
©© 
DateTime
™™ 
start
™™ 
=
™™  

timePeriod
™™! +
.
™™+ ,
Start
™™, 1
+
™™2 3
delta
™™4 9
;
™™9 :

timePeriod
´´ 
.
´´ 
Setup
´´  
(
´´  !
start
´´! &
,
´´& '
start
´´( -
.
´´- .
Add
´´. 1
(
´´1 2

timePeriod
´´2 <
.
´´< =
Duration
´´= E
)
´´E F
)
´´F G
;
´´G H
}
¨¨ 
}
≠≠ 	
public
∞∞ 
virtual
∞∞ 
void
∞∞ 
Add
∞∞ 
(
∞∞  
ITimePeriod
∞∞  +
item
∞∞, 0
)
∞∞0 1
{
±± 	
if
≤≤ 
(
≤≤ 
item
≤≤ 
==
≤≤ 
null
≤≤ 
)
≤≤ 
{
≥≥ 
throw
¥¥ 
new
¥¥ #
ArgumentNullException
¥¥ /
(
¥¥/ 0
$str
¥¥0 6
)
¥¥6 7
;
¥¥7 8
}
µµ 
CheckReadOnlyItem
∂∂ 
(
∂∂ 
item
∂∂ "
)
∂∂" #
;
∂∂# $
ITimePeriod
∏∏ 
last
∏∏ 
=
∏∏ 
Last
∏∏ #
;
∏∏# $
if
ππ 
(
ππ 
last
ππ 
!=
ππ 
null
ππ 
)
ππ 
{
∫∫ 
CheckSpaceAfter
ªª 
(
ªª  
last
ªª  $
.
ªª$ %
End
ªª% (
,
ªª( )
item
ªª* .
.
ªª. /
Duration
ªª/ 7
)
ªª7 8
;
ªª8 9
item
ºº 
.
ºº 
Setup
ºº 
(
ºº 
last
ºº 
.
ºº  
End
ºº  #
,
ºº# $
last
ºº% )
.
ºº) *
End
ºº* -
.
ºº- .
Add
ºº. 1
(
ºº1 2
item
ºº2 6
.
ºº6 7
Duration
ºº7 ?
)
ºº? @
)
ºº@ A
;
ººA B
}
ΩΩ 
periods
øø 
.
øø 
Add
øø 
(
øø 
item
øø 
)
øø 
;
øø 
}
¿¿ 	
public
√√ 
bool
√√ 
ContainsPeriod
√√ "
(
√√" #
ITimePeriod
√√# .
test
√√/ 3
)
√√3 4
{
ƒƒ 	
if
≈≈ 
(
≈≈ 
test
≈≈ 
==
≈≈ 
null
≈≈ 
)
≈≈ 
{
∆∆ 
throw
«« 
new
«« #
ArgumentNullException
«« /
(
««/ 0
$str
««0 6
)
««6 7
;
««7 8
}
»» 
foreach
   
(
   
ITimePeriod
    
period
  ! '
in
  ( *
periods
  + 2
)
  2 3
{
ÀÀ 
if
ÃÃ 
(
ÃÃ 
period
ÃÃ 
.
ÃÃ 
IsSamePeriod
ÃÃ '
(
ÃÃ' (
test
ÃÃ( ,
)
ÃÃ, -
)
ÃÃ- .
{
ÕÕ 
return
ŒŒ 
true
ŒŒ 
;
ŒŒ  
}
œœ 
}
–– 
return
—— 
false
—— 
;
—— 
}
““ 	
public
’’ 
void
’’ 
AddAll
’’ 
(
’’ 
IEnumerable
’’ &
<
’’& '
ITimePeriod
’’' 2
>
’’2 3
timePeriods
’’4 ?
)
’’? @
{
÷÷ 	
if
◊◊ 
(
◊◊ 
timePeriods
◊◊ 
==
◊◊ 
null
◊◊ #
)
◊◊# $
{
ÿÿ 
throw
ŸŸ 
new
ŸŸ #
ArgumentNullException
ŸŸ /
(
ŸŸ/ 0
$str
ŸŸ0 =
)
ŸŸ= >
;
ŸŸ> ?
}
⁄⁄ 
foreach
‹‹ 
(
‹‹ 
ITimePeriod
‹‹  
period
‹‹! '
in
‹‹( *
timePeriods
‹‹+ 6
)
‹‹6 7
{
›› 
Add
ﬁﬁ 
(
ﬁﬁ 
period
ﬁﬁ 
)
ﬁﬁ 
;
ﬁﬁ 
}
ﬂﬂ 
}
‡‡ 	
public
„„ 
virtual
„„ 
void
„„ 
Insert
„„ "
(
„„" #
int
„„# &
index
„„' ,
,
„„, -
ITimePeriod
„„. 9
period
„„: @
)
„„@ A
{
‰‰ 	
if
ÂÂ 
(
ÂÂ 
index
ÂÂ 
<
ÂÂ 
$num
ÂÂ 
||
ÂÂ 
index
ÂÂ "
>
ÂÂ# $
Count
ÂÂ% *
)
ÂÂ* +
{
ÊÊ 
throw
ÁÁ 
new
ÁÁ )
ArgumentOutOfRangeException
ÁÁ 5
(
ÁÁ5 6
$str
ÁÁ6 =
)
ÁÁ= >
;
ÁÁ> ?
}
ËË 
if
ÈÈ 
(
ÈÈ 
period
ÈÈ 
==
ÈÈ 
null
ÈÈ 
)
ÈÈ 
{
ÍÍ 
throw
ÎÎ 
new
ÎÎ #
ArgumentNullException
ÎÎ /
(
ÎÎ/ 0
$str
ÎÎ0 8
)
ÎÎ8 9
;
ÎÎ9 :
}
ÏÏ 
CheckReadOnlyItem
ÌÌ 
(
ÌÌ 
period
ÌÌ $
)
ÌÌ$ %
;
ÌÌ% &
TimeSpan
ÔÔ 
itemDuration
ÔÔ !
=
ÔÔ" #
period
ÔÔ$ *
.
ÔÔ* +
Duration
ÔÔ+ 3
;
ÔÔ3 4
ITimePeriod
ÒÒ 
previous
ÒÒ  
=
ÒÒ! "
null
ÒÒ# '
;
ÒÒ' (
ITimePeriod
ÚÚ 
next
ÚÚ 
=
ÚÚ 
null
ÚÚ #
;
ÚÚ# $
if
ÛÛ 
(
ÛÛ 
Count
ÛÛ 
>
ÛÛ 
$num
ÛÛ 
)
ÛÛ 
{
ÙÙ 
if
ıı 
(
ıı 
index
ıı 
>
ıı 
$num
ıı 
)
ıı 
{
ˆˆ 
previous
˜˜ 
=
˜˜ 
this
˜˜ #
[
˜˜# $
index
˜˜$ )
-
˜˜* +
$num
˜˜, -
]
˜˜- .
;
˜˜. /
CheckSpaceAfter
¯¯ #
(
¯¯# $
End
¯¯$ '
,
¯¯' (
itemDuration
¯¯) 5
)
¯¯5 6
;
¯¯6 7
}
˘˘ 
if
˙˙ 
(
˙˙ 
index
˙˙ 
<
˙˙ 
Count
˙˙ !
-
˙˙" #
$num
˙˙$ %
)
˙˙% &
{
˚˚ 
next
¸¸ 
=
¸¸ 
this
¸¸ 
[
¸¸  
index
¸¸  %
]
¸¸% &
;
¸¸& '
CheckSpaceBefore
˝˝ $
(
˝˝$ %
Start
˝˝% *
,
˝˝* +
itemDuration
˝˝, 8
)
˝˝8 9
;
˝˝9 :
}
˛˛ 
}
ˇˇ 
periods
ÅÅ 
.
ÅÅ 
Insert
ÅÅ 
(
ÅÅ 
index
ÅÅ  
,
ÅÅ  !
period
ÅÅ" (
)
ÅÅ( )
;
ÅÅ) *
if
ÑÑ 
(
ÑÑ 
previous
ÑÑ 
!=
ÑÑ 
null
ÑÑ  
)
ÑÑ  !
{
ÖÖ 
period
ÜÜ 
.
ÜÜ 
Setup
ÜÜ 
(
ÜÜ 
previous
ÜÜ %
.
ÜÜ% &
End
ÜÜ& )
,
ÜÜ) *
previous
ÜÜ+ 3
.
ÜÜ3 4
End
ÜÜ4 7
+
ÜÜ8 9
period
ÜÜ: @
.
ÜÜ@ A
Duration
ÜÜA I
)
ÜÜI J
;
ÜÜJ K
for
áá 
(
áá 
int
áá 
i
áá 
=
áá 
index
áá "
+
áá# $
$num
áá% &
;
áá& '
i
áá( )
<
áá* +
Count
áá, 1
;
áá1 2
i
áá3 4
++
áá4 6
)
áá6 7
{
àà 
DateTime
ââ 
previousStart
ââ *
=
ââ+ ,
this
ââ- 1
[
ââ1 2
i
ââ2 3
]
ââ3 4
.
ââ4 5
Start
ââ5 :
.
ââ: ;
Add
ââ; >
(
ââ> ?
itemDuration
ââ? K
)
ââK L
;
ââL M
this
ää 
[
ää 
i
ää 
]
ää 
.
ää 
Setup
ää !
(
ää! "
previousStart
ää" /
,
ää/ 0
previousStart
ää1 >
.
ää> ?
Add
ää? B
(
ääB C
this
ääC G
[
ääG H
i
ääH I
]
ääI J
.
ääJ K
Duration
ääK S
)
ääS T
)
ääT U
;
ääU V
}
ãã 
}
åå 
if
èè 
(
èè 
next
èè 
==
èè 
null
èè 
)
èè 
{
êê 
return
ëë 
;
ëë 
}
íí 
DateTime
ìì 
	nextStart
ìì 
=
ìì  
next
ìì! %
.
ìì% &
Start
ìì& +
.
ìì+ ,
Subtract
ìì, 4
(
ìì4 5
itemDuration
ìì5 A
)
ììA B
;
ììB C
period
îî 
.
îî 
Setup
îî 
(
îî 
	nextStart
îî "
,
îî" #
	nextStart
îî$ -
.
îî- .
Add
îî. 1
(
îî1 2
period
îî2 8
.
îî8 9
Duration
îî9 A
)
îîA B
)
îîB C
;
îîC D
for
ïï 
(
ïï 
int
ïï 
i
ïï 
=
ïï 
$num
ïï 
;
ïï 
i
ïï 
<
ïï 
index
ïï  %
-
ïï& '
$num
ïï( )
;
ïï) *
i
ïï+ ,
++
ïï, .
)
ïï. /
{
ññ 
	nextStart
óó 
=
óó 
this
óó  
[
óó  !
i
óó! "
]
óó" #
.
óó# $
Start
óó$ )
.
óó) *
Subtract
óó* 2
(
óó2 3
itemDuration
óó3 ?
)
óó? @
;
óó@ A
this
òò 
[
òò 
i
òò 
]
òò 
.
òò 
Setup
òò 
(
òò 
	nextStart
òò '
,
òò' (
	nextStart
òò) 2
.
òò2 3
Add
òò3 6
(
òò6 7
this
òò7 ;
[
òò; <
i
òò< =
]
òò= >
.
òò> ?
Duration
òò? G
)
òòG H
)
òòH I
;
òòI J
}
ôô 
}
öö 	
public
ùù 
virtual
ùù 
bool
ùù 
Contains
ùù $
(
ùù$ %
ITimePeriod
ùù% 0
period
ùù1 7
)
ùù7 8
{
ûû 	
if
üü 
(
üü 
period
üü 
==
üü 
null
üü 
)
üü 
{
†† 
throw
°° 
new
°° #
ArgumentNullException
°° /
(
°°/ 0
$str
°°0 8
)
°°8 9
;
°°9 :
}
¢¢ 
return
££ 
periods
££ 
.
££ 
Contains
££ #
(
££# $
period
££$ *
)
££* +
;
££+ ,
}
§§ 	
public
ßß 
virtual
ßß 
int
ßß 
IndexOf
ßß "
(
ßß" #
ITimePeriod
ßß# .
period
ßß/ 5
)
ßß5 6
{
®® 	
if
©© 
(
©© 
period
©© 
==
©© 
null
©© 
)
©© 
{
™™ 
throw
´´ 
new
´´ #
ArgumentNullException
´´ /
(
´´/ 0
$str
´´0 8
)
´´8 9
;
´´9 :
}
¨¨ 
return
≠≠ 
periods
≠≠ 
.
≠≠ 
IndexOf
≠≠ "
(
≠≠" #
period
≠≠# )
)
≠≠) *
;
≠≠* +
}
ÆÆ 	
public
±± 
virtual
±± 
void
±± 
CopyTo
±± "
(
±±" #
ITimePeriod
±±# .
[
±±. /
]
±±/ 0
array
±±1 6
,
±±6 7
int
±±8 ;

arrayIndex
±±< F
)
±±F G
{
≤≤ 	
if
≥≥ 
(
≥≥ 
array
≥≥ 
==
≥≥ 
null
≥≥ 
)
≥≥ 
{
¥¥ 
throw
µµ 
new
µµ #
ArgumentNullException
µµ /
(
µµ/ 0
$str
µµ0 7
)
µµ7 8
;
µµ8 9
}
∂∂ 
periods
∑∑ 
.
∑∑ 
CopyTo
∑∑ 
(
∑∑ 
array
∑∑  
,
∑∑  !

arrayIndex
∑∑" ,
)
∑∑, -
;
∑∑- .
}
∏∏ 	
public
ªª 
virtual
ªª 
void
ªª 
Clear
ªª !
(
ªª! "
)
ªª" #
{
ºº 	
periods
ΩΩ 
.
ΩΩ 
Clear
ΩΩ 
(
ΩΩ 
)
ΩΩ 
;
ΩΩ 
}
ææ 	
public
¡¡ 
virtual
¡¡ 
bool
¡¡ 
Remove
¡¡ "
(
¡¡" #
ITimePeriod
¡¡# .
period
¡¡/ 5
)
¡¡5 6
{
¬¬ 	
if
√√ 
(
√√ 
period
√√ 
==
√√ 
null
√√ 
)
√√ 
{
ƒƒ 
throw
≈≈ 
new
≈≈ #
ArgumentNullException
≈≈ /
(
≈≈/ 0
$str
≈≈0 8
)
≈≈8 9
;
≈≈9 :
}
∆∆ 
TimeSpan
»» 
itemDuration
»» !
=
»»" #
period
»»$ *
.
»»* +
Duration
»»+ 3
;
»»3 4
int
…… 
index
…… 
=
…… 
IndexOf
…… 
(
……  
period
……  &
)
……& '
;
……' (
ITimePeriod
ÀÀ 
next
ÀÀ 
=
ÀÀ 
null
ÀÀ #
;
ÀÀ# $
if
ÃÃ 
(
ÃÃ 
itemDuration
ÃÃ 
>
ÃÃ 
TimeSpan
ÃÃ '
.
ÃÃ' (
Zero
ÃÃ( ,
&&
ÃÃ- /
Count
ÃÃ0 5
>
ÃÃ6 7
$num
ÃÃ8 9
&&
ÃÃ: <
index
ÃÃ= B
>
ÃÃC D
$num
ÃÃE F
&&
ÃÃG I
index
ÃÃJ O
<
ÃÃP Q
Count
ÃÃR W
-
ÃÃX Y
$num
ÃÃZ [
)
ÃÃ[ \
{
ÕÕ 
next
ŒŒ 
=
ŒŒ 
this
ŒŒ 
[
ŒŒ 
index
ŒŒ !
]
ŒŒ! "
;
ŒŒ" #
}
œœ 
bool
—— 
removed
—— 
=
—— 
periods
—— "
.
——" #
Remove
——# )
(
——) *
period
——* 0
)
——0 1
;
——1 2
if
““ 
(
““ 
removed
““ 
&&
““ 
next
““ 
!=
““  "
null
““# '
)
““' (
{
”” 
for
‘‘ 
(
‘‘ 
int
‘‘ 
i
‘‘ 
=
‘‘ 
index
‘‘ "
;
‘‘" #
i
‘‘$ %
<
‘‘& '
Count
‘‘( -
;
‘‘- .
i
‘‘/ 0
++
‘‘0 2
)
‘‘2 3
{
’’ 
DateTime
÷÷ 
start
÷÷ "
=
÷÷# $
this
÷÷% )
[
÷÷) *
i
÷÷* +
]
÷÷+ ,
.
÷÷, -
Start
÷÷- 2
.
÷÷2 3
Subtract
÷÷3 ;
(
÷÷; <
itemDuration
÷÷< H
)
÷÷H I
;
÷÷I J
this
◊◊ 
[
◊◊ 
i
◊◊ 
]
◊◊ 
.
◊◊ 
Setup
◊◊ !
(
◊◊! "
start
◊◊" '
,
◊◊' (
start
◊◊) .
.
◊◊. /
Add
◊◊/ 2
(
◊◊2 3
this
◊◊3 7
[
◊◊7 8
i
◊◊8 9
]
◊◊9 :
.
◊◊: ;
Duration
◊◊; C
)
◊◊C D
)
◊◊D E
;
◊◊E F
}
ÿÿ 
}
ŸŸ 
return
€€ 
removed
€€ 
;
€€ 
}
‹‹ 	
public
ﬂﬂ 
virtual
ﬂﬂ 
void
ﬂﬂ 
RemoveAt
ﬂﬂ $
(
ﬂﬂ$ %
int
ﬂﬂ% (
index
ﬂﬂ) .
)
ﬂﬂ. /
{
‡‡ 	
Remove
·· 
(
·· 
this
·· 
[
·· 
index
·· 
]
·· 
)
·· 
;
··  
}
‚‚ 	
public
ÂÂ 
virtual
ÂÂ 
bool
ÂÂ 
IsSamePeriod
ÂÂ (
(
ÂÂ( )
ITimePeriod
ÂÂ) 4
test
ÂÂ5 9
)
ÂÂ9 :
{
ÊÊ 	
if
ÁÁ 
(
ÁÁ 
test
ÁÁ 
==
ÁÁ 
null
ÁÁ 
)
ÁÁ 
{
ËË 
throw
ÈÈ 
new
ÈÈ #
ArgumentNullException
ÈÈ /
(
ÈÈ/ 0
$str
ÈÈ0 6
)
ÈÈ6 7
;
ÈÈ7 8
}
ÍÍ 
return
ÎÎ 
Start
ÎÎ 
==
ÎÎ 
test
ÎÎ  
.
ÎÎ  !
Start
ÎÎ! &
&&
ÎÎ' )
End
ÎÎ* -
==
ÎÎ. 0
test
ÎÎ1 5
.
ÎÎ5 6
End
ÎÎ6 9
;
ÎÎ9 :
}
ÏÏ 	
public
ÔÔ 
virtual
ÔÔ 
bool
ÔÔ 
	HasInside
ÔÔ %
(
ÔÔ% &
DateTime
ÔÔ& .
test
ÔÔ/ 3
)
ÔÔ3 4
{
 	
return
ÒÒ 
TimePeriodCalc
ÒÒ !
.
ÒÒ! "
	HasInside
ÒÒ" +
(
ÒÒ+ ,
this
ÒÒ, 0
,
ÒÒ0 1
test
ÒÒ2 6
)
ÒÒ6 7
;
ÒÒ7 8
}
ÚÚ 	
public
ıı 
virtual
ıı 
bool
ıı 
	HasInside
ıı %
(
ıı% &
ITimePeriod
ıı& 1
test
ıı2 6
)
ıı6 7
{
ˆˆ 	
if
˜˜ 
(
˜˜ 
test
˜˜ 
==
˜˜ 
null
˜˜ 
)
˜˜ 
{
¯¯ 
throw
˘˘ 
new
˘˘ #
ArgumentNullException
˘˘ /
(
˘˘/ 0
$str
˘˘0 6
)
˘˘6 7
;
˘˘7 8
}
˙˙ 
return
˚˚ 
TimePeriodCalc
˚˚ !
.
˚˚! "
	HasInside
˚˚" +
(
˚˚+ ,
this
˚˚, 0
,
˚˚0 1
test
˚˚2 6
)
˚˚6 7
;
˚˚7 8
}
¸¸ 	
public
ˇˇ 
virtual
ˇˇ 
bool
ˇˇ 
IntersectsWith
ˇˇ *
(
ˇˇ* +
ITimePeriod
ˇˇ+ 6
test
ˇˇ7 ;
)
ˇˇ; <
{
ÄÄ 	
if
ÅÅ 
(
ÅÅ 
test
ÅÅ 
==
ÅÅ 
null
ÅÅ 
)
ÅÅ 
{
ÇÇ 
throw
ÉÉ 
new
ÉÉ #
ArgumentNullException
ÉÉ /
(
ÉÉ/ 0
$str
ÉÉ0 6
)
ÉÉ6 7
;
ÉÉ7 8
}
ÑÑ 
return
ÖÖ 
TimePeriodCalc
ÖÖ !
.
ÖÖ! "
IntersectsWith
ÖÖ" 0
(
ÖÖ0 1
this
ÖÖ1 5
,
ÖÖ5 6
test
ÖÖ7 ;
)
ÖÖ; <
;
ÖÖ< =
}
ÜÜ 	
public
ââ 
virtual
ââ 
bool
ââ 
OverlapsWith
ââ (
(
ââ( )
ITimePeriod
ââ) 4
test
ââ5 9
)
ââ9 :
{
ää 	
if
ãã 
(
ãã 
test
ãã 
==
ãã 
null
ãã 
)
ãã 
{
åå 
throw
çç 
new
çç #
ArgumentNullException
çç /
(
çç/ 0
$str
çç0 6
)
çç6 7
;
çç7 8
}
éé 
return
èè 
TimePeriodCalc
èè !
.
èè! "
OverlapsWith
èè" .
(
èè. /
this
èè/ 3
,
èè3 4
test
èè5 9
)
èè9 :
;
èè: ;
}
êê 	
public
ìì 
virtual
ìì 
PeriodRelation
ìì %
GetRelation
ìì& 1
(
ìì1 2
ITimePeriod
ìì2 =
test
ìì> B
)
ììB C
{
îî 	
if
ïï 
(
ïï 
test
ïï 
==
ïï 
null
ïï 
)
ïï 
{
ññ 
throw
óó 
new
óó #
ArgumentNullException
óó /
(
óó/ 0
$str
óó0 6
)
óó6 7
;
óó7 8
}
òò 
return
ôô 
TimePeriodCalc
ôô !
.
ôô! "
GetRelation
ôô" -
(
ôô- .
this
ôô. 2
,
ôô2 3
test
ôô4 8
)
ôô8 9
;
ôô9 :
}
öö 	
public
ùù 
virtual
ùù 
int
ùù 
	CompareTo
ùù $
(
ùù$ %
ITimePeriod
ùù% 0
other
ùù1 6
,
ùù6 7!
ITimePeriodComparer
ùù8 K
comparer
ùùL T
)
ùùT U
{
ûû 	
if
üü 
(
üü 
other
üü 
==
üü 
null
üü 
)
üü 
{
†† 
throw
°° 
new
°° #
ArgumentNullException
°° /
(
°°/ 0
$str
°°0 7
)
°°7 8
;
°°8 9
}
¢¢ 
if
££ 
(
££ 
comparer
££ 
==
££ 
null
££  
)
££  !
{
§§ 
throw
•• 
new
•• #
ArgumentNullException
•• /
(
••/ 0
$str
••0 :
)
••: ;
;
••; <
}
¶¶ 
return
ßß 
comparer
ßß 
.
ßß 
Compare
ßß #
(
ßß# $
this
ßß$ (
,
ßß( )
other
ßß* /
)
ßß/ 0
;
ßß0 1
}
®® 	
public
´´ 
string
´´ 
GetDescription
´´ $
(
´´$ %
ITimeFormatter
´´% 3
	formatter
´´4 =
=
´´> ?
null
´´@ D
)
´´D E
{
¨¨ 	
return
≠≠ 
Format
≠≠ 
(
≠≠ 
	formatter
≠≠ #
??
≠≠$ &
TimeFormatter
≠≠' 4
.
≠≠4 5
Instance
≠≠5 =
)
≠≠= >
;
≠≠> ?
}
ÆÆ 	
	protected
±± 
virtual
±± 
string
±±  
Format
±±! '
(
±±' (
ITimeFormatter
±±( 6
	formatter
±±7 @
)
±±@ A
{
≤≤ 	
return
≥≥ 
	formatter
≥≥ 
.
≥≥ !
GetCollectionPeriod
≥≥ 0
(
≥≥0 1
Count
≥≥1 6
,
≥≥6 7
Start
≥≥8 =
,
≥≥= >
End
≥≥? B
,
≥≥B C
Duration
≥≥D L
)
≥≥L M
;
≥≥M N
}
¥¥ 	
public
∑∑ 
override
∑∑ 
string
∑∑ 
ToString
∑∑ '
(
∑∑' (
)
∑∑( )
{
∏∏ 	
return
ππ 
GetDescription
ππ !
(
ππ! "
)
ππ" #
;
ππ# $
}
∫∫ 	
public
ΩΩ 
sealed
ΩΩ 
override
ΩΩ 
bool
ΩΩ #
Equals
ΩΩ$ *
(
ΩΩ* +
object
ΩΩ+ 1
obj
ΩΩ2 5
)
ΩΩ5 6
{
ææ 	
if
øø 
(
øø 
obj
øø 
==
øø 
this
øø 
)
øø 
{
¿¿ 
return
¡¡ 
true
¡¡ 
;
¡¡ 
}
¬¬ 
if
√√ 
(
√√ 
obj
√√ 
==
√√ 
null
√√ 
||
√√ 
GetType
√√ &
(
√√& '
)
√√' (
!=
√√) +
obj
√√, /
.
√√/ 0
GetType
√√0 7
(
√√7 8
)
√√8 9
)
√√9 :
{
ƒƒ 
return
≈≈ 
false
≈≈ 
;
≈≈ 
}
∆∆ 
return
«« 
IsEqual
«« 
(
«« 
obj
«« 
)
«« 
;
««  
}
»» 	
	protected
ÀÀ 
virtual
ÀÀ 
bool
ÀÀ 
IsEqual
ÀÀ &
(
ÀÀ& '
object
ÀÀ' -
obj
ÀÀ. 1
)
ÀÀ1 2
{
ÃÃ 	
return
ÕÕ 
HasSameData
ÕÕ 
(
ÕÕ 
obj
ÕÕ "
as
ÕÕ# %
TimePeriodChain
ÕÕ& 5
)
ÕÕ5 6
;
ÕÕ6 7
}
ŒŒ 	
private
—— 
bool
—— 
HasSameData
——  
(
——  !
IList
——! &
<
——& '
ITimePeriod
——' 2
>
——2 3
comp
——4 8
)
——8 9
{
““ 	
if
”” 
(
”” 
Count
”” 
!=
”” 
comp
”” 
.
”” 
Count
”” #
)
””# $
{
‘‘ 
return
’’ 
false
’’ 
;
’’ 
}
÷÷ 
for
ÿÿ 
(
ÿÿ 
int
ÿÿ 
i
ÿÿ 
=
ÿÿ 
$num
ÿÿ 
;
ÿÿ 
i
ÿÿ 
<
ÿÿ 
Count
ÿÿ  %
;
ÿÿ% &
i
ÿÿ' (
++
ÿÿ( *
)
ÿÿ* +
{
ŸŸ 
if
⁄⁄ 
(
⁄⁄ 
!
⁄⁄ 
this
⁄⁄ 
[
⁄⁄ 
i
⁄⁄ 
]
⁄⁄ 
.
⁄⁄ 
Equals
⁄⁄ #
(
⁄⁄# $
comp
⁄⁄$ (
[
⁄⁄( )
i
⁄⁄) *
]
⁄⁄* +
)
⁄⁄+ ,
)
⁄⁄, -
{
€€ 
return
‹‹ 
false
‹‹  
;
‹‹  !
}
›› 
}
ﬁﬁ 
return
‡‡ 
true
‡‡ 
;
‡‡ 
}
·· 	
public
‰‰ 
sealed
‰‰ 
override
‰‰ 
int
‰‰ "
GetHashCode
‰‰# .
(
‰‰. /
)
‰‰/ 0
{
ÂÂ 	
return
ÊÊ 
HashTool
ÊÊ 
.
ÊÊ 
AddHashCode
ÊÊ '
(
ÊÊ' (
GetType
ÊÊ( /
(
ÊÊ/ 0
)
ÊÊ0 1
.
ÊÊ1 2
GetHashCode
ÊÊ2 =
(
ÊÊ= >
)
ÊÊ> ?
,
ÊÊ? @
ComputeHashCode
ÊÊA P
(
ÊÊP Q
)
ÊÊQ R
)
ÊÊR S
;
ÊÊS T
}
ÁÁ 	
	protected
ÍÍ 
virtual
ÍÍ 
int
ÍÍ 
ComputeHashCode
ÍÍ -
(
ÍÍ- .
)
ÍÍ. /
{
ÎÎ 	
return
ÏÏ 
HashTool
ÏÏ 
.
ÏÏ 
ComputeHashCode
ÏÏ +
(
ÏÏ+ ,
periods
ÏÏ, 3
)
ÏÏ3 4
;
ÏÏ4 5
}
ÌÌ 	
	protected
 
void
 
CheckSpaceBefore
 '
(
' (
DateTime
( 0
moment
1 7
,
7 8
TimeSpan
9 A
duration
B J
)
J K
{
ÒÒ 	
bool
ÚÚ 
hasSpace
ÚÚ 
=
ÚÚ 
moment
ÚÚ "
!=
ÚÚ# %
TimeSpec
ÚÚ& .
.
ÚÚ. /
MinPeriodDate
ÚÚ/ <
;
ÚÚ< =
if
ÛÛ 
(
ÛÛ 
hasSpace
ÛÛ 
)
ÛÛ 
{
ÙÙ 
TimeSpan
ıı 
	remaining
ıı "
=
ıı# $
moment
ıı% +
-
ıı, -
TimeSpec
ıı. 6
.
ıı6 7
MinPeriodDate
ıı7 D
;
ııD E
hasSpace
ˆˆ 
=
ˆˆ 
duration
ˆˆ #
<=
ˆˆ$ &
	remaining
ˆˆ' 0
;
ˆˆ0 1
}
˜˜ 
if
˘˘ 
(
˘˘ 
!
˘˘ 
hasSpace
˘˘ 
)
˘˘ 
{
˙˙ 
throw
˚˚ 
new
˚˚ '
InvalidOperationException
˚˚ 3
(
˚˚3 4
$str
˚˚4 ?
+
˚˚@ A
duration
˚˚B J
+
˚˚K L
$str
˚˚M ]
)
˚˚] ^
;
˚˚^ _
}
¸¸ 
}
˝˝ 	
	protected
ÄÄ 
void
ÄÄ 
CheckSpaceAfter
ÄÄ &
(
ÄÄ& '
DateTime
ÄÄ' /
moment
ÄÄ0 6
,
ÄÄ6 7
TimeSpan
ÄÄ8 @
duration
ÄÄA I
)
ÄÄI J
{
ÅÅ 	
bool
ÇÇ 
hasSpace
ÇÇ 
=
ÇÇ 
moment
ÇÇ "
!=
ÇÇ# %
TimeSpec
ÇÇ& .
.
ÇÇ. /
MaxPeriodDate
ÇÇ/ <
;
ÇÇ< =
if
ÉÉ 
(
ÉÉ 
hasSpace
ÉÉ 
)
ÉÉ 
{
ÑÑ 
TimeSpan
ÖÖ 
	remaining
ÖÖ "
=
ÖÖ# $
TimeSpec
ÖÖ% -
.
ÖÖ- .
MaxPeriodDate
ÖÖ. ;
-
ÖÖ< =
moment
ÖÖ> D
;
ÖÖD E
hasSpace
ÜÜ 
=
ÜÜ 
duration
ÜÜ #
<=
ÜÜ$ &
	remaining
ÜÜ' 0
;
ÜÜ0 1
}
áá 
if
ââ 
(
ââ 
!
ââ 
hasSpace
ââ 
)
ââ 
{
ää 
throw
ãã 
new
ãã '
InvalidOperationException
ãã 3
(
ãã3 4
$str
ãã4 ?
+
ãã@ A
duration
ããB J
+
ããK L
$str
ããM \
)
ãã\ ]
;
ãã] ^
}
åå 
}
çç 	
	protected
êê 
void
êê 
CheckReadOnlyItem
êê (
(
êê( )
ITimePeriod
êê) 4

timePeriod
êê5 ?
)
êê? @
{
ëë 	
if
íí 
(
íí 

timePeriod
íí 
.
íí 

IsReadOnly
íí %
)
íí% &
{
ìì 
throw
îî 
new
îî #
NotSupportedException
îî /
(
îî/ 0
$str
îî0 I
)
îîI J
;
îîJ K
}
ïï 
}
ññ 	
private
öö 
readonly
öö 
List
öö 
<
öö 
ITimePeriod
öö )
>
öö) *
periods
öö+ 2
=
öö3 4
new
öö5 8
List
öö9 =
<
öö= >
ITimePeriod
öö> I
>
ööI J
(
ööJ K
)
ööK L
;
ööL M
}
úú 
}ûû ≤Å
uF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\TimePeriodCollection.cs
	namespace 	
Phoenix
 
. 
CrossCutting 
. 

TimePeriod )
{ 
public 

class  
TimePeriodCollection %
:& '!
ITimePeriodCollection( =
{ 
public  
TimePeriodCollection #
(# $
)$ %
{ 	
} 	
public  
TimePeriodCollection #
(# $
IEnumerable$ /
</ 0
ITimePeriod0 ;
>; <
timePeriods= H
)H I
:J K
this 
( 
) 
{ 	
if 
( 
timePeriods 
== 
null #
)# $
{ 
throw 
new !
ArgumentNullException /
(/ 0
$str0 =
)= >
;> ?
}   
AddAll!! 
(!! 
timePeriods!! 
)!! 
;!!  
}"" 	
public%% 
bool%% 

IsReadOnly%% 
{&& 	
get'' 
{'' 
return'' 
false'' 
;'' 
}''  !
}(( 	
public++ 
int++ 
Count++ 
{,, 	
get-- 
{-- 
return-- 
periods--  
.--  !
Count--! &
;--& '
}--( )
}.. 	
public11 
ITimePeriod11 
this11 
[11  
int11  #
index11$ )
]11) *
{22 	
get33 
{33 
return33 
periods33  
[33  !
index33! &
]33& '
;33' (
}33) *
set44 
{44 
periods44 
[44 
index44 
]44  
=44! "
value44# (
;44( )
}44* +
}55 	
public88 
bool88 
	IsAnytime88 
{99 	
get:: 
{:: 
return:: 
!:: 
HasStart:: "
&&::# %
!::& '
HasEnd::' -
;::- .
}::/ 0
};; 	
public>> 
bool>> 
IsMoment>> 
{?? 	
get@@ 
{@@ 
return@@ 
Duration@@ !
==@@" $
TimeSpan@@% -
.@@- .
Zero@@. 2
;@@2 3
}@@4 5
}AA 	
publicDD 
boolDD 
HasStartDD 
{EE 	
getFF 
{FF 
returnFF 
StartFF 
!=FF !
TimeSpecFF" *
.FF* +
MinPeriodDateFF+ 8
;FF8 9
}FF: ;
}GG 	
publicJJ 
DateTimeJJ 
StartJJ 
{KK 	
getLL 
{MM 
DateTimeNN 
?NN 
startNN 
=NN  !
GetStartNN" *
(NN* +
)NN+ ,
;NN, -
returnOO 
startOO 
.OO 
HasValueOO %
?OO& '
startOO( -
.OO- .
ValueOO. 3
:OO4 5
TimeSpecOO6 >
.OO> ?
MinPeriodDateOO? L
;OOL M
}PP 
setQQ 
{RR 
ifSS 
(SS 
CountSS 
==SS 
$numSS 
)SS 
{TT 
returnUU 
;UU 
}VV 
MoveWW 
(WW 
valueWW 
-WW 
StartWW "
)WW" #
;WW# $
}XX 
}YY 	
public\\ 
bool\\ 
HasEnd\\ 
{]] 	
get^^ 
{^^ 
return^^ 
End^^ 
!=^^ 
TimeSpec^^  (
.^^( )
MaxPeriodDate^^) 6
;^^6 7
}^^8 9
}__ 	
publicbb 
DateTimebb 
Endbb 
{cc 	
getdd 
{ee 
DateTimeff 
?ff 
endff 
=ff 
GetEndff  &
(ff& '
)ff' (
;ff( )
returngg 
endgg 
.gg 
HasValuegg #
?gg$ %
endgg& )
.gg) *
Valuegg* /
:gg0 1
TimeSpecgg2 :
.gg: ;
MaxPeriodDategg; H
;ggH I
}hh 
setii 
{jj 
ifkk 
(kk 
Countkk 
==kk 
$numkk 
)kk 
{ll 
returnmm 
;mm 
}nn 
Moveoo 
(oo 
valueoo 
-oo 
Endoo  
)oo  !
;oo! "
}pp 
}qq 	
publictt 
TimeSpantt 
Durationtt  
{uu 	
getvv 
{ww 
TimeSpanxx 
?xx 
durationxx "
=xx# $
GetDurationxx% 0
(xx0 1
)xx1 2
;xx2 3
returnyy 
durationyy 
.yy  
HasValueyy  (
?yy) *
durationyy+ 3
.yy3 4
Valueyy4 9
:yy: ;
TimeSpecyy< D
.yyD E
MaxPeriodDurationyyE V
;yyV W
}zz 
}{{ 	
public~~ 
virtual~~ 
TimeSpan~~ 
TotalDuration~~  -
{ 	
get
ÄÄ 
{
ÅÅ 
TimeSpan
ÇÇ 
duration
ÇÇ !
=
ÇÇ" #
TimeSpan
ÇÇ$ ,
.
ÇÇ, -
Zero
ÇÇ- 1
;
ÇÇ1 2
foreach
ÉÉ 
(
ÉÉ 
ITimePeriod
ÉÉ $

timePeriod
ÉÉ% /
in
ÉÉ0 2
periods
ÉÉ3 :
)
ÉÉ: ;
{
ÑÑ 
duration
ÖÖ 
=
ÖÖ 
duration
ÖÖ '
.
ÖÖ' (
Add
ÖÖ( +
(
ÖÖ+ ,

timePeriod
ÖÖ, 6
.
ÖÖ6 7
Duration
ÖÖ7 ?
)
ÖÖ? @
;
ÖÖ@ A
}
ÜÜ 
return
áá 
duration
áá 
;
áá  
}
àà 
}
ââ 	
public
åå 
string
åå !
DurationDescription
åå )
{
çç 	
get
éé 
{
éé 
return
éé 
TimeFormatter
éé &
.
éé& '
Instance
éé' /
.
éé/ 0
GetDuration
éé0 ;
(
éé; <
Duration
éé< D
,
ééD E 
DurationFormatType
ééF X
.
ééX Y
Detailed
ééY a
)
ééa b
;
ééb c
}
ééd e
}
èè 	
public
íí 
virtual
íí 
TimeSpan
íí 
GetDuration
íí  +
(
íí+ ,
IDurationProvider
íí, =
provider
íí> F
)
ííF G
{
ìì 	
if
îî 
(
îî 
provider
îî 
==
îî 
null
îî  
)
îî  !
{
ïï 
throw
ññ 
new
ññ #
ArgumentNullException
ññ /
(
ññ/ 0
$str
ññ0 :
)
ññ: ;
;
ññ; <
}
óó 
return
òò 
provider
òò 
.
òò 
GetDuration
òò '
(
òò' (
Start
òò( -
,
òò- .
End
òò/ 2
)
òò2 3
;
òò3 4
}
ôô 	
public
úú 
virtual
úú 
TimeSpan
úú 
GetTotalDuration
úú  0
(
úú0 1
IDurationProvider
úú1 B
provider
úúC K
)
úúK L
{
ùù 	
if
ûû 
(
ûû 
provider
ûû 
==
ûû 
null
ûû  
)
ûû  !
{
üü 
throw
†† 
new
†† #
ArgumentNullException
†† /
(
††/ 0
$str
††0 :
)
††: ;
;
††; <
}
°° 
TimeSpan
££ 
duration
££ 
=
££ 
TimeSpan
££  (
.
££( )
Zero
££) -
;
££- .
foreach
§§ 
(
§§ 
ITimePeriod
§§  

timePeriod
§§! +
in
§§, .
periods
§§/ 6
)
§§6 7
{
•• 
duration
¶¶ 
=
¶¶ 
duration
¶¶ #
.
¶¶# $
Add
¶¶$ '
(
¶¶' (

timePeriod
¶¶( 2
.
¶¶2 3
GetDuration
¶¶3 >
(
¶¶> ?
provider
¶¶? G
)
¶¶G H
)
¶¶H I
;
¶¶I J
}
ßß 
return
®® 
duration
®® 
;
®® 
}
©© 	
public
¨¨ 
virtual
¨¨ 
void
¨¨ 
Setup
¨¨ !
(
¨¨! "
DateTime
¨¨" *
newStart
¨¨+ 3
,
¨¨3 4
DateTime
¨¨5 =
newEnd
¨¨> D
)
¨¨D E
{
≠≠ 	
throw
ÆÆ 
new
ÆÆ '
InvalidOperationException
ÆÆ /
(
ÆÆ/ 0
)
ÆÆ0 1
;
ÆÆ1 2
}
ØØ 	
IEnumerator
≤≤ 
IEnumerable
≤≤ 
.
≤≤  
GetEnumerator
≤≤  -
(
≤≤- .
)
≤≤. /
{
≥≥ 	
return
¥¥ 
GetEnumerator
¥¥  
(
¥¥  !
)
¥¥! "
;
¥¥" #
}
µµ 	
public
∏∏ 
IEnumerator
∏∏ 
<
∏∏ 
ITimePeriod
∏∏ &
>
∏∏& '
GetEnumerator
∏∏( 5
(
∏∏5 6
)
∏∏6 7
{
ππ 	
return
∫∫ 
periods
∫∫ 
.
∫∫ 
GetEnumerator
∫∫ (
(
∫∫( )
)
∫∫) *
;
∫∫* +
}
ªª 	
public
ææ 
virtual
ææ 
void
ææ 
Move
ææ  
(
ææ  !
TimeSpan
ææ! )
delta
ææ* /
)
ææ/ 0
{
øø 	
if
¿¿ 
(
¿¿ 
delta
¿¿ 
==
¿¿ 
TimeSpan
¿¿ !
.
¿¿! "
Zero
¿¿" &
)
¿¿& '
{
¡¡ 
return
¬¬ 
;
¬¬ 
}
√√ 
foreach
≈≈ 
(
≈≈ 
ITimePeriod
≈≈  

timePeriod
≈≈! +
in
≈≈, .
periods
≈≈/ 6
)
≈≈6 7
{
∆∆ 
DateTime
«« 
start
«« 
=
««  

timePeriod
««! +
.
««+ ,
Start
««, 1
+
««2 3
delta
««4 9
;
««9 :

timePeriod
»» 
.
»» 
Setup
»»  
(
»»  !
start
»»! &
,
»»& '
start
»»( -
.
»»- .
Add
»». 1
(
»»1 2

timePeriod
»»2 <
.
»»< =
Duration
»»= E
)
»»E F
)
»»F G
;
»»G H
}
…… 
}
   	
public
ÕÕ 
virtual
ÕÕ 
void
ÕÕ 
SortBy
ÕÕ "
(
ÕÕ" #!
ITimePeriodComparer
ÕÕ# 6
comparer
ÕÕ7 ?
)
ÕÕ? @
{
ŒŒ 	
if
œœ 
(
œœ 
comparer
œœ 
==
œœ 
null
œœ  
)
œœ  !
{
–– 
throw
—— 
new
—— #
ArgumentNullException
—— /
(
——/ 0
$str
——0 :
)
——: ;
;
——; <
}
““ 
periods
”” 
.
”” 
Sort
”” 
(
”” 
comparer
”” !
)
””! "
;
””" #
}
‘‘ 	
public
◊◊ 
virtual
◊◊ 
void
◊◊ 
SortReverseBy
◊◊ )
(
◊◊) *!
ITimePeriodComparer
◊◊* =
comparer
◊◊> F
)
◊◊F G
{
ÿÿ 	
if
ŸŸ 
(
ŸŸ 
comparer
ŸŸ 
==
ŸŸ 
null
ŸŸ  
)
ŸŸ  !
{
⁄⁄ 
throw
€€ 
new
€€ #
ArgumentNullException
€€ /
(
€€/ 0
$str
€€0 :
)
€€: ;
;
€€; <
}
‹‹ 
SortBy
›› 
(
›› 
new
›› &
TimePeriodReversComparer
›› /
(
››/ 0
comparer
››0 8
)
››8 9
)
››9 :
;
››: ;
}
ﬁﬁ 	
public
·· 
virtual
·· 
void
·· 
SortByStart
·· '
(
··' (
ListSortDirection
··( 9
sortDirection
··: G
=
··H I
ListSortDirection
··J [
.
··[ \
	Ascending
··\ e
)
··e f
{
‚‚ 	
switch
„„ 
(
„„ 
sortDirection
„„ !
)
„„! "
{
‰‰ 
case
ÂÂ 
ListSortDirection
ÂÂ &
.
ÂÂ& '
	Ascending
ÂÂ' 0
:
ÂÂ0 1
SortBy
ÊÊ 
(
ÊÊ %
TimePeriodStartComparer
ÊÊ 2
.
ÊÊ2 3
Comparer
ÊÊ3 ;
)
ÊÊ; <
;
ÊÊ< =
break
ÁÁ 
;
ÁÁ 
case
ËË 
ListSortDirection
ËË &
.
ËË& '

Descending
ËË' 1
:
ËË1 2
SortBy
ÈÈ 
(
ÈÈ %
TimePeriodStartComparer
ÈÈ 2
.
ÈÈ2 3
ReverseComparer
ÈÈ3 B
)
ÈÈB C
;
ÈÈC D
break
ÍÍ 
;
ÍÍ 
default
ÎÎ 
:
ÎÎ 
throw
ÏÏ 
new
ÏÏ )
ArgumentOutOfRangeException
ÏÏ 9
(
ÏÏ9 :
$str
ÏÏ: I
)
ÏÏI J
;
ÏÏJ K
}
ÌÌ 
}
ÓÓ 	
public
ÒÒ 
virtual
ÒÒ 
void
ÒÒ 
	SortByEnd
ÒÒ %
(
ÒÒ% &
ListSortDirection
ÒÒ& 7
sortDirection
ÒÒ8 E
=
ÒÒF G
ListSortDirection
ÒÒH Y
.
ÒÒY Z
	Ascending
ÒÒZ c
)
ÒÒc d
{
ÚÚ 	
switch
ÛÛ 
(
ÛÛ 
sortDirection
ÛÛ !
)
ÛÛ! "
{
ÙÙ 
case
ıı 
ListSortDirection
ıı &
.
ıı& '
	Ascending
ıı' 0
:
ıı0 1
SortBy
ˆˆ 
(
ˆˆ #
TimePeriodEndComparer
ˆˆ 0
.
ˆˆ0 1
Comparer
ˆˆ1 9
)
ˆˆ9 :
;
ˆˆ: ;
break
˜˜ 
;
˜˜ 
case
¯¯ 
ListSortDirection
¯¯ &
.
¯¯& '

Descending
¯¯' 1
:
¯¯1 2
SortBy
˘˘ 
(
˘˘ #
TimePeriodEndComparer
˘˘ 0
.
˘˘0 1
ReverseComparer
˘˘1 @
)
˘˘@ A
;
˘˘A B
break
˙˙ 
;
˙˙ 
default
˚˚ 
:
˚˚ 
throw
¸¸ 
new
¸¸ )
ArgumentOutOfRangeException
¸¸ 9
(
¸¸9 :
$str
¸¸: I
)
¸¸I J
;
¸¸J K
}
˝˝ 
}
˛˛ 	
public
ÅÅ 
virtual
ÅÅ 
void
ÅÅ 
SortByDuration
ÅÅ *
(
ÅÅ* +
ListSortDirection
ÅÅ+ <
sortDirection
ÅÅ= J
=
ÅÅK L
ListSortDirection
ÅÅM ^
.
ÅÅ^ _
	Ascending
ÅÅ_ h
)
ÅÅh i
{
ÇÇ 	
switch
ÉÉ 
(
ÉÉ 
sortDirection
ÉÉ !
)
ÉÉ! "
{
ÑÑ 
case
ÖÖ 
ListSortDirection
ÖÖ &
.
ÖÖ& '
	Ascending
ÖÖ' 0
:
ÖÖ0 1
SortBy
ÜÜ 
(
ÜÜ (
TimePeriodDurationComparer
ÜÜ 5
.
ÜÜ5 6
Comparer
ÜÜ6 >
)
ÜÜ> ?
;
ÜÜ? @
break
áá 
;
áá 
case
àà 
ListSortDirection
àà &
.
àà& '

Descending
àà' 1
:
àà1 2
SortBy
ââ 
(
ââ (
TimePeriodDurationComparer
ââ 5
.
ââ5 6
ReverseComparer
ââ6 E
)
ââE F
;
ââF G
break
ää 
;
ää 
default
ãã 
:
ãã 
throw
åå 
new
åå )
ArgumentOutOfRangeException
åå 9
(
åå9 :
$str
åå: I
)
ååI J
;
ååJ K
}
çç 
}
éé 	
public
ëë 
virtual
ëë 
bool
ëë 
HasInsidePeriods
ëë ,
(
ëë, -
ITimePeriod
ëë- 8
test
ëë9 =
)
ëë= >
{
íí 	
if
ìì 
(
ìì 
test
ìì 
==
ìì 
null
ìì 
)
ìì 
{
îî 
throw
ïï 
new
ïï #
ArgumentNullException
ïï /
(
ïï/ 0
$str
ïï0 6
)
ïï6 7
;
ïï7 8
}
ññ 
foreach
òò 
(
òò 
ITimePeriod
òò  
period
òò! '
in
òò( *
periods
òò+ 2
)
òò2 3
{
ôô 
if
öö 
(
öö 
test
öö 
.
öö 
	HasInside
öö "
(
öö" #
period
öö# )
)
öö) *
)
öö* +
{
õõ 
return
úú 
true
úú 
;
úú  
}
ùù 
}
ûû 
return
†† 
false
†† 
;
†† 
}
°° 	
public
§§ 
virtual
§§ #
ITimePeriodCollection
§§ ,
InsidePeriods
§§- :
(
§§: ;
ITimePeriod
§§; F
test
§§G K
)
§§K L
{
•• 	
if
¶¶ 
(
¶¶ 
test
¶¶ 
==
¶¶ 
null
¶¶ 
)
¶¶ 
{
ßß 
throw
®® 
new
®® #
ArgumentNullException
®® /
(
®®/ 0
$str
®®0 6
)
®®6 7
;
®®7 8
}
©© "
TimePeriodCollection
´´  
insidePeriods
´´! .
=
´´/ 0
new
´´1 4"
TimePeriodCollection
´´5 I
(
´´I J
)
´´J K
;
´´K L
foreach
≠≠ 
(
≠≠ 
ITimePeriod
≠≠  
period
≠≠! '
in
≠≠( *
periods
≠≠+ 2
)
≠≠2 3
{
ÆÆ 
if
ØØ 
(
ØØ 
test
ØØ 
.
ØØ 
	HasInside
ØØ "
(
ØØ" #
period
ØØ# )
)
ØØ) *
)
ØØ* +
{
∞∞ 
insidePeriods
±± !
.
±±! "
Add
±±" %
(
±±% &
period
±±& ,
)
±±, -
;
±±- .
}
≤≤ 
}
≥≥ 
return
µµ 
insidePeriods
µµ  
;
µµ  !
}
∂∂ 	
public
ππ 
virtual
ππ 
bool
ππ 
HasOverlaps
ππ '
(
ππ' (
)
ππ( )
{
∫∫ 	
bool
ªª 
hasOverlaps
ªª 
=
ªª 
false
ªª $
;
ªª$ %
if
ºº 
(
ºº 
Count
ºº 
==
ºº 
$num
ºº 
)
ºº 
{
ΩΩ 
hasOverlaps
ææ 
=
ææ 
this
ææ "
[
ææ" #
$num
ææ# $
]
ææ$ %
.
ææ% &
OverlapsWith
ææ& 2
(
ææ2 3
this
ææ3 7
[
ææ7 8
$num
ææ8 9
]
ææ9 :
)
ææ: ;
;
ææ; <
}
øø 
else
¿¿ 
if
¿¿ 
(
¿¿ 
Count
¿¿ 
>
¿¿ 
$num
¿¿ 
)
¿¿ 
{
¡¡ 
hasOverlaps
¬¬ 
=
¬¬ 
new
¬¬ !&
TimeLineMomentCollection
¬¬" :
(
¬¬: ;
this
¬¬; ?
)
¬¬? @
.
¬¬@ A
HasOverlaps
¬¬A L
(
¬¬L M
)
¬¬M N
;
¬¬N O
}
√√ 
return
≈≈ 
hasOverlaps
≈≈ 
;
≈≈ 
}
∆∆ 	
public
…… 
virtual
…… 
bool
…… 
HasGaps
…… #
(
……# $
)
……$ %
{
   	
bool
ÀÀ 
hasGaps
ÀÀ 
=
ÀÀ 
false
ÀÀ  
;
ÀÀ  !
if
ÃÃ 
(
ÃÃ 
Count
ÃÃ 
>
ÃÃ 
$num
ÃÃ 
)
ÃÃ 
{
ÕÕ 
hasGaps
ŒŒ 
=
ŒŒ 
new
ŒŒ &
TimeLineMomentCollection
ŒŒ 6
(
ŒŒ6 7
this
ŒŒ7 ;
)
ŒŒ; <
.
ŒŒ< =
HasGaps
ŒŒ= D
(
ŒŒD E
)
ŒŒE F
;
ŒŒF G
}
œœ 
return
—— 
hasGaps
—— 
;
—— 
}
““ 	
public
’’ 
virtual
’’ 
bool
’’ 
HasOverlapPeriods
’’ -
(
’’- .
ITimePeriod
’’. 9
test
’’: >
)
’’> ?
{
÷÷ 	
if
◊◊ 
(
◊◊ 
test
◊◊ 
==
◊◊ 
null
◊◊ 
)
◊◊ 
{
ÿÿ 
throw
ŸŸ 
new
ŸŸ #
ArgumentNullException
ŸŸ /
(
ŸŸ/ 0
$str
ŸŸ0 6
)
ŸŸ6 7
;
ŸŸ7 8
}
⁄⁄ 
foreach
‹‹ 
(
‹‹ 
ITimePeriod
‹‹  
period
‹‹! '
in
‹‹( *
periods
‹‹+ 2
)
‹‹2 3
{
›› 
if
ﬁﬁ 
(
ﬁﬁ 
test
ﬁﬁ 
.
ﬁﬁ 
OverlapsWith
ﬁﬁ %
(
ﬁﬁ% &
period
ﬁﬁ& ,
)
ﬁﬁ, -
)
ﬁﬁ- .
{
ﬂﬂ 
return
‡‡ 
true
‡‡ 
;
‡‡  
}
·· 
}
‚‚ 
return
‰‰ 
false
‰‰ 
;
‰‰ 
}
ÂÂ 	
public
ËË 
virtual
ËË #
ITimePeriodCollection
ËË ,
OverlapPeriods
ËË- ;
(
ËË; <
ITimePeriod
ËË< G
test
ËËH L
)
ËËL M
{
ÈÈ 	
if
ÍÍ 
(
ÍÍ 
test
ÍÍ 
==
ÍÍ 
null
ÍÍ 
)
ÍÍ 
{
ÎÎ 
throw
ÏÏ 
new
ÏÏ #
ArgumentNullException
ÏÏ /
(
ÏÏ/ 0
$str
ÏÏ0 6
)
ÏÏ6 7
;
ÏÏ7 8
}
ÌÌ "
TimePeriodCollection
ÔÔ  
overlapPeriods
ÔÔ! /
=
ÔÔ0 1
new
ÔÔ2 5"
TimePeriodCollection
ÔÔ6 J
(
ÔÔJ K
)
ÔÔK L
;
ÔÔL M
foreach
ÒÒ 
(
ÒÒ 
ITimePeriod
ÒÒ  
period
ÒÒ! '
in
ÒÒ( *
periods
ÒÒ+ 2
)
ÒÒ2 3
{
ÚÚ 
if
ÛÛ 
(
ÛÛ 
test
ÛÛ 
.
ÛÛ 
OverlapsWith
ÛÛ %
(
ÛÛ% &
period
ÛÛ& ,
)
ÛÛ, -
)
ÛÛ- .
{
ÙÙ 
overlapPeriods
ıı "
.
ıı" #
Add
ıı# &
(
ıı& '
period
ıı' -
)
ıı- .
;
ıı. /
}
ˆˆ 
}
˜˜ 
return
˘˘ 
overlapPeriods
˘˘ !
;
˘˘! "
}
˙˙ 	
public
˝˝ 
virtual
˝˝ 
bool
˝˝ $
HasIntersectionPeriods
˝˝ 2
(
˝˝2 3
DateTime
˝˝3 ;
test
˝˝< @
)
˝˝@ A
{
˛˛ 	
foreach
ˇˇ 
(
ˇˇ 
ITimePeriod
ˇˇ  
period
ˇˇ! '
in
ˇˇ( *
periods
ˇˇ+ 2
)
ˇˇ2 3
{
ÄÄ 
if
ÅÅ 
(
ÅÅ 
period
ÅÅ 
.
ÅÅ 
	HasInside
ÅÅ $
(
ÅÅ$ %
test
ÅÅ% )
)
ÅÅ) *
)
ÅÅ* +
{
ÇÇ 
return
ÉÉ 
true
ÉÉ 
;
ÉÉ  
}
ÑÑ 
}
ÖÖ 
return
áá 
false
áá 
;
áá 
}
àà 	
public
ãã 
virtual
ãã #
ITimePeriodCollection
ãã ,!
IntersectionPeriods
ãã- @
(
ãã@ A
DateTime
ããA I
test
ããJ N
)
ããN O
{
åå 	"
TimePeriodCollection
çç  !
intersectionPeriods
çç! 4
=
çç5 6
new
çç7 :"
TimePeriodCollection
çç; O
(
ççO P
)
ççP Q
;
ççQ R
foreach
èè 
(
èè 
ITimePeriod
èè  
period
èè! '
in
èè( *
periods
èè+ 2
)
èè2 3
{
êê 
if
ëë 
(
ëë 
period
ëë 
.
ëë 
	HasInside
ëë $
(
ëë$ %
test
ëë% )
)
ëë) *
)
ëë* +
{
íí !
intersectionPeriods
ìì '
.
ìì' (
Add
ìì( +
(
ìì+ ,
period
ìì, 2
)
ìì2 3
;
ìì3 4
}
îî 
}
ïï 
return
óó !
intersectionPeriods
óó &
;
óó& '
}
òò 	
public
õõ 
virtual
õõ 
bool
õõ $
HasIntersectionPeriods
õõ 2
(
õõ2 3
ITimePeriod
õõ3 >
test
õõ? C
)
õõC D
{
úú 	
if
ùù 
(
ùù 
test
ùù 
==
ùù 
null
ùù 
)
ùù 
{
ûû 
throw
üü 
new
üü #
ArgumentNullException
üü /
(
üü/ 0
$str
üü0 6
)
üü6 7
;
üü7 8
}
†† 
foreach
¢¢ 
(
¢¢ 
ITimePeriod
¢¢  
period
¢¢! '
in
¢¢( *
periods
¢¢+ 2
)
¢¢2 3
{
££ 
if
§§ 
(
§§ 
period
§§ 
.
§§ 
IntersectsWith
§§ )
(
§§) *
test
§§* .
)
§§. /
)
§§/ 0
{
•• 
return
¶¶ 
true
¶¶ 
;
¶¶  
}
ßß 
}
®® 
return
™™ 
false
™™ 
;
™™ 
}
´´ 	
public
ÆÆ 
virtual
ÆÆ #
ITimePeriodCollection
ÆÆ ,!
IntersectionPeriods
ÆÆ- @
(
ÆÆ@ A
ITimePeriod
ÆÆA L
test
ÆÆM Q
)
ÆÆQ R
{
ØØ 	
if
∞∞ 
(
∞∞ 
test
∞∞ 
==
∞∞ 
null
∞∞ 
)
∞∞ 
{
±± 
throw
≤≤ 
new
≤≤ #
ArgumentNullException
≤≤ /
(
≤≤/ 0
$str
≤≤0 6
)
≤≤6 7
;
≤≤7 8
}
≥≥ "
TimePeriodCollection
µµ  !
intersectionPeriods
µµ! 4
=
µµ5 6
new
µµ7 :"
TimePeriodCollection
µµ; O
(
µµO P
)
µµP Q
;
µµQ R
foreach
∑∑ 
(
∑∑ 
ITimePeriod
∑∑  
period
∑∑! '
in
∑∑( *
periods
∑∑+ 2
)
∑∑2 3
{
∏∏ 
if
ππ 
(
ππ 
test
ππ 
.
ππ 
IntersectsWith
ππ '
(
ππ' (
period
ππ( .
)
ππ. /
)
ππ/ 0
{
∫∫ !
intersectionPeriods
ªª '
.
ªª' (
Add
ªª( +
(
ªª+ ,
period
ªª, 2
)
ªª2 3
;
ªª3 4
}
ºº 
}
ΩΩ 
return
øø !
intersectionPeriods
øø &
;
øø& '
}
¿¿ 	
public
√√ 
virtual
√√ #
ITimePeriodCollection
√√ ,
RelationPeriods
√√- <
(
√√< =
ITimePeriod
√√= H
test
√√I M
,
√√M N
PeriodRelation
√√O ]
relation
√√^ f
)
√√f g
{
ƒƒ 	
if
≈≈ 
(
≈≈ 
test
≈≈ 
==
≈≈ 
null
≈≈ 
)
≈≈ 
{
∆∆ 
throw
«« 
new
«« #
ArgumentNullException
«« /
(
««/ 0
$str
««0 6
)
««6 7
;
««7 8
}
»» "
TimePeriodCollection
    
relationPeriods
  ! 0
=
  1 2
new
  3 6"
TimePeriodCollection
  7 K
(
  K L
)
  L M
;
  M N
foreach
ÃÃ 
(
ÃÃ 
ITimePeriod
ÃÃ  
period
ÃÃ! '
in
ÃÃ( *
periods
ÃÃ+ 2
)
ÃÃ2 3
{
ÕÕ 
if
ŒŒ 
(
ŒŒ 
test
ŒŒ 
.
ŒŒ 
GetRelation
ŒŒ $
(
ŒŒ$ %
period
ŒŒ% +
)
ŒŒ+ ,
==
ŒŒ- /
relation
ŒŒ0 8
)
ŒŒ8 9
{
œœ 
relationPeriods
–– #
.
––# $
Add
––$ '
(
––' (
period
––( .
)
––. /
;
––/ 0
}
—— 
}
““ 
return
‘‘ 
relationPeriods
‘‘ "
;
‘‘" #
}
’’ 	
public
ÿÿ 
virtual
ÿÿ 
void
ÿÿ 
Add
ÿÿ 
(
ÿÿ  
ITimePeriod
ÿÿ  +
item
ÿÿ, 0
)
ÿÿ0 1
{
ŸŸ 	
if
⁄⁄ 
(
⁄⁄ 
item
⁄⁄ 
==
⁄⁄ 
null
⁄⁄ 
)
⁄⁄ 
{
€€ 
throw
‹‹ 
new
‹‹ #
ArgumentNullException
‹‹ /
(
‹‹/ 0
$str
‹‹0 6
)
‹‹6 7
;
‹‹7 8
}
›› 
periods
ﬁﬁ 
.
ﬁﬁ 
Add
ﬁﬁ 
(
ﬁﬁ 
item
ﬁﬁ 
)
ﬁﬁ 
;
ﬁﬁ 
}
ﬂﬂ 	
public
‚‚ 
bool
‚‚ 
ContainsPeriod
‚‚ "
(
‚‚" #
ITimePeriod
‚‚# .
test
‚‚/ 3
)
‚‚3 4
{
„„ 	
if
‰‰ 
(
‰‰ 
test
‰‰ 
==
‰‰ 
null
‰‰ 
)
‰‰ 
{
ÂÂ 
throw
ÊÊ 
new
ÊÊ #
ArgumentNullException
ÊÊ /
(
ÊÊ/ 0
$str
ÊÊ0 6
)
ÊÊ6 7
;
ÊÊ7 8
}
ÁÁ 
foreach
ÈÈ 
(
ÈÈ 
ITimePeriod
ÈÈ  
period
ÈÈ! '
in
ÈÈ( *
periods
ÈÈ+ 2
)
ÈÈ2 3
{
ÍÍ 
if
ÎÎ 
(
ÎÎ 
period
ÎÎ 
.
ÎÎ 
IsSamePeriod
ÎÎ '
(
ÎÎ' (
test
ÎÎ( ,
)
ÎÎ, -
)
ÎÎ- .
{
ÏÏ 
return
ÌÌ 
true
ÌÌ 
;
ÌÌ  
}
ÓÓ 
}
ÔÔ 
return
 
false
 
;
 
}
ÒÒ 	
public
ÙÙ 
void
ÙÙ 
AddAll
ÙÙ 
(
ÙÙ 
IEnumerable
ÙÙ &
<
ÙÙ& '
ITimePeriod
ÙÙ' 2
>
ÙÙ2 3
timePeriods
ÙÙ4 ?
)
ÙÙ? @
{
ıı 	
if
ˆˆ 
(
ˆˆ 
timePeriods
ˆˆ 
==
ˆˆ 
null
ˆˆ #
)
ˆˆ# $
{
˜˜ 
throw
¯¯ 
new
¯¯ #
ArgumentNullException
¯¯ /
(
¯¯/ 0
$str
¯¯0 =
)
¯¯= >
;
¯¯> ?
}
˘˘ 
foreach
˚˚ 
(
˚˚ 
ITimePeriod
˚˚  
period
˚˚! '
in
˚˚( *
timePeriods
˚˚+ 6
)
˚˚6 7
{
¸¸ 
Add
˝˝ 
(
˝˝ 
period
˝˝ 
)
˝˝ 
;
˝˝ 
}
˛˛ 
}
ˇˇ 	
public
ÇÇ 
virtual
ÇÇ 
void
ÇÇ 
Insert
ÇÇ "
(
ÇÇ" #
int
ÇÇ# &
index
ÇÇ' ,
,
ÇÇ, -
ITimePeriod
ÇÇ. 9
item
ÇÇ: >
)
ÇÇ> ?
{
ÉÉ 	
if
ÑÑ 
(
ÑÑ 
index
ÑÑ 
<
ÑÑ 
$num
ÑÑ 
||
ÑÑ 
index
ÑÑ "
>
ÑÑ# $
Count
ÑÑ% *
)
ÑÑ* +
{
ÖÖ 
throw
ÜÜ 
new
ÜÜ )
ArgumentOutOfRangeException
ÜÜ 5
(
ÜÜ5 6
$str
ÜÜ6 =
)
ÜÜ= >
;
ÜÜ> ?
}
áá 
if
àà 
(
àà 
item
àà 
==
àà 
null
àà 
)
àà 
{
ââ 
throw
ää 
new
ää #
ArgumentNullException
ää /
(
ää/ 0
$str
ää0 6
)
ää6 7
;
ää7 8
}
ãã 
periods
åå 
.
åå 
Insert
åå 
(
åå 
index
åå  
,
åå  !
item
åå" &
)
åå& '
;
åå' (
}
çç 	
public
êê 
virtual
êê 
bool
êê 
Contains
êê $
(
êê$ %
ITimePeriod
êê% 0
item
êê1 5
)
êê5 6
{
ëë 	
if
íí 
(
íí 
item
íí 
==
íí 
null
íí 
)
íí 
{
ìì 
throw
îî 
new
îî #
ArgumentNullException
îî /
(
îî/ 0
$str
îî0 6
)
îî6 7
;
îî7 8
}
ïï 
return
ññ 
periods
ññ 
.
ññ 
Contains
ññ #
(
ññ# $
item
ññ$ (
)
ññ( )
;
ññ) *
}
óó 	
public
öö 
virtual
öö 
int
öö 
IndexOf
öö "
(
öö" #
ITimePeriod
öö# .
item
öö/ 3
)
öö3 4
{
õõ 	
if
úú 
(
úú 
item
úú 
==
úú 
null
úú 
)
úú 
{
ùù 
throw
ûû 
new
ûû #
ArgumentNullException
ûû /
(
ûû/ 0
$str
ûû0 6
)
ûû6 7
;
ûû7 8
}
üü 
return
†† 
periods
†† 
.
†† 
IndexOf
†† "
(
††" #
item
††# '
)
††' (
;
††( )
}
°° 	
public
§§ 
virtual
§§ 
void
§§ 
CopyTo
§§ "
(
§§" #
ITimePeriod
§§# .
[
§§. /
]
§§/ 0
array
§§1 6
,
§§6 7
int
§§8 ;

arrayIndex
§§< F
)
§§F G
{
•• 	
if
¶¶ 
(
¶¶ 
array
¶¶ 
==
¶¶ 
null
¶¶ 
)
¶¶ 
{
ßß 
throw
®® 
new
®® #
ArgumentNullException
®® /
(
®®/ 0
$str
®®0 7
)
®®7 8
;
®®8 9
}
©© 
periods
™™ 
.
™™ 
CopyTo
™™ 
(
™™ 
array
™™  
,
™™  !

arrayIndex
™™" ,
)
™™, -
;
™™- .
}
´´ 	
public
ÆÆ 
virtual
ÆÆ 
void
ÆÆ 
Clear
ÆÆ !
(
ÆÆ! "
)
ÆÆ" #
{
ØØ 	
periods
∞∞ 
.
∞∞ 
Clear
∞∞ 
(
∞∞ 
)
∞∞ 
;
∞∞ 
}
±± 	
public
¥¥ 
virtual
¥¥ 
bool
¥¥ 
Remove
¥¥ "
(
¥¥" #
ITimePeriod
¥¥# .
item
¥¥/ 3
)
¥¥3 4
{
µµ 	
if
∂∂ 
(
∂∂ 
item
∂∂ 
==
∂∂ 
null
∂∂ 
)
∂∂ 
{
∑∑ 
throw
∏∏ 
new
∏∏ #
ArgumentNullException
∏∏ /
(
∏∏/ 0
$str
∏∏0 6
)
∏∏6 7
;
∏∏7 8
}
ππ 
return
∫∫ 
periods
∫∫ 
.
∫∫ 
Remove
∫∫ !
(
∫∫! "
item
∫∫" &
)
∫∫& '
;
∫∫' (
}
ªª 	
public
ææ 
virtual
ææ 
void
ææ 
RemoveAt
ææ $
(
ææ$ %
int
ææ% (
index
ææ) .
)
ææ. /
{
øø 	
periods
¿¿ 
.
¿¿ 
RemoveAt
¿¿ 
(
¿¿ 
index
¿¿ "
)
¿¿" #
;
¿¿# $
}
¡¡ 	
public
ƒƒ 
virtual
ƒƒ 
bool
ƒƒ 
IsSamePeriod
ƒƒ (
(
ƒƒ( )
ITimePeriod
ƒƒ) 4
test
ƒƒ5 9
)
ƒƒ9 :
{
≈≈ 	
if
∆∆ 
(
∆∆ 
test
∆∆ 
==
∆∆ 
null
∆∆ 
)
∆∆ 
{
«« 
throw
»» 
new
»» #
ArgumentNullException
»» /
(
»»/ 0
$str
»»0 6
)
»»6 7
;
»»7 8
}
…… 
return
   
Start
   
==
   
test
    
.
    !
Start
  ! &
&&
  ' )
End
  * -
==
  . 0
test
  1 5
.
  5 6
End
  6 9
;
  9 :
}
ÀÀ 	
public
ŒŒ 
virtual
ŒŒ 
bool
ŒŒ 
	HasInside
ŒŒ %
(
ŒŒ% &
DateTime
ŒŒ& .
test
ŒŒ/ 3
)
ŒŒ3 4
{
œœ 	
return
–– 
TimePeriodCalc
–– !
.
––! "
	HasInside
––" +
(
––+ ,
this
––, 0
,
––0 1
test
––2 6
)
––6 7
;
––7 8
}
—— 	
public
‘‘ 
virtual
‘‘ 
bool
‘‘ 
	HasInside
‘‘ %
(
‘‘% &
ITimePeriod
‘‘& 1
test
‘‘2 6
)
‘‘6 7
{
’’ 	
if
÷÷ 
(
÷÷ 
test
÷÷ 
==
÷÷ 
null
÷÷ 
)
÷÷ 
{
◊◊ 
throw
ÿÿ 
new
ÿÿ #
ArgumentNullException
ÿÿ /
(
ÿÿ/ 0
$str
ÿÿ0 6
)
ÿÿ6 7
;
ÿÿ7 8
}
ŸŸ 
return
⁄⁄ 
TimePeriodCalc
⁄⁄ !
.
⁄⁄! "
	HasInside
⁄⁄" +
(
⁄⁄+ ,
this
⁄⁄, 0
,
⁄⁄0 1
test
⁄⁄2 6
)
⁄⁄6 7
;
⁄⁄7 8
}
€€ 	
public
ﬁﬁ 
virtual
ﬁﬁ 
bool
ﬁﬁ 
IntersectsWith
ﬁﬁ *
(
ﬁﬁ* +
ITimePeriod
ﬁﬁ+ 6
test
ﬁﬁ7 ;
)
ﬁﬁ; <
{
ﬂﬂ 	
if
‡‡ 
(
‡‡ 
test
‡‡ 
==
‡‡ 
null
‡‡ 
)
‡‡ 
{
·· 
throw
‚‚ 
new
‚‚ #
ArgumentNullException
‚‚ /
(
‚‚/ 0
$str
‚‚0 6
)
‚‚6 7
;
‚‚7 8
}
„„ 
return
‰‰ 
TimePeriodCalc
‰‰ !
.
‰‰! "
IntersectsWith
‰‰" 0
(
‰‰0 1
this
‰‰1 5
,
‰‰5 6
test
‰‰7 ;
)
‰‰; <
;
‰‰< =
}
ÂÂ 	
public
ËË 
virtual
ËË 
bool
ËË 
OverlapsWith
ËË (
(
ËË( )
ITimePeriod
ËË) 4
test
ËË5 9
)
ËË9 :
{
ÈÈ 	
if
ÍÍ 
(
ÍÍ 
test
ÍÍ 
==
ÍÍ 
null
ÍÍ 
)
ÍÍ 
{
ÎÎ 
throw
ÏÏ 
new
ÏÏ #
ArgumentNullException
ÏÏ /
(
ÏÏ/ 0
$str
ÏÏ0 6
)
ÏÏ6 7
;
ÏÏ7 8
}
ÌÌ 
return
ÓÓ 
TimePeriodCalc
ÓÓ !
.
ÓÓ! "
OverlapsWith
ÓÓ" .
(
ÓÓ. /
this
ÓÓ/ 3
,
ÓÓ3 4
test
ÓÓ5 9
)
ÓÓ9 :
;
ÓÓ: ;
}
ÔÔ 	
public
ÚÚ 
virtual
ÚÚ 
PeriodRelation
ÚÚ %
GetRelation
ÚÚ& 1
(
ÚÚ1 2
ITimePeriod
ÚÚ2 =
test
ÚÚ> B
)
ÚÚB C
{
ÛÛ 	
if
ÙÙ 
(
ÙÙ 
test
ÙÙ 
==
ÙÙ 
null
ÙÙ 
)
ÙÙ 
{
ıı 
throw
ˆˆ 
new
ˆˆ #
ArgumentNullException
ˆˆ /
(
ˆˆ/ 0
$str
ˆˆ0 6
)
ˆˆ6 7
;
ˆˆ7 8
}
˜˜ 
return
¯¯ 
TimePeriodCalc
¯¯ !
.
¯¯! "
GetRelation
¯¯" -
(
¯¯- .
this
¯¯. 2
,
¯¯2 3
test
¯¯4 8
)
¯¯8 9
;
¯¯9 :
}
˘˘ 	
public
¸¸ 
virtual
¸¸ 
int
¸¸ 
	CompareTo
¸¸ $
(
¸¸$ %
ITimePeriod
¸¸% 0
other
¸¸1 6
,
¸¸6 7!
ITimePeriodComparer
¸¸8 K
comparer
¸¸L T
)
¸¸T U
{
˝˝ 	
if
˛˛ 
(
˛˛ 
other
˛˛ 
==
˛˛ 
null
˛˛ 
)
˛˛ 
{
ˇˇ 
throw
ÄÄ 
new
ÄÄ #
ArgumentNullException
ÄÄ /
(
ÄÄ/ 0
$str
ÄÄ0 7
)
ÄÄ7 8
;
ÄÄ8 9
}
ÅÅ 
if
ÇÇ 
(
ÇÇ 
comparer
ÇÇ 
==
ÇÇ 
null
ÇÇ  
)
ÇÇ  !
{
ÉÉ 
throw
ÑÑ 
new
ÑÑ #
ArgumentNullException
ÑÑ /
(
ÑÑ/ 0
$str
ÑÑ0 :
)
ÑÑ: ;
;
ÑÑ; <
}
ÖÖ 
return
ÜÜ 
comparer
ÜÜ 
.
ÜÜ 
Compare
ÜÜ #
(
ÜÜ# $
this
ÜÜ$ (
,
ÜÜ( )
other
ÜÜ* /
)
ÜÜ/ 0
;
ÜÜ0 1
}
áá 	
public
ää 
string
ää 
GetDescription
ää $
(
ää$ %
ITimeFormatter
ää% 3
	formatter
ää4 =
=
ää> ?
null
ää@ D
)
ääD E
{
ãã 	
return
åå 
Format
åå 
(
åå 
	formatter
åå #
??
åå$ &
TimeFormatter
åå' 4
.
åå4 5
Instance
åå5 =
)
åå= >
;
åå> ?
}
çç 	
	protected
êê 
virtual
êê 
string
êê  
Format
êê! '
(
êê' (
ITimeFormatter
êê( 6
	formatter
êê7 @
)
êê@ A
{
ëë 	
return
íí 
	formatter
íí 
.
íí !
GetCollectionPeriod
íí 0
(
íí0 1
Count
íí1 6
,
íí6 7
Start
íí8 =
,
íí= >
End
íí? B
,
ííB C
Duration
ííD L
)
ííL M
;
ííM N
}
ìì 	
public
ññ 
override
ññ 
string
ññ 
ToString
ññ '
(
ññ' (
)
ññ( )
{
óó 	
return
òò 
GetDescription
òò !
(
òò! "
)
òò" #
;
òò# $
}
ôô 	
public
úú 
sealed
úú 
override
úú 
bool
úú #
Equals
úú$ *
(
úú* +
object
úú+ 1
obj
úú2 5
)
úú5 6
{
ùù 	
if
ûû 
(
ûû 
obj
ûû 
==
ûû 
this
ûû 
)
ûû 
{
üü 
return
†† 
true
†† 
;
†† 
}
°° 
if
¢¢ 
(
¢¢ 
obj
¢¢ 
==
¢¢ 
null
¢¢ 
||
¢¢ 
GetType
¢¢ &
(
¢¢& '
)
¢¢' (
!=
¢¢) +
obj
¢¢, /
.
¢¢/ 0
GetType
¢¢0 7
(
¢¢7 8
)
¢¢8 9
)
¢¢9 :
{
££ 
return
§§ 
false
§§ 
;
§§ 
}
•• 
return
¶¶ 
IsEqual
¶¶ 
(
¶¶ 
obj
¶¶ 
)
¶¶ 
;
¶¶  
}
ßß 	
	protected
™™ 
virtual
™™ 
bool
™™ 
IsEqual
™™ &
(
™™& '
object
™™' -
obj
™™. 1
)
™™1 2
{
´´ 	
return
¨¨ 
HasSameData
¨¨ 
(
¨¨ 
obj
¨¨ "
as
¨¨# %"
TimePeriodCollection
¨¨& :
)
¨¨: ;
;
¨¨; <
}
≠≠ 	
private
∞∞ 
bool
∞∞ 
HasSameData
∞∞  
(
∞∞  !
IList
∞∞! &
<
∞∞& '
ITimePeriod
∞∞' 2
>
∞∞2 3
comp
∞∞4 8
)
∞∞8 9
{
±± 	
if
≤≤ 
(
≤≤ 
Count
≤≤ 
!=
≤≤ 
comp
≤≤ 
.
≤≤ 
Count
≤≤ #
)
≤≤# $
{
≥≥ 
return
¥¥ 
false
¥¥ 
;
¥¥ 
}
µµ 
for
∑∑ 
(
∑∑ 
int
∑∑ 
i
∑∑ 
=
∑∑ 
$num
∑∑ 
;
∑∑ 
i
∑∑ 
<
∑∑ 
Count
∑∑  %
;
∑∑% &
i
∑∑' (
++
∑∑( *
)
∑∑* +
{
∏∏ 
if
ππ 
(
ππ 
!
ππ 
this
ππ 
[
ππ 
i
ππ 
]
ππ 
.
ππ 
Equals
ππ #
(
ππ# $
comp
ππ$ (
[
ππ( )
i
ππ) *
]
ππ* +
)
ππ+ ,
)
ππ, -
{
∫∫ 
return
ªª 
false
ªª  
;
ªª  !
}
ºº 
}
ΩΩ 
return
øø 
true
øø 
;
øø 
}
¿¿ 	
public
√√ 
sealed
√√ 
override
√√ 
int
√√ "
GetHashCode
√√# .
(
√√. /
)
√√/ 0
{
ƒƒ 	
return
≈≈ 
HashTool
≈≈ 
.
≈≈ 
AddHashCode
≈≈ '
(
≈≈' (
GetType
≈≈( /
(
≈≈/ 0
)
≈≈0 1
.
≈≈1 2
GetHashCode
≈≈2 =
(
≈≈= >
)
≈≈> ?
,
≈≈? @
ComputeHashCode
≈≈A P
(
≈≈P Q
)
≈≈Q R
)
≈≈R S
;
≈≈S T
}
∆∆ 	
	protected
…… 
virtual
…… 
int
…… 
ComputeHashCode
…… -
(
……- .
)
……. /
{
   	
return
ÀÀ 
HashTool
ÀÀ 
.
ÀÀ 
ComputeHashCode
ÀÀ +
(
ÀÀ+ ,
periods
ÀÀ, 3
)
ÀÀ3 4
;
ÀÀ4 5
}
ÃÃ 	
	protected
œœ 
virtual
œœ 
DateTime
œœ "
?
œœ" #
GetStart
œœ$ ,
(
œœ, -
)
œœ- .
{
–– 	
if
—— 
(
—— 
Count
—— 
==
—— 
$num
—— 
)
—— 
{
““ 
return
”” 
null
”” 
;
”” 
}
‘‘ 
DateTime
÷÷ 
start
÷÷ 
=
÷÷ 
TimeSpec
÷÷ %
.
÷÷% &
MaxPeriodDate
÷÷& 3
;
÷÷3 4
foreach
ÿÿ 
(
ÿÿ 
ITimePeriod
ÿÿ  

timePeriod
ÿÿ! +
in
ÿÿ, .
periods
ÿÿ/ 6
)
ÿÿ6 7
{
ŸŸ 
if
⁄⁄ 
(
⁄⁄ 

timePeriod
⁄⁄ 
.
⁄⁄ 
Start
⁄⁄ $
<
⁄⁄% &
start
⁄⁄' ,
)
⁄⁄, -
{
€€ 
start
‹‹ 
=
‹‹ 

timePeriod
‹‹ &
.
‹‹& '
Start
‹‹' ,
;
‹‹, -
}
›› 
}
ﬁﬁ 
return
‡‡ 
start
‡‡ 
;
‡‡ 
}
·· 	
	protected
‰‰ 
virtual
‰‰ 
DateTime
‰‰ "
?
‰‰" #
GetEnd
‰‰$ *
(
‰‰* +
)
‰‰+ ,
{
ÂÂ 	
if
ÊÊ 
(
ÊÊ 
Count
ÊÊ 
==
ÊÊ 
$num
ÊÊ 
)
ÊÊ 
{
ÁÁ 
return
ËË 
null
ËË 
;
ËË 
}
ÈÈ 
DateTime
ÎÎ 
end
ÎÎ 
=
ÎÎ 
TimeSpec
ÎÎ #
.
ÎÎ# $
MinPeriodDate
ÎÎ$ 1
;
ÎÎ1 2
foreach
ÌÌ 
(
ÌÌ 
ITimePeriod
ÌÌ  

timePeriod
ÌÌ! +
in
ÌÌ, .
periods
ÌÌ/ 6
)
ÌÌ6 7
{
ÓÓ 
if
ÔÔ 
(
ÔÔ 

timePeriod
ÔÔ 
.
ÔÔ 
End
ÔÔ "
>
ÔÔ# $
end
ÔÔ% (
)
ÔÔ( )
{
 
end
ÒÒ 
=
ÒÒ 

timePeriod
ÒÒ $
.
ÒÒ$ %
End
ÒÒ% (
;
ÒÒ( )
}
ÚÚ 
}
ÛÛ 
return
ıı 
end
ıı 
;
ıı 
}
ˆˆ 	
	protected
˘˘ 
virtual
˘˘ 
void
˘˘ 
GetStartEnd
˘˘ *
(
˘˘* +
out
˘˘+ .
DateTime
˘˘/ 7
?
˘˘7 8
start
˘˘9 >
,
˘˘> ?
out
˘˘@ C
DateTime
˘˘D L
?
˘˘L M
end
˘˘N Q
)
˘˘Q R
{
˙˙ 	
if
˚˚ 
(
˚˚ 
Count
˚˚ 
==
˚˚ 
$num
˚˚ 
)
˚˚ 
{
¸¸ 
start
˝˝ 
=
˝˝ 
null
˝˝ 
;
˝˝ 
end
˛˛ 
=
˛˛ 
null
˛˛ 
;
˛˛ 
return
ˇˇ 
;
ˇˇ 
}
ÄÄ 
start
ÇÇ 
=
ÇÇ 
TimeSpec
ÇÇ 
.
ÇÇ 
MaxPeriodDate
ÇÇ *
;
ÇÇ* +
end
ÉÉ 
=
ÉÉ 
TimeSpec
ÉÉ 
.
ÉÉ 
MinPeriodDate
ÉÉ (
;
ÉÉ( )
foreach
ÖÖ 
(
ÖÖ 
ITimePeriod
ÖÖ  

timePeriod
ÖÖ! +
in
ÖÖ, .
periods
ÖÖ/ 6
)
ÖÖ6 7
{
ÜÜ 
if
áá 
(
áá 

timePeriod
áá 
.
áá 
Start
áá $
<
áá% &
start
áá' ,
)
áá, -
{
àà 
start
ââ 
=
ââ 

timePeriod
ââ &
.
ââ& '
Start
ââ' ,
;
ââ, -
}
ää 
if
ãã 
(
ãã 

timePeriod
ãã 
.
ãã 
End
ãã "
>
ãã# $
end
ãã% (
)
ãã( )
{
åå 
end
çç 
=
çç 

timePeriod
çç $
.
çç$ %
End
çç% (
;
çç( )
}
éé 
}
èè 
}
êê 	
	protected
ìì 
virtual
ìì 
TimeSpan
ìì "
?
ìì" #
GetDuration
ìì$ /
(
ìì/ 0
)
ìì0 1
{
îî 	
DateTime
ïï 
?
ïï 
start
ïï 
;
ïï 
DateTime
ññ 
?
ññ 
end
ññ 
;
ññ 
GetStartEnd
òò 
(
òò 
out
òò 
start
òò !
,
òò! "
out
òò# &
end
òò' *
)
òò* +
;
òò+ ,
if
öö 
(
öö 
start
öö 
==
öö 
null
öö 
||
öö  
end
öö! $
==
öö% '
null
öö( ,
)
öö, -
{
õõ 
return
úú 
null
úú 
;
úú 
}
ùù 
return
üü 
end
üü 
.
üü 
Value
üü 
-
üü 
start
üü $
.
üü$ %
Value
üü% *
;
üü* +
}
†† 	
private
§§ 
readonly
§§ 
List
§§ 
<
§§ 
ITimePeriod
§§ )
>
§§) *
periods
§§+ 2
=
§§3 4
new
§§5 8
List
§§9 =
<
§§= >
ITimePeriod
§§> I
>
§§I J
(
§§J K
)
§§K L
;
§§L M
}
¶¶ 
}®® ◊
sF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\TimePeriodCombiner.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

class 
TimePeriodCombiner #
<# $
T$ %
>% &
where' ,
T- .
:/ 0
ITimePeriod1 <
,< =
new> A
(A B
)B C
{ 
public 
TimePeriodCombiner !
(! "
)" #
:$ %
this 
( 
null 
) 
{ 	
} 	
public 
TimePeriodCombiner !
(! "
ITimePeriodMapper" 3
periodMapper4 @
)@ A
{ 	
this 
. 
periodMapper 
= 
periodMapper  ,
;, -
} 	
public 
ITimePeriodMapper  
PeriodMapper! -
{ 	
get   
{   
return   
periodMapper   %
;  % &
}  ' (
}!! 	
public$$ 
virtual$$ !
ITimePeriodCollection$$ ,
CombinePeriods$$- ;
($$; < 
ITimePeriodContainer$$< P
periods$$Q X
)$$X Y
{%% 	
if&& 
(&& 
periods&& 
==&& 
null&& 
)&&  
{'' 
throw(( 
new(( !
ArgumentNullException(( /
(((/ 0
$str((0 9
)((9 :
;((: ;
})) 
TimeLine** 
<** 
T** 
>** 
timeLine**  
=**! "
new**# &
TimeLine**' /
<**/ 0
T**0 1
>**1 2
(**2 3
periods**3 :
,**: ;
periodMapper**< H
)**H I
;**I J
return++ 
timeLine++ 
.++ 
CombinePeriods++ *
(++* +
)+++ ,
;++, -
},, 	
private00 
readonly00 
ITimePeriodMapper00 *
periodMapper00+ 7
;007 8
}22 
}44 ¯

{F:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\TimePeriodDurationComparer.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

sealed 
class &
TimePeriodDurationComparer 2
:3 4
ITimePeriodComparer5 H
{ 
public 
static 
ITimePeriodComparer )
Comparer* 2
=3 4
new5 8&
TimePeriodDurationComparer9 S
(S T
)T U
;U V
public 
static 
ITimePeriodComparer )
ReverseComparer* 9
=: ;
new< ?$
TimePeriodReversComparer@ X
(X Y
newY \&
TimePeriodDurationComparer] w
(w x
)x y
)y z
;z {
public 
int 
Compare 
( 
ITimePeriod &
left' +
,+ ,
ITimePeriod- 8
right9 >
)> ?
{ 	
return 
left 
. 
Duration  
.  !
	CompareTo! *
(* +
right+ 0
.0 1
Duration1 9
)9 :
;: ;
} 	
} 
} ⁄

vF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\TimePeriodEndComparer.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

sealed 
class !
TimePeriodEndComparer -
:. /
ITimePeriodComparer0 C
{ 
public 
static 
ITimePeriodComparer )
Comparer* 2
=3 4
new5 8!
TimePeriodEndComparer9 N
(N O
)O P
;P Q
public 
static 
ITimePeriodComparer )
ReverseComparer* 9
=: ;
new< ?$
TimePeriodReversComparer@ X
(X Y
newY \!
TimePeriodEndComparer] r
(r s
)s t
)t u
;u v
public 
int 
Compare 
( 
ITimePeriod &
left' +
,+ ,
ITimePeriod- 8
right9 >
)> ?
{ 	
return 
left 
. 
End 
. 
	CompareTo %
(% &
right& +
.+ ,
End, /
)/ 0
;0 1
} 	
} 
} ·
vF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\TimePeriodIntersector.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

class !
TimePeriodIntersector &
<& '
T' (
>( )
where* /
T0 1
:2 3
ITimePeriod4 ?
,? @
newA D
(D E
)E F
{ 
public !
TimePeriodIntersector $
($ %
)% &
:' (
this 
( 
null 
) 
{ 	
} 	
public !
TimePeriodIntersector $
($ %
ITimePeriodMapper% 6
periodMapper7 C
)C D
{ 	
this 
. 
periodMapper 
= 
periodMapper  ,
;, -
} 	
public 
ITimePeriodMapper  
PeriodMapper! -
{ 	
get   
{   
return   
periodMapper   %
;  % &
}  ' (
}!! 	
public$$ 
virtual$$ !
ITimePeriodCollection$$ ,
IntersectPeriods$$- =
($$= > 
ITimePeriodContainer$$> R
periods$$S Z
,$$Z [
bool$$\ `
combinePeriods$$a o
=$$p q
true$$r v
)$$v w
{%% 	
if&& 
(&& 
periods&& 
==&& 
null&& 
)&&  
{'' 
throw(( 
new(( !
ArgumentNullException(( /
(((/ 0
$str((0 9
)((9 :
;((: ;
})) 
TimeLine** 
<** 
T** 
>** 
timeLine**  
=**! "
new**# &
TimeLine**' /
<**/ 0
T**0 1
>**1 2
(**2 3
periods**3 :
,**: ;
periodMapper**< H
)**H I
;**I J
return++ 
timeLine++ 
.++ 
IntersectPeriods++ ,
(++, -
combinePeriods++- ;
)++; <
;++< =
},, 	
private00 
readonly00 
ITimePeriodMapper00 *
periodMapper00+ 7
;007 8
}22 
}44 Œ
yF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\TimePeriodReversComparer.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

sealed 
class $
TimePeriodReversComparer 0
:1 2
ITimePeriodComparer3 F
{ 
public $
TimePeriodReversComparer '
(' (
ITimePeriodComparer( ;
baseComparer< H
)H I
{ 	
this 
. 
baseComparer 
= 
baseComparer  ,
;, -
} 	
public 
ITimePeriodComparer "
BaseComparer# /
{ 	
get 
{ 
return 
baseComparer %
;% &
}' (
} 	
public 
int 
Compare 
( 
ITimePeriod &
left' +
,+ ,
ITimePeriod- 8
right9 >
)> ?
{ 	
return   
-   
baseComparer    
.    !
Compare  ! (
(  ( )
left  ) -
,  - .
right  / 4
)  4 5
;  5 6
}!! 	
private%% 
readonly%% 
ITimePeriodComparer%% ,
baseComparer%%- 9
;%%9 :
}'' 
})) Ê

xF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\TimePeriodStartComparer.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

sealed 
class #
TimePeriodStartComparer /
:0 1
ITimePeriodComparer2 E
{ 
public 
static 
ITimePeriodComparer )
Comparer* 2
=3 4
new5 8#
TimePeriodStartComparer9 P
(P Q
)Q R
;R S
public 
static 
ITimePeriodComparer )
ReverseComparer* 9
=: ;
new< ?$
TimePeriodReversComparer@ X
(X Y
newY \#
TimePeriodStartComparer] t
(t u
)u v
)v w
;w x
public 
int 
Compare 
( 
ITimePeriod &
left' +
,+ ,
ITimePeriod- 8
right9 >
)> ?
{ 	
return 
left 
. 
Start 
. 
	CompareTo '
(' (
right( -
.- .
Start. 3
)3 4
;4 5
} 	
} 
} â+
uF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\TimePeriodSubtractor.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

class  
TimePeriodSubtractor %
<% &
T& '
>' (
where) .
T/ 0
:1 2
ITimePeriod3 >
,> ?
new@ C
(C D
)D E
{ 
public  
TimePeriodSubtractor #
(# $
)$ %
:& '
this 
( 
null 
) 
{ 	
} 	
public  
TimePeriodSubtractor #
(# $
ITimePeriodMapper$ 5
periodMapper6 B
)B C
{ 	
this 
. 
periodMapper 
= 
periodMapper  ,
;, -
timePeriodCombiner 
=  
new! $
TimePeriodCombiner% 7
<7 8
T8 9
>9 :
(: ;
periodMapper; G
)G H
;H I
timeGapCalculator 
= 
new  #
TimeGapCalculator$ 5
<5 6
T6 7
>7 8
(8 9
periodMapper9 E
)E F
;F G!
timePeriodIntersector !
=" #
new$ '!
TimePeriodIntersector( =
<= >
T> ?
>? @
(@ A
periodMapperA M
)M N
;N O
} 	
public!! 
ITimePeriodMapper!!  
PeriodMapper!!! -
{"" 	
get## 
{## 
return## 
periodMapper## %
;##% &
}##' (
}$$ 	
public'' 
virtual'' !
ITimePeriodCollection'' ,
SubtractPeriods''- <
(''< = 
ITimePeriodContainer''= Q
sourcePeriods''R _
,''_ `!
ITimePeriodCollection''a v
subtractingPeriods	''w â
,
''â ä
bool(( 
combinePeriods(( 
=((  !
true((" &
)((& '
{)) 	
if** 
(** 
sourcePeriods** 
==**  
null**! %
)**% &
{++ 
throw,, 
new,, !
ArgumentNullException,, /
(,,/ 0
$str,,0 ?
),,? @
;,,@ A
}-- 
if.. 
(.. 
subtractingPeriods.. "
==..# %
null..& *
)..* +
{// 
throw00 
new00 !
ArgumentNullException00 /
(00/ 0
$str000 D
)00D E
;00E F
}11 
if33 
(33 
sourcePeriods33 
.33 
Count33 #
==33$ &
$num33' (
)33( )
{44 
return55 
new55  
TimePeriodCollection55 /
(55/ 0
)550 1
;551 2
}66 
if88 
(88 
subtractingPeriods88 "
.88" #
Count88# (
==88) +
$num88, -
&&88. 0
!881 2
combinePeriods882 @
)88@ A
{99 
return:: 
new::  
TimePeriodCollection:: /
(::/ 0
sourcePeriods::0 =
)::= >
;::> ?
};; 
sourcePeriods>> 
=>> 
timePeriodCombiner>> .
.>>. /
CombinePeriods>>/ =
(>>= >
sourcePeriods>>> K
)>>K L
;>>L M
ifAA 
(AA 
subtractingPeriodsAA "
.AA" #
CountAA# (
==AA) +
$numAA, -
)AA- .
{BB 
returnCC 
newCC  
TimePeriodCollectionCC /
(CC/ 0
sourcePeriodsCC0 =
)CC= >
;CC> ?
}DD 
subtractingPeriodsEE 
=EE  
timePeriodCombinerEE! 3
.EE3 4
CombinePeriodsEE4 B
(EEB C
subtractingPeriodsEEC U
)EEU V
;EEV W
sourcePeriodsHH 
.HH 
AddAllHH  
(HH  !
timeGapCalculatorHH! 2
.HH2 3
GetGapsHH3 :
(HH: ;
subtractingPeriodsHH; M
,HHM N
newHHO R
	TimeRangeHHS \
(HH\ ]
sourcePeriodsHH] j
.HHj k
StartHHk p
,HHp q
sourcePeriodsHHr 
.	HH Ä
End
HHÄ É
)
HHÉ Ñ
)
HHÑ Ö
)
HHÖ Ü
;
HHÜ á
returnJJ !
timePeriodIntersectorJJ (
.JJ( )
IntersectPeriodsJJ) 9
(JJ9 :
sourcePeriodsJJ: G
,JJG H
combinePeriodsJJI W
)JJW X
;JJX Y
}KK 	
privateOO 
readonlyOO 
ITimePeriodMapperOO *
periodMapperOO+ 7
;OO7 8
privatePP 
readonlyPP 
TimePeriodCombinerPP +
<PP+ ,
TPP, -
>PP- .
timePeriodCombinerPP/ A
;PPA B
privateQQ 
readonlyQQ 
TimeGapCalculatorQQ *
<QQ* +
TQQ+ ,
>QQ, -
timeGapCalculatorQQ. ?
;QQ? @
privateRR 
readonlyRR !
TimePeriodIntersectorRR .
<RR. /
TRR/ 0
>RR0 1!
timePeriodIntersectorRR2 G
;RRG H
}TT 
}VV ª‹
jF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\TimeRange.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

class 
	TimeRange 
: 

ITimeRange '
{ 
public 
static 
readonly 
	TimeRange (
Anytime) 0
=1 2
new3 6
	TimeRange7 @
(@ A
trueA E
)E F
;F G
public 
	TimeRange 
( 
) 
: 
this 
( 
TimeSpec 
. 
MinPeriodDate '
,' (
TimeSpec) 1
.1 2
MaxPeriodDate2 ?
)? @
{ 	
} 	
internal 
	TimeRange 
( 
bool 

isReadOnly  *
=+ ,
false- 2
)2 3
:4 5
this 
( 
TimeSpec 
. 
MinPeriodDate '
,' (
TimeSpec) 1
.1 2
MaxPeriodDate2 ?
,? @

isReadOnlyA K
)K L
{ 	
} 	
public!! 
	TimeRange!! 
(!! 
DateTime!! !
moment!!" (
,!!( )
bool!!* .

isReadOnly!!/ 9
=!!: ;
false!!< A
)!!A B
:!!C D
this"" 
("" 
moment"" 
,"" 
moment"" 
,""  

isReadOnly""! +
)""+ ,
{## 	
}$$ 	
public'' 
	TimeRange'' 
('' 
DateTime'' !
start''" '
,''' (
DateTime'') 1
end''2 5
,''5 6
bool''7 ;

isReadOnly''< F
=''G H
false''I N
)''N O
{(( 	
if)) 
()) 
start)) 
<=)) 
end)) 
))) 
{** 
this++ 
.++ 
start++ 
=++ 
start++ "
;++" #
this,, 
.,, 
end,, 
=,, 
end,, 
;,, 
}-- 
else.. 
{// 
this00 
.00 
end00 
=00 
start00  
;00  !
this11 
.11 
start11 
=11 
end11  
;11  !
}22 
this33 
.33 

isReadOnly33 
=33 

isReadOnly33 (
;33( )
}44 	
public77 
	TimeRange77 
(77 
DateTime77 !
start77" '
,77' (
TimeSpan77) 1
duration772 :
,77: ;
bool77< @

isReadOnly77A K
=77L M
false77N S
)77S T
{88 	
if99 
(99 
duration99 
>=99 
TimeSpan99 $
.99$ %
Zero99% )
)99) *
{:: 
this;; 
.;; 
start;; 
=;; 
start;; "
;;;" #
end<< 
=<< 
start<< 
.<< 
Add<< 
(<<  
duration<<  (
)<<( )
;<<) *
}== 
else>> 
{?? 
this@@ 
.@@ 
start@@ 
=@@ 
start@@ "
.@@" #
Add@@# &
(@@& '
duration@@' /
)@@/ 0
;@@0 1
endAA 
=AA 
startAA 
;AA 
}BB 
thisCC 
.CC 

isReadOnlyCC 
=CC 

isReadOnlyCC (
;CC( )
}DD 	
publicGG 
	TimeRangeGG 
(GG 
ITimePeriodGG $
copyGG% )
)GG) *
{HH 	
ifII 
(II 
copyII 
==II 
nullII 
)II 
{JJ 
throwKK 
newKK !
ArgumentNullExceptionKK /
(KK/ 0
$strKK0 6
)KK6 7
;KK7 8
}LL 
startMM 
=MM 
copyMM 
.MM 
StartMM 
;MM 
endNN 
=NN 
copyNN 
.NN 
EndNN 
;NN 

isReadOnlyOO 
=OO 
copyOO 
.OO 

IsReadOnlyOO (
;OO( )
}PP 	
	protectedSS 
	TimeRangeSS 
(SS 
ITimePeriodSS '
copySS( ,
,SS, -
boolSS. 2

isReadOnlySS3 =
)SS= >
{TT 	
ifUU 
(UU 
copyUU 
==UU 
nullUU 
)UU 
{VV 
throwWW 
newWW !
ArgumentNullExceptionWW /
(WW/ 0
$strWW0 6
)WW6 7
;WW7 8
}XX 
startYY 
=YY 
copyYY 
.YY 
StartYY 
;YY 
endZZ 
=ZZ 
copyZZ 
.ZZ 
EndZZ 
;ZZ 
this[[ 
.[[ 

isReadOnly[[ 
=[[ 

isReadOnly[[ (
;[[( )
}\\ 	
public__ 
bool__ 

IsReadOnly__ 
{`` 	
getaa 
{aa 
returnaa 

isReadOnlyaa #
;aa# $
}aa% &
}bb 	
publicee 
boolee 
	IsAnytimeee 
{ff 	
getgg 
{gg 
returngg 
!gg 
HasStartgg "
&&gg# %
!gg& '
HasEndgg' -
;gg- .
}gg/ 0
}hh 	
publickk 
boolkk 
IsMomentkk 
{ll 	
getmm 
{mm 
returnmm 
startmm 
.mm 
Equalsmm %
(mm% &
endmm& )
)mm) *
;mm* +
}mm, -
}nn 	
publicqq 
boolqq 
HasStartqq 
{rr 	
getss 
{ss 
returnss 
startss 
!=ss !
TimeSpecss" *
.ss* +
MinPeriodDatess+ 8
;ss8 9
}ss: ;
}tt 	
publicww 
DateTimeww 
Startww 
{xx 	
getyy 
{yy 
returnyy 
startyy 
;yy 
}yy  !
setzz 
{{{ 
CheckModification|| !
(||! "
)||" #
;||# $
if}} 
(}} 
value}} 
>}} 
end}} 
)}}  
{~~ 
throw 
new '
ArgumentOutOfRangeException 9
(9 :
$str: A
)A B
;B C
}
ÄÄ 
start
ÅÅ 
=
ÅÅ 
value
ÅÅ 
;
ÅÅ 
}
ÇÇ 
}
ÉÉ 	
public
ÜÜ 
bool
ÜÜ 
HasEnd
ÜÜ 
{
áá 	
get
àà 
{
àà 
return
àà 
end
àà 
!=
àà 
TimeSpec
àà  (
.
àà( )
MaxPeriodDate
àà) 6
;
àà6 7
}
àà8 9
}
ââ 	
public
åå 
DateTime
åå 
End
åå 
{
çç 	
get
éé 
{
éé 
return
éé 
end
éé 
;
éé 
}
éé 
set
èè 
{
êê 
CheckModification
ëë !
(
ëë! "
)
ëë" #
;
ëë# $
if
íí 
(
íí 
value
íí 
<
íí 
start
íí !
)
íí! "
{
ìì 
throw
îî 
new
îî )
ArgumentOutOfRangeException
îî 9
(
îî9 :
$str
îî: A
)
îîA B
;
îîB C
}
ïï 
end
ññ 
=
ññ 
value
ññ 
;
ññ 
}
óó 
}
òò 	
public
õõ 
TimeSpan
õõ 
Duration
õõ  
{
úú 	
get
ùù 
{
ùù 
return
ùù 
end
ùù 
.
ùù 
Subtract
ùù %
(
ùù% &
start
ùù& +
)
ùù+ ,
;
ùù, -
}
ùù. /
set
ûû 
{
üü 
CheckModification
†† !
(
††! "
)
††" #
;
††# $
end
°° 
=
°° 
start
°° 
.
°° 
Add
°° 
(
°°  
value
°°  %
)
°°% &
;
°°& '
}
¢¢ 
}
££ 	
public
¶¶ 
string
¶¶ !
DurationDescription
¶¶ )
{
ßß 	
get
®® 
{
®® 
return
®® 
TimeFormatter
®® &
.
®®& '
Instance
®®' /
.
®®/ 0
GetDuration
®®0 ;
(
®®; <
Duration
®®< D
,
®®D E 
DurationFormatType
®®F X
.
®®X Y
Detailed
®®Y a
)
®®a b
;
®®b c
}
®®d e
}
©© 	
public
¨¨ 
virtual
¨¨ 
TimeSpan
¨¨ 
GetDuration
¨¨  +
(
¨¨+ ,
IDurationProvider
¨¨, =
provider
¨¨> F
)
¨¨F G
{
≠≠ 	
if
ÆÆ 
(
ÆÆ 
provider
ÆÆ 
==
ÆÆ 
null
ÆÆ  
)
ÆÆ  !
{
ØØ 
throw
∞∞ 
new
∞∞ #
ArgumentNullException
∞∞ /
(
∞∞/ 0
$str
∞∞0 :
)
∞∞: ;
;
∞∞; <
}
±± 
return
≤≤ 
provider
≤≤ 
.
≤≤ 
GetDuration
≤≤ '
(
≤≤' (
Start
≤≤( -
,
≤≤- .
End
≤≤/ 2
)
≤≤2 3
;
≤≤3 4
}
≥≥ 	
public
∂∂ 
virtual
∂∂ 
void
∂∂ 
Setup
∂∂ !
(
∂∂! "
DateTime
∂∂" *
newStart
∂∂+ 3
,
∂∂3 4
DateTime
∂∂5 =
newEnd
∂∂> D
)
∂∂D E
{
∑∑ 	
CheckModification
∏∏ 
(
∏∏ 
)
∏∏ 
;
∏∏  
if
ππ 
(
ππ 
newStart
ππ 
<=
ππ 
newEnd
ππ "
)
ππ" #
{
∫∫ 
start
ªª 
=
ªª 
newStart
ªª  
;
ªª  !
end
ºº 
=
ºº 
newEnd
ºº 
;
ºº 
}
ΩΩ 
else
ææ 
{
øø 
end
¿¿ 
=
¿¿ 
newStart
¿¿ 
;
¿¿ 
start
¡¡ 
=
¡¡ 
newEnd
¡¡ 
;
¡¡ 
}
¬¬ 
}
√√ 	
public
∆∆ 
virtual
∆∆ 
bool
∆∆ 
IsSamePeriod
∆∆ (
(
∆∆( )
ITimePeriod
∆∆) 4
test
∆∆5 9
)
∆∆9 :
{
«« 	
if
»» 
(
»» 
test
»» 
==
»» 
null
»» 
)
»» 
{
…… 
throw
   
new
   #
ArgumentNullException
   /
(
  / 0
$str
  0 6
)
  6 7
;
  7 8
}
ÀÀ 
return
ÃÃ 
start
ÃÃ 
==
ÃÃ 
test
ÃÃ  
.
ÃÃ  !
Start
ÃÃ! &
&&
ÃÃ' )
end
ÃÃ* -
==
ÃÃ. 0
test
ÃÃ1 5
.
ÃÃ5 6
End
ÃÃ6 9
;
ÃÃ9 :
}
ÕÕ 	
public
–– 
virtual
–– 
bool
–– 
	HasInside
–– %
(
––% &
DateTime
––& .
test
––/ 3
)
––3 4
{
—— 	
return
““ 
TimePeriodCalc
““ !
.
““! "
	HasInside
““" +
(
““+ ,
this
““, 0
,
““0 1
test
““2 6
)
““6 7
;
““7 8
}
”” 	
public
÷÷ 
virtual
÷÷ 
bool
÷÷ 
	HasInside
÷÷ %
(
÷÷% &
ITimePeriod
÷÷& 1
test
÷÷2 6
)
÷÷6 7
{
◊◊ 	
if
ÿÿ 
(
ÿÿ 
test
ÿÿ 
==
ÿÿ 
null
ÿÿ 
)
ÿÿ 
{
ŸŸ 
throw
⁄⁄ 
new
⁄⁄ #
ArgumentNullException
⁄⁄ /
(
⁄⁄/ 0
$str
⁄⁄0 6
)
⁄⁄6 7
;
⁄⁄7 8
}
€€ 
return
‹‹ 
TimePeriodCalc
‹‹ !
.
‹‹! "
	HasInside
‹‹" +
(
‹‹+ ,
this
‹‹, 0
,
‹‹0 1
test
‹‹2 6
)
‹‹6 7
;
‹‹7 8
}
›› 	
public
‡‡ 

ITimeRange
‡‡ 
Copy
‡‡ 
(
‡‡ 
)
‡‡  
{
·· 	
return
‚‚ 
Copy
‚‚ 
(
‚‚ 
TimeSpan
‚‚  
.
‚‚  !
Zero
‚‚! %
)
‚‚% &
;
‚‚& '
}
„„ 	
public
ÊÊ 
virtual
ÊÊ 

ITimeRange
ÊÊ !
Copy
ÊÊ" &
(
ÊÊ& '
TimeSpan
ÊÊ' /
offset
ÊÊ0 6
)
ÊÊ6 7
{
ÁÁ 	
return
ËË 
new
ËË 
	TimeRange
ËË  
(
ËË  !
start
ËË! &
.
ËË& '
Add
ËË' *
(
ËË* +
offset
ËË+ 1
)
ËË1 2
,
ËË2 3
end
ËË4 7
.
ËË7 8
Add
ËË8 ;
(
ËË; <
offset
ËË< B
)
ËËB C
,
ËËC D

IsReadOnly
ËËE O
)
ËËO P
;
ËËP Q
}
ÈÈ 	
public
ÏÏ 
virtual
ÏÏ 
void
ÏÏ 
Move
ÏÏ  
(
ÏÏ  !
TimeSpan
ÏÏ! )
offset
ÏÏ* 0
)
ÏÏ0 1
{
ÌÌ 	
CheckModification
ÓÓ 
(
ÓÓ 
)
ÓÓ 
;
ÓÓ  
if
ÔÔ 
(
ÔÔ 
offset
ÔÔ 
==
ÔÔ 
TimeSpan
ÔÔ "
.
ÔÔ" #
Zero
ÔÔ# '
)
ÔÔ' (
{
 
return
ÒÒ 
;
ÒÒ 
}
ÚÚ 
start
ÛÛ 
=
ÛÛ 
start
ÛÛ 
.
ÛÛ 
Add
ÛÛ 
(
ÛÛ 
offset
ÛÛ $
)
ÛÛ$ %
;
ÛÛ% &
end
ÙÙ 
=
ÙÙ 
end
ÙÙ 
.
ÙÙ 
Add
ÙÙ 
(
ÙÙ 
offset
ÙÙ  
)
ÙÙ  !
;
ÙÙ! "
}
ıı 	
public
¯¯ 
virtual
¯¯ 
void
¯¯ 
ExpandStartTo
¯¯ )
(
¯¯) *
DateTime
¯¯* 2
moment
¯¯3 9
)
¯¯9 :
{
˘˘ 	
CheckModification
˙˙ 
(
˙˙ 
)
˙˙ 
;
˙˙  
if
˚˚ 
(
˚˚ 
start
˚˚ 
>
˚˚ 
moment
˚˚ 
)
˚˚ 
{
¸¸ 
start
˝˝ 
=
˝˝ 
moment
˝˝ 
;
˝˝ 
}
˛˛ 
}
ˇˇ 	
public
ÇÇ 
virtual
ÇÇ 
void
ÇÇ 
ExpandEndTo
ÇÇ '
(
ÇÇ' (
DateTime
ÇÇ( 0
moment
ÇÇ1 7
)
ÇÇ7 8
{
ÉÉ 	
CheckModification
ÑÑ 
(
ÑÑ 
)
ÑÑ 
;
ÑÑ  
if
ÖÖ 
(
ÖÖ 
end
ÖÖ 
<
ÖÖ 
moment
ÖÖ 
)
ÖÖ 
{
ÜÜ 
end
áá 
=
áá 
moment
áá 
;
áá 
}
àà 
}
ââ 	
public
åå 
void
åå 
ExpandTo
åå 
(
åå 
DateTime
åå %
moment
åå& ,
)
åå, -
{
çç 	
ExpandStartTo
éé 
(
éé 
moment
éé  
)
éé  !
;
éé! "
ExpandEndTo
èè 
(
èè 
moment
èè 
)
èè 
;
èè  
}
êê 	
public
ìì 
void
ìì 
ExpandTo
ìì 
(
ìì 
ITimePeriod
ìì (
period
ìì) /
)
ìì/ 0
{
îî 	
if
ïï 
(
ïï 
period
ïï 
==
ïï 
null
ïï 
)
ïï 
{
ññ 
throw
óó 
new
óó #
ArgumentNullException
óó /
(
óó/ 0
$str
óó0 8
)
óó8 9
;
óó9 :
}
òò 
ExpandStartTo
ôô 
(
ôô 
period
ôô  
.
ôô  !
Start
ôô! &
)
ôô& '
;
ôô' (
ExpandEndTo
öö 
(
öö 
period
öö 
.
öö 
End
öö "
)
öö" #
;
öö# $
}
õõ 	
public
ûû 
virtual
ûû 
void
ûû 
ShrinkStartTo
ûû )
(
ûû) *
DateTime
ûû* 2
moment
ûû3 9
)
ûû9 :
{
üü 	
CheckModification
†† 
(
†† 
)
†† 
;
††  
if
°° 
(
°° 
	HasInside
°° 
(
°° 
moment
°°  
)
°°  !
&&
°°" $
start
°°% *
<
°°+ ,
moment
°°- 3
)
°°3 4
{
¢¢ 
start
££ 
=
££ 
moment
££ 
;
££ 
}
§§ 
}
•• 	
public
®® 
virtual
®® 
void
®® 
ShrinkEndTo
®® '
(
®®' (
DateTime
®®( 0
moment
®®1 7
)
®®7 8
{
©© 	
CheckModification
™™ 
(
™™ 
)
™™ 
;
™™  
if
´´ 
(
´´ 
	HasInside
´´ 
(
´´ 
moment
´´  
)
´´  !
&&
´´" $
end
´´% (
>
´´) *
moment
´´+ 1
)
´´1 2
{
¨¨ 
end
≠≠ 
=
≠≠ 
moment
≠≠ 
;
≠≠ 
}
ÆÆ 
}
ØØ 	
public
≤≤ 
void
≤≤ 
ShrinkTo
≤≤ 
(
≤≤ 
ITimePeriod
≤≤ (
period
≤≤) /
)
≤≤/ 0
{
≥≥ 	
if
¥¥ 
(
¥¥ 
period
¥¥ 
==
¥¥ 
null
¥¥ 
)
¥¥ 
{
µµ 
throw
∂∂ 
new
∂∂ #
ArgumentNullException
∂∂ /
(
∂∂/ 0
$str
∂∂0 8
)
∂∂8 9
;
∂∂9 :
}
∑∑ 
ShrinkStartTo
∏∏ 
(
∏∏ 
period
∏∏  
.
∏∏  !
Start
∏∏! &
)
∏∏& '
;
∏∏' (
ShrinkEndTo
ππ 
(
ππ 
period
ππ 
.
ππ 
End
ππ "
)
ππ" #
;
ππ# $
}
∫∫ 	
public
ΩΩ 
virtual
ΩΩ 
bool
ΩΩ 
IntersectsWith
ΩΩ *
(
ΩΩ* +
ITimePeriod
ΩΩ+ 6
test
ΩΩ7 ;
)
ΩΩ; <
{
ææ 	
if
øø 
(
øø 
test
øø 
==
øø 
null
øø 
)
øø 
{
¿¿ 
throw
¡¡ 
new
¡¡ #
ArgumentNullException
¡¡ /
(
¡¡/ 0
$str
¡¡0 6
)
¡¡6 7
;
¡¡7 8
}
¬¬ 
return
√√ 
TimePeriodCalc
√√ !
.
√√! "
IntersectsWith
√√" 0
(
√√0 1
this
√√1 5
,
√√5 6
test
√√7 ;
)
√√; <
;
√√< =
}
ƒƒ 	
public
«« 
virtual
«« 

ITimeRange
«« !
GetIntersection
««" 1
(
««1 2
ITimePeriod
««2 =
period
««> D
)
««D E
{
»» 	
if
…… 
(
…… 
period
…… 
==
…… 
null
…… 
)
…… 
{
   
throw
ÀÀ 
new
ÀÀ #
ArgumentNullException
ÀÀ /
(
ÀÀ/ 0
$str
ÀÀ0 8
)
ÀÀ8 9
;
ÀÀ9 :
}
ÃÃ 
if
ÕÕ 
(
ÕÕ 
!
ÕÕ 
IntersectsWith
ÕÕ 
(
ÕÕ  
period
ÕÕ  &
)
ÕÕ& '
)
ÕÕ' (
{
ŒŒ 
return
œœ 
null
œœ 
;
œœ 
}
–– 
DateTime
—— 
periodStart
——  
=
——! "
period
——# )
.
——) *
Start
——* /
;
——/ 0
DateTime
““ 
	periodEnd
““ 
=
““  
period
““! '
.
““' (
End
““( +
;
““+ ,
return
”” 
new
”” 
	TimeRange
””  
(
””  !
periodStart
‘‘ 
>
‘‘ 
start
‘‘ #
?
‘‘$ %
periodStart
‘‘& 1
:
‘‘2 3
start
‘‘4 9
,
‘‘9 :
	periodEnd
’’ 
<
’’ 
end
’’ 
?
’’  !
	periodEnd
’’" +
:
’’, -
end
’’. 1
,
’’1 2

IsReadOnly
÷÷ 
)
÷÷ 
;
÷÷ 
}
◊◊ 	
public
⁄⁄ 
virtual
⁄⁄ 
bool
⁄⁄ 
OverlapsWith
⁄⁄ (
(
⁄⁄( )
ITimePeriod
⁄⁄) 4
test
⁄⁄5 9
)
⁄⁄9 :
{
€€ 	
if
‹‹ 
(
‹‹ 
test
‹‹ 
==
‹‹ 
null
‹‹ 
)
‹‹ 
{
›› 
throw
ﬁﬁ 
new
ﬁﬁ #
ArgumentNullException
ﬁﬁ /
(
ﬁﬁ/ 0
$str
ﬁﬁ0 6
)
ﬁﬁ6 7
;
ﬁﬁ7 8
}
ﬂﬂ 
return
‡‡ 
TimePeriodCalc
‡‡ !
.
‡‡! "
OverlapsWith
‡‡" .
(
‡‡. /
this
‡‡/ 3
,
‡‡3 4
test
‡‡5 9
)
‡‡9 :
;
‡‡: ;
}
·· 	
public
‰‰ 
virtual
‰‰ 
PeriodRelation
‰‰ %
GetRelation
‰‰& 1
(
‰‰1 2
ITimePeriod
‰‰2 =
test
‰‰> B
)
‰‰B C
{
ÂÂ 	
if
ÊÊ 
(
ÊÊ 
test
ÊÊ 
==
ÊÊ 
null
ÊÊ 
)
ÊÊ 
{
ÁÁ 
throw
ËË 
new
ËË #
ArgumentNullException
ËË /
(
ËË/ 0
$str
ËË0 6
)
ËË6 7
;
ËË7 8
}
ÈÈ 
return
ÍÍ 
TimePeriodCalc
ÍÍ !
.
ÍÍ! "
GetRelation
ÍÍ" -
(
ÍÍ- .
this
ÍÍ. 2
,
ÍÍ2 3
test
ÍÍ4 8
)
ÍÍ8 9
;
ÍÍ9 :
}
ÎÎ 	
public
ÓÓ 
virtual
ÓÓ 
int
ÓÓ 
	CompareTo
ÓÓ $
(
ÓÓ$ %
ITimePeriod
ÓÓ% 0
other
ÓÓ1 6
,
ÓÓ6 7!
ITimePeriodComparer
ÓÓ8 K
comparer
ÓÓL T
)
ÓÓT U
{
ÔÔ 	
if
 
(
 
other
 
==
 
null
 
)
 
{
ÒÒ 
throw
ÚÚ 
new
ÚÚ #
ArgumentNullException
ÚÚ /
(
ÚÚ/ 0
$str
ÚÚ0 7
)
ÚÚ7 8
;
ÚÚ8 9
}
ÛÛ 
if
ÙÙ 
(
ÙÙ 
comparer
ÙÙ 
==
ÙÙ 
null
ÙÙ  
)
ÙÙ  !
{
ıı 
throw
ˆˆ 
new
ˆˆ #
ArgumentNullException
ˆˆ /
(
ˆˆ/ 0
$str
ˆˆ0 :
)
ˆˆ: ;
;
ˆˆ; <
}
˜˜ 
return
¯¯ 
comparer
¯¯ 
.
¯¯ 
Compare
¯¯ #
(
¯¯# $
this
¯¯$ (
,
¯¯( )
other
¯¯* /
)
¯¯/ 0
;
¯¯0 1
}
˘˘ 	
public
¸¸ 
virtual
¸¸ 
void
¸¸ 
Reset
¸¸ !
(
¸¸! "
)
¸¸" #
{
˝˝ 	
CheckModification
˛˛ 
(
˛˛ 
)
˛˛ 
;
˛˛  
start
ˇˇ 
=
ˇˇ 
TimeSpec
ˇˇ 
.
ˇˇ 
MinPeriodDate
ˇˇ *
;
ˇˇ* +
end
ÄÄ 
=
ÄÄ 
TimeSpec
ÄÄ 
.
ÄÄ 
MaxPeriodDate
ÄÄ (
;
ÄÄ( )
}
ÅÅ 	
public
ÑÑ 
string
ÑÑ 
GetDescription
ÑÑ $
(
ÑÑ$ %
ITimeFormatter
ÑÑ% 3
	formatter
ÑÑ4 =
=
ÑÑ> ?
null
ÑÑ@ D
)
ÑÑD E
{
ÖÖ 	
return
ÜÜ 
Format
ÜÜ 
(
ÜÜ 
	formatter
ÜÜ #
??
ÜÜ$ &
TimeFormatter
ÜÜ' 4
.
ÜÜ4 5
Instance
ÜÜ5 =
)
ÜÜ= >
;
ÜÜ> ?
}
áá 	
	protected
ää 
virtual
ää 
string
ää  
Format
ää! '
(
ää' (
ITimeFormatter
ää( 6
	formatter
ää7 @
)
ää@ A
{
ãã 	
return
åå 
	formatter
åå 
.
åå 
	GetPeriod
åå &
(
åå& '
start
åå' ,
,
åå, -
end
åå. 1
,
åå1 2
Duration
åå3 ;
)
åå; <
;
åå< =
}
çç 	
public
êê 
override
êê 
string
êê 
ToString
êê '
(
êê' (
)
êê( )
{
ëë 	
return
íí 
GetDescription
íí !
(
íí! "
)
íí" #
;
íí# $
}
ìì 	
public
ññ 
sealed
ññ 
override
ññ 
bool
ññ #
Equals
ññ$ *
(
ññ* +
object
ññ+ 1
obj
ññ2 5
)
ññ5 6
{
óó 	
if
òò 
(
òò 
obj
òò 
==
òò 
this
òò 
)
òò 
{
ôô 
return
öö 
true
öö 
;
öö 
}
õõ 
if
úú 
(
úú 
obj
úú 
==
úú 
null
úú 
||
úú 
GetType
úú &
(
úú& '
)
úú' (
!=
úú) +
obj
úú, /
.
úú/ 0
GetType
úú0 7
(
úú7 8
)
úú8 9
)
úú9 :
{
ùù 
return
ûû 
false
ûû 
;
ûû 
}
üü 
return
†† 
IsEqual
†† 
(
†† 
obj
†† 
)
†† 
;
††  
}
°° 	
	protected
§§ 
virtual
§§ 
bool
§§ 
IsEqual
§§ &
(
§§& '
object
§§' -
obj
§§. 1
)
§§1 2
{
•• 	
return
¶¶ 
HasSameData
¶¶ 
(
¶¶ 
obj
¶¶ "
as
¶¶# %
	TimeRange
¶¶& /
)
¶¶/ 0
;
¶¶0 1
}
ßß 	
private
™™ 
bool
™™ 
HasSameData
™™  
(
™™  !
	TimeRange
™™! *
comp
™™+ /
)
™™/ 0
{
´´ 	
return
¨¨ 
start
¨¨ 
==
¨¨ 
comp
¨¨  
.
¨¨  !
start
¨¨! &
&&
¨¨' )
end
¨¨* -
==
¨¨. 0
comp
¨¨1 5
.
¨¨5 6
end
¨¨6 9
&&
¨¨: <

isReadOnly
¨¨= G
==
¨¨H J
comp
¨¨K O
.
¨¨O P

isReadOnly
¨¨P Z
;
¨¨Z [
}
≠≠ 	
public
∞∞ 
sealed
∞∞ 
override
∞∞ 
int
∞∞ "
GetHashCode
∞∞# .
(
∞∞. /
)
∞∞/ 0
{
±± 	
return
≤≤ 
HashTool
≤≤ 
.
≤≤ 
AddHashCode
≤≤ '
(
≤≤' (
GetType
≤≤( /
(
≤≤/ 0
)
≤≤0 1
.
≤≤1 2
GetHashCode
≤≤2 =
(
≤≤= >
)
≤≤> ?
,
≤≤? @
ComputeHashCode
≤≤A P
(
≤≤P Q
)
≤≤Q R
)
≤≤R S
;
≤≤S T
}
≥≥ 	
	protected
∂∂ 
virtual
∂∂ 
int
∂∂ 
ComputeHashCode
∂∂ -
(
∂∂- .
)
∂∂. /
{
∑∑ 	
return
∏∏ 
HashTool
∏∏ 
.
∏∏ 
ComputeHashCode
∏∏ +
(
∏∏+ ,

isReadOnly
∏∏, 6
,
∏∏6 7
start
∏∏8 =
,
∏∏= >
end
∏∏? B
)
∏∏B C
;
∏∏C D
}
ππ 	
	protected
ºº 
void
ºº 
CheckModification
ºº (
(
ºº( )
)
ºº) *
{
ΩΩ 	
if
ææ 
(
ææ 

IsReadOnly
ææ 
)
ææ 
{
øø 
throw
¿¿ 
new
¿¿ #
NotSupportedException
¿¿ /
(
¿¿/ 0
$str
¿¿0 H
)
¿¿H I
;
¿¿I J
}
¡¡ 
}
¬¬ 	
private
∆∆ 
readonly
∆∆ 
bool
∆∆ 

isReadOnly
∆∆ (
;
∆∆( )
private
«« 
DateTime
«« 
start
«« 
;
«« 
private
»» 
DateTime
»» 
end
»» 
;
»» 
}
   
}ÃÃ ˚Z
iF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\TimeSpec.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

static 
class 
TimeSpec  
{ 
public 
const 
int 
MonthsPerYear &
=' (
$num) +
;+ ,
public 
const 
int 
HalfyearsPerYear )
=* +
$num, -
;- .
public 
const 
int 
QuartersPerYear (
=) *
$num+ ,
;, -
public 
const 
int 
QuartersPerHalfyear ,
=- .
QuartersPerYear/ >
/? @
HalfyearsPerYearA Q
;Q R
public 
const 
int 
MaxWeeksPerYear (
=) *
$num+ -
;- .
public 
const 
int 
MonthsPerHalfyear *
=+ ,
MonthsPerYear- :
/; <
HalfyearsPerYear= M
;M N
public 
const 
int 
MonthsPerQuarter )
=* +
MonthsPerYear, 9
/: ;
QuartersPerYear< K
;K L
public 
const 
int 
MaxDaysPerMonth (
=) *
$num+ -
;- .
public 
const 
int 
DaysPerWeek $
=% &
$num' (
;( )
public 
const 
int 
HoursPerDay $
=% &
$num' )
;) *
public 
const 
int 
MinutesPerHour '
=( )
$num* ,
;, -
public 
const 
int 
SecondsPerMinute )
=* +
$num, .
;. /
public 
const 
int !
MillisecondsPerSecond .
=/ 0
$num1 5
;5 6
public!! 
const!! 
	YearMonth!! "
CalendarYearStartMonth!! 5
=!!6 7
	YearMonth!!8 A
.!!A B
January!!B I
;!!I J
public"" 
const"" 
	DayOfWeek"" !
FirstWorkingDayOfWeek"" 4
=""5 6
	DayOfWeek""7 @
.""@ A
Monday""A G
;""G H
public&& 
const&& 
	YearMonth&& 
FiscalYearBaseMonth&& 2
=&&3 4
	YearMonth&&5 >
.&&> ?
July&&? C
;&&C D
public'' 
const'' 
int'' $
FiscalWeeksPerShortMonth'' 1
=''2 3
$num''4 5
;''5 6
public(( 
const(( 
int(( #
FiscalWeeksPerLongMonth(( 0
=((1 2
$num((3 4
;((4 5
public)) 
const)) 
int)) #
FiscalWeeksPerLeapMonth)) 0
=))1 2
$num))3 4
;))4 5
public** 
const** 
int** !
FiscalWeeksPerQuarter** .
=**/ 0
$num**1 2
***3 4$
FiscalWeeksPerShortMonth**5 M
+**N O#
FiscalWeeksPerLongMonth**P g
;**g h
public++ 
const++ 
int++ %
FiscalWeeksPerLeapQuarter++ 2
=++3 4!
FiscalWeeksPerQuarter++5 J
+++K L
$num++M N
;++N O
public,, 
const,, 
int,, "
FiscalWeeksPerHalfyear,, /
=,,0 1!
FiscalWeeksPerQuarter,,2 G
*,,H I
QuartersPerHalfyear,,J ]
;,,] ^
public-- 
const-- 
int-- &
FiscalWeeksPerLeapHalfyear-- 3
=--4 5"
FiscalWeeksPerHalfyear--6 L
+--M N
$num--O P
;--P Q
public.. 
const.. 
int.. 
FiscalWeeksPerYear.. +
=.., -!
FiscalWeeksPerQuarter... C
*..D E
QuartersPerYear..F U
;..U V
public// 
const// 
int// "
FiscalWeeksPerLeapYear// /
=//0 1
FiscalWeeksPerYear//2 D
+//E F
$num//G H
;//H I
public11 
const11 
int11 #
FiscalDaysPerShortMonth11 0
=111 2$
FiscalWeeksPerShortMonth113 K
*11L M
DaysPerWeek11N Y
;11Y Z
public22 
const22 
int22 "
FiscalDaysPerLongMonth22 /
=220 1#
FiscalWeeksPerLongMonth222 I
*22J K
DaysPerWeek22L W
;22W X
public33 
const33 
int33 "
FiscalDaysPerLeapMonth33 /
=330 1#
FiscalWeeksPerLeapMonth332 I
*33J K
DaysPerWeek33L W
;33W X
public44 
const44 
int44  
FiscalDaysPerQuarter44 -
=44. /
$num440 1
*442 3#
FiscalDaysPerShortMonth444 K
+44L M"
FiscalDaysPerLongMonth44N d
;44d e
public55 
const55 
int55 $
FiscalDaysPerLeapQuarter55 1
=552 3 
FiscalDaysPerQuarter554 H
+55I J
DaysPerWeek55K V
;55V W
public66 
const66 
int66 !
FiscalDaysPerHalfyear66 .
=66/ 0 
FiscalDaysPerQuarter661 E
*66F G
QuartersPerHalfyear66H [
;66[ \
public77 
const77 
int77 %
FiscalDaysPerLeapHalfyear77 2
=773 4!
FiscalDaysPerHalfyear775 J
+77K L
DaysPerWeek77M X
;77X Y
public88 
const88 
int88 
FiscalDaysPerYear88 *
=88+ , 
FiscalDaysPerQuarter88- A
*88B C
QuartersPerYear88D S
;88S T
public99 
const99 
int99 !
FiscalDaysPerLeapYear99 .
=99/ 0
FiscalDaysPerYear991 B
+99C D
DaysPerWeek99E P
;99P Q
public== 
static== 
	YearMonth== 
[==  
]==  !
FirstHalfyearMonths==" 5
===6 7
new==8 ;
[==; <
]==< =
{==> ?
	YearMonth==@ I
.==I J
January==J Q
,==Q R
	YearMonth==S \
.==\ ]
February==] e
,==e f
	YearMonth==g p
.==p q
March==q v
,==v w
	YearMonth	==x Å
.
==Å Ç
April
==Ç á
,
==á à
	YearMonth
==â í
.
==í ì
May
==ì ñ
,
==ñ ó
	YearMonth
==ò °
.
==° ¢
June
==¢ ¶
}
==ß ®
;
==® ©
public>> 
static>> 
	YearMonth>> 
[>>  
]>>  ! 
SecondHalfyearMonths>>" 6
=>>7 8
new>>9 <
[>>< =
]>>= >
{>>? @
	YearMonth>>A J
.>>J K
July>>K O
,>>O P
	YearMonth>>Q Z
.>>Z [
August>>[ a
,>>a b
	YearMonth>>c l
.>>l m
	September>>m v
,>>v w
	YearMonth	>>x Å
.
>>Å Ç
October
>>Ç â
,
>>â ä
	YearMonth
>>ã î
.
>>î ï
November
>>ï ù
,
>>ù û
	YearMonth
>>ü ®
.
>>® ©
December
>>© ±
}
>>≤ ≥
;
>>≥ ¥
publicBB 
constBB 
intBB "
FirstQuarterMonthIndexBB /
=BB0 1
$numBB2 3
;BB3 4
publicCC 
constCC 
intCC #
SecondQuarterMonthIndexCC 0
=CC1 2"
FirstQuarterMonthIndexCC3 I
+CCJ K
MonthsPerQuarterCCL \
;CC\ ]
publicDD 
constDD 
intDD "
ThirdQuarterMonthIndexDD /
=DD0 1#
SecondQuarterMonthIndexDD2 I
+DDJ K
MonthsPerQuarterDDL \
;DD\ ]
publicEE 
constEE 
intEE #
FourthQuarterMonthIndexEE 0
=EE1 2"
ThirdQuarterMonthIndexEE3 I
+EEJ K
MonthsPerQuarterEEL \
;EE\ ]
publicGG 
staticGG 
	YearMonthGG 
[GG  
]GG  !
FirstQuarterMonthsGG" 4
=GG5 6
newGG7 :
[GG: ;
]GG; <
{GG= >
	YearMonthGG? H
.GGH I
JanuaryGGI P
,GGP Q
	YearMonthGGR [
.GG[ \
FebruaryGG\ d
,GGd e
	YearMonthGGf o
.GGo p
MarchGGp u
}GGv w
;GGw x
publicHH 
staticHH 
	YearMonthHH 
[HH  
]HH  !
SecondQuarterMonthsHH" 5
=HH6 7
newHH8 ;
[HH; <
]HH< =
{HH> ?
	YearMonthHH@ I
.HHI J
AprilHHJ O
,HHO P
	YearMonthHHQ Z
.HHZ [
MayHH[ ^
,HH^ _
	YearMonthHH` i
.HHi j
JuneHHj n
}HHo p
;HHp q
publicII 
staticII 
	YearMonthII 
[II  
]II  !
ThirdQuarterMonthsII" 4
=II5 6
newII7 :
[II: ;
]II; <
{II= >
	YearMonthII? H
.IIH I
JulyIII M
,IIM N
	YearMonthIIO X
.IIX Y
AugustIIY _
,II_ `
	YearMonthIIa j
.IIj k
	SeptemberIIk t
}IIu v
;IIv w
publicJJ 
staticJJ 
	YearMonthJJ 
[JJ  
]JJ  !
FourthQuarterMonthsJJ" 5
=JJ6 7
newJJ8 ;
[JJ; <
]JJ< =
{JJ> ?
	YearMonthJJ@ I
.JJI J
OctoberJJJ Q
,JJQ R
	YearMonthJJS \
.JJ\ ]
NovemberJJ] e
,JJe f
	YearMonthJJg p
.JJp q
DecemberJJq y
}JJz {
;JJ{ |
publicNN 
staticNN 
readonlyNN 
TimeSpanNN '

NoDurationNN( 2
=NN3 4
TimeSpanNN5 =
.NN= >
ZeroNN> B
;NNB C
publicOO 
staticOO 
readonlyOO 
TimeSpanOO '
MinPositiveDurationOO( ;
=OO< =
newOO> A
TimeSpanOOB J
(OOJ K
$numOOK L
)OOL M
;OOM N
publicPP 
staticPP 
readonlyPP 
TimeSpanPP '
MinNegativeDurationPP( ;
=PP< =
newPP> A
TimeSpanPPB J
(PPJ K
-PPK L
$numPPL M
)PPM N
;PPN O
publicTT 
staticTT 
readonlyTT 
DateTimeTT '
MinPeriodDateTT( 5
=TT6 7
DateTimeTT8 @
.TT@ A
MinValueTTA I
;TTI J
publicUU 
staticUU 
readonlyUU 
DateTimeUU '
MaxPeriodDateUU( 5
=UU6 7
DateTimeUU8 @
.UU@ A
MaxValueUUA I
;UUI J
publicVV 
staticVV 
readonlyVV 
TimeSpanVV '
MinPeriodDurationVV( 9
=VV: ;
TimeSpanVV< D
.VVD E
ZeroVVE I
;VVI J
publicWW 
staticWW 
readonlyWW 
TimeSpanWW '
MaxPeriodDurationWW( 9
=WW: ;
MaxPeriodDateWW< I
-WWJ K
MinPeriodDateWWL Y
;WWY Z
}YY 
}[[ »±
iF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\TimeTool.cs
	namespace 	
Phoenix
 
. 
CrossCutting 
. 

TimePeriod )
{ 
public 

static 
class 
TimeTool  
{ 
public 
static 
DateTime 
GetDate &
(& '
DateTime' /
dateTime0 8
)8 9
{ 	
return 
dateTime 
. 
Date  
;  !
} 	
public 
static 
DateTime 
SetDate &
(& '
DateTime' /
from0 4
,4 5
DateTime6 >
to? A
)A B
{ 	
return 
SetDate 
( 
from 
,  
to! #
.# $
Year$ (
,( )
to* ,
., -
Month- 2
,2 3
to4 6
.6 7
Day7 :
): ;
;; <
} 	
public!! 
static!! 
DateTime!! 
SetDate!! &
(!!& '
DateTime!!' /
from!!0 4
,!!4 5
int!!6 9
year!!: >
,!!> ?
int!!@ C
month!!D I
=!!J K
$num!!L M
,!!M N
int!!O R
day!!S V
=!!W X
$num!!Y Z
)!!Z [
{"" 	
return## 
new## 
DateTime## 
(##  
year##  $
,##$ %
month##& +
,##+ ,
day##- 0
,##0 1
from##2 6
.##6 7
Hour##7 ;
,##; <
from##= A
.##A B
Minute##B H
,##H I
from##J N
.##N O
Second##O U
,##U V
from##W [
.##[ \
Millisecond##\ g
)##g h
;##h i
}$$ 	
public'' 
static'' 
bool'' 
HasTimeOfDay'' '
(''' (
DateTime''( 0
dateTime''1 9
)''9 :
{(( 	
return)) 
dateTime)) 
.)) 
	TimeOfDay)) %
>))& '
TimeSpan))( 0
.))0 1
Zero))1 5
;))5 6
}** 	
public-- 
static-- 
DateTime-- 
SetTimeOfDay-- +
(--+ ,
DateTime--, 4
from--5 9
,--9 :
DateTime--; C
to--D F
)--F G
{.. 	
return// 
SetTimeOfDay// 
(//  
from//  $
,//$ %
to//& (
.//( )
Hour//) -
,//- .
to/// 1
.//1 2
Minute//2 8
,//8 9
to//: <
.//< =
Second//= C
,//C D
to//E G
.//G H
Millisecond//H S
)//S T
;//T U
}00 	
public33 
static33 
DateTime33 
SetTimeOfDay33 +
(33+ ,
DateTime33, 4
from335 9
,339 :
int33; >
hour33? C
=33D E
$num33F G
,33G H
int33I L
minute33M S
=33T U
$num33V W
,33W X
int33Y \
second33] c
=33d e
$num33f g
,33g h
int33i l
millisecond33m x
=33y z
$num33{ |
)33| }
{44 	
return55 
new55 
DateTime55 
(55  
from55  $
.55$ %
Year55% )
,55) *
from55+ /
.55/ 0
Month550 5
,555 6
from557 ;
.55; <
Day55< ?
,55? @
hour55A E
,55E F
minute55G M
,55M N
second55O U
,55U V
millisecond55W b
)55b c
;55c d
}66 	
public== 
static== 
int== 
	GetYearOf== #
(==# $
	YearMonth==$ -
yearBaseMonth==. ;
,==; <
DateTime=== E
moment==F L
)==L M
{>> 	
return?? 
	GetYearOf?? 
(?? 
yearBaseMonth?? *
,??* +
moment??, 2
.??2 3
Year??3 7
,??7 8
moment??9 ?
.??? @
Month??@ E
)??E F
;??F G
}@@ 	
publicCC 
staticCC 
intCC 
	GetYearOfCC #
(CC# $
	YearMonthCC$ -
yearBaseMonthCC. ;
,CC; <
intCC= @
yearCCA E
,CCE F
intCCG J
monthCCK P
)CCP Q
{DD 	
returnEE 
monthEE 
>=EE 
(EE 
intEE  
)EE  !
yearBaseMonthEE! .
?EE/ 0
yearEE1 5
:EE6 7
yearEE8 <
-EE= >
$numEE? @
;EE@ A
}FF 	
publicMM 
staticMM 
voidMM 
NextHalfyearMM '
(MM' (
YearHalfyearMM( 4
startHalfyearMM5 B
,MMB C
outMMD G
intMMH K
yearMML P
,MMP Q
outMMR U
YearHalfyearMMV b
halfyearMMc k
)MMk l
{NN 	
AddHalfyearOO 
(OO 
startHalfyearOO %
,OO% &
$numOO' (
,OO( )
outOO* -
yearOO. 2
,OO2 3
outOO4 7
halfyearOO8 @
)OO@ A
;OOA B
}PP 	
publicSS 
staticSS 
voidSS 
PreviousHalfyearSS +
(SS+ ,
YearHalfyearSS, 8
startHalfyearSS9 F
,SSF G
outSSH K
intSSL O
yearSSP T
,SST U
outSSV Y
YearHalfyearSSZ f
halfyearSSg o
)SSo p
{TT 	
AddHalfyearUU 
(UU 
startHalfyearUU %
,UU% &
-UU' (
$numUU( )
,UU) *
outUU+ .
yearUU/ 3
,UU3 4
outUU5 8
halfyearUU9 A
)UUA B
;UUB C
}VV 	
publicYY 
staticYY 
voidYY 
AddHalfyearYY &
(YY& '
YearHalfyearYY' 3
startHalfyearYY4 A
,YYA B
intYYC F
countYYG L
,YYL M
outYYN Q
intYYR U
yearYYV Z
,YYZ [
outYY\ _
YearHalfyearYY` l
halfyearYYm u
)YYu v
{ZZ 	
AddHalfyear[[ 
([[ 
$num[[ 
,[[ 
startHalfyear[[ (
,[[( )
count[[* /
,[[/ 0
out[[1 4
year[[5 9
,[[9 :
out[[; >
halfyear[[? G
)[[G H
;[[H I
}\\ 	
public__ 
static__ 
void__ 
AddHalfyear__ &
(__& '
int__' *
	startYear__+ 4
,__4 5
YearHalfyear__6 B
startHalfyear__C P
,__P Q
int__R U
count__V [
,__[ \
out__] `
int__a d
year__e i
,__i j
out__k n
YearHalfyear__o {
halfyear	__| Ñ
)
__Ñ Ö
{`` 	
intaa 

offsetYearaa 
=aa 
Mathaa !
.aa! "
Absaa" %
(aa% &
countaa& +
)aa+ ,
/aa- .
TimeSpecaa/ 7
.aa7 8
HalfyearsPerYearaa8 H
+aaI J
$numaaK L
;aaL M
intbb 
startHalfyearCountbb "
=bb# $
(bb% &
	startYearbb& /
+bb0 1

offsetYearbb2 <
)bb< =
*bb> ?
TimeSpecbb@ H
.bbH I
HalfyearsPerYearbbI Y
+bbZ [
(bb\ ]
(bb] ^
intbb^ a
)bba b
startHalfyearbbb o
-bbp q
$numbbr s
)bbs t
;bbt u
intcc 
targetHalfyearCountcc #
=cc$ %
startHalfyearCountcc& 8
+cc9 :
countcc; @
;cc@ A
yearee 
=ee 
targetHalfyearCountee &
/ee' (
TimeSpecee) 1
.ee1 2
HalfyearsPerYearee2 B
-eeC D

offsetYeareeE O
;eeO P
halfyearff 
=ff 
(ff 
YearHalfyearff $
)ff$ %
(ff% &
targetHalfyearCountff& 9
%ff: ;
TimeSpecff< D
.ffD E
HalfyearsPerYearffE U
+ffV W
$numffX Y
)ffY Z
;ffZ [
}gg 	
publicjj 
staticjj 
YearHalfyearjj "
GetHalfyearOfMonthjj# 5
(jj5 6
	YearMonthjj6 ?
	yearMonthjj@ I
)jjI J
{kk 	
returnll 
GetHalfyearOfMonthll %
(ll% &
TimeSpecll& .
.ll. /"
CalendarYearStartMonthll/ E
,llE F
	yearMonthllG P
)llP Q
;llQ R
}mm 	
publicpp 
staticpp 
YearHalfyearpp "
GetHalfyearOfMonthpp# 5
(pp5 6
	YearMonthpp6 ?
yearBaseMonthpp@ M
,ppM N
	YearMonthppO X
	yearMonthppY b
)ppb c
{qq 	
intrr 
yearMonthIndexrr 
=rr  
(rr! "
intrr" %
)rr% &
	yearMonthrr& /
-rr0 1
$numrr2 3
;rr3 4
intss 
yearStartMonthIndexss #
=ss$ %
(ss& '
intss' *
)ss* +
yearBaseMonthss+ 8
-ss9 :
$numss; <
;ss< =
iftt 
(tt 
yearMonthIndextt 
<tt  
yearStartMonthIndextt! 4
)tt4 5
{uu 
yearMonthIndexvv 
+=vv !
TimeSpecvv" *
.vv* +
MonthsPerYearvv+ 8
;vv8 9
}ww 
intxx 
deltaMonthsxx 
=xx 
yearMonthIndexxx ,
-xx- .
yearStartMonthIndexxx/ B
;xxB C
returnyy 
(yy 
YearHalfyearyy  
)yy  !
(yy! "
deltaMonthsyy" -
/yy. /
TimeSpecyy0 8
.yy8 9
MonthsPerHalfyearyy9 J
+yyK L
$numyyM N
)yyN O
;yyO P
}zz 	
public}} 
static}} 
	YearMonth}} 
[}}  
]}}  !
GetMonthsOfHalfyear}}" 5
(}}5 6
YearHalfyear}}6 B
yearHalfyear}}C O
)}}O P
{~~ 	
switch 
( 
yearHalfyear  
)  !
{
ÄÄ 
case
ÅÅ 
YearHalfyear
ÅÅ !
.
ÅÅ! "
First
ÅÅ" '
:
ÅÅ' (
return
ÇÇ 
TimeSpec
ÇÇ #
.
ÇÇ# $!
FirstHalfyearMonths
ÇÇ$ 7
;
ÇÇ7 8
case
ÉÉ 
YearHalfyear
ÉÉ !
.
ÉÉ! "
Second
ÉÉ" (
:
ÉÉ( )
return
ÑÑ 
TimeSpec
ÑÑ #
.
ÑÑ# $"
SecondHalfyearMonths
ÑÑ$ 8
;
ÑÑ8 9
}
ÖÖ 
throw
ÜÜ 
new
ÜÜ '
InvalidOperationException
ÜÜ /
(
ÜÜ/ 0
$str
ÜÜ0 H
+
ÜÜI J
yearHalfyear
ÜÜK W
)
ÜÜW X
;
ÜÜX Y
}
áá 	
public
éé 
static
éé 
void
éé 
NextQuarter
éé &
(
éé& '
YearQuarter
éé' 2
startQuarter
éé3 ?
,
éé? @
out
ééA D
int
ééE H
year
ééI M
,
ééM N
out
ééO R
YearQuarter
ééS ^
quarter
éé_ f
)
ééf g
{
èè 	

AddQuarter
êê 
(
êê 
startQuarter
êê #
,
êê# $
$num
êê% &
,
êê& '
out
êê( +
year
êê, 0
,
êê0 1
out
êê2 5
quarter
êê6 =
)
êê= >
;
êê> ?
}
ëë 	
public
îî 
static
îî 
void
îî 
PreviousQuarter
îî *
(
îî* +
YearQuarter
îî+ 6
startQuarter
îî7 C
,
îîC D
out
îîE H
int
îîI L
year
îîM Q
,
îîQ R
out
îîS V
YearQuarter
îîW b
quarter
îîc j
)
îîj k
{
ïï 	

AddQuarter
ññ 
(
ññ 
startQuarter
ññ #
,
ññ# $
-
ññ% &
$num
ññ& '
,
ññ' (
out
ññ) ,
year
ññ- 1
,
ññ1 2
out
ññ3 6
quarter
ññ7 >
)
ññ> ?
;
ññ? @
}
óó 	
public
öö 
static
öö 
void
öö 

AddQuarter
öö %
(
öö% &
YearQuarter
öö& 1
startQuarter
öö2 >
,
öö> ?
int
öö@ C
count
ööD I
,
ööI J
out
ööK N
int
ööO R
year
ööS W
,
ööW X
out
ööY \
YearQuarter
öö] h
quarter
ööi p
)
ööp q
{
õõ 	

AddQuarter
úú 
(
úú 
$num
úú 
,
úú 
startQuarter
úú &
,
úú& '
count
úú( -
,
úú- .
out
úú/ 2
year
úú3 7
,
úú7 8
out
úú9 <
quarter
úú= D
)
úúD E
;
úúE F
}
ùù 	
public
†† 
static
†† 
void
†† 

AddQuarter
†† %
(
††% &
int
††& )
	startYear
††* 3
,
††3 4
YearQuarter
††5 @
startQuarter
††A M
,
††M N
int
††O R
count
††S X
,
††X Y
out
††Z ]
int
††^ a
year
††b f
,
††f g
out
††h k
YearQuarter
††l w
quarter
††x 
)†† Ä
{
°° 	
int
¢¢ 

offsetYear
¢¢ 
=
¢¢ 
Math
¢¢ !
.
¢¢! "
Abs
¢¢" %
(
¢¢% &
count
¢¢& +
)
¢¢+ ,
/
¢¢- .
TimeSpec
¢¢/ 7
.
¢¢7 8
QuartersPerYear
¢¢8 G
+
¢¢H I
$num
¢¢J K
;
¢¢K L
int
££ 
startQuarterCount
££ !
=
££" #
(
££$ %
	startYear
££% .
+
££/ 0

offsetYear
££1 ;
)
££; <
*
££= >
TimeSpec
££? G
.
££G H
QuartersPerYear
££H W
+
££X Y
(
££Z [
(
££[ \
int
££\ _
)
££_ `
startQuarter
££` l
-
££m n
$num
££o p
)
££p q
;
££q r
int
§§  
targetQuarterCount
§§ "
=
§§# $
startQuarterCount
§§% 6
+
§§7 8
count
§§9 >
;
§§> ?
year
¶¶ 
=
¶¶  
targetQuarterCount
¶¶ %
/
¶¶& '
TimeSpec
¶¶( 0
.
¶¶0 1
QuartersPerYear
¶¶1 @
-
¶¶A B

offsetYear
¶¶C M
;
¶¶M N
quarter
ßß 
=
ßß 
(
ßß 
YearQuarter
ßß "
)
ßß" #
(
ßß# $ 
targetQuarterCount
ßß$ 6
%
ßß7 8
TimeSpec
ßß9 A
.
ßßA B
QuartersPerYear
ßßB Q
+
ßßR S
$num
ßßT U
)
ßßU V
;
ßßV W
}
®® 	
public
´´ 
static
´´ 
YearQuarter
´´ !
GetQuarterOfMonth
´´" 3
(
´´3 4
	YearMonth
´´4 =
	yearMonth
´´> G
)
´´G H
{
¨¨ 	
return
≠≠ 
GetQuarterOfMonth
≠≠ $
(
≠≠$ %
TimeSpec
≠≠% -
.
≠≠- .$
CalendarYearStartMonth
≠≠. D
,
≠≠D E
	yearMonth
≠≠F O
)
≠≠O P
;
≠≠P Q
}
ÆÆ 	
public
±± 
static
±± 
YearQuarter
±± !
GetQuarterOfMonth
±±" 3
(
±±3 4
	YearMonth
±±4 =
yearBaseMonth
±±> K
,
±±K L
	YearMonth
±±M V
	yearMonth
±±W `
)
±±` a
{
≤≤ 	
int
≥≥ 
yearMonthIndex
≥≥ 
=
≥≥  
(
≥≥! "
int
≥≥" %
)
≥≥% &
	yearMonth
≥≥& /
-
≥≥0 1
$num
≥≥2 3
;
≥≥3 4
int
¥¥ !
yearStartMonthIndex
¥¥ #
=
¥¥$ %
(
¥¥& '
int
¥¥' *
)
¥¥* +
yearBaseMonth
¥¥+ 8
-
¥¥9 :
$num
¥¥; <
;
¥¥< =
if
µµ 
(
µµ 
yearMonthIndex
µµ 
<
µµ  !
yearStartMonthIndex
µµ! 4
)
µµ4 5
{
∂∂ 
yearMonthIndex
∑∑ 
+=
∑∑ !
TimeSpec
∑∑" *
.
∑∑* +
MonthsPerYear
∑∑+ 8
;
∑∑8 9
}
∏∏ 
int
ππ 
deltaMonths
ππ 
=
ππ 
yearMonthIndex
ππ ,
-
ππ- .!
yearStartMonthIndex
ππ/ B
;
ππB C
return
∫∫ 
(
∫∫ 
YearQuarter
∫∫ 
)
∫∫  
(
∫∫  !
deltaMonths
∫∫! ,
/
∫∫- .
TimeSpec
∫∫/ 7
.
∫∫7 8
MonthsPerQuarter
∫∫8 H
+
∫∫I J
$num
∫∫K L
)
∫∫L M
;
∫∫M N
}
ªª 	
public
ææ 
static
ææ 
	YearMonth
ææ 
[
ææ  
]
ææ  ! 
GetMonthsOfQuarter
ææ" 4
(
ææ4 5
YearQuarter
ææ5 @
yearQuarter
ææA L
)
ææL M
{
øø 	
switch
¿¿ 
(
¿¿ 
yearQuarter
¿¿ 
)
¿¿  
{
¡¡ 
case
¬¬ 
YearQuarter
¬¬  
.
¬¬  !
First
¬¬! &
:
¬¬& '
return
√√ 
TimeSpec
√√ #
.
√√# $ 
FirstQuarterMonths
√√$ 6
;
√√6 7
case
ƒƒ 
YearQuarter
ƒƒ  
.
ƒƒ  !
Second
ƒƒ! '
:
ƒƒ' (
return
≈≈ 
TimeSpec
≈≈ #
.
≈≈# $!
SecondQuarterMonths
≈≈$ 7
;
≈≈7 8
case
∆∆ 
YearQuarter
∆∆  
.
∆∆  !
Third
∆∆! &
:
∆∆& '
return
«« 
TimeSpec
«« #
.
««# $ 
ThirdQuarterMonths
««$ 6
;
««6 7
case
»» 
YearQuarter
»»  
.
»»  !
Fourth
»»! '
:
»»' (
return
…… 
TimeSpec
…… #
.
……# $!
FourthQuarterMonths
……$ 7
;
……7 8
}
   
throw
ÀÀ 
new
ÀÀ '
InvalidOperationException
ÀÀ /
(
ÀÀ/ 0
$str
ÀÀ0 G
+
ÀÀH I
yearQuarter
ÀÀJ U
)
ÀÀU V
;
ÀÀV W
}
ÃÃ 	
public
”” 
static
”” 
void
”” 
	NextMonth
”” $
(
””$ %
	YearMonth
””% .

startMonth
””/ 9
,
””9 :
out
””; >
int
””? B
year
””C G
,
””G H
out
””I L
	YearMonth
””M V
month
””W \
)
””\ ]
{
‘‘ 	
AddMonth
’’ 
(
’’ 

startMonth
’’ 
,
’’  
$num
’’! "
,
’’" #
out
’’$ '
year
’’( ,
,
’’, -
out
’’. 1
month
’’2 7
)
’’7 8
;
’’8 9
}
÷÷ 	
public
ŸŸ 
static
ŸŸ 
void
ŸŸ 
PreviousMonth
ŸŸ (
(
ŸŸ( )
	YearMonth
ŸŸ) 2

startMonth
ŸŸ3 =
,
ŸŸ= >
out
ŸŸ? B
int
ŸŸC F
year
ŸŸG K
,
ŸŸK L
out
ŸŸM P
	YearMonth
ŸŸQ Z
month
ŸŸ[ `
)
ŸŸ` a
{
⁄⁄ 	
AddMonth
€€ 
(
€€ 

startMonth
€€ 
,
€€  
-
€€! "
$num
€€" #
,
€€# $
out
€€% (
year
€€) -
,
€€- .
out
€€/ 2
month
€€3 8
)
€€8 9
;
€€9 :
}
‹‹ 	
public
ﬂﬂ 
static
ﬂﬂ 
void
ﬂﬂ 
AddMonth
ﬂﬂ #
(
ﬂﬂ# $
	YearMonth
ﬂﬂ$ -

startMonth
ﬂﬂ. 8
,
ﬂﬂ8 9
int
ﬂﬂ: =
count
ﬂﬂ> C
,
ﬂﬂC D
out
ﬂﬂE H
int
ﬂﬂI L
year
ﬂﬂM Q
,
ﬂﬂQ R
out
ﬂﬂS V
	YearMonth
ﬂﬂW `
month
ﬂﬂa f
)
ﬂﬂf g
{
‡‡ 	
AddMonth
·· 
(
·· 
$num
·· 
,
·· 

startMonth
·· "
,
··" #
count
··$ )
,
··) *
out
··+ .
year
··/ 3
,
··3 4
out
··5 8
month
··9 >
)
··> ?
;
··? @
}
‚‚ 	
public
ÂÂ 
static
ÂÂ 
void
ÂÂ 
AddMonth
ÂÂ #
(
ÂÂ# $
int
ÂÂ$ '
	startYear
ÂÂ( 1
,
ÂÂ1 2
	YearMonth
ÂÂ3 <

startMonth
ÂÂ= G
,
ÂÂG H
int
ÂÂI L
count
ÂÂM R
,
ÂÂR S
out
ÂÂT W
int
ÂÂX [
year
ÂÂ\ `
,
ÂÂ` a
out
ÂÂb e
	YearMonth
ÂÂf o
month
ÂÂp u
)
ÂÂu v
{
ÊÊ 	
int
ÁÁ 

offsetYear
ÁÁ 
=
ÁÁ 
Math
ÁÁ !
.
ÁÁ! "
Abs
ÁÁ" %
(
ÁÁ% &
count
ÁÁ& +
)
ÁÁ+ ,
/
ÁÁ- .
TimeSpec
ÁÁ/ 7
.
ÁÁ7 8
MonthsPerYear
ÁÁ8 E
+
ÁÁF G
$num
ÁÁH I
;
ÁÁI J
int
ËË 
startMonthCount
ËË 
=
ËË  !
(
ËË" #
	startYear
ËË# ,
+
ËË- .

offsetYear
ËË/ 9
)
ËË9 :
*
ËË; <
TimeSpec
ËË= E
.
ËËE F
MonthsPerYear
ËËF S
+
ËËT U
(
ËËV W
(
ËËW X
int
ËËX [
)
ËË[ \

startMonth
ËË\ f
-
ËËg h
$num
ËËi j
)
ËËj k
;
ËËk l
int
ÈÈ 
targetMonthCount
ÈÈ  
=
ÈÈ! "
startMonthCount
ÈÈ# 2
+
ÈÈ3 4
count
ÈÈ5 :
;
ÈÈ: ;
year
ÎÎ 
=
ÎÎ 
targetMonthCount
ÎÎ #
/
ÎÎ$ %
TimeSpec
ÎÎ& .
.
ÎÎ. /
MonthsPerYear
ÎÎ/ <
-
ÎÎ= >

offsetYear
ÎÎ? I
;
ÎÎI J
month
ÏÏ 
=
ÏÏ 
(
ÏÏ 
	YearMonth
ÏÏ 
)
ÏÏ 
(
ÏÏ  
targetMonthCount
ÏÏ  0
%
ÏÏ1 2
TimeSpec
ÏÏ3 ;
.
ÏÏ; <
MonthsPerYear
ÏÏ< I
+
ÏÏJ K
$num
ÏÏL M
)
ÏÏM N
;
ÏÏN O
}
ÌÌ 	
public
 
static
 
int
 
GetDaysInMonth
 (
(
( )
int
) ,
year
- 1
,
1 2
int
3 6
month
7 <
)
< =
{
ÒÒ 	
DateTime
ÚÚ 
firstDay
ÚÚ 
=
ÚÚ 
new
ÚÚ  #
DateTime
ÚÚ$ ,
(
ÚÚ, -
year
ÚÚ- 1
,
ÚÚ1 2
month
ÚÚ3 8
,
ÚÚ8 9
$num
ÚÚ: ;
)
ÚÚ; <
;
ÚÚ< =
return
ÛÛ 
firstDay
ÛÛ 
.
ÛÛ 
	AddMonths
ÛÛ %
(
ÛÛ% &
$num
ÛÛ& '
)
ÛÛ' (
.
ÛÛ( )
AddDays
ÛÛ) 0
(
ÛÛ0 1
-
ÛÛ1 2
$num
ÛÛ2 3
)
ÛÛ3 4
.
ÛÛ4 5
Day
ÛÛ5 8
;
ÛÛ8 9
}
ÙÙ 	
public
˚˚ 
static
˚˚ 
DateTime
˚˚ 
GetStartOfWeek
˚˚ -
(
˚˚- .
DateTime
˚˚. 6
time
˚˚7 ;
,
˚˚; <
	DayOfWeek
˚˚= F
firstDayOfWeek
˚˚G U
)
˚˚U V
{
¸¸ 	
DateTime
˝˝ 

currentDay
˝˝ 
=
˝˝  !
new
˝˝" %
DateTime
˝˝& .
(
˝˝. /
time
˝˝/ 3
.
˝˝3 4
Year
˝˝4 8
,
˝˝8 9
time
˝˝: >
.
˝˝> ?
Month
˝˝? D
,
˝˝D E
time
˝˝F J
.
˝˝J K
Day
˝˝K N
)
˝˝N O
;
˝˝O P
while
˛˛ 
(
˛˛ 

currentDay
˛˛ 
.
˛˛ 
	DayOfWeek
˛˛ '
!=
˛˛( *
firstDayOfWeek
˛˛+ 9
)
˛˛9 :
{
ˇˇ 

currentDay
ÄÄ 
=
ÄÄ 

currentDay
ÄÄ '
.
ÄÄ' (
AddDays
ÄÄ( /
(
ÄÄ/ 0
-
ÄÄ0 1
$num
ÄÄ1 2
)
ÄÄ2 3
;
ÄÄ3 4
}
ÅÅ 
return
ÇÇ 

currentDay
ÇÇ 
;
ÇÇ 
}
ÉÉ 	
public
ÜÜ 
static
ÜÜ 
void
ÜÜ 
GetWeekOfYear
ÜÜ (
(
ÜÜ( )
DateTime
ÜÜ) 1
moment
ÜÜ2 8
,
ÜÜ8 9
CultureInfo
ÜÜ: E
culture
ÜÜF M
,
ÜÜM N
YearWeekType
ÜÜO [
yearWeekType
ÜÜ\ h
,
ÜÜh i
out
áá 
int
áá 
year
áá 
,
áá 
out
áá 
int
áá !

weekOfYear
áá" ,
)
áá, -
{
àà 	
GetWeekOfYear
ââ 
(
ââ 
moment
ââ  
,
ââ  !
culture
ââ" )
,
ââ) *
culture
ââ+ 2
.
ââ2 3
DateTimeFormat
ââ3 A
.
ââA B
CalendarWeekRule
ââB R
,
ââR S
culture
ââT [
.
ââ[ \
DateTimeFormat
ââ\ j
.
ââj k
FirstDayOfWeek
ââk y
,
âây z
yearWeekTypeââ{ á
,ââá à
out
ää 
year
ää 
,
ää 
out
ää 

weekOfYear
ää (
)
ää( )
;
ää) *
}
ãã 	
public
éé 
static
éé 
void
éé 
GetWeekOfYear
éé (
(
éé( )
DateTime
éé) 1
moment
éé2 8
,
éé8 9
CultureInfo
éé: E
culture
ééF M
,
ééM N
CalendarWeekRule
èè 
weekRule
èè %
,
èè% &
	DayOfWeek
èè' 0
firstDayOfWeek
èè1 ?
,
èè? @
YearWeekType
èèA M
yearWeekType
èèN Z
,
èèZ [
out
èè\ _
int
èè` c
year
èèd h
,
èèh i
out
èèj m
int
èèn q

weekOfYear
èèr |
)
èè| }
{
êê 	
if
ëë 
(
ëë 
culture
ëë 
==
ëë 
null
ëë 
)
ëë  
{
íí 
throw
ìì 
new
ìì #
ArgumentNullException
ìì /
(
ìì/ 0
$str
ìì0 9
)
ìì9 :
;
ìì: ;
}
îî 
if
ññ 
(
ññ 
yearWeekType
ññ 
==
ññ 
YearWeekType
ññ  ,
.
ññ, -
Iso8601
ññ- 4
&&
ññ5 7
weekRule
ññ8 @
==
ññA C
CalendarWeekRule
ññD T
.
ññT U
FirstFourDayWeek
ññU e
)
ññe f
{
óó 
	DayOfWeek
ôô 
day
ôô 
=
ôô 
culture
ôô  '
.
ôô' (
Calendar
ôô( 0
.
ôô0 1
GetDayOfWeek
ôô1 =
(
ôô= >
moment
ôô> D
)
ôôD E
;
ôôE F
if
öö 
(
öö 
day
öö 
>=
öö 
firstDayOfWeek
öö )
&&
öö* ,
(
öö- .
int
öö. 1
)
öö1 2
day
öö2 5
<=
öö6 8
(
öö9 :
int
öö: =
)
öö= >
(
öö> ?
firstDayOfWeek
öö? M
+
ööN O
$num
ööP Q
)
ööQ R
%
ööS T
$num
ööU V
)
ööV W
{
õõ 
moment
úú 
=
úú 
moment
úú #
.
úú# $
AddDays
úú$ +
(
úú+ ,
$num
úú, -
)
úú- .
;
úú. /
}
ùù 
}
ûû 

weekOfYear
†† 
=
†† 
culture
††  
.
††  !
Calendar
††! )
.
††) *
GetWeekOfYear
††* 7
(
††7 8
moment
††8 >
,
††> ?
weekRule
††@ H
,
††H I
firstDayOfWeek
††J X
)
††X Y
;
††Y Z
year
°° 
=
°° 
moment
°° 
.
°° 
Year
°° 
;
°° 
if
¢¢ 
(
¢¢ 

weekOfYear
¢¢ 
>=
¢¢ 
$num
¢¢  
&&
¢¢! #
moment
¢¢$ *
.
¢¢* +
Month
¢¢+ 0
<
¢¢1 2
$num
¢¢3 5
)
¢¢5 6
{
££ 
year
§§ 
--
§§ 
;
§§ 
}
•• 
}
¶¶ 	
public
©© 
static
©© 
int
©© 
GetWeeksOfYear
©© (
(
©©( )
int
©©) ,
year
©©- 1
,
©©1 2
CultureInfo
©©3 >
culture
©©? F
,
©©F G
YearWeekType
©©H T
yearWeekType
©©U a
)
©©a b
{
™™ 	
return
´´ 
GetWeeksOfYear
´´ !
(
´´! "
year
´´" &
,
´´& '
culture
´´( /
,
´´/ 0
culture
´´1 8
.
´´8 9
DateTimeFormat
´´9 G
.
´´G H
CalendarWeekRule
´´H X
,
´´X Y
culture
´´Z a
.
´´a b
DateTimeFormat
´´b p
.
´´p q
FirstDayOfWeek
´´q 
,´´ Ä
yearWeekType´´Å ç
)´´ç é
;´´é è
}
¨¨ 	
public
ØØ 
static
ØØ 
int
ØØ 
GetWeeksOfYear
ØØ (
(
ØØ( )
int
ØØ) ,
year
ØØ- 1
,
ØØ1 2
CultureInfo
ØØ3 >
culture
ØØ? F
,
ØØF G
CalendarWeekRule
∞∞ 
weekRule
∞∞ %
,
∞∞% &
	DayOfWeek
∞∞' 0
firstDayOfWeek
∞∞1 ?
,
∞∞? @
YearWeekType
∞∞A M
yearWeekType
∞∞N Z
)
∞∞Z [
{
±± 	
if
≤≤ 
(
≤≤ 
culture
≤≤ 
==
≤≤ 
null
≤≤ 
)
≤≤  
{
≥≥ 
throw
¥¥ 
new
¥¥ #
ArgumentNullException
¥¥ /
(
¥¥/ 0
$str
¥¥0 9
)
¥¥9 :
;
¥¥: ;
}
µµ 
int
∑∑ 
currentYear
∑∑ 
;
∑∑ 
int
∏∏ 
currentWeek
∏∏ 
;
∏∏ 
DateTime
ππ 

currentDay
ππ 
=
ππ  !
new
ππ" %
DateTime
ππ& .
(
ππ. /
year
ππ/ 3
,
ππ3 4
$num
ππ5 7
,
ππ7 8
$num
ππ9 ;
)
ππ; <
;
ππ< =
GetWeekOfYear
∫∫ 
(
∫∫ 

currentDay
∫∫ $
,
∫∫$ %
culture
∫∫& -
,
∫∫- .
weekRule
∫∫/ 7
,
∫∫7 8
firstDayOfWeek
∫∫9 G
,
∫∫G H
yearWeekType
∫∫I U
,
∫∫U V
out
∫∫W Z
currentYear
∫∫[ f
,
∫∫f g
out
∫∫h k
currentWeek
∫∫l w
)
∫∫w x
;
∫∫x y
while
ªª 
(
ªª 
currentYear
ªª 
!=
ªª !
year
ªª" &
)
ªª& '
{
ºº 

currentDay
ΩΩ 
=
ΩΩ 

currentDay
ΩΩ '
.
ΩΩ' (
AddDays
ΩΩ( /
(
ΩΩ/ 0
-
ΩΩ0 1
$num
ΩΩ1 2
)
ΩΩ2 3
;
ΩΩ3 4
GetWeekOfYear
ææ 
(
ææ 

currentDay
ææ (
,
ææ( )
culture
ææ* 1
,
ææ1 2
weekRule
ææ3 ;
,
ææ; <
firstDayOfWeek
ææ= K
,
ææK L
yearWeekType
ææM Y
,
ææY Z
out
ææ[ ^
currentYear
ææ_ j
,
ææj k
out
ææl o
currentWeek
ææp {
)
ææ{ |
;
ææ| }
}
øø 
return
¿¿ 
currentWeek
¿¿ 
;
¿¿ 
}
¡¡ 	
public
ƒƒ 
static
ƒƒ 
DateTime
ƒƒ  
GetStartOfYearWeek
ƒƒ 1
(
ƒƒ1 2
int
ƒƒ2 5
year
ƒƒ6 :
,
ƒƒ: ;
int
ƒƒ< ?

weekOfYear
ƒƒ@ J
,
ƒƒJ K
CultureInfo
ƒƒL W
culture
ƒƒX _
,
ƒƒ_ `
YearWeekType
ƒƒa m
yearWeekType
ƒƒn z
)
ƒƒz {
{
≈≈ 	
if
∆∆ 
(
∆∆ 
culture
∆∆ 
==
∆∆ 
null
∆∆ 
)
∆∆  
{
«« 
throw
»» 
new
»» #
ArgumentNullException
»» /
(
»»/ 0
$str
»»0 9
)
»»9 :
;
»»: ;
}
…… 
return
    
GetStartOfYearWeek
   %
(
  % &
year
  & *
,
  * +

weekOfYear
  , 6
,
  6 7
culture
  8 ?
,
  ? @
culture
ÀÀ 
.
ÀÀ 
DateTimeFormat
ÀÀ &
.
ÀÀ& '
CalendarWeekRule
ÀÀ' 7
,
ÀÀ7 8
culture
ÀÀ9 @
.
ÀÀ@ A
DateTimeFormat
ÀÀA O
.
ÀÀO P
FirstDayOfWeek
ÀÀP ^
,
ÀÀ^ _
yearWeekType
ÀÀ` l
)
ÀÀl m
;
ÀÀm n
}
ÃÃ 	
public
œœ 
static
œœ 
DateTime
œœ  
GetStartOfYearWeek
œœ 1
(
œœ1 2
int
œœ2 5
year
œœ6 :
,
œœ: ;
int
œœ< ?

weekOfYear
œœ@ J
,
œœJ K
CultureInfo
œœL W
culture
œœX _
,
œœ_ `
CalendarWeekRule
–– 
weekRule
–– %
,
––% &
	DayOfWeek
––' 0
firstDayOfWeek
––1 ?
,
––? @
YearWeekType
––A M
yearWeekType
––N Z
)
––Z [
{
—— 	
if
““ 
(
““ 
culture
““ 
==
““ 
null
““ 
)
““  
{
”” 
throw
‘‘ 
new
‘‘ #
ArgumentNullException
‘‘ /
(
‘‘/ 0
$str
‘‘0 9
)
‘‘9 :
;
‘‘: ;
}
’’ 
if
÷÷ 
(
÷÷ 

weekOfYear
÷÷ 
<
÷÷ 
$num
÷÷ 
)
÷÷ 
{
◊◊ 
throw
ÿÿ 
new
ÿÿ )
ArgumentOutOfRangeException
ÿÿ 5
(
ÿÿ5 6
$str
ÿÿ6 B
)
ÿÿB C
;
ÿÿC D
}
ŸŸ 
DateTime
€€ 
dateTime
€€ 
=
€€ 
new
€€  #
DateTime
€€$ ,
(
€€, -
year
€€- 1
,
€€1 2
$num
€€3 4
,
€€4 5
$num
€€6 7
)
€€7 8
.
€€8 9
AddDays
€€9 @
(
€€@ A

weekOfYear
€€A K
*
€€L M
TimeSpec
€€N V
.
€€V W
DaysPerWeek
€€W b
)
€€b c
;
€€c d
int
‹‹ 
currentYear
‹‹ 
;
‹‹ 
int
›› 
currentWeek
›› 
;
›› 
GetWeekOfYear
ﬁﬁ 
(
ﬁﬁ 
dateTime
ﬁﬁ "
,
ﬁﬁ" #
culture
ﬁﬁ$ +
,
ﬁﬁ+ ,
weekRule
ﬁﬁ- 5
,
ﬁﬁ5 6
firstDayOfWeek
ﬁﬁ7 E
,
ﬁﬁE F
yearWeekType
ﬁﬁG S
,
ﬁﬁS T
out
ﬁﬁU X
currentYear
ﬁﬁY d
,
ﬁﬁd e
out
ﬁﬁf i
currentWeek
ﬁﬁj u
)
ﬁﬁu v
;
ﬁﬁv w
while
‚‚ 
(
‚‚ 
currentWeek
‚‚ 
!=
‚‚ !

weekOfYear
‚‚" ,
)
‚‚, -
{
„„ 
dateTime
‰‰ 
=
‰‰ 
dateTime
‰‰ #
.
‰‰# $
AddDays
‰‰$ +
(
‰‰+ ,
-
‰‰, -
$num
‰‰- .
)
‰‰. /
;
‰‰/ 0
GetWeekOfYear
ÂÂ 
(
ÂÂ 
dateTime
ÂÂ &
,
ÂÂ& '
culture
ÂÂ( /
,
ÂÂ/ 0
weekRule
ÂÂ1 9
,
ÂÂ9 :
firstDayOfWeek
ÂÂ; I
,
ÂÂI J
yearWeekType
ÂÂK W
,
ÂÂW X
out
ÂÂY \
currentYear
ÂÂ] h
,
ÂÂh i
out
ÂÂj m
currentWeek
ÂÂn y
)
ÂÂy z
;
ÂÂz {
}
ÊÊ 
while
ÈÈ 
(
ÈÈ 
currentWeek
ÈÈ 
==
ÈÈ !

weekOfYear
ÈÈ" ,
)
ÈÈ, -
{
ÍÍ 
dateTime
ÎÎ 
=
ÎÎ 
dateTime
ÎÎ #
.
ÎÎ# $
AddDays
ÎÎ$ +
(
ÎÎ+ ,
-
ÎÎ, -
$num
ÎÎ- .
)
ÎÎ. /
;
ÎÎ/ 0
GetWeekOfYear
ÏÏ 
(
ÏÏ 
dateTime
ÏÏ &
,
ÏÏ& '
culture
ÏÏ( /
,
ÏÏ/ 0
weekRule
ÏÏ1 9
,
ÏÏ9 :
firstDayOfWeek
ÏÏ; I
,
ÏÏI J
yearWeekType
ÏÏK W
,
ÏÏW X
out
ÏÏY \
currentYear
ÏÏ] h
,
ÏÏh i
out
ÏÏj m
currentWeek
ÏÏn y
)
ÏÏy z
;
ÏÏz {
}
ÌÌ 
return
ÔÔ 
dateTime
ÔÔ 
.
ÔÔ 
AddDays
ÔÔ #
(
ÔÔ# $
$num
ÔÔ$ %
)
ÔÔ% &
;
ÔÔ& '
}
 	
public
˜˜ 
static
˜˜ 
DateTime
˜˜ 
DayStart
˜˜ '
(
˜˜' (
DateTime
˜˜( 0
dateTime
˜˜1 9
)
˜˜9 :
{
¯¯ 	
return
˘˘ 
dateTime
˘˘ 
.
˘˘ 
Date
˘˘  
;
˘˘  !
}
˙˙ 	
public
˝˝ 
static
˝˝ 
	DayOfWeek
˝˝ 
NextDay
˝˝  '
(
˝˝' (
	DayOfWeek
˝˝( 1
day
˝˝2 5
)
˝˝5 6
{
˛˛ 	
return
ˇˇ 
AddDays
ˇˇ 
(
ˇˇ 
day
ˇˇ 
,
ˇˇ 
$num
ˇˇ  !
)
ˇˇ! "
;
ˇˇ" #
}
ÄÄ 	
public
ÉÉ 
static
ÉÉ 
	DayOfWeek
ÉÉ 
PreviousDay
ÉÉ  +
(
ÉÉ+ ,
	DayOfWeek
ÉÉ, 5
day
ÉÉ6 9
)
ÉÉ9 :
{
ÑÑ 	
return
ÖÖ 
AddDays
ÖÖ 
(
ÖÖ 
day
ÖÖ 
,
ÖÖ 
-
ÖÖ  !
$num
ÖÖ! "
)
ÖÖ" #
;
ÖÖ# $
}
ÜÜ 	
public
ââ 
static
ââ 
	DayOfWeek
ââ 
AddDays
ââ  '
(
ââ' (
	DayOfWeek
ââ( 1
day
ââ2 5
,
ââ5 6
int
ââ7 :
days
ââ; ?
)
ââ? @
{
ää 	
if
ãã 
(
ãã 
days
ãã 
==
ãã 
$num
ãã 
)
ãã 
{
åå 
return
çç 
day
çç 
;
çç 
}
éé 
int
èè 
weeks
èè 
=
èè 
Math
èè 
.
èè 
Abs
èè  
(
èè  !
days
èè! %
)
èè% &
/
èè' (
TimeSpec
èè) 1
.
èè1 2
DaysPerWeek
èè2 =
+
èè> ?
$num
èè@ A
;
èèA B
int
ëë 
offset
ëë 
=
ëë 
weeks
ëë 
*
ëë  
TimeSpec
ëë! )
.
ëë) *
DaysPerWeek
ëë* 5
+
ëë6 7
(
ëë8 9
int
ëë9 <
)
ëë< =
day
ëë= @
;
ëë@ A
int
íí 
targetOffset
íí 
=
íí 
offset
íí %
+
íí& '
days
íí( ,
;
íí, -
return
ìì 
(
ìì 
	DayOfWeek
ìì 
)
ìì 
(
ìì 
targetOffset
ìì +
%
ìì, -
TimeSpec
ìì. 6
.
ìì6 7
DaysPerWeek
ìì7 B
)
ììB C
;
ììC D
}
îî 	
}
òò 
}öö ®/
iF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\TimeTrim.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

static 
class 
TimeTrim  
{ 
public 
static 
DateTime 
Month $
($ %
DateTime% -
dateTime. 6
,6 7
int8 ;
month< A
=B C
$numD E
,E F
intG J
dayK N
=O P
$numQ R
,R S
int 
hour 
= 
$num 
, 
int 
minute $
=% &
$num' (
,( )
int* -
second. 4
=5 6
$num7 8
,8 9
int: =
millisecond> I
=J K
$numL M
)M N
{ 	
return 
new 
DateTime 
(  
dateTime  (
.( )
Year) -
,- .
month/ 4
,4 5
day6 9
,9 :
hour; ?
,? @
minuteA G
,G H
secondI O
,O P
millisecondQ \
)\ ]
;] ^
} 	
public 
static 
DateTime 
Day "
(" #
DateTime# +
dateTime, 4
,4 5
int6 9
day: =
=> ?
$num@ A
,A B
int   
hour   
=   
$num   
,   
int   
minute   $
=  % &
$num  ' (
,  ( )
int  * -
second  . 4
=  5 6
$num  7 8
,  8 9
int  : =
millisecond  > I
=  J K
$num  L M
)  M N
{!! 	
return"" 
new"" 
DateTime"" 
(""  
dateTime""  (
.""( )
Year"") -
,""- .
dateTime""/ 7
.""7 8
Month""8 =
,""= >
day""? B
,""B C
hour""D H
,""H I
minute""J P
,""P Q
second""R X
,""X Y
millisecond""Z e
)""e f
;""f g
}## 	
public** 
static** 
DateTime** 
Hour** #
(**# $
DateTime**$ ,
dateTime**- 5
,**5 6
int**7 :
hour**; ?
=**@ A
$num**B C
,**C D
int++ 
minute++ 
=++ 
$num++ 
,++ 
int++ 
second++  &
=++' (
$num++) *
,++* +
int++, /
millisecond++0 ;
=++< =
$num++> ?
)++? @
{,, 	
return-- 
new-- 
DateTime-- 
(--  
dateTime--  (
.--( )
Year--) -
,--- .
dateTime--/ 7
.--7 8
Month--8 =
,--= >
dateTime--? G
.--G H
Day--H K
,--K L
hour--M Q
,--Q R
minute--S Y
,--Y Z
second--[ a
,--a b
millisecond--c n
)--n o
;--o p
}.. 	
public55 
static55 
DateTime55 
Minute55 %
(55% &
DateTime55& .
dateTime55/ 7
,557 8
int559 <
minute55= C
=55D E
$num55F G
,55G H
int55I L
second55M S
=55T U
$num55V W
,55W X
int55Y \
millisecond55] h
=55i j
$num55k l
)55l m
{66 	
return77 
new77 
DateTime77 
(77  
dateTime77  (
.77( )
Year77) -
,77- .
dateTime77/ 7
.777 8
Month778 =
,77= >
dateTime77? G
.77G H
Day77H K
,77K L
dateTime77M U
.77U V
Hour77V Z
,77Z [
minute77\ b
,77b c
second77d j
,77j k
millisecond77l w
)77w x
;77x y
}88 	
public?? 
static?? 
DateTime?? 
Second?? %
(??% &
DateTime??& .
dateTime??/ 7
,??7 8
int??9 <
second??= C
=??D E
$num??F G
,??G H
int??I L
millisecond??M X
=??Y Z
$num??[ \
)??\ ]
{@@ 	
returnAA 
newAA 
DateTimeAA 
(AA  
dateTimeAA  (
.AA( )
YearAA) -
,AA- .
dateTimeAA/ 7
.AA7 8
MonthAA8 =
,AA= >
dateTimeAA? G
.AAG H
DayAAH K
,AAK L
dateTimeAAM U
.AAU V
HourAAV Z
,AAZ [
dateTimeAA\ d
.AAd e
MinuteAAe k
,AAk l
secondAAm s
,AAs t
millisecond	AAu Ä
)
AAÄ Å
;
AAÅ Ç
}BB 	
publicII 
staticII 
DateTimeII 
MillisecondII *
(II* +
DateTimeII+ 3
dateTimeII4 <
,II< =
intII> A
millisecondIIB M
=IIN O
$numIIP Q
)IIQ R
{JJ 	
returnKK 
newKK 
DateTimeKK 
(KK  
dateTimeKK  (
.KK( )
YearKK) -
,KK- .
dateTimeKK/ 7
.KK7 8
MonthKK8 =
,KK= >
dateTimeKK? G
.KKG H
DayKKH K
,KKK L
dateTimeKKM U
.KKU V
HourKKV Z
,KKZ [
dateTimeKK\ d
.KKd e
MinuteKKe k
,KKk l
dateTimeKKm u
.KKu v
SecondKKv |
,KK| }
millisecond	KK~ â
)
KKâ ä
;
KKä ã
}LL 	
}PP 
}RR ¢3
yF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\TimeZoneDurationProvider.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

class $
TimeZoneDurationProvider )
:* +
DurationProvider, <
{ 
public $
TimeZoneDurationProvider '
(' (
TimeZoneInfo( 4
timeZone5 =
=> ?
null@ D
,D E
Func 
< 
TimeZoneInfo 
, 
DateTime '
,' (
TimeSpan) 1
[1 2
]2 3
,3 4
DateTime5 =
>= >
ambigiousMoment? N
=O P
nullQ U
,U V
Func 
< 
TimeZoneInfo 
, 
DateTime '
,' (
DateTime) 1
>1 2
invalidMoment3 @
=A B
nullC G
)G H
{ 	
if 
( 
timeZone 
== 
null  
)  !
{ 
timeZone 
= 
TimeZoneInfo '
.' (
Local( -
;- .
} 
this 
. 
timeZone 
= 
timeZone $
;$ %
this 
. 
ambigiousMoment  
=! "
ambigiousMoment# 2
;2 3
this 
. 
invalidMoment 
=  
invalidMoment! .
;. /
} 	
public!! 
TimeZoneInfo!! 
TimeZone!! $
{"" 	
get## 
{## 
return## 
timeZone## !
;##! "
}### $
}$$ 	
public'' 
Func'' 
<'' 
TimeZoneInfo''  
,''  !
DateTime''" *
,''* +
TimeSpan'', 4
[''4 5
]''5 6
,''6 7
DateTime''8 @
>''@ A
AmbigiousMoment''B Q
{(( 	
get)) 
{)) 
return)) 
ambigiousMoment)) (
;))( )
}))* +
}** 	
public-- 
Func-- 
<-- 
TimeZoneInfo--  
,--  !
DateTime--" *
,--* +
DateTime--, 4
>--4 5
InvalidMoment--6 C
{.. 	
get// 
{// 
return// 
invalidMoment// &
;//& '
}//( )
}00 	
public33 
override33 
TimeSpan33  
GetDuration33! ,
(33, -
DateTime33- 5
start336 ;
,33; <
DateTime33= E
end33F I
)33I J
{44 	
if55 
(55 
timeZone55 
.55 &
SupportsDaylightSavingTime55 3
)553 4
{66 
if88 
(88 
timeZone88 
.88 
IsAmbiguousTime88 ,
(88, -
start88- 2
)882 3
)883 4
{99 
start:: 
=:: 
OnAmbiguousMoment:: -
(::- .
start::. 3
)::3 4
;::4 5
};; 
else<< 
if<< 
(<< 
timeZone<< !
.<<! "
IsInvalidTime<<" /
(<</ 0
start<<0 5
)<<5 6
)<<6 7
{== 
start>> 
=>> 
OnInvalidMoment>> +
(>>+ ,
start>>, 1
)>>1 2
;>>2 3
}?? 
ifBB 
(BB 
timeZoneBB 
.BB 
IsAmbiguousTimeBB ,
(BB, -
endBB- 0
)BB0 1
)BB1 2
{CC 
endDD 
=DD 
OnAmbiguousMomentDD +
(DD+ ,
endDD, /
)DD/ 0
;DD0 1
}EE 
elseFF 
ifFF 
(FF 
timeZoneFF !
.FF! "
IsInvalidTimeFF" /
(FF/ 0
endFF0 3
)FF3 4
)FF4 5
{GG 
endHH 
=HH 
OnInvalidMomentHH )
(HH) *
endHH* -
)HH- .
;HH. /
}II 
}JJ 
returnLL 
baseLL 
.LL 
GetDurationLL #
(LL# $
startLL$ )
,LL) *
endLL+ .
)LL. /
;LL/ 0
}MM 	
	protectedPP 
virtualPP 
DateTimePP "
OnAmbiguousMomentPP# 4
(PP4 5
DateTimePP5 =
momentPP> D
)PPD E
{QQ 	
ifRR 
(RR 
ambigiousMomentRR 
==RR  "
nullRR# '
)RR' (
{SS 
throwTT 
newTT $
AmbiguousMomentExceptionTT 2
(TT2 3
momentTT3 9
)TT9 :
;TT: ;
}UU 
returnVV 
ambigiousMomentVV "
(VV" #
timeZoneVV# +
,VV+ ,
momentVV- 3
,VV3 4
timeZoneVV5 =
.VV= >#
GetAmbiguousTimeOffsetsVV> U
(VVU V
momentVVV \
)VV\ ]
)VV] ^
;VV^ _
}WW 	
	protectedZZ 
virtualZZ 
DateTimeZZ "
OnInvalidMomentZZ# 2
(ZZ2 3
DateTimeZZ3 ;
momentZZ< B
)ZZB C
{[[ 	
if\\ 
(\\ 
invalidMoment\\ 
==\\  
null\\! %
)\\% &
{]] 
throw^^ 
new^^ "
InvalidMomentException^^ 0
(^^0 1
moment^^1 7
)^^7 8
;^^8 9
}__ 
return`` 
invalidMoment``  
(``  !
timeZone``! )
,``) *
moment``+ 1
)``1 2
;``2 3
}aa 	
privateee 
readonlyee 
TimeZoneInfoee %
timeZoneee& .
;ee. /
privateff 
readonlyff 
Funcff 
<ff 
TimeZoneInfoff *
,ff* +
DateTimeff, 4
,ff4 5
TimeSpanff6 >
[ff> ?
]ff? @
,ff@ A
DateTimeffB J
>ffJ K
ambigiousMomentffL [
;ff[ \
privategg 
readonlygg 
Funcgg 
<gg 
TimeZoneInfogg *
,gg* +
DateTimegg, 4
,gg4 5
DateTimegg6 >
>gg> ?
invalidMomentgg@ M
;ggM N
}ii 
}kk Ñ-
eF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\Week.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

sealed 
class 
Week 
: 
WeekTimeRange ,
{ 
public 
Week 
( 
) 
: 
this 
( 
new 
TimeCalendar !
(! "
)" #
)# $
{ 	
} 	
public 
Week 
( 
ITimeCalendar !
calendar" *
)* +
:, -
this 
( 

ClockProxy 
. 
Clock !
.! "
Now" %
,% &
calendar' /
)/ 0
{ 	
} 	
public 
Week 
( 
DateTime 
moment #
)# $
:% &
this 
( 
moment 
, 
new 
TimeCalendar )
() *
)* +
)+ ,
{   	
}!! 	
public$$ 
Week$$ 
($$ 
DateTime$$ 
moment$$ #
,$$# $
ITimeCalendar$$% 2
calendar$$3 ;
)$$; <
:$$= >
base%% 
(%% 
moment%% 
,%% 
$num%% 
,%% 
calendar%% $
)%%$ %
{&& 	
}'' 	
public** 
Week** 
(** 
int** 
year** 
,** 
int** !

weekOfYear**" ,
)**, -
:**. /
this++ 
(++ 
year++ 
,++ 

weekOfYear++ !
,++! "
new++# &
TimeCalendar++' 3
(++3 4
)++4 5
)++5 6
{,, 	
}-- 	
public00 
Week00 
(00 
int00 
year00 
,00 
int00 !

weekOfYear00" ,
,00, -
ITimeCalendar00. ;
calendar00< D
)00D E
:00F G
base11 
(11 
year11 
,11 

weekOfYear11 !
,11! "
$num11# $
,11$ %
calendar11& .
)11. /
{22 	
}33 	
public66 
int66 

WeekOfYear66 
{77 	
get88 
{88 
return88 
	StartWeek88 "
;88" #
}88$ %
}99 	
public<< 
string<< 
WeekOfYearName<< $
{== 	
get>> 
{>> 
return>> 
StartWeekOfYearName>> ,
;>>, -
}>>. /
}?? 	
publicBB 
DateTimeBB 
FirstDayOfWeekBB &
{CC 	
getDD 
{DD 
returnDD 
StartDD 
;DD 
}DD  !
}EE 	
publicHH 
DateTimeHH 
LastDayOfWeekHH %
{II 	
getJJ 
{JJ 
returnJJ 
FirstDayOfWeekJJ '
.JJ' (
AddDaysJJ( /
(JJ/ 0
TimeSpecJJ0 8
.JJ8 9
DaysPerWeekJJ9 D
-JJE F
$numJJG H
)JJH I
;JJI J
}JJK L
}KK 	
publicNN 
boolNN !
MultipleCalendarYearsNN )
{OO 	
getPP 
{PP 
returnPP 
FirstDayOfWeekPP '
.PP' (
YearPP( ,
!=PP- /
LastDayOfWeekPP0 =
.PP= >
YearPP> B
;PPB C
}PPD E
}QQ 	
publicTT 
WeekTT 
GetPreviousWeekTT #
(TT# $
)TT$ %
{UU 	
returnVV 
AddWeeksVV 
(VV 
-VV 
$numVV 
)VV 
;VV  
}WW 	
publicZZ 
WeekZZ 
GetNextWeekZZ 
(ZZ  
)ZZ  !
{[[ 	
return\\ 
AddWeeks\\ 
(\\ 
$num\\ 
)\\ 
;\\ 
}]] 	
public`` 
Week`` 
AddWeeks`` 
(`` 
int``  
weeks``! &
)``& '
{aa 	
DateTimebb 
	startDatebb 
=bb  
TimeToolbb! )
.bb) *
GetStartOfYearWeekbb* <
(bb< =
Yearbb= A
,bbA B
	StartWeekbbC L
,bbL M
CalendarbbN V
.bbV W
CulturebbW ^
,bb^ _
Calendarbb` h
.bbh i
YearWeekTypebbi u
)bbu v
;bbv w
returncc 
newcc 
Weekcc 
(cc 
	startDatecc %
.cc% &
AddDayscc& -
(cc- .
weekscc. 3
*cc4 5
TimeSpeccc6 >
.cc> ?
DaysPerWeekcc? J
)ccJ K
,ccK L
CalendarccM U
)ccU V
;ccV W
}dd 	
	protectedgg 
overridegg 
stringgg !
Formatgg" (
(gg( )
ITimeFormattergg) 7
	formattergg8 A
)ggA B
{hh 	
returnii 
	formatterii 
.ii 
GetCalendarPeriodii .
(ii. /
WeekOfYearNameii/ =
,ii= >
	formatterjj 
.jj 
GetShortDatejj &
(jj& '
Startjj' ,
)jj, -
,jj- .
	formatterjj/ 8
.jj8 9
GetShortDatejj9 E
(jjE F
EndjjF I
)jjI J
,jjJ K
DurationjjL T
)jjT U
;jjU V
}kk 	
}mm 
}oo √
fF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\Weeks.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

sealed 
class 
Weeks 
: 
WeekTimeRange  -
{ 
public 
Weeks 
( 
DateTime 
moment $
,$ %
int& )
count* /
)/ 0
:1 2
this 
( 
moment 
, 
count 
, 
new  #
TimeCalendar$ 0
(0 1
)1 2
)2 3
{ 	
} 	
public 
Weeks 
( 
DateTime 
moment $
,$ %
int& )
count* /
,/ 0
ITimeCalendar1 >
calendar? G
)G H
:I J
base 
( 
moment 
, 
count 
, 
calendar  (
)( )
{ 	
} 	
public 
Weeks 
( 
int 
year 
, 
int "
	startWeek# ,
,, -
int. 1
count2 7
)7 8
:9 :
this 
( 
year 
, 
	startWeek  
,  !
count" '
,' (
new) ,
TimeCalendar- 9
(9 :
): ;
); <
{   	
}!! 	
public$$ 
Weeks$$ 
($$ 
int$$ 
year$$ 
,$$ 
int$$ "
	startWeek$$# ,
,$$, -
int$$. 1
count$$2 7
,$$7 8
ITimeCalendar$$9 F
calendar$$G O
)$$O P
:$$Q R
base%% 
(%% 
year%% 
,%% 
	startWeek%%  
,%%  !
count%%" '
,%%' (
calendar%%) 1
)%%1 2
{&& 	
}'' 	
public** !
ITimePeriodCollection** $
GetWeeks**% -
(**- .
)**. /
{++ 	 
TimePeriodCollection,,  
weeks,,! &
=,,' (
new,,) , 
TimePeriodCollection,,- A
(,,A B
),,B C
;,,C D
for-- 
(-- 
int-- 
i-- 
=-- 
$num-- 
;-- 
i-- 
<-- 
	WeekCount--  )
;--) *
i--+ ,
++--, .
)--. /
{.. 
weeks// 
.// 
Add// 
(// 
new// 
Week// "
(//" #
Year//# '
,//' (
	StartWeek//) 2
+//3 4
i//5 6
,//6 7
Calendar//8 @
)//@ A
)//A B
;//B C
}00 
return11 
weeks11 
;11 
}22 	
	protected55 
override55 
string55 !
Format55" (
(55( )
ITimeFormatter55) 7
	formatter558 A
)55A B
{66 	
return77 
	formatter77 
.77 
GetCalendarPeriod77 .
(77. /
StartWeekOfYearName77/ B
,77B C
EndWeekOfYearName77D U
,77U V
	formatter88 
.88 
GetShortDate88 &
(88& '
Start88' ,
)88, -
,88- .
	formatter88/ 8
.888 9
GetShortDate889 E
(88E F
End88F I
)88I J
,88J K
Duration88L T
)88T U
;88U V
}99 	
};; 
}== ¶\
nF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\WeekTimeRange.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

abstract 
class 
WeekTimeRange '
:( )
CalendarTimeRange* ;
{ 
	protected 
WeekTimeRange 
(  
int  #
year$ (
,( )
int* -
	startWeek. 7
,7 8
int9 <
	weekCount= F
)F G
:H I
this 
( 
year 
, 
	startWeek  
,  !
	weekCount" +
,+ ,
new- 0
TimeCalendar1 =
(= >
)> ?
)? @
{ 	
} 	
	protected 
WeekTimeRange 
(  
int  #
year$ (
,( )
int* -
	startWeek. 7
,7 8
int9 <
	weekCount= F
,F G
ITimeCalendarH U
calendarV ^
)^ _
:` a
base 
( 
GetPeriodOf 
( 
year !
,! "
	startWeek# ,
,, -
	weekCount. 7
,7 8
calendar9 A
)A B
,B C
calendarD L
)L M
{ 	
this 
. 
year 
= 
year 
; 
this 
. 
	startWeek 
= 
	startWeek &
;& '
this 
. 
	weekCount 
= 
	weekCount &
;& '
} 	
	protected!! 
WeekTimeRange!! 
(!!  
DateTime!!  (
moment!!) /
,!!/ 0
int!!1 4
	weekCount!!5 >
)!!> ?
:!!@ A
this"" 
("" 
moment"" 
,"" 
	weekCount"" "
,""" #
new""$ '
TimeCalendar""( 4
(""4 5
)""5 6
)""6 7
{## 	
}$$ 	
	protected'' 
WeekTimeRange'' 
(''  
DateTime''  (
moment'') /
,''/ 0
int''1 4
	weekCount''5 >
,''> ?
ITimeCalendar''@ M
calendar''N V
)''V W
:''X Y
base(( 
((( 
GetPeriodOf(( 
((( 
moment(( #
,((# $
	weekCount((% .
,((. /
calendar((0 8
)((8 9
,((9 :
calendar((; C
)((C D
{)) 	
TimeTool** 
.** 
GetWeekOfYear** "
(**" #
moment**# )
,**) *
calendar**+ 3
.**3 4
Culture**4 ;
,**; <
calendar**= E
.**E F
YearWeekType**F R
,**R S
out**T W
year**X \
,**\ ]
out**^ a
	startWeek**b k
)**k l
;**l m
this++ 
.++ 
	weekCount++ 
=++ 
	weekCount++ &
;++& '
},, 	
public// 
int// 
Year// 
{00 	
get11 
{11 
return11 
year11 
;11 
}11  
}22 	
public55 
int55 
	WeekCount55 
{66 	
get77 
{77 
return77 
	weekCount77 "
;77" #
}77$ %
}88 	
public;; 
int;; 
	StartWeek;; 
{<< 	
get== 
{== 
return== 
	startWeek== "
;==" #
}==$ %
}>> 	
publicAA 
intAA 
EndWeekAA 
{BB 	
getCC 
{CC 
returnCC 
	startWeekCC "
+CC# $
	weekCountCC% .
-CC/ 0
$numCC1 2
;CC2 3
}CC4 5
}DD 	
publicGG 
stringGG 
StartWeekOfYearNameGG )
{HH 	
getII 
{II 
returnII 
CalendarII !
.II! "
GetWeekOfYearNameII" 3
(II3 4
YearII4 8
,II8 9
	StartWeekII: C
)IIC D
;IID E
}IIF G
}JJ 	
publicMM 
stringMM 
EndWeekOfYearNameMM '
{NN 	
getOO 
{OO 
returnOO 
CalendarOO !
.OO! "
GetWeekOfYearNameOO" 3
(OO3 4
YearOO4 8
,OO8 9
EndWeekOO: A
)OOA B
;OOB C
}OOD E
}PP 	
publicSS 
DateTimeSS 
GetStartOfWeekSS &
(SS& '
intSS' *
	weekIndexSS+ 4
)SS4 5
{TT 	
ifUU 
(UU 
	weekIndexUU 
<UU 
$numUU 
||UU  
	weekIndexUU! *
>=UU+ -
	weekCountUU. 7
)UU7 8
{VV 
throwWW 
newWW '
ArgumentOutOfRangeExceptionWW 5
(WW5 6
$strWW6 A
)WWA B
;WWB C
}XX 
DateTimeZZ 
	startDateZZ 
=ZZ  
TimeToolZZ! )
.ZZ) *
GetStartOfYearWeekZZ* <
(ZZ< =
yearZZ= A
,ZZA B
	startWeekZZC L
,ZZL M
CalendarZZN V
.ZZV W
CultureZZW ^
,ZZ^ _
CalendarZZ` h
.ZZh i
YearWeekTypeZZi u
)ZZu v
;ZZv w
return[[ 
	startDate[[ 
.[[ 
AddDays[[ $
([[$ %
	weekIndex[[% .
*[[/ 0
TimeSpec[[1 9
.[[9 :
DaysPerWeek[[: E
)[[E F
;[[F G
}\\ 	
public__ !
ITimePeriodCollection__ $
GetDays__% ,
(__, -
)__- .
{`` 	 
TimePeriodCollectionaa  
daysaa! %
=aa& '
newaa( + 
TimePeriodCollectionaa, @
(aa@ A
)aaA B
;aaB C
DateTimebb 
	startDatebb 
=bb  
TimeToolbb! )
.bb) *
GetStartOfYearWeekbb* <
(bb< =
yearbb= A
,bbA B
	startWeekbbC L
,bbL M
CalendarbbN V
.bbV W
CulturebbW ^
,bb^ _
Calendarbb` h
.bbh i
YearWeekTypebbi u
)bbu v
;bbv w
intcc 
dayCountcc 
=cc 
	weekCountcc $
*cc% &
TimeSpeccc' /
.cc/ 0
DaysPerWeekcc0 ;
;cc; <
fordd 
(dd 
intdd 
idd 
=dd 
$numdd 
;dd 
idd 
<dd 
dayCountdd  (
;dd( )
idd* +
++dd+ -
)dd- .
{ee 
daysff 
.ff 
Addff 
(ff 
newff 
Dayff  
(ff  !
	startDateff! *
.ff* +
AddDaysff+ 2
(ff2 3
iff3 4
)ff4 5
,ff5 6
Calendarff7 ?
)ff? @
)ff@ A
;ffA B
}gg 
returnhh 
dayshh 
;hh 
}ii 	
	protectedll 
overridell 
boolll 
IsEqualll  '
(ll' (
objectll( .
objll/ 2
)ll2 3
{mm 	
returnnn 
basenn 
.nn 
IsEqualnn 
(nn  
objnn  #
)nn# $
&&nn% '
HasSameDatann( 3
(nn3 4
objnn4 7
asnn8 :
WeekTimeRangenn; H
)nnH I
;nnI J
}oo 	
privaterr 
boolrr 
HasSameDatarr  
(rr  !
WeekTimeRangerr! .
comprr/ 3
)rr3 4
{ss 	
returntt 
yeartt 
==tt 
comptt 
.tt  
yeartt  $
&&tt% '
	startWeektt( 1
==tt2 4
comptt5 9
.tt9 :
	startWeektt: C
&&ttD F
	weekCountttG P
==ttQ S
compttT X
.ttX Y
	weekCountttY b
;ttb c
}uu 	
	protectedxx 
overridexx 
intxx 
ComputeHashCodexx .
(xx. /
)xx/ 0
{yy 	
returnzz 
HashToolzz 
.zz 
ComputeHashCodezz +
(zz+ ,
basezz, 0
.zz0 1
ComputeHashCodezz1 @
(zz@ A
)zzA B
,zzB C
yearzzD H
,zzH I
	startWeekzzJ S
,zzS T
	weekCountzzU ^
)zz^ _
;zz_ `
}{{ 	
private~~ 
static~~ 
	TimeRange~~  
GetPeriodOf~~! ,
(~~, -
DateTime~~- 5
moment~~6 <
,~~< =
int~~> A
	weekCount~~B K
,~~K L
ITimeCalendar~~M Z
calendar~~[ c
)~~c d
{ 	
int
ÄÄ 
year
ÄÄ 
;
ÄÄ 
int
ÅÅ 

weekOfYear
ÅÅ 
;
ÅÅ 
TimeTool
ÇÇ 
.
ÇÇ 
GetWeekOfYear
ÇÇ "
(
ÇÇ" #
moment
ÇÇ# )
,
ÇÇ) *
calendar
ÇÇ+ 3
.
ÇÇ3 4
Culture
ÇÇ4 ;
,
ÇÇ; <
calendar
ÇÇ= E
.
ÇÇE F
YearWeekType
ÇÇF R
,
ÇÇR S
out
ÇÇT W
year
ÇÇX \
,
ÇÇ\ ]
out
ÇÇ^ a

weekOfYear
ÇÇb l
)
ÇÇl m
;
ÇÇm n
return
ÉÉ 
GetPeriodOf
ÉÉ 
(
ÉÉ 
year
ÉÉ #
,
ÉÉ# $

weekOfYear
ÉÉ% /
,
ÉÉ/ 0
	weekCount
ÉÉ1 :
,
ÉÉ: ;
calendar
ÉÉ< D
)
ÉÉD E
;
ÉÉE F
}
ÑÑ 	
private
áá 
static
áá 
	TimeRange
áá  
GetPeriodOf
áá! ,
(
áá, -
int
áá- 0
year
áá1 5
,
áá5 6
int
áá7 :

weekOfYear
áá; E
,
ááE F
int
ááG J
	weekCount
ááK T
,
ááT U
ITimeCalendar
ááV c
calendar
áád l
)
áál m
{
àà 	
if
ââ 
(
ââ 
	weekCount
ââ 
<
ââ 
$num
ââ 
)
ââ 
{
ää 
throw
ãã 
new
ãã )
ArgumentOutOfRangeException
ãã 5
(
ãã5 6
$str
ãã6 A
)
ããA B
;
ããB C
}
åå 
DateTime
éé 
start
éé 
=
éé 
TimeTool
éé %
.
éé% & 
GetStartOfYearWeek
éé& 8
(
éé8 9
year
éé9 =
,
éé= >

weekOfYear
éé? I
,
ééI J
calendar
ééK S
.
ééS T
Culture
ééT [
,
éé[ \
calendar
éé] e
.
éée f
YearWeekType
ééf r
)
éér s
;
éés t
DateTime
èè 
end
èè 
=
èè 
start
èè  
.
èè  !
AddDays
èè! (
(
èè( )
	weekCount
èè) 2
*
èè3 4
TimeSpec
èè5 =
.
èè= >
DaysPerWeek
èè> I
)
èèI J
;
èèJ K
return
êê 
new
êê 
	TimeRange
êê  
(
êê  !
start
êê! &
,
êê& '
end
êê( +
)
êê+ ,
;
êê, -
}
ëë 	
private
ïï 
readonly
ïï 
int
ïï 
year
ïï !
;
ïï! "
private
ññ 
readonly
ññ 
int
ññ 
	startWeek
ññ &
;
ññ& '
private
óó 
readonly
óó 
int
óó 
	weekCount
óó &
;
óó& '
}
ôô 
}õõ ø)
eF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\Year.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

sealed 
class 
Year 
: 
YearTimeRange ,
{ 
public 
Year 
( 
) 
: 
this 
( 
new 
TimeCalendar !
(! "
)" #
)# $
{ 	
} 	
public 
Year 
( 
ITimeCalendar !
calendar" *
)* +
:, -
this 
( 

ClockProxy 
. 
Clock !
.! "
Now" %
,% &
calendar' /
)/ 0
{ 	
} 	
public 
Year 
( 
DateTime 
moment #
)# $
:% &
this 
( 
moment 
, 
new 
TimeCalendar )
() *
)* +
)+ ,
{   	
}!! 	
public$$ 
Year$$ 
($$ 
DateTime$$ 
moment$$ #
,$$# $
ITimeCalendar$$% 2
calendar$$3 ;
)$$; <
:$$= >
this%% 
(%% 
TimeTool%% 
.%% 
	GetYearOf%% #
(%%# $
calendar%%$ ,
.%%, -
YearBaseMonth%%- :
,%%: ;
calendar%%< D
.%%D E
GetYear%%E L
(%%L M
moment%%M S
)%%S T
,%%T U
calendar%%V ^
.%%^ _
GetMonth%%_ g
(%%g h
moment%%h n
)%%n o
)%%o p
,%%p q
calendar%%r z
)%%z {
{&& 	
}'' 	
public** 
Year** 
(** 
int** 
year** 
)** 
:** 
this++ 
(++ 
year++ 
,++ 
new++ 
TimeCalendar++ '
(++' (
)++( )
)++) *
{,, 	
}-- 	
public00 
Year00 
(00 
int00 
year00 
,00 
ITimeCalendar00 +
calendar00, 4
)004 5
:006 7
base11 
(11 
year11 
,11 
$num11 
,11 
calendar11 "
)11" #
{22 	
}33 	
public66 
int66 
	YearValue66 
{77 	
get88 
{88 
return88 
Calendar88 !
.88! "
GetYear88" )
(88) *
BaseYear88* 2
,882 3
(884 5
int885 8
)888 9
YearBaseMonth889 F
)88F G
;88G H
}88I J
}99 	
public<< 
string<< 
YearName<< 
{== 	
get>> 
{>> 
return>> 
StartYearName>> &
;>>& '
}>>( )
}?? 	
publicBB 
boolBB 
IsCalendarYearBB "
{CC 	
getDD 
{DD 
returnDD 
YearBaseMonthDD &
==DD' )
TimeSpecDD* 2
.DD2 3"
CalendarYearStartMonthDD3 I
;DDI J
}DDK L
}EE 	
publicHH 
YearHH 
GetPreviousYearHH #
(HH# $
)HH$ %
{II 	
returnJJ 
AddYearsJJ 
(JJ 
-JJ 
$numJJ 
)JJ 
;JJ  
}KK 	
publicNN 
YearNN 
GetNextYearNN 
(NN  
)NN  !
{OO 	
returnPP 
AddYearsPP 
(PP 
$numPP 
)PP 
;PP 
}QQ 	
publicTT 
YearTT 
AddYearsTT 
(TT 
intTT  
countTT! &
)TT& '
{UU 	
DateTimeVV 
	startDateVV 
=VV  
newVV! $
DateTimeVV% -
(VV- .
BaseYearVV. 6
,VV6 7
(VV8 9
intVV9 <
)VV< =
YearBaseMonthVV= J
,VVJ K
$numVVL M
)VVM N
;VVN O
returnWW 
newWW 
YearWW 
(WW 
	startDateWW %
.WW% &
AddYearsWW& .
(WW. /
countWW/ 4
)WW4 5
,WW5 6
CalendarWW7 ?
)WW? @
;WW@ A
}XX 	
	protected[[ 
override[[ 
string[[ !
Format[[" (
([[( )
ITimeFormatter[[) 7
	formatter[[8 A
)[[A B
{\\ 	
return]] 
	formatter]] 
.]] 
GetCalendarPeriod]] .
(]]. /
YearName]]/ 7
,]]7 8
	formatter^^ 
.^^ 
GetShortDate^^ &
(^^& '
Start^^' ,
)^^, -
,^^- .
	formatter^^/ 8
.^^8 9
GetShortDate^^9 E
(^^E F
End^^F I
)^^I J
,^^J K
Duration^^L T
)^^T U
;^^U V
}__ 	
}aa 
}cc Ë
mF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\YearHalfyear.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

enum 
YearHalfyear 
{ 
First 
= 
$num 
, 
Second 
= 
$num 
, 
} 
} ˛
jF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\YearMonth.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

enum 
	YearMonth 
{ 
January 
= 
$num 
, 
February 
= 
$num 
, 
March 
= 
$num 
, 
April 
= 
$num 
, 
May 
= 
$num 
, 
June 
= 
$num 
, 
July 
= 
$num 
, 
August 
= 
$num 
, 
	September 
= 
$num 
, 
October 
= 
$num 
, 
November 
= 
$num 
, 
December 
= 
$num 
} 
} Ì
lF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\YearQuarter.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

enum 
YearQuarter 
{ 
First 
= 
$num 
, 
Second 
= 
$num 
, 
Third 
= 
$num 
, 
Fourth 
= 
$num 
, 
} 
} ÿ
fF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\Years.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

sealed 
class 
Years 
: 
YearTimeRange  -
{ 
public 
Years 
( 
DateTime 
moment $
,$ %
int& )
count* /
)/ 0
:1 2
this 
( 
moment 
, 
count 
, 
new  #
TimeCalendar$ 0
(0 1
)1 2
)2 3
{ 	
} 	
public 
Years 
( 
DateTime 
moment $
,$ %
int& )
count* /
,/ 0
ITimeCalendar1 >
calendar? G
)G H
:I J
this 
( 
TimeTool 
. 
	GetYearOf #
(# $
calendar$ ,
., -
YearBaseMonth- :
,: ;
calendar< D
.D E
GetYearE L
(L M
momentM S
)S T
,T U
calendarV ^
.^ _
GetMonth_ g
(g h
momenth n
)n o
)o p
,p q
count 
, 
calendar 
) 
{ 	
} 	
public 
Years 
( 
int 
year 
, 
int "
count# (
)( )
:* +
this   
(   
year   
,   
count   
,   
new   !
TimeCalendar  " .
(  . /
)  / 0
)  0 1
{!! 	
}"" 	
public%% 
Years%% 
(%% 
int%% 
year%% 
,%% 
int%% "
count%%# (
,%%( )
ITimeCalendar%%* 7
calendar%%8 @
)%%@ A
:%%B C
base&& 
(&& 
year&& 
,&& 
count&& 
,&& 
calendar&& &
)&&& '
{'' 	
}(( 	
public++ !
ITimePeriodCollection++ $
GetYears++% -
(++- .
)++. /
{,, 	 
TimePeriodCollection--  
years--! &
=--' (
new--) , 
TimePeriodCollection--- A
(--A B
)--B C
;--C D
for.. 
(.. 
int.. 
i.. 
=.. 
$num.. 
;.. 
i.. 
<.. 
	YearCount..  )
;..) *
i..+ ,
++.., .
)... /
{// 
years00 
.00 
Add00 
(00 
new00 
Year00 "
(00" #
BaseYear00# +
+00, -
i00. /
,00/ 0
Calendar001 9
)009 :
)00: ;
;00; <
}11 
return22 
years22 
;22 
}33 	
	protected66 
override66 
string66 !
Format66" (
(66( )
ITimeFormatter66) 7
	formatter668 A
)66A B
{77 	
return88 
	formatter88 
.88 
GetCalendarPeriod88 .
(88. /
StartYearName88/ <
,88< =
EndYearName88> I
,88I J
	formatter99 
.99 
GetShortDate99 &
(99& '
Start99' ,
)99, -
,99- .
	formatter99/ 8
.998 9
GetShortDate999 E
(99E F
End99F I
)99I J
,99J K
Duration99L T
)99T U
;99U V
}:: 	
}<< 
}>> Êe
nF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\YearTimeRange.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

abstract 
class 
YearTimeRange '
:( )
CalendarTimeRange* ;
{ 
	protected 
YearTimeRange 
(  
int  #
	startYear$ -
,- .
int/ 2
	yearCount3 <
,< =
ITimeCalendar> K
calendarL T
)T U
:V W
base 
( 
GetPeriodOf 
( 
calendar %
,% &
	startYear' 0
,0 1
	yearCount2 ;
); <
,< =
calendar> F
)F G
{ 	
this 
. 
	startYear 
= 
	startYear &
;& '
this 
. 
	yearCount 
= 
	yearCount &
;& '
endYear 
= 
End 
. 
Year 
; 
} 	
public 
int 
	YearCount 
{ 	
get 
{ 
return 
	yearCount "
;" #
}$ %
} 	
public!! 
override!! 
int!! 
BaseYear!! $
{"" 	
get## 
{## 
return## 
	startYear## "
;##" #
}##$ %
}$$ 	
public'' 
int'' 
	StartYear'' 
{(( 	
get)) 
{)) 
return)) 
Calendar)) !
.))! "
GetYear))" )
())) *
	startYear))* 3
,))3 4
())5 6
int))6 9
)))9 :
YearBaseMonth)): G
)))G H
;))H I
}))J K
}** 	
public-- 
int-- 
EndYear-- 
{.. 	
get// 
{// 
return// 
Calendar// !
.//! "
GetYear//" )
(//) *
endYear//* 1
,//1 2
(//3 4
int//4 7
)//7 8
YearBaseMonth//8 E
)//E F
;//F G
}//H I
}00 	
public33 
string33 
StartYearName33 #
{44 	
get55 
{55 
return55 
Calendar55 !
.55! "
GetYearName55" -
(55- .
	StartYear55. 7
)557 8
;558 9
}55: ;
}66 	
public99 
string99 
EndYearName99 !
{:: 	
get;; 
{;; 
return;; 
Calendar;; !
.;;! "
GetYearName;;" -
(;;- .
	StartYear;;. 7
+;;8 9
	YearCount;;: C
-;;D E
$num;;F G
);;G H
;;;H I
};;J K
}<< 	
public?? !
ITimePeriodCollection?? $
GetHalfyears??% 1
(??1 2
)??2 3
{@@ 	 
TimePeriodCollectionAA  
	halfyearsAA! *
=AA+ ,
newAA- 0 
TimePeriodCollectionAA1 E
(AAE F
)AAF G
;AAG H
forBB 
(BB 
intBB 
iBB 
=BB 
$numBB 
;BB 
iBB 
<BB 
	yearCountBB  )
;BB) *
iBB+ ,
++BB, .
)BB. /
{CC 
forDD 
(DD 
intDD 
halfyearDD !
=DD" #
$numDD$ %
;DD% &
halfyearDD' /
<DD0 1
TimeSpecDD2 :
.DD: ;
HalfyearsPerYearDD; K
;DDK L
halfyearDDM U
++DDU W
)DDW X
{EE 
intFF 
yearFF 
;FF 
YearHalfyearGG  
yearHalfyearGG! -
;GG- .
TimeToolHH 
.HH 
AddHalfyearHH (
(HH( )
	startYearHH) 2
,HH2 3
YearHalfyearHH4 @
.HH@ A
FirstHHA F
,HHF G
iHHH I
*HHJ K
TimeSpecHHL T
.HHT U
HalfyearsPerYearHHU e
+HHf g
halfyearHHh p
,HHp q
outHHr u
yearHHv z
,HHz {
outHH| 
yearHalfyear
HHÄ å
)
HHå ç
;
HHç é
	halfyearsII 
.II 
AddII !
(II! "
newII" %
HalfyearII& .
(II. /
yearII/ 3
,II3 4
yearHalfyearII5 A
,IIA B
CalendarIIC K
)IIK L
)IIL M
;IIM N
}JJ 
}KK 
returnLL 
	halfyearsLL 
;LL 
}MM 	
publicPP !
ITimePeriodCollectionPP $
GetQuartersPP% 0
(PP0 1
)PP1 2
{QQ 	 
TimePeriodCollectionRR  
quartersRR! )
=RR* +
newRR, / 
TimePeriodCollectionRR0 D
(RRD E
)RRE F
;RRF G
forSS 
(SS 
intSS 
iSS 
=SS 
$numSS 
;SS 
iSS 
<SS 
	yearCountSS  )
;SS) *
iSS+ ,
++SS, .
)SS. /
{TT 
forUU 
(UU 
intUU 
quarterUU  
=UU! "
$numUU# $
;UU$ %
quarterUU& -
<UU. /
TimeSpecUU0 8
.UU8 9
QuartersPerYearUU9 H
;UUH I
quarterUUJ Q
++UUQ S
)UUS T
{VV 
intWW 
yearWW 
;WW 
YearQuarterXX 
yearQuarterXX  +
;XX+ ,
TimeToolYY 
.YY 

AddQuarterYY '
(YY' (
	startYearYY( 1
,YY1 2
YearQuarterYY3 >
.YY> ?
FirstYY? D
,YYD E
iYYF G
*YYH I
TimeSpecYYJ R
.YYR S
QuartersPerYearYYS b
+YYc d
quarterYYe l
,YYl m
outYYn q
yearYYr v
,YYv w
outYYx {
yearQuarter	YY| á
)
YYá à
;
YYà â
quartersZZ 
.ZZ 
AddZZ  
(ZZ  !
newZZ! $
QuarterZZ% ,
(ZZ, -
yearZZ- 1
,ZZ1 2
yearQuarterZZ3 >
,ZZ> ?
CalendarZZ@ H
)ZZH I
)ZZI J
;ZZJ K
}[[ 
}\\ 
return]] 
quarters]] 
;]] 
}^^ 	
publicaa !
ITimePeriodCollectionaa $
	GetMonthsaa% .
(aa. /
)aa/ 0
{bb 	 
TimePeriodCollectioncc  
monthscc! '
=cc( )
newcc* - 
TimePeriodCollectioncc. B
(ccB C
)ccC D
;ccD E
fordd 
(dd 
intdd 
idd 
=dd 
$numdd 
;dd 
idd 
<dd 
	yearCountdd  )
;dd) *
idd+ ,
++dd, .
)dd. /
{ee 
forff 
(ff 
intff 
monthff 
=ff  
$numff! "
;ff" #
monthff$ )
<ff* +
TimeSpecff, 4
.ff4 5
MonthsPerYearff5 B
;ffB C
monthffD I
++ffI K
)ffK L
{gg 
inthh 
yearhh 
;hh 
	YearMonthii 
	yearMonthii '
;ii' (
TimeTooljj 
.jj 
AddMonthjj %
(jj% &
	startYearjj& /
,jj/ 0
YearBaseMonthjj1 >
,jj> ?
ijj@ A
*jjB C
TimeSpecjjD L
.jjL M
MonthsPerYearjjM Z
+jj[ \
monthjj] b
,jjb c
outjjd g
yearjjh l
,jjl m
outjjn q
	yearMonthjjr {
)jj{ |
;jj| }
monthskk 
.kk 
Addkk 
(kk 
newkk "
Monthkk# (
(kk( )
yearkk) -
,kk- .
	yearMonthkk/ 8
,kk8 9
Calendarkk: B
)kkB C
)kkC D
;kkD E
}ll 
}mm 
returnnn 
monthsnn 
;nn 
}oo 	
	protectedrr 
overriderr 
boolrr 
IsEqualrr  '
(rr' (
objectrr( .
objrr/ 2
)rr2 3
{ss 	
returntt 
basett 
.tt 
IsEqualtt 
(tt  
objtt  #
)tt# $
&&tt% '
HasSameDatatt( 3
(tt3 4
objtt4 7
astt8 :
YearTimeRangett; H
)ttH I
;ttI J
}uu 	
privatexx 
boolxx 
HasSameDataxx  
(xx  !
YearTimeRangexx! .
compxx/ 3
)xx3 4
{yy 	
returnzz 
	startYear{{ 
=={{ 
comp{{ !
.{{! "
	startYear{{" +
&&{{, .
endYear|| 
==|| 
comp|| 
.||  
endYear||  '
&&||( *
	yearCount}} 
==}} 
comp}} !
.}}! "
	yearCount}}" +
;}}+ ,
}~~ 	
	protected
ÅÅ 
override
ÅÅ 
int
ÅÅ 
ComputeHashCode
ÅÅ .
(
ÅÅ. /
)
ÅÅ/ 0
{
ÇÇ 	
return
ÉÉ 
HashTool
ÉÉ 
.
ÉÉ 
ComputeHashCode
ÉÉ +
(
ÉÉ+ ,
base
ÉÉ, 0
.
ÉÉ0 1
ComputeHashCode
ÉÉ1 @
(
ÉÉ@ A
)
ÉÉA B
,
ÉÉB C
	startYear
ÉÉD M
,
ÉÉM N
	startYear
ÉÉO X
,
ÉÉX Y
	yearCount
ÉÉZ c
)
ÉÉc d
;
ÉÉd e
}
ÑÑ 	
private
áá 
static
áá 
DateTime
áá 
GetStartOfYear
áá  .
(
áá. /
ITimeCalendar
áá/ <
calendar
áá= E
,
ááE F
int
ááG J
year
ááK O
)
ááO P
{
àà 	
DateTime
ââ 
startOfYear
ââ  
;
ââ  !
switch
ãã 
(
ãã 
calendar
ãã 
.
ãã 
YearType
ãã %
)
ãã% &
{
åå 
case
çç 
YearType
çç 
.
çç 

FiscalYear
çç (
:
çç( )
startOfYear
éé 
=
éé  ! 
FiscalCalendarTool
éé" 4
.
éé4 5
GetStartOfYear
éé5 C
(
ééC D
year
ééD H
,
ééH I
calendar
ééJ R
.
ééR S
YearBaseMonth
ééS `
,
éé` a
calendar
èè  
.
èè  !"
FiscalFirstDayOfYear
èè! 5
,
èè5 6
calendar
èè7 ?
.
èè? @!
FiscalYearAlignment
èè@ S
)
èèS T
;
èèT U
break
êê 
;
êê 
default
ëë 
:
ëë 
startOfYear
íí 
=
íí  !
new
íí" %
DateTime
íí& .
(
íí. /
year
íí/ 3
,
íí3 4
(
íí5 6
int
íí6 9
)
íí9 :
calendar
íí: B
.
ííB C
YearBaseMonth
ííC P
,
ííP Q
$num
ííR S
)
ííS T
;
ííT U
break
ìì 
;
ìì 
}
îî 
return
ïï 
startOfYear
ïï 
;
ïï 
}
ññ 	
private
ôô 
static
ôô 
	TimeRange
ôô  
GetPeriodOf
ôô! ,
(
ôô, -
ITimeCalendar
ôô- :
calendar
ôô; C
,
ôôC D
int
ôôE H
year
ôôI M
,
ôôM N
int
ôôO R
	yearCount
ôôS \
)
ôô\ ]
{
öö 	
if
õõ 
(
õõ 
	yearCount
õõ 
<
õõ 
$num
õõ 
)
õõ 
{
úú 
throw
ùù 
new
ùù )
ArgumentOutOfRangeException
ùù 5
(
ùù5 6
$str
ùù6 A
)
ùùA B
;
ùùB C
}
ûû 
DateTime
†† 
start
†† 
=
†† 
GetStartOfYear
†† +
(
††+ ,
calendar
††, 4
,
††4 5
year
††6 :
)
††: ;
;
††; <
DateTime
°° 
end
°° 
=
°° 
GetStartOfYear
°° )
(
°°) *
calendar
°°* 2
,
°°2 3
year
°°4 8
+
°°9 :
	yearCount
°°; D
)
°°D E
;
°°E F
return
¢¢ 
new
¢¢ 
	TimeRange
¢¢  
(
¢¢  !
start
¢¢! &
,
¢¢& '
end
¢¢( +
)
¢¢+ ,
;
¢¢, -
}
££ 	
private
ßß 
readonly
ßß 
int
ßß 
	startYear
ßß &
;
ßß& '
private
®® 
readonly
®® 
int
®® 
	yearCount
®® &
;
®®& '
private
©© 
readonly
©© 
int
©© 
endYear
©© $
;
©©$ %
}
´´ 
}≠≠ û
iF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\YearType.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

enum 
YearType 
{ 

SystemYear 
, 
CalendarYear 
, 

FiscalYear 
, 

SchoolYear 
, 

CustomYear 
, 
} 
} ™
mF:\Work\Office\Projects\Nspira\Portal\HRMS_API\5-CrossCutting\Phoenix.CrossCutting.TimePeriod\YearWeekType.cs
	namespace

 	
Phoenix


 
.

 
CrossCutting

 
.

 

TimePeriod

 )
{ 
public 

enum 
YearWeekType 
{ 
Calendar 
, 
Iso8601 
, 
} 
} 